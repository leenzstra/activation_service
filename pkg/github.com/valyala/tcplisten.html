<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Package: github.com/valyala/tcplisten</title>
<link href="../../../css/light-v0.5.7.css" rel="stylesheet">
<script src="../../../jvs/golds-v0.5.7.js"></script>
<body onload="onPageLoad()"><div>

<pre id="package-details"><code><span style="font-size:xx-large;">package <b>tcplisten</b></span>

<span class="title">Import Path</span>
	<a href="../../../index.html#pkg-github.com/valyala/tcplisten">github.com/valyala/tcplisten</a><i> (on <a href="https://pkg.go.dev/github.com/valyala/tcplisten" target="_blank">go.dev</a>)</i>

<span class="title">Dependency Relation</span>
	imports <a href="../../../dep/github.com/valyala/tcplisten.html">8 packages</a>, and imported by <a href="../../../dep/github.com/valyala/tcplisten.html#imported-by">one package</a>

<div id="files"><span class="title">Involved Source Files</span>

	<span class="nodocs">      <a href="../../../src/github.com/valyala/tcplisten/socket.go.html">socket.go</a></span>
	<span class="nodocs">      <a href="../../../src/github.com/valyala/tcplisten/socket_other.go.html">socket_other.go</a></span>
	<input type='checkbox' checked class="fold" id="file-2-fold-content"><label for="file-2-fold-content">   <a href="../../../src/github.com/valyala/tcplisten/tcplisten.go.html#doc">#d</a> <a href="../../../src/github.com/valyala/tcplisten/tcplisten.go.html">tcplisten.go</a></label><span id='file-2-fold-content-items' class="fold-items">
<span class="md-text">		Package tcplisten provides customizable TCP net.Listener with various
		performance-related options:
		
		  - SO_REUSEPORT. This option allows linear scaling server performance
		    on multi-CPU servers.
		    See https://www.nginx.com/blog/socket-sharding-nginx-release-1-9-1/ for details.
		
		  - TCP_DEFER_ACCEPT. This option expects the server reads from the accepted
		    connection before writing to them.
		
		  - TCP_FASTOPEN. See https://lwn.net/Articles/508865/ for details.
		
		The package is derived from https://github.com/kavu/go_reuseport .</span>
</span>
	<span class="nodocs">      <a href="../../../src/github.com/valyala/tcplisten/tcplisten_linux.go.html">tcplisten_linux.go</a></span></div>
<div id="exported-types"><span class="title">Package-Level Type Names<span class="title-stat"><i> (only one, which is exported)</i></span></span>

<div id="exported-types-buttons" class="js-on">	/* sort exporteds by: <label id="sort-types-by-alphabet" class="button">alphabet</label> | <label id="sort-types-by-popularity" class="button">popularity</label> */</div><div class="anchor type-res" id="name-Config" data-popularity="105">	<input type='checkbox' class="fold" id="Config-fold-content"><label for="Config-fold-content"> type <a href="../../../src/github.com/valyala/tcplisten/tcplisten.go.html#line-27">Config</a> <i>(struct)</i></label><span id='Config-fold-content-docs' class="fold-docs">
<span class="md-text">		Config provides options to enable on the returned listener.</span>

		<input type='checkbox' class="fold" id="Config-fold-fields"><label for="Config-fold-fields">Fields (<i>total 4, all are exported</i>)</label><span id='Config-fold-fields-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="Config-fold-field-Backlog"><label for="Config-fold-field-Backlog"><a href="../../../src/github.com/valyala/tcplisten/tcplisten.go.html#line-42">Backlog</a> <i><a href="../../builtin.html#name-int">int</a></i></label><span id='Config-fold-field-Backlog-docs' class="fold-docs">
<span class="md-text">				Backlog is the maximum number of pending TCP connections the listener
				may queue before passing them to Accept.
				See man 2 listen for details.
				
				By default system-level backlog value is used.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="Config-fold-field-DeferAccept"><label for="Config-fold-field-DeferAccept"><a href="../../../src/github.com/valyala/tcplisten/tcplisten.go.html#line-32">DeferAccept</a> <i><a href="../../builtin.html#name-bool">bool</a></i></label><span id='Config-fold-field-DeferAccept-docs' class="fold-docs">
<span class="md-text">				DeferAccept enables TCP_DEFER_ACCEPT.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="Config-fold-field-FastOpen"><label for="Config-fold-field-FastOpen"><a href="../../../src/github.com/valyala/tcplisten/tcplisten.go.html#line-35">FastOpen</a> <i><a href="../../builtin.html#name-bool">bool</a></i></label><span id='Config-fold-field-FastOpen-docs' class="fold-docs">
<span class="md-text">				FastOpen enables TCP_FASTOPEN.</span>
</span></span><span>
			<input type='checkbox' class="fold" id="Config-fold-field-ReusePort"><label for="Config-fold-field-ReusePort"><a href="../../../src/github.com/valyala/tcplisten/tcplisten.go.html#line-29">ReusePort</a> <i><a href="../../builtin.html#name-bool">bool</a></i></label><span id='Config-fold-field-ReusePort-docs' class="fold-docs">
<span class="md-text">				ReusePort enables SO_REUSEPORT.</span>
</span></span></span>
		<input type='checkbox' class="fold" id="Config-fold-methods"><label for="Config-fold-methods">Methods (<i>total 2, in which 1 is exported</i>)</label><span id='Config-fold-methods-items' class="fold-items"><span>
			<input type='checkbox' class="fold" id="Config-fold-method-NewListener"><label for="Config-fold-method-NewListener">(*Config) <a href="../../../src/github.com/valyala/tcplisten/tcplisten.go.html#line-51">NewListener</a>(network, addr <a href="../../builtin.html#name-string">string</a>) (<a href="../../net.html">net</a>.<a href="../../net.html#name-Listener">Listener</a>, <a href="../../builtin.html#name-error">error</a>)</label><span id='Config-fold-method-NewListener-docs' class="fold-docs">
<span class="md-text">				NewListener returns TCP listener with options set in the Config.
				
				The function may be called many times for creating distinct listeners
				with the given config.
				
				Only tcp4 and tcp6 networks are supported.</span>
</span></span>
			<input type='checkbox' class="showhide" id="Config-showhide-methods"><i><label for="Config-showhide-methods" class="show-inline">/* one unexported ... */</label><label for="Config-showhide-methods" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			<span class="nodocs">(*Config) <a href="../../../src/github.com/valyala/tcplisten/tcplisten.go.html#line-83">fdSetup</a>(fd <a href="../../builtin.html#name-int">int</a>, sa <a href="../../syscall.html">syscall</a>.<a href="../../syscall.html#name-Sockaddr">Sockaddr</a>, addr <a href="../../builtin.html#name-string">string</a>) <a href="../../builtin.html#name-error">error</a></span></i></span></span>
		<input type='checkbox' class="fold" id="Config-fold-values"><label for="Config-fold-values">As Types Of (<i>only one, which is unexported</i>)</label><span id='Config-fold-values-items' class="fold-items">
			<input type='checkbox' class="showhide" id="Config-showhide-values"><i><label for="Config-showhide-values" class="show-inline">/* one unexported ... */</label><label for="Config-showhide-values" class="hide-inline">/* one unexported: */</label></i><span class="hidden"><i>
			  var github.com/valyala/fasthttp/reuseport.<a href="fasthttp/reuseport.html#name-cfg">cfg</a> *Config</i></span></span>

</span></div></div>
<div id="exported-functions"><span class="title">Package-Level Functions<span class="title-stat"><i> (total 6, none are exported)</i></span></span>

	<input type='checkbox' class="showhide" id="unexported-functions-showhide"><i><label for="unexported-functions-showhide" class="show-inline">/* 6 unexporteds ... */</label><label for="unexported-functions-showhide" class="hide-inline">/* 6 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-enableDeferAccept"><i>	<span class="nodocs"> func <a href="../../../src/github.com/valyala/tcplisten/tcplisten_linux.go.html#line-19">enableDeferAccept</a>(fd <a href="../../builtin.html#name-int">int</a>) <a href="../../builtin.html#name-error">error</a></span></i></div><div class="anchor value-res hidden" id="name-enableFastOpen"><i>	<span class="nodocs"> func <a href="../../../src/github.com/valyala/tcplisten/tcplisten_linux.go.html#line-26">enableFastOpen</a>(fd <a href="../../builtin.html#name-int">int</a>) <a href="../../builtin.html#name-error">error</a></span></i></div><div class="anchor value-res hidden" id="name-getSockaddr"><i>	<span class="nodocs"> func <a href="../../../src/github.com/valyala/tcplisten/tcplisten.go.html#line-131">getSockaddr</a>(network, addr <a href="../../builtin.html#name-string">string</a>) (sa <a href="../../syscall.html">syscall</a>.<a href="../../syscall.html#name-Sockaddr">Sockaddr</a>, soType <a href="../../builtin.html#name-int">int</a>, err <a href="../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-newSocketCloexec"><i>	<span class="nodocs"> func <a href="../../../src/github.com/valyala/tcplisten/socket_other.go.html#line-10">newSocketCloexec</a>(domain, typ, proto <a href="../../builtin.html#name-int">int</a>) (<a href="../../builtin.html#name-int">int</a>, <a href="../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-newSocketCloexecOld"><i>	<span class="nodocs"> func <a href="../../../src/github.com/valyala/tcplisten/socket.go.html#line-8">newSocketCloexecOld</a>(domain, typ, proto <a href="../../builtin.html#name-int">int</a>) (<a href="../../builtin.html#name-int">int</a>, <a href="../../builtin.html#name-error">error</a>)</span></i></div><div class="anchor value-res hidden" id="name-soMaxConn"><i>	<span class="nodocs"> func <a href="../../../src/github.com/valyala/tcplisten/tcplisten_linux.go.html#line-35">soMaxConn</a>() (<a href="../../builtin.html#name-int">int</a>, <a href="../../builtin.html#name-error">error</a>)</span></i></div></div>
<div id="exported-constants"><span class="title">Package-Level Constants<span class="title-stat"><i> (total 4, none are exported)</i></span></span>

	<input type='checkbox' class="showhide" id="unexported-constants-showhide"><i><label for="unexported-constants-showhide" class="show-inline">/* 4 unexporteds ... */</label><label for="unexported-constants-showhide" class="hide-inline">/* 4 unexporteds: */</label></i><div class="anchor value-res hidden" id="name-fastOpenQlen"><i>	<span class="nodocs">const <a href="../../../src/github.com/valyala/tcplisten/tcplisten_linux.go.html#line-33">fastOpenQlen</a> = 16384</span></i></div><div class="anchor value-res hidden" id="name-soMaxConnFilePath"><i>	<span class="nodocs">const <a href="../../../src/github.com/valyala/tcplisten/tcplisten_linux.go.html#line-59">soMaxConnFilePath</a> = "/proc/sys/net/core/somaxconn"</span></i></div><div class="anchor value-res hidden" id="name-soReusePort"><i>	<span class="nodocs">const <a href="../../../src/github.com/valyala/tcplisten/tcplisten_linux.go.html#line-15">soReusePort</a> = 15</span></i></div><div class="anchor value-res hidden" id="name-tcpFastOpen"><i>	<span class="nodocs">const <a href="../../../src/github.com/valyala/tcplisten/tcplisten_linux.go.html#line-16">tcpFastOpen</a> = 23</span></i></div></div></code></pre><pre id="footer">
<table><tr><td><img src="../../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/apps-and-libs/golds.html"><b>Golds</b></a> <i>v0.5.7</i>. (GOOS=linux GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>