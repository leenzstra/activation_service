<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Source: sqlite3-binding.h in package github.com/mattn/go-sqlite3</title>
<link href="../../../../css/light-v0.5.7.css" rel="stylesheet">
<script src="../../../../jvs/golds-v0.5.7.js"></script>
<body onload="onPageLoad()"><div>

<pre id="header"><code><span class="title">Source File</span>
	sqlite3-binding.h

<span class="title">Belonging Package</span>
	<a href="../../../../pkg/github.com/mattn/go-sqlite3.html">github.com/mattn/go-sqlite3</a>
</code></pre>

<pre class="line-numbers">
<span class="codeline" id="line-1"><code>#ifndef USE_LIBSQLITE3</code></span>
<span class="codeline" id="line-2"><code>/*</code></span>
<span class="codeline" id="line-3"><code>** 2001-09-15</code></span>
<span class="codeline" id="line-4"><code>**</code></span>
<span class="codeline" id="line-5"><code>** The author disclaims copyright to this source code.  In place of</code></span>
<span class="codeline" id="line-6"><code>** a legal notice, here is a blessing:</code></span>
<span class="codeline" id="line-7"><code>**</code></span>
<span class="codeline" id="line-8"><code>**    May you do good and not evil.</code></span>
<span class="codeline" id="line-9"><code>**    May you find forgiveness for yourself and forgive others.</code></span>
<span class="codeline" id="line-10"><code>**    May you share freely, never taking more than you give.</code></span>
<span class="codeline" id="line-11"><code>**</code></span>
<span class="codeline" id="line-12"><code>*************************************************************************</code></span>
<span class="codeline" id="line-13"><code>** This header file defines the interface that the SQLite library</code></span>
<span class="codeline" id="line-14"><code>** presents to client programs.  If a C-function, structure, datatype,</code></span>
<span class="codeline" id="line-15"><code>** or constant definition does not appear in this file, then it is</code></span>
<span class="codeline" id="line-16"><code>** not a published API of SQLite, is subject to change without</code></span>
<span class="codeline" id="line-17"><code>** notice, and should not be referenced by programs that use SQLite.</code></span>
<span class="codeline" id="line-18"><code>**</code></span>
<span class="codeline" id="line-19"><code>** Some of the definitions that are in this file are marked as</code></span>
<span class="codeline" id="line-20"><code>** "experimental".  Experimental interfaces are normally new</code></span>
<span class="codeline" id="line-21"><code>** features recently added to SQLite.  We do not anticipate changes</code></span>
<span class="codeline" id="line-22"><code>** to experimental interfaces but reserve the right to make minor changes</code></span>
<span class="codeline" id="line-23"><code>** if experience from use "in the wild" suggest such changes are prudent.</code></span>
<span class="codeline" id="line-24"><code>**</code></span>
<span class="codeline" id="line-25"><code>** The official C-language API documentation for SQLite is derived</code></span>
<span class="codeline" id="line-26"><code>** from comments in this file.  This file is the authoritative source</code></span>
<span class="codeline" id="line-27"><code>** on how SQLite interfaces are supposed to operate.</code></span>
<span class="codeline" id="line-28"><code>**</code></span>
<span class="codeline" id="line-29"><code>** The name of this file under configuration management is "sqlite.h.in".</code></span>
<span class="codeline" id="line-30"><code>** The makefile makes some minor changes to this file (such as inserting</code></span>
<span class="codeline" id="line-31"><code>** the version number) and changes its name to "sqlite3.h" as</code></span>
<span class="codeline" id="line-32"><code>** part of the build process.</code></span>
<span class="codeline" id="line-33"><code>*/</code></span>
<span class="codeline" id="line-34"><code>#ifndef SQLITE3_H</code></span>
<span class="codeline" id="line-35"><code>#define SQLITE3_H</code></span>
<span class="codeline" id="line-36"><code>#include &lt;stdarg.h&gt;     /* Needed for the definition of va_list */</code></span>
<span class="codeline" id="line-37"><code></code></span>
<span class="codeline" id="line-38"><code>/*</code></span>
<span class="codeline" id="line-39"><code>** Make sure we can call this stuff from C++.</code></span>
<span class="codeline" id="line-40"><code>*/</code></span>
<span class="codeline" id="line-41"><code>#ifdef __cplusplus</code></span>
<span class="codeline" id="line-42"><code>extern "C" {</code></span>
<span class="codeline" id="line-43"><code>#endif</code></span>
<span class="codeline" id="line-44"><code></code></span>
<span class="codeline" id="line-45"><code></code></span>
<span class="codeline" id="line-46"><code>/*</code></span>
<span class="codeline" id="line-47"><code>** Facilitate override of interface linkage and calling conventions.</code></span>
<span class="codeline" id="line-48"><code>** Be aware that these macros may not be used within this particular</code></span>
<span class="codeline" id="line-49"><code>** translation of the amalgamation and its associated header file.</code></span>
<span class="codeline" id="line-50"><code>**</code></span>
<span class="codeline" id="line-51"><code>** The SQLITE_EXTERN and SQLITE_API macros are used to instruct the</code></span>
<span class="codeline" id="line-52"><code>** compiler that the target identifier should have external linkage.</code></span>
<span class="codeline" id="line-53"><code>**</code></span>
<span class="codeline" id="line-54"><code>** The SQLITE_CDECL macro is used to set the calling convention for</code></span>
<span class="codeline" id="line-55"><code>** public functions that accept a variable number of arguments.</code></span>
<span class="codeline" id="line-56"><code>**</code></span>
<span class="codeline" id="line-57"><code>** The SQLITE_APICALL macro is used to set the calling convention for</code></span>
<span class="codeline" id="line-58"><code>** public functions that accept a fixed number of arguments.</code></span>
<span class="codeline" id="line-59"><code>**</code></span>
<span class="codeline" id="line-60"><code>** The SQLITE_STDCALL macro is no longer used and is now deprecated.</code></span>
<span class="codeline" id="line-61"><code>**</code></span>
<span class="codeline" id="line-62"><code>** The SQLITE_CALLBACK macro is used to set the calling convention for</code></span>
<span class="codeline" id="line-63"><code>** function pointers.</code></span>
<span class="codeline" id="line-64"><code>**</code></span>
<span class="codeline" id="line-65"><code>** The SQLITE_SYSAPI macro is used to set the calling convention for</code></span>
<span class="codeline" id="line-66"><code>** functions provided by the operating system.</code></span>
<span class="codeline" id="line-67"><code>**</code></span>
<span class="codeline" id="line-68"><code>** Currently, the SQLITE_CDECL, SQLITE_APICALL, SQLITE_CALLBACK, and</code></span>
<span class="codeline" id="line-69"><code>** SQLITE_SYSAPI macros are used only when building for environments</code></span>
<span class="codeline" id="line-70"><code>** that require non-default calling conventions.</code></span>
<span class="codeline" id="line-71"><code>*/</code></span>
<span class="codeline" id="line-72"><code>#ifndef SQLITE_EXTERN</code></span>
<span class="codeline" id="line-73"><code># define SQLITE_EXTERN extern</code></span>
<span class="codeline" id="line-74"><code>#endif</code></span>
<span class="codeline" id="line-75"><code>#ifndef SQLITE_API</code></span>
<span class="codeline" id="line-76"><code># define SQLITE_API</code></span>
<span class="codeline" id="line-77"><code>#endif</code></span>
<span class="codeline" id="line-78"><code>#ifndef SQLITE_CDECL</code></span>
<span class="codeline" id="line-79"><code># define SQLITE_CDECL</code></span>
<span class="codeline" id="line-80"><code>#endif</code></span>
<span class="codeline" id="line-81"><code>#ifndef SQLITE_APICALL</code></span>
<span class="codeline" id="line-82"><code># define SQLITE_APICALL</code></span>
<span class="codeline" id="line-83"><code>#endif</code></span>
<span class="codeline" id="line-84"><code>#ifndef SQLITE_STDCALL</code></span>
<span class="codeline" id="line-85"><code># define SQLITE_STDCALL SQLITE_APICALL</code></span>
<span class="codeline" id="line-86"><code>#endif</code></span>
<span class="codeline" id="line-87"><code>#ifndef SQLITE_CALLBACK</code></span>
<span class="codeline" id="line-88"><code># define SQLITE_CALLBACK</code></span>
<span class="codeline" id="line-89"><code>#endif</code></span>
<span class="codeline" id="line-90"><code>#ifndef SQLITE_SYSAPI</code></span>
<span class="codeline" id="line-91"><code># define SQLITE_SYSAPI</code></span>
<span class="codeline" id="line-92"><code>#endif</code></span>
<span class="codeline" id="line-93"><code></code></span>
<span class="codeline" id="line-94"><code>/*</code></span>
<span class="codeline" id="line-95"><code>** These no-op macros are used in front of interfaces to mark those</code></span>
<span class="codeline" id="line-96"><code>** interfaces as either deprecated or experimental.  New applications</code></span>
<span class="codeline" id="line-97"><code>** should not use deprecated interfaces - they are supported for backwards</code></span>
<span class="codeline" id="line-98"><code>** compatibility only.  Application writers should be aware that</code></span>
<span class="codeline" id="line-99"><code>** experimental interfaces are subject to change in point releases.</code></span>
<span class="codeline" id="line-100"><code>**</code></span>
<span class="codeline" id="line-101"><code>** These macros used to resolve to various kinds of compiler magic that</code></span>
<span class="codeline" id="line-102"><code>** would generate warning messages when they were used.  But that</code></span>
<span class="codeline" id="line-103"><code>** compiler magic ended up generating such a flurry of bug reports</code></span>
<span class="codeline" id="line-104"><code>** that we have taken it all out and gone back to using simple</code></span>
<span class="codeline" id="line-105"><code>** noop macros.</code></span>
<span class="codeline" id="line-106"><code>*/</code></span>
<span class="codeline" id="line-107"><code>#define SQLITE_DEPRECATED</code></span>
<span class="codeline" id="line-108"><code>#define SQLITE_EXPERIMENTAL</code></span>
<span class="codeline" id="line-109"><code></code></span>
<span class="codeline" id="line-110"><code>/*</code></span>
<span class="codeline" id="line-111"><code>** Ensure these symbols were not defined by some previous header file.</code></span>
<span class="codeline" id="line-112"><code>*/</code></span>
<span class="codeline" id="line-113"><code>#ifdef SQLITE_VERSION</code></span>
<span class="codeline" id="line-114"><code># undef SQLITE_VERSION</code></span>
<span class="codeline" id="line-115"><code>#endif</code></span>
<span class="codeline" id="line-116"><code>#ifdef SQLITE_VERSION_NUMBER</code></span>
<span class="codeline" id="line-117"><code># undef SQLITE_VERSION_NUMBER</code></span>
<span class="codeline" id="line-118"><code>#endif</code></span>
<span class="codeline" id="line-119"><code></code></span>
<span class="codeline" id="line-120"><code>/*</code></span>
<span class="codeline" id="line-121"><code>** CAPI3REF: Compile-Time Library Version Numbers</code></span>
<span class="codeline" id="line-122"><code>**</code></span>
<span class="codeline" id="line-123"><code>** ^(The [SQLITE_VERSION] C preprocessor macro in the sqlite3.h header</code></span>
<span class="codeline" id="line-124"><code>** evaluates to a string literal that is the SQLite version in the</code></span>
<span class="codeline" id="line-125"><code>** format "X.Y.Z" where X is the major version number (always 3 for</code></span>
<span class="codeline" id="line-126"><code>** SQLite3) and Y is the minor version number and Z is the release number.)^</code></span>
<span class="codeline" id="line-127"><code>** ^(The [SQLITE_VERSION_NUMBER] C preprocessor macro resolves to an integer</code></span>
<span class="codeline" id="line-128"><code>** with the value (X*1000000 + Y*1000 + Z) where X, Y, and Z are the same</code></span>
<span class="codeline" id="line-129"><code>** numbers used in [SQLITE_VERSION].)^</code></span>
<span class="codeline" id="line-130"><code>** The SQLITE_VERSION_NUMBER for any given release of SQLite will also</code></span>
<span class="codeline" id="line-131"><code>** be larger than the release from which it is derived.  Either Y will</code></span>
<span class="codeline" id="line-132"><code>** be held constant and Z will be incremented or else Y will be incremented</code></span>
<span class="codeline" id="line-133"><code>** and Z will be reset to zero.</code></span>
<span class="codeline" id="line-134"><code>**</code></span>
<span class="codeline" id="line-135"><code>** Since [version 3.6.18] ([dateof:3.6.18]),</code></span>
<span class="codeline" id="line-136"><code>** SQLite source code has been stored in the</code></span>
<span class="codeline" id="line-137"><code>** &lt;a href="http://www.fossil-scm.org/"&gt;Fossil configuration management</code></span>
<span class="codeline" id="line-138"><code>** system&lt;/a&gt;.  ^The SQLITE_SOURCE_ID macro evaluates to</code></span>
<span class="codeline" id="line-139"><code>** a string which identifies a particular check-in of SQLite</code></span>
<span class="codeline" id="line-140"><code>** within its configuration management system.  ^The SQLITE_SOURCE_ID</code></span>
<span class="codeline" id="line-141"><code>** string contains the date and time of the check-in (UTC) and a SHA1</code></span>
<span class="codeline" id="line-142"><code>** or SHA3-256 hash of the entire source tree.  If the source code has</code></span>
<span class="codeline" id="line-143"><code>** been edited in any way since it was last checked in, then the last</code></span>
<span class="codeline" id="line-144"><code>** four hexadecimal digits of the hash may be modified.</code></span>
<span class="codeline" id="line-145"><code>**</code></span>
<span class="codeline" id="line-146"><code>** See also: [sqlite3_libversion()],</code></span>
<span class="codeline" id="line-147"><code>** [sqlite3_libversion_number()], [sqlite3_sourceid()],</code></span>
<span class="codeline" id="line-148"><code>** [sqlite_version()] and [sqlite_source_id()].</code></span>
<span class="codeline" id="line-149"><code>*/</code></span>
<span class="codeline" id="line-150"><code>#define SQLITE_VERSION        "3.39.4"</code></span>
<span class="codeline" id="line-151"><code>#define SQLITE_VERSION_NUMBER 3039004</code></span>
<span class="codeline" id="line-152"><code>#define SQLITE_SOURCE_ID      "2022-09-29 15:55:41 a29f9949895322123f7c38fbe94c649a9d6e6c9cd0c3b41c96d694552f26b309"</code></span>
<span class="codeline" id="line-153"><code></code></span>
<span class="codeline" id="line-154"><code>/*</code></span>
<span class="codeline" id="line-155"><code>** CAPI3REF: Run-Time Library Version Numbers</code></span>
<span class="codeline" id="line-156"><code>** KEYWORDS: sqlite3_version sqlite3_sourceid</code></span>
<span class="codeline" id="line-157"><code>**</code></span>
<span class="codeline" id="line-158"><code>** These interfaces provide the same information as the [SQLITE_VERSION],</code></span>
<span class="codeline" id="line-159"><code>** [SQLITE_VERSION_NUMBER], and [SQLITE_SOURCE_ID] C preprocessor macros</code></span>
<span class="codeline" id="line-160"><code>** but are associated with the library instead of the header file.  ^(Cautious</code></span>
<span class="codeline" id="line-161"><code>** programmers might include assert() statements in their application to</code></span>
<span class="codeline" id="line-162"><code>** verify that values returned by these interfaces match the macros in</code></span>
<span class="codeline" id="line-163"><code>** the header, and thus ensure that the application is</code></span>
<span class="codeline" id="line-164"><code>** compiled with matching library and header files.</code></span>
<span class="codeline" id="line-165"><code>**</code></span>
<span class="codeline" id="line-166"><code>** &lt;blockquote&gt;&lt;pre&gt;</code></span>
<span class="codeline" id="line-167"><code>** assert( sqlite3_libversion_number()==SQLITE_VERSION_NUMBER );</code></span>
<span class="codeline" id="line-168"><code>** assert( strncmp(sqlite3_sourceid(),SQLITE_SOURCE_ID,80)==0 );</code></span>
<span class="codeline" id="line-169"><code>** assert( strcmp(sqlite3_libversion(),SQLITE_VERSION)==0 );</code></span>
<span class="codeline" id="line-170"><code>** &lt;/pre&gt;&lt;/blockquote&gt;)^</code></span>
<span class="codeline" id="line-171"><code>**</code></span>
<span class="codeline" id="line-172"><code>** ^The sqlite3_version[] string constant contains the text of [SQLITE_VERSION]</code></span>
<span class="codeline" id="line-173"><code>** macro.  ^The sqlite3_libversion() function returns a pointer to the</code></span>
<span class="codeline" id="line-174"><code>** to the sqlite3_version[] string constant.  The sqlite3_libversion()</code></span>
<span class="codeline" id="line-175"><code>** function is provided for use in DLLs since DLL users usually do not have</code></span>
<span class="codeline" id="line-176"><code>** direct access to string constants within the DLL.  ^The</code></span>
<span class="codeline" id="line-177"><code>** sqlite3_libversion_number() function returns an integer equal to</code></span>
<span class="codeline" id="line-178"><code>** [SQLITE_VERSION_NUMBER].  ^(The sqlite3_sourceid() function returns</code></span>
<span class="codeline" id="line-179"><code>** a pointer to a string constant whose value is the same as the</code></span>
<span class="codeline" id="line-180"><code>** [SQLITE_SOURCE_ID] C preprocessor macro.  Except if SQLite is built</code></span>
<span class="codeline" id="line-181"><code>** using an edited copy of [the amalgamation], then the last four characters</code></span>
<span class="codeline" id="line-182"><code>** of the hash might be different from [SQLITE_SOURCE_ID].)^</code></span>
<span class="codeline" id="line-183"><code>**</code></span>
<span class="codeline" id="line-184"><code>** See also: [sqlite_version()] and [sqlite_source_id()].</code></span>
<span class="codeline" id="line-185"><code>*/</code></span>
<span class="codeline" id="line-186"><code>SQLITE_API SQLITE_EXTERN const char sqlite3_version[];</code></span>
<span class="codeline" id="line-187"><code>SQLITE_API const char *sqlite3_libversion(void);</code></span>
<span class="codeline" id="line-188"><code>SQLITE_API const char *sqlite3_sourceid(void);</code></span>
<span class="codeline" id="line-189"><code>SQLITE_API int sqlite3_libversion_number(void);</code></span>
<span class="codeline" id="line-190"><code></code></span>
<span class="codeline" id="line-191"><code>/*</code></span>
<span class="codeline" id="line-192"><code>** CAPI3REF: Run-Time Library Compilation Options Diagnostics</code></span>
<span class="codeline" id="line-193"><code>**</code></span>
<span class="codeline" id="line-194"><code>** ^The sqlite3_compileoption_used() function returns 0 or 1</code></span>
<span class="codeline" id="line-195"><code>** indicating whether the specified option was defined at</code></span>
<span class="codeline" id="line-196"><code>** compile time.  ^The SQLITE_ prefix may be omitted from the</code></span>
<span class="codeline" id="line-197"><code>** option name passed to sqlite3_compileoption_used().</code></span>
<span class="codeline" id="line-198"><code>**</code></span>
<span class="codeline" id="line-199"><code>** ^The sqlite3_compileoption_get() function allows iterating</code></span>
<span class="codeline" id="line-200"><code>** over the list of options that were defined at compile time by</code></span>
<span class="codeline" id="line-201"><code>** returning the N-th compile time option string.  ^If N is out of range,</code></span>
<span class="codeline" id="line-202"><code>** sqlite3_compileoption_get() returns a NULL pointer.  ^The SQLITE_</code></span>
<span class="codeline" id="line-203"><code>** prefix is omitted from any strings returned by</code></span>
<span class="codeline" id="line-204"><code>** sqlite3_compileoption_get().</code></span>
<span class="codeline" id="line-205"><code>**</code></span>
<span class="codeline" id="line-206"><code>** ^Support for the diagnostic functions sqlite3_compileoption_used()</code></span>
<span class="codeline" id="line-207"><code>** and sqlite3_compileoption_get() may be omitted by specifying the</code></span>
<span class="codeline" id="line-208"><code>** [SQLITE_OMIT_COMPILEOPTION_DIAGS] option at compile time.</code></span>
<span class="codeline" id="line-209"><code>**</code></span>
<span class="codeline" id="line-210"><code>** See also: SQL functions [sqlite_compileoption_used()] and</code></span>
<span class="codeline" id="line-211"><code>** [sqlite_compileoption_get()] and the [compile_options pragma].</code></span>
<span class="codeline" id="line-212"><code>*/</code></span>
<span class="codeline" id="line-213"><code>#ifndef SQLITE_OMIT_COMPILEOPTION_DIAGS</code></span>
<span class="codeline" id="line-214"><code>SQLITE_API int sqlite3_compileoption_used(const char *zOptName);</code></span>
<span class="codeline" id="line-215"><code>SQLITE_API const char *sqlite3_compileoption_get(int N);</code></span>
<span class="codeline" id="line-216"><code>#else</code></span>
<span class="codeline" id="line-217"><code># define sqlite3_compileoption_used(X) 0</code></span>
<span class="codeline" id="line-218"><code># define sqlite3_compileoption_get(X)  ((void*)0)</code></span>
<span class="codeline" id="line-219"><code>#endif</code></span>
<span class="codeline" id="line-220"><code></code></span>
<span class="codeline" id="line-221"><code>/*</code></span>
<span class="codeline" id="line-222"><code>** CAPI3REF: Test To See If The Library Is Threadsafe</code></span>
<span class="codeline" id="line-223"><code>**</code></span>
<span class="codeline" id="line-224"><code>** ^The sqlite3_threadsafe() function returns zero if and only if</code></span>
<span class="codeline" id="line-225"><code>** SQLite was compiled with mutexing code omitted due to the</code></span>
<span class="codeline" id="line-226"><code>** [SQLITE_THREADSAFE] compile-time option being set to 0.</code></span>
<span class="codeline" id="line-227"><code>**</code></span>
<span class="codeline" id="line-228"><code>** SQLite can be compiled with or without mutexes.  When</code></span>
<span class="codeline" id="line-229"><code>** the [SQLITE_THREADSAFE] C preprocessor macro is 1 or 2, mutexes</code></span>
<span class="codeline" id="line-230"><code>** are enabled and SQLite is threadsafe.  When the</code></span>
<span class="codeline" id="line-231"><code>** [SQLITE_THREADSAFE] macro is 0,</code></span>
<span class="codeline" id="line-232"><code>** the mutexes are omitted.  Without the mutexes, it is not safe</code></span>
<span class="codeline" id="line-233"><code>** to use SQLite concurrently from more than one thread.</code></span>
<span class="codeline" id="line-234"><code>**</code></span>
<span class="codeline" id="line-235"><code>** Enabling mutexes incurs a measurable performance penalty.</code></span>
<span class="codeline" id="line-236"><code>** So if speed is of utmost importance, it makes sense to disable</code></span>
<span class="codeline" id="line-237"><code>** the mutexes.  But for maximum safety, mutexes should be enabled.</code></span>
<span class="codeline" id="line-238"><code>** ^The default behavior is for mutexes to be enabled.</code></span>
<span class="codeline" id="line-239"><code>**</code></span>
<span class="codeline" id="line-240"><code>** This interface can be used by an application to make sure that the</code></span>
<span class="codeline" id="line-241"><code>** version of SQLite that it is linking against was compiled with</code></span>
<span class="codeline" id="line-242"><code>** the desired setting of the [SQLITE_THREADSAFE] macro.</code></span>
<span class="codeline" id="line-243"><code>**</code></span>
<span class="codeline" id="line-244"><code>** This interface only reports on the compile-time mutex setting</code></span>
<span class="codeline" id="line-245"><code>** of the [SQLITE_THREADSAFE] flag.  If SQLite is compiled with</code></span>
<span class="codeline" id="line-246"><code>** SQLITE_THREADSAFE=1 or =2 then mutexes are enabled by default but</code></span>
<span class="codeline" id="line-247"><code>** can be fully or partially disabled using a call to [sqlite3_config()]</code></span>
<span class="codeline" id="line-248"><code>** with the verbs [SQLITE_CONFIG_SINGLETHREAD], [SQLITE_CONFIG_MULTITHREAD],</code></span>
<span class="codeline" id="line-249"><code>** or [SQLITE_CONFIG_SERIALIZED].  ^(The return value of the</code></span>
<span class="codeline" id="line-250"><code>** sqlite3_threadsafe() function shows only the compile-time setting of</code></span>
<span class="codeline" id="line-251"><code>** thread safety, not any run-time changes to that setting made by</code></span>
<span class="codeline" id="line-252"><code>** sqlite3_config(). In other words, the return value from sqlite3_threadsafe()</code></span>
<span class="codeline" id="line-253"><code>** is unchanged by calls to sqlite3_config().)^</code></span>
<span class="codeline" id="line-254"><code>**</code></span>
<span class="codeline" id="line-255"><code>** See the [threading mode] documentation for additional information.</code></span>
<span class="codeline" id="line-256"><code>*/</code></span>
<span class="codeline" id="line-257"><code>SQLITE_API int sqlite3_threadsafe(void);</code></span>
<span class="codeline" id="line-258"><code></code></span>
<span class="codeline" id="line-259"><code>/*</code></span>
<span class="codeline" id="line-260"><code>** CAPI3REF: Database Connection Handle</code></span>
<span class="codeline" id="line-261"><code>** KEYWORDS: {database connection} {database connections}</code></span>
<span class="codeline" id="line-262"><code>**</code></span>
<span class="codeline" id="line-263"><code>** Each open SQLite database is represented by a pointer to an instance of</code></span>
<span class="codeline" id="line-264"><code>** the opaque structure named "sqlite3".  It is useful to think of an sqlite3</code></span>
<span class="codeline" id="line-265"><code>** pointer as an object.  The [sqlite3_open()], [sqlite3_open16()], and</code></span>
<span class="codeline" id="line-266"><code>** [sqlite3_open_v2()] interfaces are its constructors, and [sqlite3_close()]</code></span>
<span class="codeline" id="line-267"><code>** and [sqlite3_close_v2()] are its destructors.  There are many other</code></span>
<span class="codeline" id="line-268"><code>** interfaces (such as</code></span>
<span class="codeline" id="line-269"><code>** [sqlite3_prepare_v2()], [sqlite3_create_function()], and</code></span>
<span class="codeline" id="line-270"><code>** [sqlite3_busy_timeout()] to name but three) that are methods on an</code></span>
<span class="codeline" id="line-271"><code>** sqlite3 object.</code></span>
<span class="codeline" id="line-272"><code>*/</code></span>
<span class="codeline" id="line-273"><code>typedef struct sqlite3 sqlite3;</code></span>
<span class="codeline" id="line-274"><code></code></span>
<span class="codeline" id="line-275"><code>/*</code></span>
<span class="codeline" id="line-276"><code>** CAPI3REF: 64-Bit Integer Types</code></span>
<span class="codeline" id="line-277"><code>** KEYWORDS: sqlite_int64 sqlite_uint64</code></span>
<span class="codeline" id="line-278"><code>**</code></span>
<span class="codeline" id="line-279"><code>** Because there is no cross-platform way to specify 64-bit integer types</code></span>
<span class="codeline" id="line-280"><code>** SQLite includes typedefs for 64-bit signed and unsigned integers.</code></span>
<span class="codeline" id="line-281"><code>**</code></span>
<span class="codeline" id="line-282"><code>** The sqlite3_int64 and sqlite3_uint64 are the preferred type definitions.</code></span>
<span class="codeline" id="line-283"><code>** The sqlite_int64 and sqlite_uint64 types are supported for backwards</code></span>
<span class="codeline" id="line-284"><code>** compatibility only.</code></span>
<span class="codeline" id="line-285"><code>**</code></span>
<span class="codeline" id="line-286"><code>** ^The sqlite3_int64 and sqlite_int64 types can store integer values</code></span>
<span class="codeline" id="line-287"><code>** between -9223372036854775808 and +9223372036854775807 inclusive.  ^The</code></span>
<span class="codeline" id="line-288"><code>** sqlite3_uint64 and sqlite_uint64 types can store integer values</code></span>
<span class="codeline" id="line-289"><code>** between 0 and +18446744073709551615 inclusive.</code></span>
<span class="codeline" id="line-290"><code>*/</code></span>
<span class="codeline" id="line-291"><code>#ifdef SQLITE_INT64_TYPE</code></span>
<span class="codeline" id="line-292"><code>  typedef SQLITE_INT64_TYPE sqlite_int64;</code></span>
<span class="codeline" id="line-293"><code># ifdef SQLITE_UINT64_TYPE</code></span>
<span class="codeline" id="line-294"><code>    typedef SQLITE_UINT64_TYPE sqlite_uint64;</code></span>
<span class="codeline" id="line-295"><code># else</code></span>
<span class="codeline" id="line-296"><code>    typedef unsigned SQLITE_INT64_TYPE sqlite_uint64;</code></span>
<span class="codeline" id="line-297"><code># endif</code></span>
<span class="codeline" id="line-298"><code>#elif defined(_MSC_VER) || defined(__BORLANDC__)</code></span>
<span class="codeline" id="line-299"><code>  typedef __int64 sqlite_int64;</code></span>
<span class="codeline" id="line-300"><code>  typedef unsigned __int64 sqlite_uint64;</code></span>
<span class="codeline" id="line-301"><code>#else</code></span>
<span class="codeline" id="line-302"><code>  typedef long long int sqlite_int64;</code></span>
<span class="codeline" id="line-303"><code>  typedef unsigned long long int sqlite_uint64;</code></span>
<span class="codeline" id="line-304"><code>#endif</code></span>
<span class="codeline" id="line-305"><code>typedef sqlite_int64 sqlite3_int64;</code></span>
<span class="codeline" id="line-306"><code>typedef sqlite_uint64 sqlite3_uint64;</code></span>
<span class="codeline" id="line-307"><code></code></span>
<span class="codeline" id="line-308"><code>/*</code></span>
<span class="codeline" id="line-309"><code>** If compiling for a processor that lacks floating point support,</code></span>
<span class="codeline" id="line-310"><code>** substitute integer for floating-point.</code></span>
<span class="codeline" id="line-311"><code>*/</code></span>
<span class="codeline" id="line-312"><code>#ifdef SQLITE_OMIT_FLOATING_POINT</code></span>
<span class="codeline" id="line-313"><code># define double sqlite3_int64</code></span>
<span class="codeline" id="line-314"><code>#endif</code></span>
<span class="codeline" id="line-315"><code></code></span>
<span class="codeline" id="line-316"><code>/*</code></span>
<span class="codeline" id="line-317"><code>** CAPI3REF: Closing A Database Connection</code></span>
<span class="codeline" id="line-318"><code>** DESTRUCTOR: sqlite3</code></span>
<span class="codeline" id="line-319"><code>**</code></span>
<span class="codeline" id="line-320"><code>** ^The sqlite3_close() and sqlite3_close_v2() routines are destructors</code></span>
<span class="codeline" id="line-321"><code>** for the [sqlite3] object.</code></span>
<span class="codeline" id="line-322"><code>** ^Calls to sqlite3_close() and sqlite3_close_v2() return [SQLITE_OK] if</code></span>
<span class="codeline" id="line-323"><code>** the [sqlite3] object is successfully destroyed and all associated</code></span>
<span class="codeline" id="line-324"><code>** resources are deallocated.</code></span>
<span class="codeline" id="line-325"><code>**</code></span>
<span class="codeline" id="line-326"><code>** Ideally, applications should [sqlite3_finalize | finalize] all</code></span>
<span class="codeline" id="line-327"><code>** [prepared statements], [sqlite3_blob_close | close] all [BLOB handles], and</code></span>
<span class="codeline" id="line-328"><code>** [sqlite3_backup_finish | finish] all [sqlite3_backup] objects associated</code></span>
<span class="codeline" id="line-329"><code>** with the [sqlite3] object prior to attempting to close the object.</code></span>
<span class="codeline" id="line-330"><code>** ^If the database connection is associated with unfinalized prepared</code></span>
<span class="codeline" id="line-331"><code>** statements, BLOB handlers, and/or unfinished sqlite3_backup objects then</code></span>
<span class="codeline" id="line-332"><code>** sqlite3_close() will leave the database connection open and return</code></span>
<span class="codeline" id="line-333"><code>** [SQLITE_BUSY]. ^If sqlite3_close_v2() is called with unfinalized prepared</code></span>
<span class="codeline" id="line-334"><code>** statements, unclosed BLOB handlers, and/or unfinished sqlite3_backups,</code></span>
<span class="codeline" id="line-335"><code>** it returns [SQLITE_OK] regardless, but instead of deallocating the database</code></span>
<span class="codeline" id="line-336"><code>** connection immediately, it marks the database connection as an unusable</code></span>
<span class="codeline" id="line-337"><code>** "zombie" and makes arrangements to automatically deallocate the database</code></span>
<span class="codeline" id="line-338"><code>** connection after all prepared statements are finalized, all BLOB handles</code></span>
<span class="codeline" id="line-339"><code>** are closed, and all backups have finished. The sqlite3_close_v2() interface</code></span>
<span class="codeline" id="line-340"><code>** is intended for use with host languages that are garbage collected, and</code></span>
<span class="codeline" id="line-341"><code>** where the order in which destructors are called is arbitrary.</code></span>
<span class="codeline" id="line-342"><code>**</code></span>
<span class="codeline" id="line-343"><code>** ^If an [sqlite3] object is destroyed while a transaction is open,</code></span>
<span class="codeline" id="line-344"><code>** the transaction is automatically rolled back.</code></span>
<span class="codeline" id="line-345"><code>**</code></span>
<span class="codeline" id="line-346"><code>** The C parameter to [sqlite3_close(C)] and [sqlite3_close_v2(C)]</code></span>
<span class="codeline" id="line-347"><code>** must be either a NULL</code></span>
<span class="codeline" id="line-348"><code>** pointer or an [sqlite3] object pointer obtained</code></span>
<span class="codeline" id="line-349"><code>** from [sqlite3_open()], [sqlite3_open16()], or</code></span>
<span class="codeline" id="line-350"><code>** [sqlite3_open_v2()], and not previously closed.</code></span>
<span class="codeline" id="line-351"><code>** ^Calling sqlite3_close() or sqlite3_close_v2() with a NULL pointer</code></span>
<span class="codeline" id="line-352"><code>** argument is a harmless no-op.</code></span>
<span class="codeline" id="line-353"><code>*/</code></span>
<span class="codeline" id="line-354"><code>SQLITE_API int sqlite3_close(sqlite3*);</code></span>
<span class="codeline" id="line-355"><code>SQLITE_API int sqlite3_close_v2(sqlite3*);</code></span>
<span class="codeline" id="line-356"><code></code></span>
<span class="codeline" id="line-357"><code>/*</code></span>
<span class="codeline" id="line-358"><code>** The type for a callback function.</code></span>
<span class="codeline" id="line-359"><code>** This is legacy and deprecated.  It is included for historical</code></span>
<span class="codeline" id="line-360"><code>** compatibility and is not documented.</code></span>
<span class="codeline" id="line-361"><code>*/</code></span>
<span class="codeline" id="line-362"><code>typedef int (*sqlite3_callback)(void*,int,char**, char**);</code></span>
<span class="codeline" id="line-363"><code></code></span>
<span class="codeline" id="line-364"><code>/*</code></span>
<span class="codeline" id="line-365"><code>** CAPI3REF: One-Step Query Execution Interface</code></span>
<span class="codeline" id="line-366"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-367"><code>**</code></span>
<span class="codeline" id="line-368"><code>** The sqlite3_exec() interface is a convenience wrapper around</code></span>
<span class="codeline" id="line-369"><code>** [sqlite3_prepare_v2()], [sqlite3_step()], and [sqlite3_finalize()],</code></span>
<span class="codeline" id="line-370"><code>** that allows an application to run multiple statements of SQL</code></span>
<span class="codeline" id="line-371"><code>** without having to use a lot of C code.</code></span>
<span class="codeline" id="line-372"><code>**</code></span>
<span class="codeline" id="line-373"><code>** ^The sqlite3_exec() interface runs zero or more UTF-8 encoded,</code></span>
<span class="codeline" id="line-374"><code>** semicolon-separate SQL statements passed into its 2nd argument,</code></span>
<span class="codeline" id="line-375"><code>** in the context of the [database connection] passed in as its 1st</code></span>
<span class="codeline" id="line-376"><code>** argument.  ^If the callback function of the 3rd argument to</code></span>
<span class="codeline" id="line-377"><code>** sqlite3_exec() is not NULL, then it is invoked for each result row</code></span>
<span class="codeline" id="line-378"><code>** coming out of the evaluated SQL statements.  ^The 4th argument to</code></span>
<span class="codeline" id="line-379"><code>** sqlite3_exec() is relayed through to the 1st argument of each</code></span>
<span class="codeline" id="line-380"><code>** callback invocation.  ^If the callback pointer to sqlite3_exec()</code></span>
<span class="codeline" id="line-381"><code>** is NULL, then no callback is ever invoked and result rows are</code></span>
<span class="codeline" id="line-382"><code>** ignored.</code></span>
<span class="codeline" id="line-383"><code>**</code></span>
<span class="codeline" id="line-384"><code>** ^If an error occurs while evaluating the SQL statements passed into</code></span>
<span class="codeline" id="line-385"><code>** sqlite3_exec(), then execution of the current statement stops and</code></span>
<span class="codeline" id="line-386"><code>** subsequent statements are skipped.  ^If the 5th parameter to sqlite3_exec()</code></span>
<span class="codeline" id="line-387"><code>** is not NULL then any error message is written into memory obtained</code></span>
<span class="codeline" id="line-388"><code>** from [sqlite3_malloc()] and passed back through the 5th parameter.</code></span>
<span class="codeline" id="line-389"><code>** To avoid memory leaks, the application should invoke [sqlite3_free()]</code></span>
<span class="codeline" id="line-390"><code>** on error message strings returned through the 5th parameter of</code></span>
<span class="codeline" id="line-391"><code>** sqlite3_exec() after the error message string is no longer needed.</code></span>
<span class="codeline" id="line-392"><code>** ^If the 5th parameter to sqlite3_exec() is not NULL and no errors</code></span>
<span class="codeline" id="line-393"><code>** occur, then sqlite3_exec() sets the pointer in its 5th parameter to</code></span>
<span class="codeline" id="line-394"><code>** NULL before returning.</code></span>
<span class="codeline" id="line-395"><code>**</code></span>
<span class="codeline" id="line-396"><code>** ^If an sqlite3_exec() callback returns non-zero, the sqlite3_exec()</code></span>
<span class="codeline" id="line-397"><code>** routine returns SQLITE_ABORT without invoking the callback again and</code></span>
<span class="codeline" id="line-398"><code>** without running any subsequent SQL statements.</code></span>
<span class="codeline" id="line-399"><code>**</code></span>
<span class="codeline" id="line-400"><code>** ^The 2nd argument to the sqlite3_exec() callback function is the</code></span>
<span class="codeline" id="line-401"><code>** number of columns in the result.  ^The 3rd argument to the sqlite3_exec()</code></span>
<span class="codeline" id="line-402"><code>** callback is an array of pointers to strings obtained as if from</code></span>
<span class="codeline" id="line-403"><code>** [sqlite3_column_text()], one for each column.  ^If an element of a</code></span>
<span class="codeline" id="line-404"><code>** result row is NULL then the corresponding string pointer for the</code></span>
<span class="codeline" id="line-405"><code>** sqlite3_exec() callback is a NULL pointer.  ^The 4th argument to the</code></span>
<span class="codeline" id="line-406"><code>** sqlite3_exec() callback is an array of pointers to strings where each</code></span>
<span class="codeline" id="line-407"><code>** entry represents the name of corresponding result column as obtained</code></span>
<span class="codeline" id="line-408"><code>** from [sqlite3_column_name()].</code></span>
<span class="codeline" id="line-409"><code>**</code></span>
<span class="codeline" id="line-410"><code>** ^If the 2nd parameter to sqlite3_exec() is a NULL pointer, a pointer</code></span>
<span class="codeline" id="line-411"><code>** to an empty string, or a pointer that contains only whitespace and/or</code></span>
<span class="codeline" id="line-412"><code>** SQL comments, then no SQL statements are evaluated and the database</code></span>
<span class="codeline" id="line-413"><code>** is not changed.</code></span>
<span class="codeline" id="line-414"><code>**</code></span>
<span class="codeline" id="line-415"><code>** Restrictions:</code></span>
<span class="codeline" id="line-416"><code>**</code></span>
<span class="codeline" id="line-417"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-418"><code>** &lt;li&gt; The application must ensure that the 1st parameter to sqlite3_exec()</code></span>
<span class="codeline" id="line-419"><code>**      is a valid and open [database connection].</code></span>
<span class="codeline" id="line-420"><code>** &lt;li&gt; The application must not close the [database connection] specified by</code></span>
<span class="codeline" id="line-421"><code>**      the 1st parameter to sqlite3_exec() while sqlite3_exec() is running.</code></span>
<span class="codeline" id="line-422"><code>** &lt;li&gt; The application must not modify the SQL statement text passed into</code></span>
<span class="codeline" id="line-423"><code>**      the 2nd parameter of sqlite3_exec() while sqlite3_exec() is running.</code></span>
<span class="codeline" id="line-424"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-425"><code>*/</code></span>
<span class="codeline" id="line-426"><code>SQLITE_API int sqlite3_exec(</code></span>
<span class="codeline" id="line-427"><code>  sqlite3*,                                  /* An open database */</code></span>
<span class="codeline" id="line-428"><code>  const char *sql,                           /* SQL to be evaluated */</code></span>
<span class="codeline" id="line-429"><code>  int (*callback)(void*,int,char**,char**),  /* Callback function */</code></span>
<span class="codeline" id="line-430"><code>  void *,                                    /* 1st argument to callback */</code></span>
<span class="codeline" id="line-431"><code>  char **errmsg                              /* Error msg written here */</code></span>
<span class="codeline" id="line-432"><code>);</code></span>
<span class="codeline" id="line-433"><code></code></span>
<span class="codeline" id="line-434"><code>/*</code></span>
<span class="codeline" id="line-435"><code>** CAPI3REF: Result Codes</code></span>
<span class="codeline" id="line-436"><code>** KEYWORDS: {result code definitions}</code></span>
<span class="codeline" id="line-437"><code>**</code></span>
<span class="codeline" id="line-438"><code>** Many SQLite functions return an integer result code from the set shown</code></span>
<span class="codeline" id="line-439"><code>** here in order to indicate success or failure.</code></span>
<span class="codeline" id="line-440"><code>**</code></span>
<span class="codeline" id="line-441"><code>** New error codes may be added in future versions of SQLite.</code></span>
<span class="codeline" id="line-442"><code>**</code></span>
<span class="codeline" id="line-443"><code>** See also: [extended result code definitions]</code></span>
<span class="codeline" id="line-444"><code>*/</code></span>
<span class="codeline" id="line-445"><code>#define SQLITE_OK           0   /* Successful result */</code></span>
<span class="codeline" id="line-446"><code>/* beginning-of-error-codes */</code></span>
<span class="codeline" id="line-447"><code>#define SQLITE_ERROR        1   /* Generic error */</code></span>
<span class="codeline" id="line-448"><code>#define SQLITE_INTERNAL     2   /* Internal logic error in SQLite */</code></span>
<span class="codeline" id="line-449"><code>#define SQLITE_PERM         3   /* Access permission denied */</code></span>
<span class="codeline" id="line-450"><code>#define SQLITE_ABORT        4   /* Callback routine requested an abort */</code></span>
<span class="codeline" id="line-451"><code>#define SQLITE_BUSY         5   /* The database file is locked */</code></span>
<span class="codeline" id="line-452"><code>#define SQLITE_LOCKED       6   /* A table in the database is locked */</code></span>
<span class="codeline" id="line-453"><code>#define SQLITE_NOMEM        7   /* A malloc() failed */</code></span>
<span class="codeline" id="line-454"><code>#define SQLITE_READONLY     8   /* Attempt to write a readonly database */</code></span>
<span class="codeline" id="line-455"><code>#define SQLITE_INTERRUPT    9   /* Operation terminated by sqlite3_interrupt()*/</code></span>
<span class="codeline" id="line-456"><code>#define SQLITE_IOERR       10   /* Some kind of disk I/O error occurred */</code></span>
<span class="codeline" id="line-457"><code>#define SQLITE_CORRUPT     11   /* The database disk image is malformed */</code></span>
<span class="codeline" id="line-458"><code>#define SQLITE_NOTFOUND    12   /* Unknown opcode in sqlite3_file_control() */</code></span>
<span class="codeline" id="line-459"><code>#define SQLITE_FULL        13   /* Insertion failed because database is full */</code></span>
<span class="codeline" id="line-460"><code>#define SQLITE_CANTOPEN    14   /* Unable to open the database file */</code></span>
<span class="codeline" id="line-461"><code>#define SQLITE_PROTOCOL    15   /* Database lock protocol error */</code></span>
<span class="codeline" id="line-462"><code>#define SQLITE_EMPTY       16   /* Internal use only */</code></span>
<span class="codeline" id="line-463"><code>#define SQLITE_SCHEMA      17   /* The database schema changed */</code></span>
<span class="codeline" id="line-464"><code>#define SQLITE_TOOBIG      18   /* String or BLOB exceeds size limit */</code></span>
<span class="codeline" id="line-465"><code>#define SQLITE_CONSTRAINT  19   /* Abort due to constraint violation */</code></span>
<span class="codeline" id="line-466"><code>#define SQLITE_MISMATCH    20   /* Data type mismatch */</code></span>
<span class="codeline" id="line-467"><code>#define SQLITE_MISUSE      21   /* Library used incorrectly */</code></span>
<span class="codeline" id="line-468"><code>#define SQLITE_NOLFS       22   /* Uses OS features not supported on host */</code></span>
<span class="codeline" id="line-469"><code>#define SQLITE_AUTH        23   /* Authorization denied */</code></span>
<span class="codeline" id="line-470"><code>#define SQLITE_FORMAT      24   /* Not used */</code></span>
<span class="codeline" id="line-471"><code>#define SQLITE_RANGE       25   /* 2nd parameter to sqlite3_bind out of range */</code></span>
<span class="codeline" id="line-472"><code>#define SQLITE_NOTADB      26   /* File opened that is not a database file */</code></span>
<span class="codeline" id="line-473"><code>#define SQLITE_NOTICE      27   /* Notifications from sqlite3_log() */</code></span>
<span class="codeline" id="line-474"><code>#define SQLITE_WARNING     28   /* Warnings from sqlite3_log() */</code></span>
<span class="codeline" id="line-475"><code>#define SQLITE_ROW         100  /* sqlite3_step() has another row ready */</code></span>
<span class="codeline" id="line-476"><code>#define SQLITE_DONE        101  /* sqlite3_step() has finished executing */</code></span>
<span class="codeline" id="line-477"><code>/* end-of-error-codes */</code></span>
<span class="codeline" id="line-478"><code></code></span>
<span class="codeline" id="line-479"><code>/*</code></span>
<span class="codeline" id="line-480"><code>** CAPI3REF: Extended Result Codes</code></span>
<span class="codeline" id="line-481"><code>** KEYWORDS: {extended result code definitions}</code></span>
<span class="codeline" id="line-482"><code>**</code></span>
<span class="codeline" id="line-483"><code>** In its default configuration, SQLite API routines return one of 30 integer</code></span>
<span class="codeline" id="line-484"><code>** [result codes].  However, experience has shown that many of</code></span>
<span class="codeline" id="line-485"><code>** these result codes are too coarse-grained.  They do not provide as</code></span>
<span class="codeline" id="line-486"><code>** much information about problems as programmers might like.  In an effort to</code></span>
<span class="codeline" id="line-487"><code>** address this, newer versions of SQLite (version 3.3.8 [dateof:3.3.8]</code></span>
<span class="codeline" id="line-488"><code>** and later) include</code></span>
<span class="codeline" id="line-489"><code>** support for additional result codes that provide more detailed information</code></span>
<span class="codeline" id="line-490"><code>** about errors. These [extended result codes] are enabled or disabled</code></span>
<span class="codeline" id="line-491"><code>** on a per database connection basis using the</code></span>
<span class="codeline" id="line-492"><code>** [sqlite3_extended_result_codes()] API.  Or, the extended code for</code></span>
<span class="codeline" id="line-493"><code>** the most recent error can be obtained using</code></span>
<span class="codeline" id="line-494"><code>** [sqlite3_extended_errcode()].</code></span>
<span class="codeline" id="line-495"><code>*/</code></span>
<span class="codeline" id="line-496"><code>#define SQLITE_ERROR_MISSING_COLLSEQ   (SQLITE_ERROR | (1&lt;&lt;8))</code></span>
<span class="codeline" id="line-497"><code>#define SQLITE_ERROR_RETRY             (SQLITE_ERROR | (2&lt;&lt;8))</code></span>
<span class="codeline" id="line-498"><code>#define SQLITE_ERROR_SNAPSHOT          (SQLITE_ERROR | (3&lt;&lt;8))</code></span>
<span class="codeline" id="line-499"><code>#define SQLITE_IOERR_READ              (SQLITE_IOERR | (1&lt;&lt;8))</code></span>
<span class="codeline" id="line-500"><code>#define SQLITE_IOERR_SHORT_READ        (SQLITE_IOERR | (2&lt;&lt;8))</code></span>
<span class="codeline" id="line-501"><code>#define SQLITE_IOERR_WRITE             (SQLITE_IOERR | (3&lt;&lt;8))</code></span>
<span class="codeline" id="line-502"><code>#define SQLITE_IOERR_FSYNC             (SQLITE_IOERR | (4&lt;&lt;8))</code></span>
<span class="codeline" id="line-503"><code>#define SQLITE_IOERR_DIR_FSYNC         (SQLITE_IOERR | (5&lt;&lt;8))</code></span>
<span class="codeline" id="line-504"><code>#define SQLITE_IOERR_TRUNCATE          (SQLITE_IOERR | (6&lt;&lt;8))</code></span>
<span class="codeline" id="line-505"><code>#define SQLITE_IOERR_FSTAT             (SQLITE_IOERR | (7&lt;&lt;8))</code></span>
<span class="codeline" id="line-506"><code>#define SQLITE_IOERR_UNLOCK            (SQLITE_IOERR | (8&lt;&lt;8))</code></span>
<span class="codeline" id="line-507"><code>#define SQLITE_IOERR_RDLOCK            (SQLITE_IOERR | (9&lt;&lt;8))</code></span>
<span class="codeline" id="line-508"><code>#define SQLITE_IOERR_DELETE            (SQLITE_IOERR | (10&lt;&lt;8))</code></span>
<span class="codeline" id="line-509"><code>#define SQLITE_IOERR_BLOCKED           (SQLITE_IOERR | (11&lt;&lt;8))</code></span>
<span class="codeline" id="line-510"><code>#define SQLITE_IOERR_NOMEM             (SQLITE_IOERR | (12&lt;&lt;8))</code></span>
<span class="codeline" id="line-511"><code>#define SQLITE_IOERR_ACCESS            (SQLITE_IOERR | (13&lt;&lt;8))</code></span>
<span class="codeline" id="line-512"><code>#define SQLITE_IOERR_CHECKRESERVEDLOCK (SQLITE_IOERR | (14&lt;&lt;8))</code></span>
<span class="codeline" id="line-513"><code>#define SQLITE_IOERR_LOCK              (SQLITE_IOERR | (15&lt;&lt;8))</code></span>
<span class="codeline" id="line-514"><code>#define SQLITE_IOERR_CLOSE             (SQLITE_IOERR | (16&lt;&lt;8))</code></span>
<span class="codeline" id="line-515"><code>#define SQLITE_IOERR_DIR_CLOSE         (SQLITE_IOERR | (17&lt;&lt;8))</code></span>
<span class="codeline" id="line-516"><code>#define SQLITE_IOERR_SHMOPEN           (SQLITE_IOERR | (18&lt;&lt;8))</code></span>
<span class="codeline" id="line-517"><code>#define SQLITE_IOERR_SHMSIZE           (SQLITE_IOERR | (19&lt;&lt;8))</code></span>
<span class="codeline" id="line-518"><code>#define SQLITE_IOERR_SHMLOCK           (SQLITE_IOERR | (20&lt;&lt;8))</code></span>
<span class="codeline" id="line-519"><code>#define SQLITE_IOERR_SHMMAP            (SQLITE_IOERR | (21&lt;&lt;8))</code></span>
<span class="codeline" id="line-520"><code>#define SQLITE_IOERR_SEEK              (SQLITE_IOERR | (22&lt;&lt;8))</code></span>
<span class="codeline" id="line-521"><code>#define SQLITE_IOERR_DELETE_NOENT      (SQLITE_IOERR | (23&lt;&lt;8))</code></span>
<span class="codeline" id="line-522"><code>#define SQLITE_IOERR_MMAP              (SQLITE_IOERR | (24&lt;&lt;8))</code></span>
<span class="codeline" id="line-523"><code>#define SQLITE_IOERR_GETTEMPPATH       (SQLITE_IOERR | (25&lt;&lt;8))</code></span>
<span class="codeline" id="line-524"><code>#define SQLITE_IOERR_CONVPATH          (SQLITE_IOERR | (26&lt;&lt;8))</code></span>
<span class="codeline" id="line-525"><code>#define SQLITE_IOERR_VNODE             (SQLITE_IOERR | (27&lt;&lt;8))</code></span>
<span class="codeline" id="line-526"><code>#define SQLITE_IOERR_AUTH              (SQLITE_IOERR | (28&lt;&lt;8))</code></span>
<span class="codeline" id="line-527"><code>#define SQLITE_IOERR_BEGIN_ATOMIC      (SQLITE_IOERR | (29&lt;&lt;8))</code></span>
<span class="codeline" id="line-528"><code>#define SQLITE_IOERR_COMMIT_ATOMIC     (SQLITE_IOERR | (30&lt;&lt;8))</code></span>
<span class="codeline" id="line-529"><code>#define SQLITE_IOERR_ROLLBACK_ATOMIC   (SQLITE_IOERR | (31&lt;&lt;8))</code></span>
<span class="codeline" id="line-530"><code>#define SQLITE_IOERR_DATA              (SQLITE_IOERR | (32&lt;&lt;8))</code></span>
<span class="codeline" id="line-531"><code>#define SQLITE_IOERR_CORRUPTFS         (SQLITE_IOERR | (33&lt;&lt;8))</code></span>
<span class="codeline" id="line-532"><code>#define SQLITE_LOCKED_SHAREDCACHE      (SQLITE_LOCKED |  (1&lt;&lt;8))</code></span>
<span class="codeline" id="line-533"><code>#define SQLITE_LOCKED_VTAB             (SQLITE_LOCKED |  (2&lt;&lt;8))</code></span>
<span class="codeline" id="line-534"><code>#define SQLITE_BUSY_RECOVERY           (SQLITE_BUSY   |  (1&lt;&lt;8))</code></span>
<span class="codeline" id="line-535"><code>#define SQLITE_BUSY_SNAPSHOT           (SQLITE_BUSY   |  (2&lt;&lt;8))</code></span>
<span class="codeline" id="line-536"><code>#define SQLITE_BUSY_TIMEOUT            (SQLITE_BUSY   |  (3&lt;&lt;8))</code></span>
<span class="codeline" id="line-537"><code>#define SQLITE_CANTOPEN_NOTEMPDIR      (SQLITE_CANTOPEN | (1&lt;&lt;8))</code></span>
<span class="codeline" id="line-538"><code>#define SQLITE_CANTOPEN_ISDIR          (SQLITE_CANTOPEN | (2&lt;&lt;8))</code></span>
<span class="codeline" id="line-539"><code>#define SQLITE_CANTOPEN_FULLPATH       (SQLITE_CANTOPEN | (3&lt;&lt;8))</code></span>
<span class="codeline" id="line-540"><code>#define SQLITE_CANTOPEN_CONVPATH       (SQLITE_CANTOPEN | (4&lt;&lt;8))</code></span>
<span class="codeline" id="line-541"><code>#define SQLITE_CANTOPEN_DIRTYWAL       (SQLITE_CANTOPEN | (5&lt;&lt;8)) /* Not Used */</code></span>
<span class="codeline" id="line-542"><code>#define SQLITE_CANTOPEN_SYMLINK        (SQLITE_CANTOPEN | (6&lt;&lt;8))</code></span>
<span class="codeline" id="line-543"><code>#define SQLITE_CORRUPT_VTAB            (SQLITE_CORRUPT | (1&lt;&lt;8))</code></span>
<span class="codeline" id="line-544"><code>#define SQLITE_CORRUPT_SEQUENCE        (SQLITE_CORRUPT | (2&lt;&lt;8))</code></span>
<span class="codeline" id="line-545"><code>#define SQLITE_CORRUPT_INDEX           (SQLITE_CORRUPT | (3&lt;&lt;8))</code></span>
<span class="codeline" id="line-546"><code>#define SQLITE_READONLY_RECOVERY       (SQLITE_READONLY | (1&lt;&lt;8))</code></span>
<span class="codeline" id="line-547"><code>#define SQLITE_READONLY_CANTLOCK       (SQLITE_READONLY | (2&lt;&lt;8))</code></span>
<span class="codeline" id="line-548"><code>#define SQLITE_READONLY_ROLLBACK       (SQLITE_READONLY | (3&lt;&lt;8))</code></span>
<span class="codeline" id="line-549"><code>#define SQLITE_READONLY_DBMOVED        (SQLITE_READONLY | (4&lt;&lt;8))</code></span>
<span class="codeline" id="line-550"><code>#define SQLITE_READONLY_CANTINIT       (SQLITE_READONLY | (5&lt;&lt;8))</code></span>
<span class="codeline" id="line-551"><code>#define SQLITE_READONLY_DIRECTORY      (SQLITE_READONLY | (6&lt;&lt;8))</code></span>
<span class="codeline" id="line-552"><code>#define SQLITE_ABORT_ROLLBACK          (SQLITE_ABORT | (2&lt;&lt;8))</code></span>
<span class="codeline" id="line-553"><code>#define SQLITE_CONSTRAINT_CHECK        (SQLITE_CONSTRAINT | (1&lt;&lt;8))</code></span>
<span class="codeline" id="line-554"><code>#define SQLITE_CONSTRAINT_COMMITHOOK   (SQLITE_CONSTRAINT | (2&lt;&lt;8))</code></span>
<span class="codeline" id="line-555"><code>#define SQLITE_CONSTRAINT_FOREIGNKEY   (SQLITE_CONSTRAINT | (3&lt;&lt;8))</code></span>
<span class="codeline" id="line-556"><code>#define SQLITE_CONSTRAINT_FUNCTION     (SQLITE_CONSTRAINT | (4&lt;&lt;8))</code></span>
<span class="codeline" id="line-557"><code>#define SQLITE_CONSTRAINT_NOTNULL      (SQLITE_CONSTRAINT | (5&lt;&lt;8))</code></span>
<span class="codeline" id="line-558"><code>#define SQLITE_CONSTRAINT_PRIMARYKEY   (SQLITE_CONSTRAINT | (6&lt;&lt;8))</code></span>
<span class="codeline" id="line-559"><code>#define SQLITE_CONSTRAINT_TRIGGER      (SQLITE_CONSTRAINT | (7&lt;&lt;8))</code></span>
<span class="codeline" id="line-560"><code>#define SQLITE_CONSTRAINT_UNIQUE       (SQLITE_CONSTRAINT | (8&lt;&lt;8))</code></span>
<span class="codeline" id="line-561"><code>#define SQLITE_CONSTRAINT_VTAB         (SQLITE_CONSTRAINT | (9&lt;&lt;8))</code></span>
<span class="codeline" id="line-562"><code>#define SQLITE_CONSTRAINT_ROWID        (SQLITE_CONSTRAINT |(10&lt;&lt;8))</code></span>
<span class="codeline" id="line-563"><code>#define SQLITE_CONSTRAINT_PINNED       (SQLITE_CONSTRAINT |(11&lt;&lt;8))</code></span>
<span class="codeline" id="line-564"><code>#define SQLITE_CONSTRAINT_DATATYPE     (SQLITE_CONSTRAINT |(12&lt;&lt;8))</code></span>
<span class="codeline" id="line-565"><code>#define SQLITE_NOTICE_RECOVER_WAL      (SQLITE_NOTICE | (1&lt;&lt;8))</code></span>
<span class="codeline" id="line-566"><code>#define SQLITE_NOTICE_RECOVER_ROLLBACK (SQLITE_NOTICE | (2&lt;&lt;8))</code></span>
<span class="codeline" id="line-567"><code>#define SQLITE_WARNING_AUTOINDEX       (SQLITE_WARNING | (1&lt;&lt;8))</code></span>
<span class="codeline" id="line-568"><code>#define SQLITE_AUTH_USER               (SQLITE_AUTH | (1&lt;&lt;8))</code></span>
<span class="codeline" id="line-569"><code>#define SQLITE_OK_LOAD_PERMANENTLY     (SQLITE_OK | (1&lt;&lt;8))</code></span>
<span class="codeline" id="line-570"><code>#define SQLITE_OK_SYMLINK              (SQLITE_OK | (2&lt;&lt;8)) /* internal use only */</code></span>
<span class="codeline" id="line-571"><code></code></span>
<span class="codeline" id="line-572"><code>/*</code></span>
<span class="codeline" id="line-573"><code>** CAPI3REF: Flags For File Open Operations</code></span>
<span class="codeline" id="line-574"><code>**</code></span>
<span class="codeline" id="line-575"><code>** These bit values are intended for use in the</code></span>
<span class="codeline" id="line-576"><code>** 3rd parameter to the [sqlite3_open_v2()] interface and</code></span>
<span class="codeline" id="line-577"><code>** in the 4th parameter to the [sqlite3_vfs.xOpen] method.</code></span>
<span class="codeline" id="line-578"><code>**</code></span>
<span class="codeline" id="line-579"><code>** Only those flags marked as "Ok for sqlite3_open_v2()" may be</code></span>
<span class="codeline" id="line-580"><code>** used as the third argument to the [sqlite3_open_v2()] interface.</code></span>
<span class="codeline" id="line-581"><code>** The other flags have historically been ignored by sqlite3_open_v2(),</code></span>
<span class="codeline" id="line-582"><code>** though future versions of SQLite might change so that an error is</code></span>
<span class="codeline" id="line-583"><code>** raised if any of the disallowed bits are passed into sqlite3_open_v2().</code></span>
<span class="codeline" id="line-584"><code>** Applications should not depend on the historical behavior.</code></span>
<span class="codeline" id="line-585"><code>**</code></span>
<span class="codeline" id="line-586"><code>** Note in particular that passing the SQLITE_OPEN_EXCLUSIVE flag into</code></span>
<span class="codeline" id="line-587"><code>** [sqlite3_open_v2()] does *not* cause the underlying database file</code></span>
<span class="codeline" id="line-588"><code>** to be opened using O_EXCL.  Passing SQLITE_OPEN_EXCLUSIVE into</code></span>
<span class="codeline" id="line-589"><code>** [sqlite3_open_v2()] has historically be a no-op and might become an</code></span>
<span class="codeline" id="line-590"><code>** error in future versions of SQLite.</code></span>
<span class="codeline" id="line-591"><code>*/</code></span>
<span class="codeline" id="line-592"><code>#define SQLITE_OPEN_READONLY         0x00000001  /* Ok for sqlite3_open_v2() */</code></span>
<span class="codeline" id="line-593"><code>#define SQLITE_OPEN_READWRITE        0x00000002  /* Ok for sqlite3_open_v2() */</code></span>
<span class="codeline" id="line-594"><code>#define SQLITE_OPEN_CREATE           0x00000004  /* Ok for sqlite3_open_v2() */</code></span>
<span class="codeline" id="line-595"><code>#define SQLITE_OPEN_DELETEONCLOSE    0x00000008  /* VFS only */</code></span>
<span class="codeline" id="line-596"><code>#define SQLITE_OPEN_EXCLUSIVE        0x00000010  /* VFS only */</code></span>
<span class="codeline" id="line-597"><code>#define SQLITE_OPEN_AUTOPROXY        0x00000020  /* VFS only */</code></span>
<span class="codeline" id="line-598"><code>#define SQLITE_OPEN_URI              0x00000040  /* Ok for sqlite3_open_v2() */</code></span>
<span class="codeline" id="line-599"><code>#define SQLITE_OPEN_MEMORY           0x00000080  /* Ok for sqlite3_open_v2() */</code></span>
<span class="codeline" id="line-600"><code>#define SQLITE_OPEN_MAIN_DB          0x00000100  /* VFS only */</code></span>
<span class="codeline" id="line-601"><code>#define SQLITE_OPEN_TEMP_DB          0x00000200  /* VFS only */</code></span>
<span class="codeline" id="line-602"><code>#define SQLITE_OPEN_TRANSIENT_DB     0x00000400  /* VFS only */</code></span>
<span class="codeline" id="line-603"><code>#define SQLITE_OPEN_MAIN_JOURNAL     0x00000800  /* VFS only */</code></span>
<span class="codeline" id="line-604"><code>#define SQLITE_OPEN_TEMP_JOURNAL     0x00001000  /* VFS only */</code></span>
<span class="codeline" id="line-605"><code>#define SQLITE_OPEN_SUBJOURNAL       0x00002000  /* VFS only */</code></span>
<span class="codeline" id="line-606"><code>#define SQLITE_OPEN_SUPER_JOURNAL    0x00004000  /* VFS only */</code></span>
<span class="codeline" id="line-607"><code>#define SQLITE_OPEN_NOMUTEX          0x00008000  /* Ok for sqlite3_open_v2() */</code></span>
<span class="codeline" id="line-608"><code>#define SQLITE_OPEN_FULLMUTEX        0x00010000  /* Ok for sqlite3_open_v2() */</code></span>
<span class="codeline" id="line-609"><code>#define SQLITE_OPEN_SHAREDCACHE      0x00020000  /* Ok for sqlite3_open_v2() */</code></span>
<span class="codeline" id="line-610"><code>#define SQLITE_OPEN_PRIVATECACHE     0x00040000  /* Ok for sqlite3_open_v2() */</code></span>
<span class="codeline" id="line-611"><code>#define SQLITE_OPEN_WAL              0x00080000  /* VFS only */</code></span>
<span class="codeline" id="line-612"><code>#define SQLITE_OPEN_NOFOLLOW         0x01000000  /* Ok for sqlite3_open_v2() */</code></span>
<span class="codeline" id="line-613"><code>#define SQLITE_OPEN_EXRESCODE        0x02000000  /* Extended result codes */</code></span>
<span class="codeline" id="line-614"><code></code></span>
<span class="codeline" id="line-615"><code>/* Reserved:                         0x00F00000 */</code></span>
<span class="codeline" id="line-616"><code>/* Legacy compatibility: */</code></span>
<span class="codeline" id="line-617"><code>#define SQLITE_OPEN_MASTER_JOURNAL   0x00004000  /* VFS only */</code></span>
<span class="codeline" id="line-618"><code></code></span>
<span class="codeline" id="line-619"><code></code></span>
<span class="codeline" id="line-620"><code>/*</code></span>
<span class="codeline" id="line-621"><code>** CAPI3REF: Device Characteristics</code></span>
<span class="codeline" id="line-622"><code>**</code></span>
<span class="codeline" id="line-623"><code>** The xDeviceCharacteristics method of the [sqlite3_io_methods]</code></span>
<span class="codeline" id="line-624"><code>** object returns an integer which is a vector of these</code></span>
<span class="codeline" id="line-625"><code>** bit values expressing I/O characteristics of the mass storage</code></span>
<span class="codeline" id="line-626"><code>** device that holds the file that the [sqlite3_io_methods]</code></span>
<span class="codeline" id="line-627"><code>** refers to.</code></span>
<span class="codeline" id="line-628"><code>**</code></span>
<span class="codeline" id="line-629"><code>** The SQLITE_IOCAP_ATOMIC property means that all writes of</code></span>
<span class="codeline" id="line-630"><code>** any size are atomic.  The SQLITE_IOCAP_ATOMICnnn values</code></span>
<span class="codeline" id="line-631"><code>** mean that writes of blocks that are nnn bytes in size and</code></span>
<span class="codeline" id="line-632"><code>** are aligned to an address which is an integer multiple of</code></span>
<span class="codeline" id="line-633"><code>** nnn are atomic.  The SQLITE_IOCAP_SAFE_APPEND value means</code></span>
<span class="codeline" id="line-634"><code>** that when data is appended to a file, the data is appended</code></span>
<span class="codeline" id="line-635"><code>** first then the size of the file is extended, never the other</code></span>
<span class="codeline" id="line-636"><code>** way around.  The SQLITE_IOCAP_SEQUENTIAL property means that</code></span>
<span class="codeline" id="line-637"><code>** information is written to disk in the same order as calls</code></span>
<span class="codeline" id="line-638"><code>** to xWrite().  The SQLITE_IOCAP_POWERSAFE_OVERWRITE property means that</code></span>
<span class="codeline" id="line-639"><code>** after reboot following a crash or power loss, the only bytes in a</code></span>
<span class="codeline" id="line-640"><code>** file that were written at the application level might have changed</code></span>
<span class="codeline" id="line-641"><code>** and that adjacent bytes, even bytes within the same sector are</code></span>
<span class="codeline" id="line-642"><code>** guaranteed to be unchanged.  The SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN</code></span>
<span class="codeline" id="line-643"><code>** flag indicates that a file cannot be deleted when open.  The</code></span>
<span class="codeline" id="line-644"><code>** SQLITE_IOCAP_IMMUTABLE flag indicates that the file is on</code></span>
<span class="codeline" id="line-645"><code>** read-only media and cannot be changed even by processes with</code></span>
<span class="codeline" id="line-646"><code>** elevated privileges.</code></span>
<span class="codeline" id="line-647"><code>**</code></span>
<span class="codeline" id="line-648"><code>** The SQLITE_IOCAP_BATCH_ATOMIC property means that the underlying</code></span>
<span class="codeline" id="line-649"><code>** filesystem supports doing multiple write operations atomically when those</code></span>
<span class="codeline" id="line-650"><code>** write operations are bracketed by [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE] and</code></span>
<span class="codeline" id="line-651"><code>** [SQLITE_FCNTL_COMMIT_ATOMIC_WRITE].</code></span>
<span class="codeline" id="line-652"><code>*/</code></span>
<span class="codeline" id="line-653"><code>#define SQLITE_IOCAP_ATOMIC                 0x00000001</code></span>
<span class="codeline" id="line-654"><code>#define SQLITE_IOCAP_ATOMIC512              0x00000002</code></span>
<span class="codeline" id="line-655"><code>#define SQLITE_IOCAP_ATOMIC1K               0x00000004</code></span>
<span class="codeline" id="line-656"><code>#define SQLITE_IOCAP_ATOMIC2K               0x00000008</code></span>
<span class="codeline" id="line-657"><code>#define SQLITE_IOCAP_ATOMIC4K               0x00000010</code></span>
<span class="codeline" id="line-658"><code>#define SQLITE_IOCAP_ATOMIC8K               0x00000020</code></span>
<span class="codeline" id="line-659"><code>#define SQLITE_IOCAP_ATOMIC16K              0x00000040</code></span>
<span class="codeline" id="line-660"><code>#define SQLITE_IOCAP_ATOMIC32K              0x00000080</code></span>
<span class="codeline" id="line-661"><code>#define SQLITE_IOCAP_ATOMIC64K              0x00000100</code></span>
<span class="codeline" id="line-662"><code>#define SQLITE_IOCAP_SAFE_APPEND            0x00000200</code></span>
<span class="codeline" id="line-663"><code>#define SQLITE_IOCAP_SEQUENTIAL             0x00000400</code></span>
<span class="codeline" id="line-664"><code>#define SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN  0x00000800</code></span>
<span class="codeline" id="line-665"><code>#define SQLITE_IOCAP_POWERSAFE_OVERWRITE    0x00001000</code></span>
<span class="codeline" id="line-666"><code>#define SQLITE_IOCAP_IMMUTABLE              0x00002000</code></span>
<span class="codeline" id="line-667"><code>#define SQLITE_IOCAP_BATCH_ATOMIC           0x00004000</code></span>
<span class="codeline" id="line-668"><code></code></span>
<span class="codeline" id="line-669"><code>/*</code></span>
<span class="codeline" id="line-670"><code>** CAPI3REF: File Locking Levels</code></span>
<span class="codeline" id="line-671"><code>**</code></span>
<span class="codeline" id="line-672"><code>** SQLite uses one of these integer values as the second</code></span>
<span class="codeline" id="line-673"><code>** argument to calls it makes to the xLock() and xUnlock() methods</code></span>
<span class="codeline" id="line-674"><code>** of an [sqlite3_io_methods] object.</code></span>
<span class="codeline" id="line-675"><code>*/</code></span>
<span class="codeline" id="line-676"><code>#define SQLITE_LOCK_NONE          0</code></span>
<span class="codeline" id="line-677"><code>#define SQLITE_LOCK_SHARED        1</code></span>
<span class="codeline" id="line-678"><code>#define SQLITE_LOCK_RESERVED      2</code></span>
<span class="codeline" id="line-679"><code>#define SQLITE_LOCK_PENDING       3</code></span>
<span class="codeline" id="line-680"><code>#define SQLITE_LOCK_EXCLUSIVE     4</code></span>
<span class="codeline" id="line-681"><code></code></span>
<span class="codeline" id="line-682"><code>/*</code></span>
<span class="codeline" id="line-683"><code>** CAPI3REF: Synchronization Type Flags</code></span>
<span class="codeline" id="line-684"><code>**</code></span>
<span class="codeline" id="line-685"><code>** When SQLite invokes the xSync() method of an</code></span>
<span class="codeline" id="line-686"><code>** [sqlite3_io_methods] object it uses a combination of</code></span>
<span class="codeline" id="line-687"><code>** these integer values as the second argument.</code></span>
<span class="codeline" id="line-688"><code>**</code></span>
<span class="codeline" id="line-689"><code>** When the SQLITE_SYNC_DATAONLY flag is used, it means that the</code></span>
<span class="codeline" id="line-690"><code>** sync operation only needs to flush data to mass storage.  Inode</code></span>
<span class="codeline" id="line-691"><code>** information need not be flushed. If the lower four bits of the flag</code></span>
<span class="codeline" id="line-692"><code>** equal SQLITE_SYNC_NORMAL, that means to use normal fsync() semantics.</code></span>
<span class="codeline" id="line-693"><code>** If the lower four bits equal SQLITE_SYNC_FULL, that means</code></span>
<span class="codeline" id="line-694"><code>** to use Mac OS X style fullsync instead of fsync().</code></span>
<span class="codeline" id="line-695"><code>**</code></span>
<span class="codeline" id="line-696"><code>** Do not confuse the SQLITE_SYNC_NORMAL and SQLITE_SYNC_FULL flags</code></span>
<span class="codeline" id="line-697"><code>** with the [PRAGMA synchronous]=NORMAL and [PRAGMA synchronous]=FULL</code></span>
<span class="codeline" id="line-698"><code>** settings.  The [synchronous pragma] determines when calls to the</code></span>
<span class="codeline" id="line-699"><code>** xSync VFS method occur and applies uniformly across all platforms.</code></span>
<span class="codeline" id="line-700"><code>** The SQLITE_SYNC_NORMAL and SQLITE_SYNC_FULL flags determine how</code></span>
<span class="codeline" id="line-701"><code>** energetic or rigorous or forceful the sync operations are and</code></span>
<span class="codeline" id="line-702"><code>** only make a difference on Mac OSX for the default SQLite code.</code></span>
<span class="codeline" id="line-703"><code>** (Third-party VFS implementations might also make the distinction</code></span>
<span class="codeline" id="line-704"><code>** between SQLITE_SYNC_NORMAL and SQLITE_SYNC_FULL, but among the</code></span>
<span class="codeline" id="line-705"><code>** operating systems natively supported by SQLite, only Mac OSX</code></span>
<span class="codeline" id="line-706"><code>** cares about the difference.)</code></span>
<span class="codeline" id="line-707"><code>*/</code></span>
<span class="codeline" id="line-708"><code>#define SQLITE_SYNC_NORMAL        0x00002</code></span>
<span class="codeline" id="line-709"><code>#define SQLITE_SYNC_FULL          0x00003</code></span>
<span class="codeline" id="line-710"><code>#define SQLITE_SYNC_DATAONLY      0x00010</code></span>
<span class="codeline" id="line-711"><code></code></span>
<span class="codeline" id="line-712"><code>/*</code></span>
<span class="codeline" id="line-713"><code>** CAPI3REF: OS Interface Open File Handle</code></span>
<span class="codeline" id="line-714"><code>**</code></span>
<span class="codeline" id="line-715"><code>** An [sqlite3_file] object represents an open file in the</code></span>
<span class="codeline" id="line-716"><code>** [sqlite3_vfs | OS interface layer].  Individual OS interface</code></span>
<span class="codeline" id="line-717"><code>** implementations will</code></span>
<span class="codeline" id="line-718"><code>** want to subclass this object by appending additional fields</code></span>
<span class="codeline" id="line-719"><code>** for their own use.  The pMethods entry is a pointer to an</code></span>
<span class="codeline" id="line-720"><code>** [sqlite3_io_methods] object that defines methods for performing</code></span>
<span class="codeline" id="line-721"><code>** I/O operations on the open file.</code></span>
<span class="codeline" id="line-722"><code>*/</code></span>
<span class="codeline" id="line-723"><code>typedef struct sqlite3_file sqlite3_file;</code></span>
<span class="codeline" id="line-724"><code>struct sqlite3_file {</code></span>
<span class="codeline" id="line-725"><code>  const struct sqlite3_io_methods *pMethods;  /* Methods for an open file */</code></span>
<span class="codeline" id="line-726"><code>};</code></span>
<span class="codeline" id="line-727"><code></code></span>
<span class="codeline" id="line-728"><code>/*</code></span>
<span class="codeline" id="line-729"><code>** CAPI3REF: OS Interface File Virtual Methods Object</code></span>
<span class="codeline" id="line-730"><code>**</code></span>
<span class="codeline" id="line-731"><code>** Every file opened by the [sqlite3_vfs.xOpen] method populates an</code></span>
<span class="codeline" id="line-732"><code>** [sqlite3_file] object (or, more commonly, a subclass of the</code></span>
<span class="codeline" id="line-733"><code>** [sqlite3_file] object) with a pointer to an instance of this object.</code></span>
<span class="codeline" id="line-734"><code>** This object defines the methods used to perform various operations</code></span>
<span class="codeline" id="line-735"><code>** against the open file represented by the [sqlite3_file] object.</code></span>
<span class="codeline" id="line-736"><code>**</code></span>
<span class="codeline" id="line-737"><code>** If the [sqlite3_vfs.xOpen] method sets the sqlite3_file.pMethods element</code></span>
<span class="codeline" id="line-738"><code>** to a non-NULL pointer, then the sqlite3_io_methods.xClose method</code></span>
<span class="codeline" id="line-739"><code>** may be invoked even if the [sqlite3_vfs.xOpen] reported that it failed.  The</code></span>
<span class="codeline" id="line-740"><code>** only way to prevent a call to xClose following a failed [sqlite3_vfs.xOpen]</code></span>
<span class="codeline" id="line-741"><code>** is for the [sqlite3_vfs.xOpen] to set the sqlite3_file.pMethods element</code></span>
<span class="codeline" id="line-742"><code>** to NULL.</code></span>
<span class="codeline" id="line-743"><code>**</code></span>
<span class="codeline" id="line-744"><code>** The flags argument to xSync may be one of [SQLITE_SYNC_NORMAL] or</code></span>
<span class="codeline" id="line-745"><code>** [SQLITE_SYNC_FULL].  The first choice is the normal fsync().</code></span>
<span class="codeline" id="line-746"><code>** The second choice is a Mac OS X style fullsync.  The [SQLITE_SYNC_DATAONLY]</code></span>
<span class="codeline" id="line-747"><code>** flag may be ORed in to indicate that only the data of the file</code></span>
<span class="codeline" id="line-748"><code>** and not its inode needs to be synced.</code></span>
<span class="codeline" id="line-749"><code>**</code></span>
<span class="codeline" id="line-750"><code>** The integer values to xLock() and xUnlock() are one of</code></span>
<span class="codeline" id="line-751"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-752"><code>** &lt;li&gt; [SQLITE_LOCK_NONE],</code></span>
<span class="codeline" id="line-753"><code>** &lt;li&gt; [SQLITE_LOCK_SHARED],</code></span>
<span class="codeline" id="line-754"><code>** &lt;li&gt; [SQLITE_LOCK_RESERVED],</code></span>
<span class="codeline" id="line-755"><code>** &lt;li&gt; [SQLITE_LOCK_PENDING], or</code></span>
<span class="codeline" id="line-756"><code>** &lt;li&gt; [SQLITE_LOCK_EXCLUSIVE].</code></span>
<span class="codeline" id="line-757"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-758"><code>** xLock() increases the lock. xUnlock() decreases the lock.</code></span>
<span class="codeline" id="line-759"><code>** The xCheckReservedLock() method checks whether any database connection,</code></span>
<span class="codeline" id="line-760"><code>** either in this process or in some other process, is holding a RESERVED,</code></span>
<span class="codeline" id="line-761"><code>** PENDING, or EXCLUSIVE lock on the file.  It returns true</code></span>
<span class="codeline" id="line-762"><code>** if such a lock exists and false otherwise.</code></span>
<span class="codeline" id="line-763"><code>**</code></span>
<span class="codeline" id="line-764"><code>** The xFileControl() method is a generic interface that allows custom</code></span>
<span class="codeline" id="line-765"><code>** VFS implementations to directly control an open file using the</code></span>
<span class="codeline" id="line-766"><code>** [sqlite3_file_control()] interface.  The second "op" argument is an</code></span>
<span class="codeline" id="line-767"><code>** integer opcode.  The third argument is a generic pointer intended to</code></span>
<span class="codeline" id="line-768"><code>** point to a structure that may contain arguments or space in which to</code></span>
<span class="codeline" id="line-769"><code>** write return values.  Potential uses for xFileControl() might be</code></span>
<span class="codeline" id="line-770"><code>** functions to enable blocking locks with timeouts, to change the</code></span>
<span class="codeline" id="line-771"><code>** locking strategy (for example to use dot-file locks), to inquire</code></span>
<span class="codeline" id="line-772"><code>** about the status of a lock, or to break stale locks.  The SQLite</code></span>
<span class="codeline" id="line-773"><code>** core reserves all opcodes less than 100 for its own use.</code></span>
<span class="codeline" id="line-774"><code>** A [file control opcodes | list of opcodes] less than 100 is available.</code></span>
<span class="codeline" id="line-775"><code>** Applications that define a custom xFileControl method should use opcodes</code></span>
<span class="codeline" id="line-776"><code>** greater than 100 to avoid conflicts.  VFS implementations should</code></span>
<span class="codeline" id="line-777"><code>** return [SQLITE_NOTFOUND] for file control opcodes that they do not</code></span>
<span class="codeline" id="line-778"><code>** recognize.</code></span>
<span class="codeline" id="line-779"><code>**</code></span>
<span class="codeline" id="line-780"><code>** The xSectorSize() method returns the sector size of the</code></span>
<span class="codeline" id="line-781"><code>** device that underlies the file.  The sector size is the</code></span>
<span class="codeline" id="line-782"><code>** minimum write that can be performed without disturbing</code></span>
<span class="codeline" id="line-783"><code>** other bytes in the file.  The xDeviceCharacteristics()</code></span>
<span class="codeline" id="line-784"><code>** method returns a bit vector describing behaviors of the</code></span>
<span class="codeline" id="line-785"><code>** underlying device:</code></span>
<span class="codeline" id="line-786"><code>**</code></span>
<span class="codeline" id="line-787"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-788"><code>** &lt;li&gt; [SQLITE_IOCAP_ATOMIC]</code></span>
<span class="codeline" id="line-789"><code>** &lt;li&gt; [SQLITE_IOCAP_ATOMIC512]</code></span>
<span class="codeline" id="line-790"><code>** &lt;li&gt; [SQLITE_IOCAP_ATOMIC1K]</code></span>
<span class="codeline" id="line-791"><code>** &lt;li&gt; [SQLITE_IOCAP_ATOMIC2K]</code></span>
<span class="codeline" id="line-792"><code>** &lt;li&gt; [SQLITE_IOCAP_ATOMIC4K]</code></span>
<span class="codeline" id="line-793"><code>** &lt;li&gt; [SQLITE_IOCAP_ATOMIC8K]</code></span>
<span class="codeline" id="line-794"><code>** &lt;li&gt; [SQLITE_IOCAP_ATOMIC16K]</code></span>
<span class="codeline" id="line-795"><code>** &lt;li&gt; [SQLITE_IOCAP_ATOMIC32K]</code></span>
<span class="codeline" id="line-796"><code>** &lt;li&gt; [SQLITE_IOCAP_ATOMIC64K]</code></span>
<span class="codeline" id="line-797"><code>** &lt;li&gt; [SQLITE_IOCAP_SAFE_APPEND]</code></span>
<span class="codeline" id="line-798"><code>** &lt;li&gt; [SQLITE_IOCAP_SEQUENTIAL]</code></span>
<span class="codeline" id="line-799"><code>** &lt;li&gt; [SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN]</code></span>
<span class="codeline" id="line-800"><code>** &lt;li&gt; [SQLITE_IOCAP_POWERSAFE_OVERWRITE]</code></span>
<span class="codeline" id="line-801"><code>** &lt;li&gt; [SQLITE_IOCAP_IMMUTABLE]</code></span>
<span class="codeline" id="line-802"><code>** &lt;li&gt; [SQLITE_IOCAP_BATCH_ATOMIC]</code></span>
<span class="codeline" id="line-803"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-804"><code>**</code></span>
<span class="codeline" id="line-805"><code>** The SQLITE_IOCAP_ATOMIC property means that all writes of</code></span>
<span class="codeline" id="line-806"><code>** any size are atomic.  The SQLITE_IOCAP_ATOMICnnn values</code></span>
<span class="codeline" id="line-807"><code>** mean that writes of blocks that are nnn bytes in size and</code></span>
<span class="codeline" id="line-808"><code>** are aligned to an address which is an integer multiple of</code></span>
<span class="codeline" id="line-809"><code>** nnn are atomic.  The SQLITE_IOCAP_SAFE_APPEND value means</code></span>
<span class="codeline" id="line-810"><code>** that when data is appended to a file, the data is appended</code></span>
<span class="codeline" id="line-811"><code>** first then the size of the file is extended, never the other</code></span>
<span class="codeline" id="line-812"><code>** way around.  The SQLITE_IOCAP_SEQUENTIAL property means that</code></span>
<span class="codeline" id="line-813"><code>** information is written to disk in the same order as calls</code></span>
<span class="codeline" id="line-814"><code>** to xWrite().</code></span>
<span class="codeline" id="line-815"><code>**</code></span>
<span class="codeline" id="line-816"><code>** If xRead() returns SQLITE_IOERR_SHORT_READ it must also fill</code></span>
<span class="codeline" id="line-817"><code>** in the unread portions of the buffer with zeros.  A VFS that</code></span>
<span class="codeline" id="line-818"><code>** fails to zero-fill short reads might seem to work.  However,</code></span>
<span class="codeline" id="line-819"><code>** failure to zero-fill short reads will eventually lead to</code></span>
<span class="codeline" id="line-820"><code>** database corruption.</code></span>
<span class="codeline" id="line-821"><code>*/</code></span>
<span class="codeline" id="line-822"><code>typedef struct sqlite3_io_methods sqlite3_io_methods;</code></span>
<span class="codeline" id="line-823"><code>struct sqlite3_io_methods {</code></span>
<span class="codeline" id="line-824"><code>  int iVersion;</code></span>
<span class="codeline" id="line-825"><code>  int (*xClose)(sqlite3_file*);</code></span>
<span class="codeline" id="line-826"><code>  int (*xRead)(sqlite3_file*, void*, int iAmt, sqlite3_int64 iOfst);</code></span>
<span class="codeline" id="line-827"><code>  int (*xWrite)(sqlite3_file*, const void*, int iAmt, sqlite3_int64 iOfst);</code></span>
<span class="codeline" id="line-828"><code>  int (*xTruncate)(sqlite3_file*, sqlite3_int64 size);</code></span>
<span class="codeline" id="line-829"><code>  int (*xSync)(sqlite3_file*, int flags);</code></span>
<span class="codeline" id="line-830"><code>  int (*xFileSize)(sqlite3_file*, sqlite3_int64 *pSize);</code></span>
<span class="codeline" id="line-831"><code>  int (*xLock)(sqlite3_file*, int);</code></span>
<span class="codeline" id="line-832"><code>  int (*xUnlock)(sqlite3_file*, int);</code></span>
<span class="codeline" id="line-833"><code>  int (*xCheckReservedLock)(sqlite3_file*, int *pResOut);</code></span>
<span class="codeline" id="line-834"><code>  int (*xFileControl)(sqlite3_file*, int op, void *pArg);</code></span>
<span class="codeline" id="line-835"><code>  int (*xSectorSize)(sqlite3_file*);</code></span>
<span class="codeline" id="line-836"><code>  int (*xDeviceCharacteristics)(sqlite3_file*);</code></span>
<span class="codeline" id="line-837"><code>  /* Methods above are valid for version 1 */</code></span>
<span class="codeline" id="line-838"><code>  int (*xShmMap)(sqlite3_file*, int iPg, int pgsz, int, void volatile**);</code></span>
<span class="codeline" id="line-839"><code>  int (*xShmLock)(sqlite3_file*, int offset, int n, int flags);</code></span>
<span class="codeline" id="line-840"><code>  void (*xShmBarrier)(sqlite3_file*);</code></span>
<span class="codeline" id="line-841"><code>  int (*xShmUnmap)(sqlite3_file*, int deleteFlag);</code></span>
<span class="codeline" id="line-842"><code>  /* Methods above are valid for version 2 */</code></span>
<span class="codeline" id="line-843"><code>  int (*xFetch)(sqlite3_file*, sqlite3_int64 iOfst, int iAmt, void **pp);</code></span>
<span class="codeline" id="line-844"><code>  int (*xUnfetch)(sqlite3_file*, sqlite3_int64 iOfst, void *p);</code></span>
<span class="codeline" id="line-845"><code>  /* Methods above are valid for version 3 */</code></span>
<span class="codeline" id="line-846"><code>  /* Additional methods may be added in future releases */</code></span>
<span class="codeline" id="line-847"><code>};</code></span>
<span class="codeline" id="line-848"><code></code></span>
<span class="codeline" id="line-849"><code>/*</code></span>
<span class="codeline" id="line-850"><code>** CAPI3REF: Standard File Control Opcodes</code></span>
<span class="codeline" id="line-851"><code>** KEYWORDS: {file control opcodes} {file control opcode}</code></span>
<span class="codeline" id="line-852"><code>**</code></span>
<span class="codeline" id="line-853"><code>** These integer constants are opcodes for the xFileControl method</code></span>
<span class="codeline" id="line-854"><code>** of the [sqlite3_io_methods] object and for the [sqlite3_file_control()]</code></span>
<span class="codeline" id="line-855"><code>** interface.</code></span>
<span class="codeline" id="line-856"><code>**</code></span>
<span class="codeline" id="line-857"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-858"><code>** &lt;li&gt;[[SQLITE_FCNTL_LOCKSTATE]]</code></span>
<span class="codeline" id="line-859"><code>** The [SQLITE_FCNTL_LOCKSTATE] opcode is used for debugging.  This</code></span>
<span class="codeline" id="line-860"><code>** opcode causes the xFileControl method to write the current state of</code></span>
<span class="codeline" id="line-861"><code>** the lock (one of [SQLITE_LOCK_NONE], [SQLITE_LOCK_SHARED],</code></span>
<span class="codeline" id="line-862"><code>** [SQLITE_LOCK_RESERVED], [SQLITE_LOCK_PENDING], or [SQLITE_LOCK_EXCLUSIVE])</code></span>
<span class="codeline" id="line-863"><code>** into an integer that the pArg argument points to. This capability</code></span>
<span class="codeline" id="line-864"><code>** is used during testing and is only available when the SQLITE_TEST</code></span>
<span class="codeline" id="line-865"><code>** compile-time option is used.</code></span>
<span class="codeline" id="line-866"><code>**</code></span>
<span class="codeline" id="line-867"><code>** &lt;li&gt;[[SQLITE_FCNTL_SIZE_HINT]]</code></span>
<span class="codeline" id="line-868"><code>** The [SQLITE_FCNTL_SIZE_HINT] opcode is used by SQLite to give the VFS</code></span>
<span class="codeline" id="line-869"><code>** layer a hint of how large the database file will grow to be during the</code></span>
<span class="codeline" id="line-870"><code>** current transaction.  This hint is not guaranteed to be accurate but it</code></span>
<span class="codeline" id="line-871"><code>** is often close.  The underlying VFS might choose to preallocate database</code></span>
<span class="codeline" id="line-872"><code>** file space based on this hint in order to help writes to the database</code></span>
<span class="codeline" id="line-873"><code>** file run faster.</code></span>
<span class="codeline" id="line-874"><code>**</code></span>
<span class="codeline" id="line-875"><code>** &lt;li&gt;[[SQLITE_FCNTL_SIZE_LIMIT]]</code></span>
<span class="codeline" id="line-876"><code>** The [SQLITE_FCNTL_SIZE_LIMIT] opcode is used by in-memory VFS that</code></span>
<span class="codeline" id="line-877"><code>** implements [sqlite3_deserialize()] to set an upper bound on the size</code></span>
<span class="codeline" id="line-878"><code>** of the in-memory database.  The argument is a pointer to a [sqlite3_int64].</code></span>
<span class="codeline" id="line-879"><code>** If the integer pointed to is negative, then it is filled in with the</code></span>
<span class="codeline" id="line-880"><code>** current limit.  Otherwise the limit is set to the larger of the value</code></span>
<span class="codeline" id="line-881"><code>** of the integer pointed to and the current database size.  The integer</code></span>
<span class="codeline" id="line-882"><code>** pointed to is set to the new limit.</code></span>
<span class="codeline" id="line-883"><code>**</code></span>
<span class="codeline" id="line-884"><code>** &lt;li&gt;[[SQLITE_FCNTL_CHUNK_SIZE]]</code></span>
<span class="codeline" id="line-885"><code>** The [SQLITE_FCNTL_CHUNK_SIZE] opcode is used to request that the VFS</code></span>
<span class="codeline" id="line-886"><code>** extends and truncates the database file in chunks of a size specified</code></span>
<span class="codeline" id="line-887"><code>** by the user. The fourth argument to [sqlite3_file_control()] should</code></span>
<span class="codeline" id="line-888"><code>** point to an integer (type int) containing the new chunk-size to use</code></span>
<span class="codeline" id="line-889"><code>** for the nominated database. Allocating database file space in large</code></span>
<span class="codeline" id="line-890"><code>** chunks (say 1MB at a time), may reduce file-system fragmentation and</code></span>
<span class="codeline" id="line-891"><code>** improve performance on some systems.</code></span>
<span class="codeline" id="line-892"><code>**</code></span>
<span class="codeline" id="line-893"><code>** &lt;li&gt;[[SQLITE_FCNTL_FILE_POINTER]]</code></span>
<span class="codeline" id="line-894"><code>** The [SQLITE_FCNTL_FILE_POINTER] opcode is used to obtain a pointer</code></span>
<span class="codeline" id="line-895"><code>** to the [sqlite3_file] object associated with a particular database</code></span>
<span class="codeline" id="line-896"><code>** connection.  See also [SQLITE_FCNTL_JOURNAL_POINTER].</code></span>
<span class="codeline" id="line-897"><code>**</code></span>
<span class="codeline" id="line-898"><code>** &lt;li&gt;[[SQLITE_FCNTL_JOURNAL_POINTER]]</code></span>
<span class="codeline" id="line-899"><code>** The [SQLITE_FCNTL_JOURNAL_POINTER] opcode is used to obtain a pointer</code></span>
<span class="codeline" id="line-900"><code>** to the [sqlite3_file] object associated with the journal file (either</code></span>
<span class="codeline" id="line-901"><code>** the [rollback journal] or the [write-ahead log]) for a particular database</code></span>
<span class="codeline" id="line-902"><code>** connection.  See also [SQLITE_FCNTL_FILE_POINTER].</code></span>
<span class="codeline" id="line-903"><code>**</code></span>
<span class="codeline" id="line-904"><code>** &lt;li&gt;[[SQLITE_FCNTL_SYNC_OMITTED]]</code></span>
<span class="codeline" id="line-905"><code>** No longer in use.</code></span>
<span class="codeline" id="line-906"><code>**</code></span>
<span class="codeline" id="line-907"><code>** &lt;li&gt;[[SQLITE_FCNTL_SYNC]]</code></span>
<span class="codeline" id="line-908"><code>** The [SQLITE_FCNTL_SYNC] opcode is generated internally by SQLite and</code></span>
<span class="codeline" id="line-909"><code>** sent to the VFS immediately before the xSync method is invoked on a</code></span>
<span class="codeline" id="line-910"><code>** database file descriptor. Or, if the xSync method is not invoked</code></span>
<span class="codeline" id="line-911"><code>** because the user has configured SQLite with</code></span>
<span class="codeline" id="line-912"><code>** [PRAGMA synchronous | PRAGMA synchronous=OFF] it is invoked in place</code></span>
<span class="codeline" id="line-913"><code>** of the xSync method. In most cases, the pointer argument passed with</code></span>
<span class="codeline" id="line-914"><code>** this file-control is NULL. However, if the database file is being synced</code></span>
<span class="codeline" id="line-915"><code>** as part of a multi-database commit, the argument points to a nul-terminated</code></span>
<span class="codeline" id="line-916"><code>** string containing the transactions super-journal file name. VFSes that</code></span>
<span class="codeline" id="line-917"><code>** do not need this signal should silently ignore this opcode. Applications</code></span>
<span class="codeline" id="line-918"><code>** should not call [sqlite3_file_control()] with this opcode as doing so may</code></span>
<span class="codeline" id="line-919"><code>** disrupt the operation of the specialized VFSes that do require it.</code></span>
<span class="codeline" id="line-920"><code>**</code></span>
<span class="codeline" id="line-921"><code>** &lt;li&gt;[[SQLITE_FCNTL_COMMIT_PHASETWO]]</code></span>
<span class="codeline" id="line-922"><code>** The [SQLITE_FCNTL_COMMIT_PHASETWO] opcode is generated internally by SQLite</code></span>
<span class="codeline" id="line-923"><code>** and sent to the VFS after a transaction has been committed immediately</code></span>
<span class="codeline" id="line-924"><code>** but before the database is unlocked. VFSes that do not need this signal</code></span>
<span class="codeline" id="line-925"><code>** should silently ignore this opcode. Applications should not call</code></span>
<span class="codeline" id="line-926"><code>** [sqlite3_file_control()] with this opcode as doing so may disrupt the</code></span>
<span class="codeline" id="line-927"><code>** operation of the specialized VFSes that do require it.</code></span>
<span class="codeline" id="line-928"><code>**</code></span>
<span class="codeline" id="line-929"><code>** &lt;li&gt;[[SQLITE_FCNTL_WIN32_AV_RETRY]]</code></span>
<span class="codeline" id="line-930"><code>** ^The [SQLITE_FCNTL_WIN32_AV_RETRY] opcode is used to configure automatic</code></span>
<span class="codeline" id="line-931"><code>** retry counts and intervals for certain disk I/O operations for the</code></span>
<span class="codeline" id="line-932"><code>** windows [VFS] in order to provide robustness in the presence of</code></span>
<span class="codeline" id="line-933"><code>** anti-virus programs.  By default, the windows VFS will retry file read,</code></span>
<span class="codeline" id="line-934"><code>** file write, and file delete operations up to 10 times, with a delay</code></span>
<span class="codeline" id="line-935"><code>** of 25 milliseconds before the first retry and with the delay increasing</code></span>
<span class="codeline" id="line-936"><code>** by an additional 25 milliseconds with each subsequent retry.  This</code></span>
<span class="codeline" id="line-937"><code>** opcode allows these two values (10 retries and 25 milliseconds of delay)</code></span>
<span class="codeline" id="line-938"><code>** to be adjusted.  The values are changed for all database connections</code></span>
<span class="codeline" id="line-939"><code>** within the same process.  The argument is a pointer to an array of two</code></span>
<span class="codeline" id="line-940"><code>** integers where the first integer is the new retry count and the second</code></span>
<span class="codeline" id="line-941"><code>** integer is the delay.  If either integer is negative, then the setting</code></span>
<span class="codeline" id="line-942"><code>** is not changed but instead the prior value of that setting is written</code></span>
<span class="codeline" id="line-943"><code>** into the array entry, allowing the current retry settings to be</code></span>
<span class="codeline" id="line-944"><code>** interrogated.  The zDbName parameter is ignored.</code></span>
<span class="codeline" id="line-945"><code>**</code></span>
<span class="codeline" id="line-946"><code>** &lt;li&gt;[[SQLITE_FCNTL_PERSIST_WAL]]</code></span>
<span class="codeline" id="line-947"><code>** ^The [SQLITE_FCNTL_PERSIST_WAL] opcode is used to set or query the</code></span>
<span class="codeline" id="line-948"><code>** persistent [WAL | Write Ahead Log] setting.  By default, the auxiliary</code></span>
<span class="codeline" id="line-949"><code>** write ahead log ([WAL file]) and shared memory</code></span>
<span class="codeline" id="line-950"><code>** files used for transaction control</code></span>
<span class="codeline" id="line-951"><code>** are automatically deleted when the latest connection to the database</code></span>
<span class="codeline" id="line-952"><code>** closes.  Setting persistent WAL mode causes those files to persist after</code></span>
<span class="codeline" id="line-953"><code>** close.  Persisting the files is useful when other processes that do not</code></span>
<span class="codeline" id="line-954"><code>** have write permission on the directory containing the database file want</code></span>
<span class="codeline" id="line-955"><code>** to read the database file, as the WAL and shared memory files must exist</code></span>
<span class="codeline" id="line-956"><code>** in order for the database to be readable.  The fourth parameter to</code></span>
<span class="codeline" id="line-957"><code>** [sqlite3_file_control()] for this opcode should be a pointer to an integer.</code></span>
<span class="codeline" id="line-958"><code>** That integer is 0 to disable persistent WAL mode or 1 to enable persistent</code></span>
<span class="codeline" id="line-959"><code>** WAL mode.  If the integer is -1, then it is overwritten with the current</code></span>
<span class="codeline" id="line-960"><code>** WAL persistence setting.</code></span>
<span class="codeline" id="line-961"><code>**</code></span>
<span class="codeline" id="line-962"><code>** &lt;li&gt;[[SQLITE_FCNTL_POWERSAFE_OVERWRITE]]</code></span>
<span class="codeline" id="line-963"><code>** ^The [SQLITE_FCNTL_POWERSAFE_OVERWRITE] opcode is used to set or query the</code></span>
<span class="codeline" id="line-964"><code>** persistent "powersafe-overwrite" or "PSOW" setting.  The PSOW setting</code></span>
<span class="codeline" id="line-965"><code>** determines the [SQLITE_IOCAP_POWERSAFE_OVERWRITE] bit of the</code></span>
<span class="codeline" id="line-966"><code>** xDeviceCharacteristics methods. The fourth parameter to</code></span>
<span class="codeline" id="line-967"><code>** [sqlite3_file_control()] for this opcode should be a pointer to an integer.</code></span>
<span class="codeline" id="line-968"><code>** That integer is 0 to disable zero-damage mode or 1 to enable zero-damage</code></span>
<span class="codeline" id="line-969"><code>** mode.  If the integer is -1, then it is overwritten with the current</code></span>
<span class="codeline" id="line-970"><code>** zero-damage mode setting.</code></span>
<span class="codeline" id="line-971"><code>**</code></span>
<span class="codeline" id="line-972"><code>** &lt;li&gt;[[SQLITE_FCNTL_OVERWRITE]]</code></span>
<span class="codeline" id="line-973"><code>** ^The [SQLITE_FCNTL_OVERWRITE] opcode is invoked by SQLite after opening</code></span>
<span class="codeline" id="line-974"><code>** a write transaction to indicate that, unless it is rolled back for some</code></span>
<span class="codeline" id="line-975"><code>** reason, the entire database file will be overwritten by the current</code></span>
<span class="codeline" id="line-976"><code>** transaction. This is used by VACUUM operations.</code></span>
<span class="codeline" id="line-977"><code>**</code></span>
<span class="codeline" id="line-978"><code>** &lt;li&gt;[[SQLITE_FCNTL_VFSNAME]]</code></span>
<span class="codeline" id="line-979"><code>** ^The [SQLITE_FCNTL_VFSNAME] opcode can be used to obtain the names of</code></span>
<span class="codeline" id="line-980"><code>** all [VFSes] in the VFS stack.  The names are of all VFS shims and the</code></span>
<span class="codeline" id="line-981"><code>** final bottom-level VFS are written into memory obtained from</code></span>
<span class="codeline" id="line-982"><code>** [sqlite3_malloc()] and the result is stored in the char* variable</code></span>
<span class="codeline" id="line-983"><code>** that the fourth parameter of [sqlite3_file_control()] points to.</code></span>
<span class="codeline" id="line-984"><code>** The caller is responsible for freeing the memory when done.  As with</code></span>
<span class="codeline" id="line-985"><code>** all file-control actions, there is no guarantee that this will actually</code></span>
<span class="codeline" id="line-986"><code>** do anything.  Callers should initialize the char* variable to a NULL</code></span>
<span class="codeline" id="line-987"><code>** pointer in case this file-control is not implemented.  This file-control</code></span>
<span class="codeline" id="line-988"><code>** is intended for diagnostic use only.</code></span>
<span class="codeline" id="line-989"><code>**</code></span>
<span class="codeline" id="line-990"><code>** &lt;li&gt;[[SQLITE_FCNTL_VFS_POINTER]]</code></span>
<span class="codeline" id="line-991"><code>** ^The [SQLITE_FCNTL_VFS_POINTER] opcode finds a pointer to the top-level</code></span>
<span class="codeline" id="line-992"><code>** [VFSes] currently in use.  ^(The argument X in</code></span>
<span class="codeline" id="line-993"><code>** sqlite3_file_control(db,SQLITE_FCNTL_VFS_POINTER,X) must be</code></span>
<span class="codeline" id="line-994"><code>** of type "[sqlite3_vfs] **".  This opcodes will set *X</code></span>
<span class="codeline" id="line-995"><code>** to a pointer to the top-level VFS.)^</code></span>
<span class="codeline" id="line-996"><code>** ^When there are multiple VFS shims in the stack, this opcode finds the</code></span>
<span class="codeline" id="line-997"><code>** upper-most shim only.</code></span>
<span class="codeline" id="line-998"><code>**</code></span>
<span class="codeline" id="line-999"><code>** &lt;li&gt;[[SQLITE_FCNTL_PRAGMA]]</code></span>
<span class="codeline" id="line-1000"><code>** ^Whenever a [PRAGMA] statement is parsed, an [SQLITE_FCNTL_PRAGMA]</code></span>
<span class="codeline" id="line-1001"><code>** file control is sent to the open [sqlite3_file] object corresponding</code></span>
<span class="codeline" id="line-1002"><code>** to the database file to which the pragma statement refers. ^The argument</code></span>
<span class="codeline" id="line-1003"><code>** to the [SQLITE_FCNTL_PRAGMA] file control is an array of</code></span>
<span class="codeline" id="line-1004"><code>** pointers to strings (char**) in which the second element of the array</code></span>
<span class="codeline" id="line-1005"><code>** is the name of the pragma and the third element is the argument to the</code></span>
<span class="codeline" id="line-1006"><code>** pragma or NULL if the pragma has no argument.  ^The handler for an</code></span>
<span class="codeline" id="line-1007"><code>** [SQLITE_FCNTL_PRAGMA] file control can optionally make the first element</code></span>
<span class="codeline" id="line-1008"><code>** of the char** argument point to a string obtained from [sqlite3_mprintf()]</code></span>
<span class="codeline" id="line-1009"><code>** or the equivalent and that string will become the result of the pragma or</code></span>
<span class="codeline" id="line-1010"><code>** the error message if the pragma fails. ^If the</code></span>
<span class="codeline" id="line-1011"><code>** [SQLITE_FCNTL_PRAGMA] file control returns [SQLITE_NOTFOUND], then normal</code></span>
<span class="codeline" id="line-1012"><code>** [PRAGMA] processing continues.  ^If the [SQLITE_FCNTL_PRAGMA]</code></span>
<span class="codeline" id="line-1013"><code>** file control returns [SQLITE_OK], then the parser assumes that the</code></span>
<span class="codeline" id="line-1014"><code>** VFS has handled the PRAGMA itself and the parser generates a no-op</code></span>
<span class="codeline" id="line-1015"><code>** prepared statement if result string is NULL, or that returns a copy</code></span>
<span class="codeline" id="line-1016"><code>** of the result string if the string is non-NULL.</code></span>
<span class="codeline" id="line-1017"><code>** ^If the [SQLITE_FCNTL_PRAGMA] file control returns</code></span>
<span class="codeline" id="line-1018"><code>** any result code other than [SQLITE_OK] or [SQLITE_NOTFOUND], that means</code></span>
<span class="codeline" id="line-1019"><code>** that the VFS encountered an error while handling the [PRAGMA] and the</code></span>
<span class="codeline" id="line-1020"><code>** compilation of the PRAGMA fails with an error.  ^The [SQLITE_FCNTL_PRAGMA]</code></span>
<span class="codeline" id="line-1021"><code>** file control occurs at the beginning of pragma statement analysis and so</code></span>
<span class="codeline" id="line-1022"><code>** it is able to override built-in [PRAGMA] statements.</code></span>
<span class="codeline" id="line-1023"><code>**</code></span>
<span class="codeline" id="line-1024"><code>** &lt;li&gt;[[SQLITE_FCNTL_BUSYHANDLER]]</code></span>
<span class="codeline" id="line-1025"><code>** ^The [SQLITE_FCNTL_BUSYHANDLER]</code></span>
<span class="codeline" id="line-1026"><code>** file-control may be invoked by SQLite on the database file handle</code></span>
<span class="codeline" id="line-1027"><code>** shortly after it is opened in order to provide a custom VFS with access</code></span>
<span class="codeline" id="line-1028"><code>** to the connection's busy-handler callback. The argument is of type (void**)</code></span>
<span class="codeline" id="line-1029"><code>** - an array of two (void *) values. The first (void *) actually points</code></span>
<span class="codeline" id="line-1030"><code>** to a function of type (int (*)(void *)). In order to invoke the connection's</code></span>
<span class="codeline" id="line-1031"><code>** busy-handler, this function should be invoked with the second (void *) in</code></span>
<span class="codeline" id="line-1032"><code>** the array as the only argument. If it returns non-zero, then the operation</code></span>
<span class="codeline" id="line-1033"><code>** should be retried. If it returns zero, the custom VFS should abandon the</code></span>
<span class="codeline" id="line-1034"><code>** current operation.</code></span>
<span class="codeline" id="line-1035"><code>**</code></span>
<span class="codeline" id="line-1036"><code>** &lt;li&gt;[[SQLITE_FCNTL_TEMPFILENAME]]</code></span>
<span class="codeline" id="line-1037"><code>** ^Applications can invoke the [SQLITE_FCNTL_TEMPFILENAME] file-control</code></span>
<span class="codeline" id="line-1038"><code>** to have SQLite generate a</code></span>
<span class="codeline" id="line-1039"><code>** temporary filename using the same algorithm that is followed to generate</code></span>
<span class="codeline" id="line-1040"><code>** temporary filenames for TEMP tables and other internal uses.  The</code></span>
<span class="codeline" id="line-1041"><code>** argument should be a char** which will be filled with the filename</code></span>
<span class="codeline" id="line-1042"><code>** written into memory obtained from [sqlite3_malloc()].  The caller should</code></span>
<span class="codeline" id="line-1043"><code>** invoke [sqlite3_free()] on the result to avoid a memory leak.</code></span>
<span class="codeline" id="line-1044"><code>**</code></span>
<span class="codeline" id="line-1045"><code>** &lt;li&gt;[[SQLITE_FCNTL_MMAP_SIZE]]</code></span>
<span class="codeline" id="line-1046"><code>** The [SQLITE_FCNTL_MMAP_SIZE] file control is used to query or set the</code></span>
<span class="codeline" id="line-1047"><code>** maximum number of bytes that will be used for memory-mapped I/O.</code></span>
<span class="codeline" id="line-1048"><code>** The argument is a pointer to a value of type sqlite3_int64 that</code></span>
<span class="codeline" id="line-1049"><code>** is an advisory maximum number of bytes in the file to memory map.  The</code></span>
<span class="codeline" id="line-1050"><code>** pointer is overwritten with the old value.  The limit is not changed if</code></span>
<span class="codeline" id="line-1051"><code>** the value originally pointed to is negative, and so the current limit</code></span>
<span class="codeline" id="line-1052"><code>** can be queried by passing in a pointer to a negative number.  This</code></span>
<span class="codeline" id="line-1053"><code>** file-control is used internally to implement [PRAGMA mmap_size].</code></span>
<span class="codeline" id="line-1054"><code>**</code></span>
<span class="codeline" id="line-1055"><code>** &lt;li&gt;[[SQLITE_FCNTL_TRACE]]</code></span>
<span class="codeline" id="line-1056"><code>** The [SQLITE_FCNTL_TRACE] file control provides advisory information</code></span>
<span class="codeline" id="line-1057"><code>** to the VFS about what the higher layers of the SQLite stack are doing.</code></span>
<span class="codeline" id="line-1058"><code>** This file control is used by some VFS activity tracing [shims].</code></span>
<span class="codeline" id="line-1059"><code>** The argument is a zero-terminated string.  Higher layers in the</code></span>
<span class="codeline" id="line-1060"><code>** SQLite stack may generate instances of this file control if</code></span>
<span class="codeline" id="line-1061"><code>** the [SQLITE_USE_FCNTL_TRACE] compile-time option is enabled.</code></span>
<span class="codeline" id="line-1062"><code>**</code></span>
<span class="codeline" id="line-1063"><code>** &lt;li&gt;[[SQLITE_FCNTL_HAS_MOVED]]</code></span>
<span class="codeline" id="line-1064"><code>** The [SQLITE_FCNTL_HAS_MOVED] file control interprets its argument as a</code></span>
<span class="codeline" id="line-1065"><code>** pointer to an integer and it writes a boolean into that integer depending</code></span>
<span class="codeline" id="line-1066"><code>** on whether or not the file has been renamed, moved, or deleted since it</code></span>
<span class="codeline" id="line-1067"><code>** was first opened.</code></span>
<span class="codeline" id="line-1068"><code>**</code></span>
<span class="codeline" id="line-1069"><code>** &lt;li&gt;[[SQLITE_FCNTL_WIN32_GET_HANDLE]]</code></span>
<span class="codeline" id="line-1070"><code>** The [SQLITE_FCNTL_WIN32_GET_HANDLE] opcode can be used to obtain the</code></span>
<span class="codeline" id="line-1071"><code>** underlying native file handle associated with a file handle.  This file</code></span>
<span class="codeline" id="line-1072"><code>** control interprets its argument as a pointer to a native file handle and</code></span>
<span class="codeline" id="line-1073"><code>** writes the resulting value there.</code></span>
<span class="codeline" id="line-1074"><code>**</code></span>
<span class="codeline" id="line-1075"><code>** &lt;li&gt;[[SQLITE_FCNTL_WIN32_SET_HANDLE]]</code></span>
<span class="codeline" id="line-1076"><code>** The [SQLITE_FCNTL_WIN32_SET_HANDLE] opcode is used for debugging.  This</code></span>
<span class="codeline" id="line-1077"><code>** opcode causes the xFileControl method to swap the file handle with the one</code></span>
<span class="codeline" id="line-1078"><code>** pointed to by the pArg argument.  This capability is used during testing</code></span>
<span class="codeline" id="line-1079"><code>** and only needs to be supported when SQLITE_TEST is defined.</code></span>
<span class="codeline" id="line-1080"><code>**</code></span>
<span class="codeline" id="line-1081"><code>** &lt;li&gt;[[SQLITE_FCNTL_WAL_BLOCK]]</code></span>
<span class="codeline" id="line-1082"><code>** The [SQLITE_FCNTL_WAL_BLOCK] is a signal to the VFS layer that it might</code></span>
<span class="codeline" id="line-1083"><code>** be advantageous to block on the next WAL lock if the lock is not immediately</code></span>
<span class="codeline" id="line-1084"><code>** available.  The WAL subsystem issues this signal during rare</code></span>
<span class="codeline" id="line-1085"><code>** circumstances in order to fix a problem with priority inversion.</code></span>
<span class="codeline" id="line-1086"><code>** Applications should &lt;em&gt;not&lt;/em&gt; use this file-control.</code></span>
<span class="codeline" id="line-1087"><code>**</code></span>
<span class="codeline" id="line-1088"><code>** &lt;li&gt;[[SQLITE_FCNTL_ZIPVFS]]</code></span>
<span class="codeline" id="line-1089"><code>** The [SQLITE_FCNTL_ZIPVFS] opcode is implemented by zipvfs only. All other</code></span>
<span class="codeline" id="line-1090"><code>** VFS should return SQLITE_NOTFOUND for this opcode.</code></span>
<span class="codeline" id="line-1091"><code>**</code></span>
<span class="codeline" id="line-1092"><code>** &lt;li&gt;[[SQLITE_FCNTL_RBU]]</code></span>
<span class="codeline" id="line-1093"><code>** The [SQLITE_FCNTL_RBU] opcode is implemented by the special VFS used by</code></span>
<span class="codeline" id="line-1094"><code>** the RBU extension only.  All other VFS should return SQLITE_NOTFOUND for</code></span>
<span class="codeline" id="line-1095"><code>** this opcode.</code></span>
<span class="codeline" id="line-1096"><code>**</code></span>
<span class="codeline" id="line-1097"><code>** &lt;li&gt;[[SQLITE_FCNTL_BEGIN_ATOMIC_WRITE]]</code></span>
<span class="codeline" id="line-1098"><code>** If the [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE] opcode returns SQLITE_OK, then</code></span>
<span class="codeline" id="line-1099"><code>** the file descriptor is placed in "batch write mode", which</code></span>
<span class="codeline" id="line-1100"><code>** means all subsequent write operations will be deferred and done</code></span>
<span class="codeline" id="line-1101"><code>** atomically at the next [SQLITE_FCNTL_COMMIT_ATOMIC_WRITE].  Systems</code></span>
<span class="codeline" id="line-1102"><code>** that do not support batch atomic writes will return SQLITE_NOTFOUND.</code></span>
<span class="codeline" id="line-1103"><code>** ^Following a successful SQLITE_FCNTL_BEGIN_ATOMIC_WRITE and prior to</code></span>
<span class="codeline" id="line-1104"><code>** the closing [SQLITE_FCNTL_COMMIT_ATOMIC_WRITE] or</code></span>
<span class="codeline" id="line-1105"><code>** [SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE], SQLite will make</code></span>
<span class="codeline" id="line-1106"><code>** no VFS interface calls on the same [sqlite3_file] file descriptor</code></span>
<span class="codeline" id="line-1107"><code>** except for calls to the xWrite method and the xFileControl method</code></span>
<span class="codeline" id="line-1108"><code>** with [SQLITE_FCNTL_SIZE_HINT].</code></span>
<span class="codeline" id="line-1109"><code>**</code></span>
<span class="codeline" id="line-1110"><code>** &lt;li&gt;[[SQLITE_FCNTL_COMMIT_ATOMIC_WRITE]]</code></span>
<span class="codeline" id="line-1111"><code>** The [SQLITE_FCNTL_COMMIT_ATOMIC_WRITE] opcode causes all write</code></span>
<span class="codeline" id="line-1112"><code>** operations since the previous successful call to</code></span>
<span class="codeline" id="line-1113"><code>** [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE] to be performed atomically.</code></span>
<span class="codeline" id="line-1114"><code>** This file control returns [SQLITE_OK] if and only if the writes were</code></span>
<span class="codeline" id="line-1115"><code>** all performed successfully and have been committed to persistent storage.</code></span>
<span class="codeline" id="line-1116"><code>** ^Regardless of whether or not it is successful, this file control takes</code></span>
<span class="codeline" id="line-1117"><code>** the file descriptor out of batch write mode so that all subsequent</code></span>
<span class="codeline" id="line-1118"><code>** write operations are independent.</code></span>
<span class="codeline" id="line-1119"><code>** ^SQLite will never invoke SQLITE_FCNTL_COMMIT_ATOMIC_WRITE without</code></span>
<span class="codeline" id="line-1120"><code>** a prior successful call to [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE].</code></span>
<span class="codeline" id="line-1121"><code>**</code></span>
<span class="codeline" id="line-1122"><code>** &lt;li&gt;[[SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE]]</code></span>
<span class="codeline" id="line-1123"><code>** The [SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE] opcode causes all write</code></span>
<span class="codeline" id="line-1124"><code>** operations since the previous successful call to</code></span>
<span class="codeline" id="line-1125"><code>** [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE] to be rolled back.</code></span>
<span class="codeline" id="line-1126"><code>** ^This file control takes the file descriptor out of batch write mode</code></span>
<span class="codeline" id="line-1127"><code>** so that all subsequent write operations are independent.</code></span>
<span class="codeline" id="line-1128"><code>** ^SQLite will never invoke SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE without</code></span>
<span class="codeline" id="line-1129"><code>** a prior successful call to [SQLITE_FCNTL_BEGIN_ATOMIC_WRITE].</code></span>
<span class="codeline" id="line-1130"><code>**</code></span>
<span class="codeline" id="line-1131"><code>** &lt;li&gt;[[SQLITE_FCNTL_LOCK_TIMEOUT]]</code></span>
<span class="codeline" id="line-1132"><code>** The [SQLITE_FCNTL_LOCK_TIMEOUT] opcode is used to configure a VFS</code></span>
<span class="codeline" id="line-1133"><code>** to block for up to M milliseconds before failing when attempting to</code></span>
<span class="codeline" id="line-1134"><code>** obtain a file lock using the xLock or xShmLock methods of the VFS.</code></span>
<span class="codeline" id="line-1135"><code>** The parameter is a pointer to a 32-bit signed integer that contains</code></span>
<span class="codeline" id="line-1136"><code>** the value that M is to be set to. Before returning, the 32-bit signed</code></span>
<span class="codeline" id="line-1137"><code>** integer is overwritten with the previous value of M.</code></span>
<span class="codeline" id="line-1138"><code>**</code></span>
<span class="codeline" id="line-1139"><code>** &lt;li&gt;[[SQLITE_FCNTL_DATA_VERSION]]</code></span>
<span class="codeline" id="line-1140"><code>** The [SQLITE_FCNTL_DATA_VERSION] opcode is used to detect changes to</code></span>
<span class="codeline" id="line-1141"><code>** a database file.  The argument is a pointer to a 32-bit unsigned integer.</code></span>
<span class="codeline" id="line-1142"><code>** The "data version" for the pager is written into the pointer.  The</code></span>
<span class="codeline" id="line-1143"><code>** "data version" changes whenever any change occurs to the corresponding</code></span>
<span class="codeline" id="line-1144"><code>** database file, either through SQL statements on the same database</code></span>
<span class="codeline" id="line-1145"><code>** connection or through transactions committed by separate database</code></span>
<span class="codeline" id="line-1146"><code>** connections possibly in other processes. The [sqlite3_total_changes()]</code></span>
<span class="codeline" id="line-1147"><code>** interface can be used to find if any database on the connection has changed,</code></span>
<span class="codeline" id="line-1148"><code>** but that interface responds to changes on TEMP as well as MAIN and does</code></span>
<span class="codeline" id="line-1149"><code>** not provide a mechanism to detect changes to MAIN only.  Also, the</code></span>
<span class="codeline" id="line-1150"><code>** [sqlite3_total_changes()] interface responds to internal changes only and</code></span>
<span class="codeline" id="line-1151"><code>** omits changes made by other database connections.  The</code></span>
<span class="codeline" id="line-1152"><code>** [PRAGMA data_version] command provides a mechanism to detect changes to</code></span>
<span class="codeline" id="line-1153"><code>** a single attached database that occur due to other database connections,</code></span>
<span class="codeline" id="line-1154"><code>** but omits changes implemented by the database connection on which it is</code></span>
<span class="codeline" id="line-1155"><code>** called.  This file control is the only mechanism to detect changes that</code></span>
<span class="codeline" id="line-1156"><code>** happen either internally or externally and that are associated with</code></span>
<span class="codeline" id="line-1157"><code>** a particular attached database.</code></span>
<span class="codeline" id="line-1158"><code>**</code></span>
<span class="codeline" id="line-1159"><code>** &lt;li&gt;[[SQLITE_FCNTL_CKPT_START]]</code></span>
<span class="codeline" id="line-1160"><code>** The [SQLITE_FCNTL_CKPT_START] opcode is invoked from within a checkpoint</code></span>
<span class="codeline" id="line-1161"><code>** in wal mode before the client starts to copy pages from the wal</code></span>
<span class="codeline" id="line-1162"><code>** file to the database file.</code></span>
<span class="codeline" id="line-1163"><code>**</code></span>
<span class="codeline" id="line-1164"><code>** &lt;li&gt;[[SQLITE_FCNTL_CKPT_DONE]]</code></span>
<span class="codeline" id="line-1165"><code>** The [SQLITE_FCNTL_CKPT_DONE] opcode is invoked from within a checkpoint</code></span>
<span class="codeline" id="line-1166"><code>** in wal mode after the client has finished copying pages from the wal</code></span>
<span class="codeline" id="line-1167"><code>** file to the database file, but before the *-shm file is updated to</code></span>
<span class="codeline" id="line-1168"><code>** record the fact that the pages have been checkpointed.</code></span>
<span class="codeline" id="line-1169"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-1170"><code>**</code></span>
<span class="codeline" id="line-1171"><code>** &lt;li&gt;[[SQLITE_FCNTL_EXTERNAL_READER]]</code></span>
<span class="codeline" id="line-1172"><code>** The EXPERIMENTAL [SQLITE_FCNTL_EXTERNAL_READER] opcode is used to detect</code></span>
<span class="codeline" id="line-1173"><code>** whether or not there is a database client in another process with a wal-mode</code></span>
<span class="codeline" id="line-1174"><code>** transaction open on the database or not. It is only available on unix.The</code></span>
<span class="codeline" id="line-1175"><code>** (void*) argument passed with this file-control should be a pointer to a</code></span>
<span class="codeline" id="line-1176"><code>** value of type (int). The integer value is set to 1 if the database is a wal</code></span>
<span class="codeline" id="line-1177"><code>** mode database and there exists at least one client in another process that</code></span>
<span class="codeline" id="line-1178"><code>** currently has an SQL transaction open on the database. It is set to 0 if</code></span>
<span class="codeline" id="line-1179"><code>** the database is not a wal-mode db, or if there is no such connection in any</code></span>
<span class="codeline" id="line-1180"><code>** other process. This opcode cannot be used to detect transactions opened</code></span>
<span class="codeline" id="line-1181"><code>** by clients within the current process, only within other processes.</code></span>
<span class="codeline" id="line-1182"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-1183"><code>**</code></span>
<span class="codeline" id="line-1184"><code>** &lt;li&gt;[[SQLITE_FCNTL_CKSM_FILE]]</code></span>
<span class="codeline" id="line-1185"><code>** Used by the cksmvfs VFS module only.</code></span>
<span class="codeline" id="line-1186"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-1187"><code>*/</code></span>
<span class="codeline" id="line-1188"><code>#define SQLITE_FCNTL_LOCKSTATE               1</code></span>
<span class="codeline" id="line-1189"><code>#define SQLITE_FCNTL_GET_LOCKPROXYFILE       2</code></span>
<span class="codeline" id="line-1190"><code>#define SQLITE_FCNTL_SET_LOCKPROXYFILE       3</code></span>
<span class="codeline" id="line-1191"><code>#define SQLITE_FCNTL_LAST_ERRNO              4</code></span>
<span class="codeline" id="line-1192"><code>#define SQLITE_FCNTL_SIZE_HINT               5</code></span>
<span class="codeline" id="line-1193"><code>#define SQLITE_FCNTL_CHUNK_SIZE              6</code></span>
<span class="codeline" id="line-1194"><code>#define SQLITE_FCNTL_FILE_POINTER            7</code></span>
<span class="codeline" id="line-1195"><code>#define SQLITE_FCNTL_SYNC_OMITTED            8</code></span>
<span class="codeline" id="line-1196"><code>#define SQLITE_FCNTL_WIN32_AV_RETRY          9</code></span>
<span class="codeline" id="line-1197"><code>#define SQLITE_FCNTL_PERSIST_WAL            10</code></span>
<span class="codeline" id="line-1198"><code>#define SQLITE_FCNTL_OVERWRITE              11</code></span>
<span class="codeline" id="line-1199"><code>#define SQLITE_FCNTL_VFSNAME                12</code></span>
<span class="codeline" id="line-1200"><code>#define SQLITE_FCNTL_POWERSAFE_OVERWRITE    13</code></span>
<span class="codeline" id="line-1201"><code>#define SQLITE_FCNTL_PRAGMA                 14</code></span>
<span class="codeline" id="line-1202"><code>#define SQLITE_FCNTL_BUSYHANDLER            15</code></span>
<span class="codeline" id="line-1203"><code>#define SQLITE_FCNTL_TEMPFILENAME           16</code></span>
<span class="codeline" id="line-1204"><code>#define SQLITE_FCNTL_MMAP_SIZE              18</code></span>
<span class="codeline" id="line-1205"><code>#define SQLITE_FCNTL_TRACE                  19</code></span>
<span class="codeline" id="line-1206"><code>#define SQLITE_FCNTL_HAS_MOVED              20</code></span>
<span class="codeline" id="line-1207"><code>#define SQLITE_FCNTL_SYNC                   21</code></span>
<span class="codeline" id="line-1208"><code>#define SQLITE_FCNTL_COMMIT_PHASETWO        22</code></span>
<span class="codeline" id="line-1209"><code>#define SQLITE_FCNTL_WIN32_SET_HANDLE       23</code></span>
<span class="codeline" id="line-1210"><code>#define SQLITE_FCNTL_WAL_BLOCK              24</code></span>
<span class="codeline" id="line-1211"><code>#define SQLITE_FCNTL_ZIPVFS                 25</code></span>
<span class="codeline" id="line-1212"><code>#define SQLITE_FCNTL_RBU                    26</code></span>
<span class="codeline" id="line-1213"><code>#define SQLITE_FCNTL_VFS_POINTER            27</code></span>
<span class="codeline" id="line-1214"><code>#define SQLITE_FCNTL_JOURNAL_POINTER        28</code></span>
<span class="codeline" id="line-1215"><code>#define SQLITE_FCNTL_WIN32_GET_HANDLE       29</code></span>
<span class="codeline" id="line-1216"><code>#define SQLITE_FCNTL_PDB                    30</code></span>
<span class="codeline" id="line-1217"><code>#define SQLITE_FCNTL_BEGIN_ATOMIC_WRITE     31</code></span>
<span class="codeline" id="line-1218"><code>#define SQLITE_FCNTL_COMMIT_ATOMIC_WRITE    32</code></span>
<span class="codeline" id="line-1219"><code>#define SQLITE_FCNTL_ROLLBACK_ATOMIC_WRITE  33</code></span>
<span class="codeline" id="line-1220"><code>#define SQLITE_FCNTL_LOCK_TIMEOUT           34</code></span>
<span class="codeline" id="line-1221"><code>#define SQLITE_FCNTL_DATA_VERSION           35</code></span>
<span class="codeline" id="line-1222"><code>#define SQLITE_FCNTL_SIZE_LIMIT             36</code></span>
<span class="codeline" id="line-1223"><code>#define SQLITE_FCNTL_CKPT_DONE              37</code></span>
<span class="codeline" id="line-1224"><code>#define SQLITE_FCNTL_RESERVE_BYTES          38</code></span>
<span class="codeline" id="line-1225"><code>#define SQLITE_FCNTL_CKPT_START             39</code></span>
<span class="codeline" id="line-1226"><code>#define SQLITE_FCNTL_EXTERNAL_READER        40</code></span>
<span class="codeline" id="line-1227"><code>#define SQLITE_FCNTL_CKSM_FILE              41</code></span>
<span class="codeline" id="line-1228"><code></code></span>
<span class="codeline" id="line-1229"><code>/* deprecated names */</code></span>
<span class="codeline" id="line-1230"><code>#define SQLITE_GET_LOCKPROXYFILE      SQLITE_FCNTL_GET_LOCKPROXYFILE</code></span>
<span class="codeline" id="line-1231"><code>#define SQLITE_SET_LOCKPROXYFILE      SQLITE_FCNTL_SET_LOCKPROXYFILE</code></span>
<span class="codeline" id="line-1232"><code>#define SQLITE_LAST_ERRNO             SQLITE_FCNTL_LAST_ERRNO</code></span>
<span class="codeline" id="line-1233"><code></code></span>
<span class="codeline" id="line-1234"><code></code></span>
<span class="codeline" id="line-1235"><code>/*</code></span>
<span class="codeline" id="line-1236"><code>** CAPI3REF: Mutex Handle</code></span>
<span class="codeline" id="line-1237"><code>**</code></span>
<span class="codeline" id="line-1238"><code>** The mutex module within SQLite defines [sqlite3_mutex] to be an</code></span>
<span class="codeline" id="line-1239"><code>** abstract type for a mutex object.  The SQLite core never looks</code></span>
<span class="codeline" id="line-1240"><code>** at the internal representation of an [sqlite3_mutex].  It only</code></span>
<span class="codeline" id="line-1241"><code>** deals with pointers to the [sqlite3_mutex] object.</code></span>
<span class="codeline" id="line-1242"><code>**</code></span>
<span class="codeline" id="line-1243"><code>** Mutexes are created using [sqlite3_mutex_alloc()].</code></span>
<span class="codeline" id="line-1244"><code>*/</code></span>
<span class="codeline" id="line-1245"><code>typedef struct sqlite3_mutex sqlite3_mutex;</code></span>
<span class="codeline" id="line-1246"><code></code></span>
<span class="codeline" id="line-1247"><code>/*</code></span>
<span class="codeline" id="line-1248"><code>** CAPI3REF: Loadable Extension Thunk</code></span>
<span class="codeline" id="line-1249"><code>**</code></span>
<span class="codeline" id="line-1250"><code>** A pointer to the opaque sqlite3_api_routines structure is passed as</code></span>
<span class="codeline" id="line-1251"><code>** the third parameter to entry points of [loadable extensions].  This</code></span>
<span class="codeline" id="line-1252"><code>** structure must be typedefed in order to work around compiler warnings</code></span>
<span class="codeline" id="line-1253"><code>** on some platforms.</code></span>
<span class="codeline" id="line-1254"><code>*/</code></span>
<span class="codeline" id="line-1255"><code>typedef struct sqlite3_api_routines sqlite3_api_routines;</code></span>
<span class="codeline" id="line-1256"><code></code></span>
<span class="codeline" id="line-1257"><code>/*</code></span>
<span class="codeline" id="line-1258"><code>** CAPI3REF: OS Interface Object</code></span>
<span class="codeline" id="line-1259"><code>**</code></span>
<span class="codeline" id="line-1260"><code>** An instance of the sqlite3_vfs object defines the interface between</code></span>
<span class="codeline" id="line-1261"><code>** the SQLite core and the underlying operating system.  The "vfs"</code></span>
<span class="codeline" id="line-1262"><code>** in the name of the object stands for "virtual file system".  See</code></span>
<span class="codeline" id="line-1263"><code>** the [VFS | VFS documentation] for further information.</code></span>
<span class="codeline" id="line-1264"><code>**</code></span>
<span class="codeline" id="line-1265"><code>** The VFS interface is sometimes extended by adding new methods onto</code></span>
<span class="codeline" id="line-1266"><code>** the end.  Each time such an extension occurs, the iVersion field</code></span>
<span class="codeline" id="line-1267"><code>** is incremented.  The iVersion value started out as 1 in</code></span>
<span class="codeline" id="line-1268"><code>** SQLite [version 3.5.0] on [dateof:3.5.0], then increased to 2</code></span>
<span class="codeline" id="line-1269"><code>** with SQLite [version 3.7.0] on [dateof:3.7.0], and then increased</code></span>
<span class="codeline" id="line-1270"><code>** to 3 with SQLite [version 3.7.6] on [dateof:3.7.6].  Additional fields</code></span>
<span class="codeline" id="line-1271"><code>** may be appended to the sqlite3_vfs object and the iVersion value</code></span>
<span class="codeline" id="line-1272"><code>** may increase again in future versions of SQLite.</code></span>
<span class="codeline" id="line-1273"><code>** Note that due to an oversight, the structure</code></span>
<span class="codeline" id="line-1274"><code>** of the sqlite3_vfs object changed in the transition from</code></span>
<span class="codeline" id="line-1275"><code>** SQLite [version 3.5.9] to [version 3.6.0] on [dateof:3.6.0]</code></span>
<span class="codeline" id="line-1276"><code>** and yet the iVersion field was not increased.</code></span>
<span class="codeline" id="line-1277"><code>**</code></span>
<span class="codeline" id="line-1278"><code>** The szOsFile field is the size of the subclassed [sqlite3_file]</code></span>
<span class="codeline" id="line-1279"><code>** structure used by this VFS.  mxPathname is the maximum length of</code></span>
<span class="codeline" id="line-1280"><code>** a pathname in this VFS.</code></span>
<span class="codeline" id="line-1281"><code>**</code></span>
<span class="codeline" id="line-1282"><code>** Registered sqlite3_vfs objects are kept on a linked list formed by</code></span>
<span class="codeline" id="line-1283"><code>** the pNext pointer.  The [sqlite3_vfs_register()]</code></span>
<span class="codeline" id="line-1284"><code>** and [sqlite3_vfs_unregister()] interfaces manage this list</code></span>
<span class="codeline" id="line-1285"><code>** in a thread-safe way.  The [sqlite3_vfs_find()] interface</code></span>
<span class="codeline" id="line-1286"><code>** searches the list.  Neither the application code nor the VFS</code></span>
<span class="codeline" id="line-1287"><code>** implementation should use the pNext pointer.</code></span>
<span class="codeline" id="line-1288"><code>**</code></span>
<span class="codeline" id="line-1289"><code>** The pNext field is the only field in the sqlite3_vfs</code></span>
<span class="codeline" id="line-1290"><code>** structure that SQLite will ever modify.  SQLite will only access</code></span>
<span class="codeline" id="line-1291"><code>** or modify this field while holding a particular static mutex.</code></span>
<span class="codeline" id="line-1292"><code>** The application should never modify anything within the sqlite3_vfs</code></span>
<span class="codeline" id="line-1293"><code>** object once the object has been registered.</code></span>
<span class="codeline" id="line-1294"><code>**</code></span>
<span class="codeline" id="line-1295"><code>** The zName field holds the name of the VFS module.  The name must</code></span>
<span class="codeline" id="line-1296"><code>** be unique across all VFS modules.</code></span>
<span class="codeline" id="line-1297"><code>**</code></span>
<span class="codeline" id="line-1298"><code>** [[sqlite3_vfs.xOpen]]</code></span>
<span class="codeline" id="line-1299"><code>** ^SQLite guarantees that the zFilename parameter to xOpen</code></span>
<span class="codeline" id="line-1300"><code>** is either a NULL pointer or string obtained</code></span>
<span class="codeline" id="line-1301"><code>** from xFullPathname() with an optional suffix added.</code></span>
<span class="codeline" id="line-1302"><code>** ^If a suffix is added to the zFilename parameter, it will</code></span>
<span class="codeline" id="line-1303"><code>** consist of a single "-" character followed by no more than</code></span>
<span class="codeline" id="line-1304"><code>** 11 alphanumeric and/or "-" characters.</code></span>
<span class="codeline" id="line-1305"><code>** ^SQLite further guarantees that</code></span>
<span class="codeline" id="line-1306"><code>** the string will be valid and unchanged until xClose() is</code></span>
<span class="codeline" id="line-1307"><code>** called. Because of the previous sentence,</code></span>
<span class="codeline" id="line-1308"><code>** the [sqlite3_file] can safely store a pointer to the</code></span>
<span class="codeline" id="line-1309"><code>** filename if it needs to remember the filename for some reason.</code></span>
<span class="codeline" id="line-1310"><code>** If the zFilename parameter to xOpen is a NULL pointer then xOpen</code></span>
<span class="codeline" id="line-1311"><code>** must invent its own temporary name for the file.  ^Whenever the</code></span>
<span class="codeline" id="line-1312"><code>** xFilename parameter is NULL it will also be the case that the</code></span>
<span class="codeline" id="line-1313"><code>** flags parameter will include [SQLITE_OPEN_DELETEONCLOSE].</code></span>
<span class="codeline" id="line-1314"><code>**</code></span>
<span class="codeline" id="line-1315"><code>** The flags argument to xOpen() includes all bits set in</code></span>
<span class="codeline" id="line-1316"><code>** the flags argument to [sqlite3_open_v2()].  Or if [sqlite3_open()]</code></span>
<span class="codeline" id="line-1317"><code>** or [sqlite3_open16()] is used, then flags includes at least</code></span>
<span class="codeline" id="line-1318"><code>** [SQLITE_OPEN_READWRITE] | [SQLITE_OPEN_CREATE].</code></span>
<span class="codeline" id="line-1319"><code>** If xOpen() opens a file read-only then it sets *pOutFlags to</code></span>
<span class="codeline" id="line-1320"><code>** include [SQLITE_OPEN_READONLY].  Other bits in *pOutFlags may be set.</code></span>
<span class="codeline" id="line-1321"><code>**</code></span>
<span class="codeline" id="line-1322"><code>** ^(SQLite will also add one of the following flags to the xOpen()</code></span>
<span class="codeline" id="line-1323"><code>** call, depending on the object being opened:</code></span>
<span class="codeline" id="line-1324"><code>**</code></span>
<span class="codeline" id="line-1325"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-1326"><code>** &lt;li&gt;  [SQLITE_OPEN_MAIN_DB]</code></span>
<span class="codeline" id="line-1327"><code>** &lt;li&gt;  [SQLITE_OPEN_MAIN_JOURNAL]</code></span>
<span class="codeline" id="line-1328"><code>** &lt;li&gt;  [SQLITE_OPEN_TEMP_DB]</code></span>
<span class="codeline" id="line-1329"><code>** &lt;li&gt;  [SQLITE_OPEN_TEMP_JOURNAL]</code></span>
<span class="codeline" id="line-1330"><code>** &lt;li&gt;  [SQLITE_OPEN_TRANSIENT_DB]</code></span>
<span class="codeline" id="line-1331"><code>** &lt;li&gt;  [SQLITE_OPEN_SUBJOURNAL]</code></span>
<span class="codeline" id="line-1332"><code>** &lt;li&gt;  [SQLITE_OPEN_SUPER_JOURNAL]</code></span>
<span class="codeline" id="line-1333"><code>** &lt;li&gt;  [SQLITE_OPEN_WAL]</code></span>
<span class="codeline" id="line-1334"><code>** &lt;/ul&gt;)^</code></span>
<span class="codeline" id="line-1335"><code>**</code></span>
<span class="codeline" id="line-1336"><code>** The file I/O implementation can use the object type flags to</code></span>
<span class="codeline" id="line-1337"><code>** change the way it deals with files.  For example, an application</code></span>
<span class="codeline" id="line-1338"><code>** that does not care about crash recovery or rollback might make</code></span>
<span class="codeline" id="line-1339"><code>** the open of a journal file a no-op.  Writes to this journal would</code></span>
<span class="codeline" id="line-1340"><code>** also be no-ops, and any attempt to read the journal would return</code></span>
<span class="codeline" id="line-1341"><code>** SQLITE_IOERR.  Or the implementation might recognize that a database</code></span>
<span class="codeline" id="line-1342"><code>** file will be doing page-aligned sector reads and writes in a random</code></span>
<span class="codeline" id="line-1343"><code>** order and set up its I/O subsystem accordingly.</code></span>
<span class="codeline" id="line-1344"><code>**</code></span>
<span class="codeline" id="line-1345"><code>** SQLite might also add one of the following flags to the xOpen method:</code></span>
<span class="codeline" id="line-1346"><code>**</code></span>
<span class="codeline" id="line-1347"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-1348"><code>** &lt;li&gt; [SQLITE_OPEN_DELETEONCLOSE]</code></span>
<span class="codeline" id="line-1349"><code>** &lt;li&gt; [SQLITE_OPEN_EXCLUSIVE]</code></span>
<span class="codeline" id="line-1350"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-1351"><code>**</code></span>
<span class="codeline" id="line-1352"><code>** The [SQLITE_OPEN_DELETEONCLOSE] flag means the file should be</code></span>
<span class="codeline" id="line-1353"><code>** deleted when it is closed.  ^The [SQLITE_OPEN_DELETEONCLOSE]</code></span>
<span class="codeline" id="line-1354"><code>** will be set for TEMP databases and their journals, transient</code></span>
<span class="codeline" id="line-1355"><code>** databases, and subjournals.</code></span>
<span class="codeline" id="line-1356"><code>**</code></span>
<span class="codeline" id="line-1357"><code>** ^The [SQLITE_OPEN_EXCLUSIVE] flag is always used in conjunction</code></span>
<span class="codeline" id="line-1358"><code>** with the [SQLITE_OPEN_CREATE] flag, which are both directly</code></span>
<span class="codeline" id="line-1359"><code>** analogous to the O_EXCL and O_CREAT flags of the POSIX open()</code></span>
<span class="codeline" id="line-1360"><code>** API.  The SQLITE_OPEN_EXCLUSIVE flag, when paired with the</code></span>
<span class="codeline" id="line-1361"><code>** SQLITE_OPEN_CREATE, is used to indicate that file should always</code></span>
<span class="codeline" id="line-1362"><code>** be created, and that it is an error if it already exists.</code></span>
<span class="codeline" id="line-1363"><code>** It is &lt;i&gt;not&lt;/i&gt; used to indicate the file should be opened</code></span>
<span class="codeline" id="line-1364"><code>** for exclusive access.</code></span>
<span class="codeline" id="line-1365"><code>**</code></span>
<span class="codeline" id="line-1366"><code>** ^At least szOsFile bytes of memory are allocated by SQLite</code></span>
<span class="codeline" id="line-1367"><code>** to hold the [sqlite3_file] structure passed as the third</code></span>
<span class="codeline" id="line-1368"><code>** argument to xOpen.  The xOpen method does not have to</code></span>
<span class="codeline" id="line-1369"><code>** allocate the structure; it should just fill it in.  Note that</code></span>
<span class="codeline" id="line-1370"><code>** the xOpen method must set the sqlite3_file.pMethods to either</code></span>
<span class="codeline" id="line-1371"><code>** a valid [sqlite3_io_methods] object or to NULL.  xOpen must do</code></span>
<span class="codeline" id="line-1372"><code>** this even if the open fails.  SQLite expects that the sqlite3_file.pMethods</code></span>
<span class="codeline" id="line-1373"><code>** element will be valid after xOpen returns regardless of the success</code></span>
<span class="codeline" id="line-1374"><code>** or failure of the xOpen call.</code></span>
<span class="codeline" id="line-1375"><code>**</code></span>
<span class="codeline" id="line-1376"><code>** [[sqlite3_vfs.xAccess]]</code></span>
<span class="codeline" id="line-1377"><code>** ^The flags argument to xAccess() may be [SQLITE_ACCESS_EXISTS]</code></span>
<span class="codeline" id="line-1378"><code>** to test for the existence of a file, or [SQLITE_ACCESS_READWRITE] to</code></span>
<span class="codeline" id="line-1379"><code>** test whether a file is readable and writable, or [SQLITE_ACCESS_READ]</code></span>
<span class="codeline" id="line-1380"><code>** to test whether a file is at least readable.  The SQLITE_ACCESS_READ</code></span>
<span class="codeline" id="line-1381"><code>** flag is never actually used and is not implemented in the built-in</code></span>
<span class="codeline" id="line-1382"><code>** VFSes of SQLite.  The file is named by the second argument and can be a</code></span>
<span class="codeline" id="line-1383"><code>** directory. The xAccess method returns [SQLITE_OK] on success or some</code></span>
<span class="codeline" id="line-1384"><code>** non-zero error code if there is an I/O error or if the name of</code></span>
<span class="codeline" id="line-1385"><code>** the file given in the second argument is illegal.  If SQLITE_OK</code></span>
<span class="codeline" id="line-1386"><code>** is returned, then non-zero or zero is written into *pResOut to indicate</code></span>
<span class="codeline" id="line-1387"><code>** whether or not the file is accessible.</code></span>
<span class="codeline" id="line-1388"><code>**</code></span>
<span class="codeline" id="line-1389"><code>** ^SQLite will always allocate at least mxPathname+1 bytes for the</code></span>
<span class="codeline" id="line-1390"><code>** output buffer xFullPathname.  The exact size of the output buffer</code></span>
<span class="codeline" id="line-1391"><code>** is also passed as a parameter to both  methods. If the output buffer</code></span>
<span class="codeline" id="line-1392"><code>** is not large enough, [SQLITE_CANTOPEN] should be returned. Since this is</code></span>
<span class="codeline" id="line-1393"><code>** handled as a fatal error by SQLite, vfs implementations should endeavor</code></span>
<span class="codeline" id="line-1394"><code>** to prevent this by setting mxPathname to a sufficiently large value.</code></span>
<span class="codeline" id="line-1395"><code>**</code></span>
<span class="codeline" id="line-1396"><code>** The xRandomness(), xSleep(), xCurrentTime(), and xCurrentTimeInt64()</code></span>
<span class="codeline" id="line-1397"><code>** interfaces are not strictly a part of the filesystem, but they are</code></span>
<span class="codeline" id="line-1398"><code>** included in the VFS structure for completeness.</code></span>
<span class="codeline" id="line-1399"><code>** The xRandomness() function attempts to return nBytes bytes</code></span>
<span class="codeline" id="line-1400"><code>** of good-quality randomness into zOut.  The return value is</code></span>
<span class="codeline" id="line-1401"><code>** the actual number of bytes of randomness obtained.</code></span>
<span class="codeline" id="line-1402"><code>** The xSleep() method causes the calling thread to sleep for at</code></span>
<span class="codeline" id="line-1403"><code>** least the number of microseconds given.  ^The xCurrentTime()</code></span>
<span class="codeline" id="line-1404"><code>** method returns a Julian Day Number for the current date and time as</code></span>
<span class="codeline" id="line-1405"><code>** a floating point value.</code></span>
<span class="codeline" id="line-1406"><code>** ^The xCurrentTimeInt64() method returns, as an integer, the Julian</code></span>
<span class="codeline" id="line-1407"><code>** Day Number multiplied by 86400000 (the number of milliseconds in</code></span>
<span class="codeline" id="line-1408"><code>** a 24-hour day).</code></span>
<span class="codeline" id="line-1409"><code>** ^SQLite will use the xCurrentTimeInt64() method to get the current</code></span>
<span class="codeline" id="line-1410"><code>** date and time if that method is available (if iVersion is 2 or</code></span>
<span class="codeline" id="line-1411"><code>** greater and the function pointer is not NULL) and will fall back</code></span>
<span class="codeline" id="line-1412"><code>** to xCurrentTime() if xCurrentTimeInt64() is unavailable.</code></span>
<span class="codeline" id="line-1413"><code>**</code></span>
<span class="codeline" id="line-1414"><code>** ^The xSetSystemCall(), xGetSystemCall(), and xNestSystemCall() interfaces</code></span>
<span class="codeline" id="line-1415"><code>** are not used by the SQLite core.  These optional interfaces are provided</code></span>
<span class="codeline" id="line-1416"><code>** by some VFSes to facilitate testing of the VFS code. By overriding</code></span>
<span class="codeline" id="line-1417"><code>** system calls with functions under its control, a test program can</code></span>
<span class="codeline" id="line-1418"><code>** simulate faults and error conditions that would otherwise be difficult</code></span>
<span class="codeline" id="line-1419"><code>** or impossible to induce.  The set of system calls that can be overridden</code></span>
<span class="codeline" id="line-1420"><code>** varies from one VFS to another, and from one version of the same VFS to the</code></span>
<span class="codeline" id="line-1421"><code>** next.  Applications that use these interfaces must be prepared for any</code></span>
<span class="codeline" id="line-1422"><code>** or all of these interfaces to be NULL or for their behavior to change</code></span>
<span class="codeline" id="line-1423"><code>** from one release to the next.  Applications must not attempt to access</code></span>
<span class="codeline" id="line-1424"><code>** any of these methods if the iVersion of the VFS is less than 3.</code></span>
<span class="codeline" id="line-1425"><code>*/</code></span>
<span class="codeline" id="line-1426"><code>typedef struct sqlite3_vfs sqlite3_vfs;</code></span>
<span class="codeline" id="line-1427"><code>typedef void (*sqlite3_syscall_ptr)(void);</code></span>
<span class="codeline" id="line-1428"><code>struct sqlite3_vfs {</code></span>
<span class="codeline" id="line-1429"><code>  int iVersion;            /* Structure version number (currently 3) */</code></span>
<span class="codeline" id="line-1430"><code>  int szOsFile;            /* Size of subclassed sqlite3_file */</code></span>
<span class="codeline" id="line-1431"><code>  int mxPathname;          /* Maximum file pathname length */</code></span>
<span class="codeline" id="line-1432"><code>  sqlite3_vfs *pNext;      /* Next registered VFS */</code></span>
<span class="codeline" id="line-1433"><code>  const char *zName;       /* Name of this virtual file system */</code></span>
<span class="codeline" id="line-1434"><code>  void *pAppData;          /* Pointer to application-specific data */</code></span>
<span class="codeline" id="line-1435"><code>  int (*xOpen)(sqlite3_vfs*, const char *zName, sqlite3_file*,</code></span>
<span class="codeline" id="line-1436"><code>               int flags, int *pOutFlags);</code></span>
<span class="codeline" id="line-1437"><code>  int (*xDelete)(sqlite3_vfs*, const char *zName, int syncDir);</code></span>
<span class="codeline" id="line-1438"><code>  int (*xAccess)(sqlite3_vfs*, const char *zName, int flags, int *pResOut);</code></span>
<span class="codeline" id="line-1439"><code>  int (*xFullPathname)(sqlite3_vfs*, const char *zName, int nOut, char *zOut);</code></span>
<span class="codeline" id="line-1440"><code>  void *(*xDlOpen)(sqlite3_vfs*, const char *zFilename);</code></span>
<span class="codeline" id="line-1441"><code>  void (*xDlError)(sqlite3_vfs*, int nByte, char *zErrMsg);</code></span>
<span class="codeline" id="line-1442"><code>  void (*(*xDlSym)(sqlite3_vfs*,void*, const char *zSymbol))(void);</code></span>
<span class="codeline" id="line-1443"><code>  void (*xDlClose)(sqlite3_vfs*, void*);</code></span>
<span class="codeline" id="line-1444"><code>  int (*xRandomness)(sqlite3_vfs*, int nByte, char *zOut);</code></span>
<span class="codeline" id="line-1445"><code>  int (*xSleep)(sqlite3_vfs*, int microseconds);</code></span>
<span class="codeline" id="line-1446"><code>  int (*xCurrentTime)(sqlite3_vfs*, double*);</code></span>
<span class="codeline" id="line-1447"><code>  int (*xGetLastError)(sqlite3_vfs*, int, char *);</code></span>
<span class="codeline" id="line-1448"><code>  /*</code></span>
<span class="codeline" id="line-1449"><code>  ** The methods above are in version 1 of the sqlite_vfs object</code></span>
<span class="codeline" id="line-1450"><code>  ** definition.  Those that follow are added in version 2 or later</code></span>
<span class="codeline" id="line-1451"><code>  */</code></span>
<span class="codeline" id="line-1452"><code>  int (*xCurrentTimeInt64)(sqlite3_vfs*, sqlite3_int64*);</code></span>
<span class="codeline" id="line-1453"><code>  /*</code></span>
<span class="codeline" id="line-1454"><code>  ** The methods above are in versions 1 and 2 of the sqlite_vfs object.</code></span>
<span class="codeline" id="line-1455"><code>  ** Those below are for version 3 and greater.</code></span>
<span class="codeline" id="line-1456"><code>  */</code></span>
<span class="codeline" id="line-1457"><code>  int (*xSetSystemCall)(sqlite3_vfs*, const char *zName, sqlite3_syscall_ptr);</code></span>
<span class="codeline" id="line-1458"><code>  sqlite3_syscall_ptr (*xGetSystemCall)(sqlite3_vfs*, const char *zName);</code></span>
<span class="codeline" id="line-1459"><code>  const char *(*xNextSystemCall)(sqlite3_vfs*, const char *zName);</code></span>
<span class="codeline" id="line-1460"><code>  /*</code></span>
<span class="codeline" id="line-1461"><code>  ** The methods above are in versions 1 through 3 of the sqlite_vfs object.</code></span>
<span class="codeline" id="line-1462"><code>  ** New fields may be appended in future versions.  The iVersion</code></span>
<span class="codeline" id="line-1463"><code>  ** value will increment whenever this happens.</code></span>
<span class="codeline" id="line-1464"><code>  */</code></span>
<span class="codeline" id="line-1465"><code>};</code></span>
<span class="codeline" id="line-1466"><code></code></span>
<span class="codeline" id="line-1467"><code>/*</code></span>
<span class="codeline" id="line-1468"><code>** CAPI3REF: Flags for the xAccess VFS method</code></span>
<span class="codeline" id="line-1469"><code>**</code></span>
<span class="codeline" id="line-1470"><code>** These integer constants can be used as the third parameter to</code></span>
<span class="codeline" id="line-1471"><code>** the xAccess method of an [sqlite3_vfs] object.  They determine</code></span>
<span class="codeline" id="line-1472"><code>** what kind of permissions the xAccess method is looking for.</code></span>
<span class="codeline" id="line-1473"><code>** With SQLITE_ACCESS_EXISTS, the xAccess method</code></span>
<span class="codeline" id="line-1474"><code>** simply checks whether the file exists.</code></span>
<span class="codeline" id="line-1475"><code>** With SQLITE_ACCESS_READWRITE, the xAccess method</code></span>
<span class="codeline" id="line-1476"><code>** checks whether the named directory is both readable and writable</code></span>
<span class="codeline" id="line-1477"><code>** (in other words, if files can be added, removed, and renamed within</code></span>
<span class="codeline" id="line-1478"><code>** the directory).</code></span>
<span class="codeline" id="line-1479"><code>** The SQLITE_ACCESS_READWRITE constant is currently used only by the</code></span>
<span class="codeline" id="line-1480"><code>** [temp_store_directory pragma], though this could change in a future</code></span>
<span class="codeline" id="line-1481"><code>** release of SQLite.</code></span>
<span class="codeline" id="line-1482"><code>** With SQLITE_ACCESS_READ, the xAccess method</code></span>
<span class="codeline" id="line-1483"><code>** checks whether the file is readable.  The SQLITE_ACCESS_READ constant is</code></span>
<span class="codeline" id="line-1484"><code>** currently unused, though it might be used in a future release of</code></span>
<span class="codeline" id="line-1485"><code>** SQLite.</code></span>
<span class="codeline" id="line-1486"><code>*/</code></span>
<span class="codeline" id="line-1487"><code>#define SQLITE_ACCESS_EXISTS    0</code></span>
<span class="codeline" id="line-1488"><code>#define SQLITE_ACCESS_READWRITE 1   /* Used by PRAGMA temp_store_directory */</code></span>
<span class="codeline" id="line-1489"><code>#define SQLITE_ACCESS_READ      2   /* Unused */</code></span>
<span class="codeline" id="line-1490"><code></code></span>
<span class="codeline" id="line-1491"><code>/*</code></span>
<span class="codeline" id="line-1492"><code>** CAPI3REF: Flags for the xShmLock VFS method</code></span>
<span class="codeline" id="line-1493"><code>**</code></span>
<span class="codeline" id="line-1494"><code>** These integer constants define the various locking operations</code></span>
<span class="codeline" id="line-1495"><code>** allowed by the xShmLock method of [sqlite3_io_methods].  The</code></span>
<span class="codeline" id="line-1496"><code>** following are the only legal combinations of flags to the</code></span>
<span class="codeline" id="line-1497"><code>** xShmLock method:</code></span>
<span class="codeline" id="line-1498"><code>**</code></span>
<span class="codeline" id="line-1499"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-1500"><code>** &lt;li&gt;  SQLITE_SHM_LOCK | SQLITE_SHM_SHARED</code></span>
<span class="codeline" id="line-1501"><code>** &lt;li&gt;  SQLITE_SHM_LOCK | SQLITE_SHM_EXCLUSIVE</code></span>
<span class="codeline" id="line-1502"><code>** &lt;li&gt;  SQLITE_SHM_UNLOCK | SQLITE_SHM_SHARED</code></span>
<span class="codeline" id="line-1503"><code>** &lt;li&gt;  SQLITE_SHM_UNLOCK | SQLITE_SHM_EXCLUSIVE</code></span>
<span class="codeline" id="line-1504"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-1505"><code>**</code></span>
<span class="codeline" id="line-1506"><code>** When unlocking, the same SHARED or EXCLUSIVE flag must be supplied as</code></span>
<span class="codeline" id="line-1507"><code>** was given on the corresponding lock.</code></span>
<span class="codeline" id="line-1508"><code>**</code></span>
<span class="codeline" id="line-1509"><code>** The xShmLock method can transition between unlocked and SHARED or</code></span>
<span class="codeline" id="line-1510"><code>** between unlocked and EXCLUSIVE.  It cannot transition between SHARED</code></span>
<span class="codeline" id="line-1511"><code>** and EXCLUSIVE.</code></span>
<span class="codeline" id="line-1512"><code>*/</code></span>
<span class="codeline" id="line-1513"><code>#define SQLITE_SHM_UNLOCK       1</code></span>
<span class="codeline" id="line-1514"><code>#define SQLITE_SHM_LOCK         2</code></span>
<span class="codeline" id="line-1515"><code>#define SQLITE_SHM_SHARED       4</code></span>
<span class="codeline" id="line-1516"><code>#define SQLITE_SHM_EXCLUSIVE    8</code></span>
<span class="codeline" id="line-1517"><code></code></span>
<span class="codeline" id="line-1518"><code>/*</code></span>
<span class="codeline" id="line-1519"><code>** CAPI3REF: Maximum xShmLock index</code></span>
<span class="codeline" id="line-1520"><code>**</code></span>
<span class="codeline" id="line-1521"><code>** The xShmLock method on [sqlite3_io_methods] may use values</code></span>
<span class="codeline" id="line-1522"><code>** between 0 and this upper bound as its "offset" argument.</code></span>
<span class="codeline" id="line-1523"><code>** The SQLite core will never attempt to acquire or release a</code></span>
<span class="codeline" id="line-1524"><code>** lock outside of this range</code></span>
<span class="codeline" id="line-1525"><code>*/</code></span>
<span class="codeline" id="line-1526"><code>#define SQLITE_SHM_NLOCK        8</code></span>
<span class="codeline" id="line-1527"><code></code></span>
<span class="codeline" id="line-1528"><code></code></span>
<span class="codeline" id="line-1529"><code>/*</code></span>
<span class="codeline" id="line-1530"><code>** CAPI3REF: Initialize The SQLite Library</code></span>
<span class="codeline" id="line-1531"><code>**</code></span>
<span class="codeline" id="line-1532"><code>** ^The sqlite3_initialize() routine initializes the</code></span>
<span class="codeline" id="line-1533"><code>** SQLite library.  ^The sqlite3_shutdown() routine</code></span>
<span class="codeline" id="line-1534"><code>** deallocates any resources that were allocated by sqlite3_initialize().</code></span>
<span class="codeline" id="line-1535"><code>** These routines are designed to aid in process initialization and</code></span>
<span class="codeline" id="line-1536"><code>** shutdown on embedded systems.  Workstation applications using</code></span>
<span class="codeline" id="line-1537"><code>** SQLite normally do not need to invoke either of these routines.</code></span>
<span class="codeline" id="line-1538"><code>**</code></span>
<span class="codeline" id="line-1539"><code>** A call to sqlite3_initialize() is an "effective" call if it is</code></span>
<span class="codeline" id="line-1540"><code>** the first time sqlite3_initialize() is invoked during the lifetime of</code></span>
<span class="codeline" id="line-1541"><code>** the process, or if it is the first time sqlite3_initialize() is invoked</code></span>
<span class="codeline" id="line-1542"><code>** following a call to sqlite3_shutdown().  ^(Only an effective call</code></span>
<span class="codeline" id="line-1543"><code>** of sqlite3_initialize() does any initialization.  All other calls</code></span>
<span class="codeline" id="line-1544"><code>** are harmless no-ops.)^</code></span>
<span class="codeline" id="line-1545"><code>**</code></span>
<span class="codeline" id="line-1546"><code>** A call to sqlite3_shutdown() is an "effective" call if it is the first</code></span>
<span class="codeline" id="line-1547"><code>** call to sqlite3_shutdown() since the last sqlite3_initialize().  ^(Only</code></span>
<span class="codeline" id="line-1548"><code>** an effective call to sqlite3_shutdown() does any deinitialization.</code></span>
<span class="codeline" id="line-1549"><code>** All other valid calls to sqlite3_shutdown() are harmless no-ops.)^</code></span>
<span class="codeline" id="line-1550"><code>**</code></span>
<span class="codeline" id="line-1551"><code>** The sqlite3_initialize() interface is threadsafe, but sqlite3_shutdown()</code></span>
<span class="codeline" id="line-1552"><code>** is not.  The sqlite3_shutdown() interface must only be called from a</code></span>
<span class="codeline" id="line-1553"><code>** single thread.  All open [database connections] must be closed and all</code></span>
<span class="codeline" id="line-1554"><code>** other SQLite resources must be deallocated prior to invoking</code></span>
<span class="codeline" id="line-1555"><code>** sqlite3_shutdown().</code></span>
<span class="codeline" id="line-1556"><code>**</code></span>
<span class="codeline" id="line-1557"><code>** Among other things, ^sqlite3_initialize() will invoke</code></span>
<span class="codeline" id="line-1558"><code>** sqlite3_os_init().  Similarly, ^sqlite3_shutdown()</code></span>
<span class="codeline" id="line-1559"><code>** will invoke sqlite3_os_end().</code></span>
<span class="codeline" id="line-1560"><code>**</code></span>
<span class="codeline" id="line-1561"><code>** ^The sqlite3_initialize() routine returns [SQLITE_OK] on success.</code></span>
<span class="codeline" id="line-1562"><code>** ^If for some reason, sqlite3_initialize() is unable to initialize</code></span>
<span class="codeline" id="line-1563"><code>** the library (perhaps it is unable to allocate a needed resource such</code></span>
<span class="codeline" id="line-1564"><code>** as a mutex) it returns an [error code] other than [SQLITE_OK].</code></span>
<span class="codeline" id="line-1565"><code>**</code></span>
<span class="codeline" id="line-1566"><code>** ^The sqlite3_initialize() routine is called internally by many other</code></span>
<span class="codeline" id="line-1567"><code>** SQLite interfaces so that an application usually does not need to</code></span>
<span class="codeline" id="line-1568"><code>** invoke sqlite3_initialize() directly.  For example, [sqlite3_open()]</code></span>
<span class="codeline" id="line-1569"><code>** calls sqlite3_initialize() so the SQLite library will be automatically</code></span>
<span class="codeline" id="line-1570"><code>** initialized when [sqlite3_open()] is called if it has not be initialized</code></span>
<span class="codeline" id="line-1571"><code>** already.  ^However, if SQLite is compiled with the [SQLITE_OMIT_AUTOINIT]</code></span>
<span class="codeline" id="line-1572"><code>** compile-time option, then the automatic calls to sqlite3_initialize()</code></span>
<span class="codeline" id="line-1573"><code>** are omitted and the application must call sqlite3_initialize() directly</code></span>
<span class="codeline" id="line-1574"><code>** prior to using any other SQLite interface.  For maximum portability,</code></span>
<span class="codeline" id="line-1575"><code>** it is recommended that applications always invoke sqlite3_initialize()</code></span>
<span class="codeline" id="line-1576"><code>** directly prior to using any other SQLite interface.  Future releases</code></span>
<span class="codeline" id="line-1577"><code>** of SQLite may require this.  In other words, the behavior exhibited</code></span>
<span class="codeline" id="line-1578"><code>** when SQLite is compiled with [SQLITE_OMIT_AUTOINIT] might become the</code></span>
<span class="codeline" id="line-1579"><code>** default behavior in some future release of SQLite.</code></span>
<span class="codeline" id="line-1580"><code>**</code></span>
<span class="codeline" id="line-1581"><code>** The sqlite3_os_init() routine does operating-system specific</code></span>
<span class="codeline" id="line-1582"><code>** initialization of the SQLite library.  The sqlite3_os_end()</code></span>
<span class="codeline" id="line-1583"><code>** routine undoes the effect of sqlite3_os_init().  Typical tasks</code></span>
<span class="codeline" id="line-1584"><code>** performed by these routines include allocation or deallocation</code></span>
<span class="codeline" id="line-1585"><code>** of static resources, initialization of global variables,</code></span>
<span class="codeline" id="line-1586"><code>** setting up a default [sqlite3_vfs] module, or setting up</code></span>
<span class="codeline" id="line-1587"><code>** a default configuration using [sqlite3_config()].</code></span>
<span class="codeline" id="line-1588"><code>**</code></span>
<span class="codeline" id="line-1589"><code>** The application should never invoke either sqlite3_os_init()</code></span>
<span class="codeline" id="line-1590"><code>** or sqlite3_os_end() directly.  The application should only invoke</code></span>
<span class="codeline" id="line-1591"><code>** sqlite3_initialize() and sqlite3_shutdown().  The sqlite3_os_init()</code></span>
<span class="codeline" id="line-1592"><code>** interface is called automatically by sqlite3_initialize() and</code></span>
<span class="codeline" id="line-1593"><code>** sqlite3_os_end() is called by sqlite3_shutdown().  Appropriate</code></span>
<span class="codeline" id="line-1594"><code>** implementations for sqlite3_os_init() and sqlite3_os_end()</code></span>
<span class="codeline" id="line-1595"><code>** are built into SQLite when it is compiled for Unix, Windows, or OS/2.</code></span>
<span class="codeline" id="line-1596"><code>** When [custom builds | built for other platforms]</code></span>
<span class="codeline" id="line-1597"><code>** (using the [SQLITE_OS_OTHER=1] compile-time</code></span>
<span class="codeline" id="line-1598"><code>** option) the application must supply a suitable implementation for</code></span>
<span class="codeline" id="line-1599"><code>** sqlite3_os_init() and sqlite3_os_end().  An application-supplied</code></span>
<span class="codeline" id="line-1600"><code>** implementation of sqlite3_os_init() or sqlite3_os_end()</code></span>
<span class="codeline" id="line-1601"><code>** must return [SQLITE_OK] on success and some other [error code] upon</code></span>
<span class="codeline" id="line-1602"><code>** failure.</code></span>
<span class="codeline" id="line-1603"><code>*/</code></span>
<span class="codeline" id="line-1604"><code>SQLITE_API int sqlite3_initialize(void);</code></span>
<span class="codeline" id="line-1605"><code>SQLITE_API int sqlite3_shutdown(void);</code></span>
<span class="codeline" id="line-1606"><code>SQLITE_API int sqlite3_os_init(void);</code></span>
<span class="codeline" id="line-1607"><code>SQLITE_API int sqlite3_os_end(void);</code></span>
<span class="codeline" id="line-1608"><code></code></span>
<span class="codeline" id="line-1609"><code>/*</code></span>
<span class="codeline" id="line-1610"><code>** CAPI3REF: Configuring The SQLite Library</code></span>
<span class="codeline" id="line-1611"><code>**</code></span>
<span class="codeline" id="line-1612"><code>** The sqlite3_config() interface is used to make global configuration</code></span>
<span class="codeline" id="line-1613"><code>** changes to SQLite in order to tune SQLite to the specific needs of</code></span>
<span class="codeline" id="line-1614"><code>** the application.  The default configuration is recommended for most</code></span>
<span class="codeline" id="line-1615"><code>** applications and so this routine is usually not necessary.  It is</code></span>
<span class="codeline" id="line-1616"><code>** provided to support rare applications with unusual needs.</code></span>
<span class="codeline" id="line-1617"><code>**</code></span>
<span class="codeline" id="line-1618"><code>** &lt;b&gt;The sqlite3_config() interface is not threadsafe. The application</code></span>
<span class="codeline" id="line-1619"><code>** must ensure that no other SQLite interfaces are invoked by other</code></span>
<span class="codeline" id="line-1620"><code>** threads while sqlite3_config() is running.&lt;/b&gt;</code></span>
<span class="codeline" id="line-1621"><code>**</code></span>
<span class="codeline" id="line-1622"><code>** The sqlite3_config() interface</code></span>
<span class="codeline" id="line-1623"><code>** may only be invoked prior to library initialization using</code></span>
<span class="codeline" id="line-1624"><code>** [sqlite3_initialize()] or after shutdown by [sqlite3_shutdown()].</code></span>
<span class="codeline" id="line-1625"><code>** ^If sqlite3_config() is called after [sqlite3_initialize()] and before</code></span>
<span class="codeline" id="line-1626"><code>** [sqlite3_shutdown()] then it will return SQLITE_MISUSE.</code></span>
<span class="codeline" id="line-1627"><code>** Note, however, that ^sqlite3_config() can be called as part of the</code></span>
<span class="codeline" id="line-1628"><code>** implementation of an application-defined [sqlite3_os_init()].</code></span>
<span class="codeline" id="line-1629"><code>**</code></span>
<span class="codeline" id="line-1630"><code>** The first argument to sqlite3_config() is an integer</code></span>
<span class="codeline" id="line-1631"><code>** [configuration option] that determines</code></span>
<span class="codeline" id="line-1632"><code>** what property of SQLite is to be configured.  Subsequent arguments</code></span>
<span class="codeline" id="line-1633"><code>** vary depending on the [configuration option]</code></span>
<span class="codeline" id="line-1634"><code>** in the first argument.</code></span>
<span class="codeline" id="line-1635"><code>**</code></span>
<span class="codeline" id="line-1636"><code>** ^When a configuration option is set, sqlite3_config() returns [SQLITE_OK].</code></span>
<span class="codeline" id="line-1637"><code>** ^If the option is unknown or SQLite is unable to set the option</code></span>
<span class="codeline" id="line-1638"><code>** then this routine returns a non-zero [error code].</code></span>
<span class="codeline" id="line-1639"><code>*/</code></span>
<span class="codeline" id="line-1640"><code>SQLITE_API int sqlite3_config(int, ...);</code></span>
<span class="codeline" id="line-1641"><code></code></span>
<span class="codeline" id="line-1642"><code>/*</code></span>
<span class="codeline" id="line-1643"><code>** CAPI3REF: Configure database connections</code></span>
<span class="codeline" id="line-1644"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-1645"><code>**</code></span>
<span class="codeline" id="line-1646"><code>** The sqlite3_db_config() interface is used to make configuration</code></span>
<span class="codeline" id="line-1647"><code>** changes to a [database connection].  The interface is similar to</code></span>
<span class="codeline" id="line-1648"><code>** [sqlite3_config()] except that the changes apply to a single</code></span>
<span class="codeline" id="line-1649"><code>** [database connection] (specified in the first argument).</code></span>
<span class="codeline" id="line-1650"><code>**</code></span>
<span class="codeline" id="line-1651"><code>** The second argument to sqlite3_db_config(D,V,...)  is the</code></span>
<span class="codeline" id="line-1652"><code>** [SQLITE_DBCONFIG_LOOKASIDE | configuration verb] - an integer code</code></span>
<span class="codeline" id="line-1653"><code>** that indicates what aspect of the [database connection] is being configured.</code></span>
<span class="codeline" id="line-1654"><code>** Subsequent arguments vary depending on the configuration verb.</code></span>
<span class="codeline" id="line-1655"><code>**</code></span>
<span class="codeline" id="line-1656"><code>** ^Calls to sqlite3_db_config() return SQLITE_OK if and only if</code></span>
<span class="codeline" id="line-1657"><code>** the call is considered successful.</code></span>
<span class="codeline" id="line-1658"><code>*/</code></span>
<span class="codeline" id="line-1659"><code>SQLITE_API int sqlite3_db_config(sqlite3*, int op, ...);</code></span>
<span class="codeline" id="line-1660"><code></code></span>
<span class="codeline" id="line-1661"><code>/*</code></span>
<span class="codeline" id="line-1662"><code>** CAPI3REF: Memory Allocation Routines</code></span>
<span class="codeline" id="line-1663"><code>**</code></span>
<span class="codeline" id="line-1664"><code>** An instance of this object defines the interface between SQLite</code></span>
<span class="codeline" id="line-1665"><code>** and low-level memory allocation routines.</code></span>
<span class="codeline" id="line-1666"><code>**</code></span>
<span class="codeline" id="line-1667"><code>** This object is used in only one place in the SQLite interface.</code></span>
<span class="codeline" id="line-1668"><code>** A pointer to an instance of this object is the argument to</code></span>
<span class="codeline" id="line-1669"><code>** [sqlite3_config()] when the configuration option is</code></span>
<span class="codeline" id="line-1670"><code>** [SQLITE_CONFIG_MALLOC] or [SQLITE_CONFIG_GETMALLOC].</code></span>
<span class="codeline" id="line-1671"><code>** By creating an instance of this object</code></span>
<span class="codeline" id="line-1672"><code>** and passing it to [sqlite3_config]([SQLITE_CONFIG_MALLOC])</code></span>
<span class="codeline" id="line-1673"><code>** during configuration, an application can specify an alternative</code></span>
<span class="codeline" id="line-1674"><code>** memory allocation subsystem for SQLite to use for all of its</code></span>
<span class="codeline" id="line-1675"><code>** dynamic memory needs.</code></span>
<span class="codeline" id="line-1676"><code>**</code></span>
<span class="codeline" id="line-1677"><code>** Note that SQLite comes with several [built-in memory allocators]</code></span>
<span class="codeline" id="line-1678"><code>** that are perfectly adequate for the overwhelming majority of applications</code></span>
<span class="codeline" id="line-1679"><code>** and that this object is only useful to a tiny minority of applications</code></span>
<span class="codeline" id="line-1680"><code>** with specialized memory allocation requirements.  This object is</code></span>
<span class="codeline" id="line-1681"><code>** also used during testing of SQLite in order to specify an alternative</code></span>
<span class="codeline" id="line-1682"><code>** memory allocator that simulates memory out-of-memory conditions in</code></span>
<span class="codeline" id="line-1683"><code>** order to verify that SQLite recovers gracefully from such</code></span>
<span class="codeline" id="line-1684"><code>** conditions.</code></span>
<span class="codeline" id="line-1685"><code>**</code></span>
<span class="codeline" id="line-1686"><code>** The xMalloc, xRealloc, and xFree methods must work like the</code></span>
<span class="codeline" id="line-1687"><code>** malloc(), realloc() and free() functions from the standard C library.</code></span>
<span class="codeline" id="line-1688"><code>** ^SQLite guarantees that the second argument to</code></span>
<span class="codeline" id="line-1689"><code>** xRealloc is always a value returned by a prior call to xRoundup.</code></span>
<span class="codeline" id="line-1690"><code>**</code></span>
<span class="codeline" id="line-1691"><code>** xSize should return the allocated size of a memory allocation</code></span>
<span class="codeline" id="line-1692"><code>** previously obtained from xMalloc or xRealloc.  The allocated size</code></span>
<span class="codeline" id="line-1693"><code>** is always at least as big as the requested size but may be larger.</code></span>
<span class="codeline" id="line-1694"><code>**</code></span>
<span class="codeline" id="line-1695"><code>** The xRoundup method returns what would be the allocated size of</code></span>
<span class="codeline" id="line-1696"><code>** a memory allocation given a particular requested size.  Most memory</code></span>
<span class="codeline" id="line-1697"><code>** allocators round up memory allocations at least to the next multiple</code></span>
<span class="codeline" id="line-1698"><code>** of 8.  Some allocators round up to a larger multiple or to a power of 2.</code></span>
<span class="codeline" id="line-1699"><code>** Every memory allocation request coming in through [sqlite3_malloc()]</code></span>
<span class="codeline" id="line-1700"><code>** or [sqlite3_realloc()] first calls xRoundup.  If xRoundup returns 0,</code></span>
<span class="codeline" id="line-1701"><code>** that causes the corresponding memory allocation to fail.</code></span>
<span class="codeline" id="line-1702"><code>**</code></span>
<span class="codeline" id="line-1703"><code>** The xInit method initializes the memory allocator.  For example,</code></span>
<span class="codeline" id="line-1704"><code>** it might allocate any required mutexes or initialize internal data</code></span>
<span class="codeline" id="line-1705"><code>** structures.  The xShutdown method is invoked (indirectly) by</code></span>
<span class="codeline" id="line-1706"><code>** [sqlite3_shutdown()] and should deallocate any resources acquired</code></span>
<span class="codeline" id="line-1707"><code>** by xInit.  The pAppData pointer is used as the only parameter to</code></span>
<span class="codeline" id="line-1708"><code>** xInit and xShutdown.</code></span>
<span class="codeline" id="line-1709"><code>**</code></span>
<span class="codeline" id="line-1710"><code>** SQLite holds the [SQLITE_MUTEX_STATIC_MAIN] mutex when it invokes</code></span>
<span class="codeline" id="line-1711"><code>** the xInit method, so the xInit method need not be threadsafe.  The</code></span>
<span class="codeline" id="line-1712"><code>** xShutdown method is only called from [sqlite3_shutdown()] so it does</code></span>
<span class="codeline" id="line-1713"><code>** not need to be threadsafe either.  For all other methods, SQLite</code></span>
<span class="codeline" id="line-1714"><code>** holds the [SQLITE_MUTEX_STATIC_MEM] mutex as long as the</code></span>
<span class="codeline" id="line-1715"><code>** [SQLITE_CONFIG_MEMSTATUS] configuration option is turned on (which</code></span>
<span class="codeline" id="line-1716"><code>** it is by default) and so the methods are automatically serialized.</code></span>
<span class="codeline" id="line-1717"><code>** However, if [SQLITE_CONFIG_MEMSTATUS] is disabled, then the other</code></span>
<span class="codeline" id="line-1718"><code>** methods must be threadsafe or else make their own arrangements for</code></span>
<span class="codeline" id="line-1719"><code>** serialization.</code></span>
<span class="codeline" id="line-1720"><code>**</code></span>
<span class="codeline" id="line-1721"><code>** SQLite will never invoke xInit() more than once without an intervening</code></span>
<span class="codeline" id="line-1722"><code>** call to xShutdown().</code></span>
<span class="codeline" id="line-1723"><code>*/</code></span>
<span class="codeline" id="line-1724"><code>typedef struct sqlite3_mem_methods sqlite3_mem_methods;</code></span>
<span class="codeline" id="line-1725"><code>struct sqlite3_mem_methods {</code></span>
<span class="codeline" id="line-1726"><code>  void *(*xMalloc)(int);         /* Memory allocation function */</code></span>
<span class="codeline" id="line-1727"><code>  void (*xFree)(void*);          /* Free a prior allocation */</code></span>
<span class="codeline" id="line-1728"><code>  void *(*xRealloc)(void*,int);  /* Resize an allocation */</code></span>
<span class="codeline" id="line-1729"><code>  int (*xSize)(void*);           /* Return the size of an allocation */</code></span>
<span class="codeline" id="line-1730"><code>  int (*xRoundup)(int);          /* Round up request size to allocation size */</code></span>
<span class="codeline" id="line-1731"><code>  int (*xInit)(void*);           /* Initialize the memory allocator */</code></span>
<span class="codeline" id="line-1732"><code>  void (*xShutdown)(void*);      /* Deinitialize the memory allocator */</code></span>
<span class="codeline" id="line-1733"><code>  void *pAppData;                /* Argument to xInit() and xShutdown() */</code></span>
<span class="codeline" id="line-1734"><code>};</code></span>
<span class="codeline" id="line-1735"><code></code></span>
<span class="codeline" id="line-1736"><code>/*</code></span>
<span class="codeline" id="line-1737"><code>** CAPI3REF: Configuration Options</code></span>
<span class="codeline" id="line-1738"><code>** KEYWORDS: {configuration option}</code></span>
<span class="codeline" id="line-1739"><code>**</code></span>
<span class="codeline" id="line-1740"><code>** These constants are the available integer configuration options that</code></span>
<span class="codeline" id="line-1741"><code>** can be passed as the first argument to the [sqlite3_config()] interface.</code></span>
<span class="codeline" id="line-1742"><code>**</code></span>
<span class="codeline" id="line-1743"><code>** New configuration options may be added in future releases of SQLite.</code></span>
<span class="codeline" id="line-1744"><code>** Existing configuration options might be discontinued.  Applications</code></span>
<span class="codeline" id="line-1745"><code>** should check the return code from [sqlite3_config()] to make sure that</code></span>
<span class="codeline" id="line-1746"><code>** the call worked.  The [sqlite3_config()] interface will return a</code></span>
<span class="codeline" id="line-1747"><code>** non-zero [error code] if a discontinued or unsupported configuration option</code></span>
<span class="codeline" id="line-1748"><code>** is invoked.</code></span>
<span class="codeline" id="line-1749"><code>**</code></span>
<span class="codeline" id="line-1750"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-1751"><code>** [[SQLITE_CONFIG_SINGLETHREAD]] &lt;dt&gt;SQLITE_CONFIG_SINGLETHREAD&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1752"><code>** &lt;dd&gt;There are no arguments to this option.  ^This option sets the</code></span>
<span class="codeline" id="line-1753"><code>** [threading mode] to Single-thread.  In other words, it disables</code></span>
<span class="codeline" id="line-1754"><code>** all mutexing and puts SQLite into a mode where it can only be used</code></span>
<span class="codeline" id="line-1755"><code>** by a single thread.   ^If SQLite is compiled with</code></span>
<span class="codeline" id="line-1756"><code>** the [SQLITE_THREADSAFE | SQLITE_THREADSAFE=0] compile-time option then</code></span>
<span class="codeline" id="line-1757"><code>** it is not possible to change the [threading mode] from its default</code></span>
<span class="codeline" id="line-1758"><code>** value of Single-thread and so [sqlite3_config()] will return</code></span>
<span class="codeline" id="line-1759"><code>** [SQLITE_ERROR] if called with the SQLITE_CONFIG_SINGLETHREAD</code></span>
<span class="codeline" id="line-1760"><code>** configuration option.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-1761"><code>**</code></span>
<span class="codeline" id="line-1762"><code>** [[SQLITE_CONFIG_MULTITHREAD]] &lt;dt&gt;SQLITE_CONFIG_MULTITHREAD&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1763"><code>** &lt;dd&gt;There are no arguments to this option.  ^This option sets the</code></span>
<span class="codeline" id="line-1764"><code>** [threading mode] to Multi-thread.  In other words, it disables</code></span>
<span class="codeline" id="line-1765"><code>** mutexing on [database connection] and [prepared statement] objects.</code></span>
<span class="codeline" id="line-1766"><code>** The application is responsible for serializing access to</code></span>
<span class="codeline" id="line-1767"><code>** [database connections] and [prepared statements].  But other mutexes</code></span>
<span class="codeline" id="line-1768"><code>** are enabled so that SQLite will be safe to use in a multi-threaded</code></span>
<span class="codeline" id="line-1769"><code>** environment as long as no two threads attempt to use the same</code></span>
<span class="codeline" id="line-1770"><code>** [database connection] at the same time.  ^If SQLite is compiled with</code></span>
<span class="codeline" id="line-1771"><code>** the [SQLITE_THREADSAFE | SQLITE_THREADSAFE=0] compile-time option then</code></span>
<span class="codeline" id="line-1772"><code>** it is not possible to set the Multi-thread [threading mode] and</code></span>
<span class="codeline" id="line-1773"><code>** [sqlite3_config()] will return [SQLITE_ERROR] if called with the</code></span>
<span class="codeline" id="line-1774"><code>** SQLITE_CONFIG_MULTITHREAD configuration option.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-1775"><code>**</code></span>
<span class="codeline" id="line-1776"><code>** [[SQLITE_CONFIG_SERIALIZED]] &lt;dt&gt;SQLITE_CONFIG_SERIALIZED&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1777"><code>** &lt;dd&gt;There are no arguments to this option.  ^This option sets the</code></span>
<span class="codeline" id="line-1778"><code>** [threading mode] to Serialized. In other words, this option enables</code></span>
<span class="codeline" id="line-1779"><code>** all mutexes including the recursive</code></span>
<span class="codeline" id="line-1780"><code>** mutexes on [database connection] and [prepared statement] objects.</code></span>
<span class="codeline" id="line-1781"><code>** In this mode (which is the default when SQLite is compiled with</code></span>
<span class="codeline" id="line-1782"><code>** [SQLITE_THREADSAFE=1]) the SQLite library will itself serialize access</code></span>
<span class="codeline" id="line-1783"><code>** to [database connections] and [prepared statements] so that the</code></span>
<span class="codeline" id="line-1784"><code>** application is free to use the same [database connection] or the</code></span>
<span class="codeline" id="line-1785"><code>** same [prepared statement] in different threads at the same time.</code></span>
<span class="codeline" id="line-1786"><code>** ^If SQLite is compiled with</code></span>
<span class="codeline" id="line-1787"><code>** the [SQLITE_THREADSAFE | SQLITE_THREADSAFE=0] compile-time option then</code></span>
<span class="codeline" id="line-1788"><code>** it is not possible to set the Serialized [threading mode] and</code></span>
<span class="codeline" id="line-1789"><code>** [sqlite3_config()] will return [SQLITE_ERROR] if called with the</code></span>
<span class="codeline" id="line-1790"><code>** SQLITE_CONFIG_SERIALIZED configuration option.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-1791"><code>**</code></span>
<span class="codeline" id="line-1792"><code>** [[SQLITE_CONFIG_MALLOC]] &lt;dt&gt;SQLITE_CONFIG_MALLOC&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1793"><code>** &lt;dd&gt; ^(The SQLITE_CONFIG_MALLOC option takes a single argument which is</code></span>
<span class="codeline" id="line-1794"><code>** a pointer to an instance of the [sqlite3_mem_methods] structure.</code></span>
<span class="codeline" id="line-1795"><code>** The argument specifies</code></span>
<span class="codeline" id="line-1796"><code>** alternative low-level memory allocation routines to be used in place of</code></span>
<span class="codeline" id="line-1797"><code>** the memory allocation routines built into SQLite.)^ ^SQLite makes</code></span>
<span class="codeline" id="line-1798"><code>** its own private copy of the content of the [sqlite3_mem_methods] structure</code></span>
<span class="codeline" id="line-1799"><code>** before the [sqlite3_config()] call returns.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-1800"><code>**</code></span>
<span class="codeline" id="line-1801"><code>** [[SQLITE_CONFIG_GETMALLOC]] &lt;dt&gt;SQLITE_CONFIG_GETMALLOC&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1802"><code>** &lt;dd&gt; ^(The SQLITE_CONFIG_GETMALLOC option takes a single argument which</code></span>
<span class="codeline" id="line-1803"><code>** is a pointer to an instance of the [sqlite3_mem_methods] structure.</code></span>
<span class="codeline" id="line-1804"><code>** The [sqlite3_mem_methods]</code></span>
<span class="codeline" id="line-1805"><code>** structure is filled with the currently defined memory allocation routines.)^</code></span>
<span class="codeline" id="line-1806"><code>** This option can be used to overload the default memory allocation</code></span>
<span class="codeline" id="line-1807"><code>** routines with a wrapper that simulations memory allocation failure or</code></span>
<span class="codeline" id="line-1808"><code>** tracks memory usage, for example. &lt;/dd&gt;</code></span>
<span class="codeline" id="line-1809"><code>**</code></span>
<span class="codeline" id="line-1810"><code>** [[SQLITE_CONFIG_SMALL_MALLOC]] &lt;dt&gt;SQLITE_CONFIG_SMALL_MALLOC&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1811"><code>** &lt;dd&gt; ^The SQLITE_CONFIG_SMALL_MALLOC option takes single argument of</code></span>
<span class="codeline" id="line-1812"><code>** type int, interpreted as a boolean, which if true provides a hint to</code></span>
<span class="codeline" id="line-1813"><code>** SQLite that it should avoid large memory allocations if possible.</code></span>
<span class="codeline" id="line-1814"><code>** SQLite will run faster if it is free to make large memory allocations,</code></span>
<span class="codeline" id="line-1815"><code>** but some application might prefer to run slower in exchange for</code></span>
<span class="codeline" id="line-1816"><code>** guarantees about memory fragmentation that are possible if large</code></span>
<span class="codeline" id="line-1817"><code>** allocations are avoided.  This hint is normally off.</code></span>
<span class="codeline" id="line-1818"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-1819"><code>**</code></span>
<span class="codeline" id="line-1820"><code>** [[SQLITE_CONFIG_MEMSTATUS]] &lt;dt&gt;SQLITE_CONFIG_MEMSTATUS&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1821"><code>** &lt;dd&gt; ^The SQLITE_CONFIG_MEMSTATUS option takes single argument of type int,</code></span>
<span class="codeline" id="line-1822"><code>** interpreted as a boolean, which enables or disables the collection of</code></span>
<span class="codeline" id="line-1823"><code>** memory allocation statistics. ^(When memory allocation statistics are</code></span>
<span class="codeline" id="line-1824"><code>** disabled, the following SQLite interfaces become non-operational:</code></span>
<span class="codeline" id="line-1825"><code>**   &lt;ul&gt;</code></span>
<span class="codeline" id="line-1826"><code>**   &lt;li&gt; [sqlite3_hard_heap_limit64()]</code></span>
<span class="codeline" id="line-1827"><code>**   &lt;li&gt; [sqlite3_memory_used()]</code></span>
<span class="codeline" id="line-1828"><code>**   &lt;li&gt; [sqlite3_memory_highwater()]</code></span>
<span class="codeline" id="line-1829"><code>**   &lt;li&gt; [sqlite3_soft_heap_limit64()]</code></span>
<span class="codeline" id="line-1830"><code>**   &lt;li&gt; [sqlite3_status64()]</code></span>
<span class="codeline" id="line-1831"><code>**   &lt;/ul&gt;)^</code></span>
<span class="codeline" id="line-1832"><code>** ^Memory allocation statistics are enabled by default unless SQLite is</code></span>
<span class="codeline" id="line-1833"><code>** compiled with [SQLITE_DEFAULT_MEMSTATUS]=0 in which case memory</code></span>
<span class="codeline" id="line-1834"><code>** allocation statistics are disabled by default.</code></span>
<span class="codeline" id="line-1835"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-1836"><code>**</code></span>
<span class="codeline" id="line-1837"><code>** [[SQLITE_CONFIG_SCRATCH]] &lt;dt&gt;SQLITE_CONFIG_SCRATCH&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1838"><code>** &lt;dd&gt; The SQLITE_CONFIG_SCRATCH option is no longer used.</code></span>
<span class="codeline" id="line-1839"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-1840"><code>**</code></span>
<span class="codeline" id="line-1841"><code>** [[SQLITE_CONFIG_PAGECACHE]] &lt;dt&gt;SQLITE_CONFIG_PAGECACHE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1842"><code>** &lt;dd&gt; ^The SQLITE_CONFIG_PAGECACHE option specifies a memory pool</code></span>
<span class="codeline" id="line-1843"><code>** that SQLite can use for the database page cache with the default page</code></span>
<span class="codeline" id="line-1844"><code>** cache implementation.</code></span>
<span class="codeline" id="line-1845"><code>** This configuration option is a no-op if an application-defined page</code></span>
<span class="codeline" id="line-1846"><code>** cache implementation is loaded using the [SQLITE_CONFIG_PCACHE2].</code></span>
<span class="codeline" id="line-1847"><code>** ^There are three arguments to SQLITE_CONFIG_PAGECACHE: A pointer to</code></span>
<span class="codeline" id="line-1848"><code>** 8-byte aligned memory (pMem), the size of each page cache line (sz),</code></span>
<span class="codeline" id="line-1849"><code>** and the number of cache lines (N).</code></span>
<span class="codeline" id="line-1850"><code>** The sz argument should be the size of the largest database page</code></span>
<span class="codeline" id="line-1851"><code>** (a power of two between 512 and 65536) plus some extra bytes for each</code></span>
<span class="codeline" id="line-1852"><code>** page header.  ^The number of extra bytes needed by the page header</code></span>
<span class="codeline" id="line-1853"><code>** can be determined using [SQLITE_CONFIG_PCACHE_HDRSZ].</code></span>
<span class="codeline" id="line-1854"><code>** ^It is harmless, apart from the wasted memory,</code></span>
<span class="codeline" id="line-1855"><code>** for the sz parameter to be larger than necessary.  The pMem</code></span>
<span class="codeline" id="line-1856"><code>** argument must be either a NULL pointer or a pointer to an 8-byte</code></span>
<span class="codeline" id="line-1857"><code>** aligned block of memory of at least sz*N bytes, otherwise</code></span>
<span class="codeline" id="line-1858"><code>** subsequent behavior is undefined.</code></span>
<span class="codeline" id="line-1859"><code>** ^When pMem is not NULL, SQLite will strive to use the memory provided</code></span>
<span class="codeline" id="line-1860"><code>** to satisfy page cache needs, falling back to [sqlite3_malloc()] if</code></span>
<span class="codeline" id="line-1861"><code>** a page cache line is larger than sz bytes or if all of the pMem buffer</code></span>
<span class="codeline" id="line-1862"><code>** is exhausted.</code></span>
<span class="codeline" id="line-1863"><code>** ^If pMem is NULL and N is non-zero, then each database connection</code></span>
<span class="codeline" id="line-1864"><code>** does an initial bulk allocation for page cache memory</code></span>
<span class="codeline" id="line-1865"><code>** from [sqlite3_malloc()] sufficient for N cache lines if N is positive or</code></span>
<span class="codeline" id="line-1866"><code>** of -1024*N bytes if N is negative, . ^If additional</code></span>
<span class="codeline" id="line-1867"><code>** page cache memory is needed beyond what is provided by the initial</code></span>
<span class="codeline" id="line-1868"><code>** allocation, then SQLite goes to [sqlite3_malloc()] separately for each</code></span>
<span class="codeline" id="line-1869"><code>** additional cache line. &lt;/dd&gt;</code></span>
<span class="codeline" id="line-1870"><code>**</code></span>
<span class="codeline" id="line-1871"><code>** [[SQLITE_CONFIG_HEAP]] &lt;dt&gt;SQLITE_CONFIG_HEAP&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1872"><code>** &lt;dd&gt; ^The SQLITE_CONFIG_HEAP option specifies a static memory buffer</code></span>
<span class="codeline" id="line-1873"><code>** that SQLite will use for all of its dynamic memory allocation needs</code></span>
<span class="codeline" id="line-1874"><code>** beyond those provided for by [SQLITE_CONFIG_PAGECACHE].</code></span>
<span class="codeline" id="line-1875"><code>** ^The SQLITE_CONFIG_HEAP option is only available if SQLite is compiled</code></span>
<span class="codeline" id="line-1876"><code>** with either [SQLITE_ENABLE_MEMSYS3] or [SQLITE_ENABLE_MEMSYS5] and returns</code></span>
<span class="codeline" id="line-1877"><code>** [SQLITE_ERROR] if invoked otherwise.</code></span>
<span class="codeline" id="line-1878"><code>** ^There are three arguments to SQLITE_CONFIG_HEAP:</code></span>
<span class="codeline" id="line-1879"><code>** An 8-byte aligned pointer to the memory,</code></span>
<span class="codeline" id="line-1880"><code>** the number of bytes in the memory buffer, and the minimum allocation size.</code></span>
<span class="codeline" id="line-1881"><code>** ^If the first pointer (the memory pointer) is NULL, then SQLite reverts</code></span>
<span class="codeline" id="line-1882"><code>** to using its default memory allocator (the system malloc() implementation),</code></span>
<span class="codeline" id="line-1883"><code>** undoing any prior invocation of [SQLITE_CONFIG_MALLOC].  ^If the</code></span>
<span class="codeline" id="line-1884"><code>** memory pointer is not NULL then the alternative memory</code></span>
<span class="codeline" id="line-1885"><code>** allocator is engaged to handle all of SQLites memory allocation needs.</code></span>
<span class="codeline" id="line-1886"><code>** The first pointer (the memory pointer) must be aligned to an 8-byte</code></span>
<span class="codeline" id="line-1887"><code>** boundary or subsequent behavior of SQLite will be undefined.</code></span>
<span class="codeline" id="line-1888"><code>** The minimum allocation size is capped at 2**12. Reasonable values</code></span>
<span class="codeline" id="line-1889"><code>** for the minimum allocation size are 2**5 through 2**8.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-1890"><code>**</code></span>
<span class="codeline" id="line-1891"><code>** [[SQLITE_CONFIG_MUTEX]] &lt;dt&gt;SQLITE_CONFIG_MUTEX&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1892"><code>** &lt;dd&gt; ^(The SQLITE_CONFIG_MUTEX option takes a single argument which is a</code></span>
<span class="codeline" id="line-1893"><code>** pointer to an instance of the [sqlite3_mutex_methods] structure.</code></span>
<span class="codeline" id="line-1894"><code>** The argument specifies alternative low-level mutex routines to be used</code></span>
<span class="codeline" id="line-1895"><code>** in place the mutex routines built into SQLite.)^  ^SQLite makes a copy of</code></span>
<span class="codeline" id="line-1896"><code>** the content of the [sqlite3_mutex_methods] structure before the call to</code></span>
<span class="codeline" id="line-1897"><code>** [sqlite3_config()] returns. ^If SQLite is compiled with</code></span>
<span class="codeline" id="line-1898"><code>** the [SQLITE_THREADSAFE | SQLITE_THREADSAFE=0] compile-time option then</code></span>
<span class="codeline" id="line-1899"><code>** the entire mutexing subsystem is omitted from the build and hence calls to</code></span>
<span class="codeline" id="line-1900"><code>** [sqlite3_config()] with the SQLITE_CONFIG_MUTEX configuration option will</code></span>
<span class="codeline" id="line-1901"><code>** return [SQLITE_ERROR].&lt;/dd&gt;</code></span>
<span class="codeline" id="line-1902"><code>**</code></span>
<span class="codeline" id="line-1903"><code>** [[SQLITE_CONFIG_GETMUTEX]] &lt;dt&gt;SQLITE_CONFIG_GETMUTEX&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1904"><code>** &lt;dd&gt; ^(The SQLITE_CONFIG_GETMUTEX option takes a single argument which</code></span>
<span class="codeline" id="line-1905"><code>** is a pointer to an instance of the [sqlite3_mutex_methods] structure.  The</code></span>
<span class="codeline" id="line-1906"><code>** [sqlite3_mutex_methods]</code></span>
<span class="codeline" id="line-1907"><code>** structure is filled with the currently defined mutex routines.)^</code></span>
<span class="codeline" id="line-1908"><code>** This option can be used to overload the default mutex allocation</code></span>
<span class="codeline" id="line-1909"><code>** routines with a wrapper used to track mutex usage for performance</code></span>
<span class="codeline" id="line-1910"><code>** profiling or testing, for example.   ^If SQLite is compiled with</code></span>
<span class="codeline" id="line-1911"><code>** the [SQLITE_THREADSAFE | SQLITE_THREADSAFE=0] compile-time option then</code></span>
<span class="codeline" id="line-1912"><code>** the entire mutexing subsystem is omitted from the build and hence calls to</code></span>
<span class="codeline" id="line-1913"><code>** [sqlite3_config()] with the SQLITE_CONFIG_GETMUTEX configuration option will</code></span>
<span class="codeline" id="line-1914"><code>** return [SQLITE_ERROR].&lt;/dd&gt;</code></span>
<span class="codeline" id="line-1915"><code>**</code></span>
<span class="codeline" id="line-1916"><code>** [[SQLITE_CONFIG_LOOKASIDE]] &lt;dt&gt;SQLITE_CONFIG_LOOKASIDE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1917"><code>** &lt;dd&gt; ^(The SQLITE_CONFIG_LOOKASIDE option takes two arguments that determine</code></span>
<span class="codeline" id="line-1918"><code>** the default size of lookaside memory on each [database connection].</code></span>
<span class="codeline" id="line-1919"><code>** The first argument is the</code></span>
<span class="codeline" id="line-1920"><code>** size of each lookaside buffer slot and the second is the number of</code></span>
<span class="codeline" id="line-1921"><code>** slots allocated to each database connection.)^  ^(SQLITE_CONFIG_LOOKASIDE</code></span>
<span class="codeline" id="line-1922"><code>** sets the &lt;i&gt;default&lt;/i&gt; lookaside size. The [SQLITE_DBCONFIG_LOOKASIDE]</code></span>
<span class="codeline" id="line-1923"><code>** option to [sqlite3_db_config()] can be used to change the lookaside</code></span>
<span class="codeline" id="line-1924"><code>** configuration on individual connections.)^ &lt;/dd&gt;</code></span>
<span class="codeline" id="line-1925"><code>**</code></span>
<span class="codeline" id="line-1926"><code>** [[SQLITE_CONFIG_PCACHE2]] &lt;dt&gt;SQLITE_CONFIG_PCACHE2&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1927"><code>** &lt;dd&gt; ^(The SQLITE_CONFIG_PCACHE2 option takes a single argument which is</code></span>
<span class="codeline" id="line-1928"><code>** a pointer to an [sqlite3_pcache_methods2] object.  This object specifies</code></span>
<span class="codeline" id="line-1929"><code>** the interface to a custom page cache implementation.)^</code></span>
<span class="codeline" id="line-1930"><code>** ^SQLite makes a copy of the [sqlite3_pcache_methods2] object.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-1931"><code>**</code></span>
<span class="codeline" id="line-1932"><code>** [[SQLITE_CONFIG_GETPCACHE2]] &lt;dt&gt;SQLITE_CONFIG_GETPCACHE2&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1933"><code>** &lt;dd&gt; ^(The SQLITE_CONFIG_GETPCACHE2 option takes a single argument which</code></span>
<span class="codeline" id="line-1934"><code>** is a pointer to an [sqlite3_pcache_methods2] object.  SQLite copies of</code></span>
<span class="codeline" id="line-1935"><code>** the current page cache implementation into that object.)^ &lt;/dd&gt;</code></span>
<span class="codeline" id="line-1936"><code>**</code></span>
<span class="codeline" id="line-1937"><code>** [[SQLITE_CONFIG_LOG]] &lt;dt&gt;SQLITE_CONFIG_LOG&lt;/dt&gt;</code></span>
<span class="codeline" id="line-1938"><code>** &lt;dd&gt; The SQLITE_CONFIG_LOG option is used to configure the SQLite</code></span>
<span class="codeline" id="line-1939"><code>** global [error log].</code></span>
<span class="codeline" id="line-1940"><code>** (^The SQLITE_CONFIG_LOG option takes two arguments: a pointer to a</code></span>
<span class="codeline" id="line-1941"><code>** function with a call signature of void(*)(void*,int,const char*),</code></span>
<span class="codeline" id="line-1942"><code>** and a pointer to void. ^If the function pointer is not NULL, it is</code></span>
<span class="codeline" id="line-1943"><code>** invoked by [sqlite3_log()] to process each logging event.  ^If the</code></span>
<span class="codeline" id="line-1944"><code>** function pointer is NULL, the [sqlite3_log()] interface becomes a no-op.</code></span>
<span class="codeline" id="line-1945"><code>** ^The void pointer that is the second argument to SQLITE_CONFIG_LOG is</code></span>
<span class="codeline" id="line-1946"><code>** passed through as the first parameter to the application-defined logger</code></span>
<span class="codeline" id="line-1947"><code>** function whenever that function is invoked.  ^The second parameter to</code></span>
<span class="codeline" id="line-1948"><code>** the logger function is a copy of the first parameter to the corresponding</code></span>
<span class="codeline" id="line-1949"><code>** [sqlite3_log()] call and is intended to be a [result code] or an</code></span>
<span class="codeline" id="line-1950"><code>** [extended result code].  ^The third parameter passed to the logger is</code></span>
<span class="codeline" id="line-1951"><code>** log message after formatting via [sqlite3_snprintf()].</code></span>
<span class="codeline" id="line-1952"><code>** The SQLite logging interface is not reentrant; the logger function</code></span>
<span class="codeline" id="line-1953"><code>** supplied by the application must not invoke any SQLite interface.</code></span>
<span class="codeline" id="line-1954"><code>** In a multi-threaded application, the application-defined logger</code></span>
<span class="codeline" id="line-1955"><code>** function must be threadsafe. &lt;/dd&gt;</code></span>
<span class="codeline" id="line-1956"><code>**</code></span>
<span class="codeline" id="line-1957"><code>** [[SQLITE_CONFIG_URI]] &lt;dt&gt;SQLITE_CONFIG_URI</code></span>
<span class="codeline" id="line-1958"><code>** &lt;dd&gt;^(The SQLITE_CONFIG_URI option takes a single argument of type int.</code></span>
<span class="codeline" id="line-1959"><code>** If non-zero, then URI handling is globally enabled. If the parameter is zero,</code></span>
<span class="codeline" id="line-1960"><code>** then URI handling is globally disabled.)^ ^If URI handling is globally</code></span>
<span class="codeline" id="line-1961"><code>** enabled, all filenames passed to [sqlite3_open()], [sqlite3_open_v2()],</code></span>
<span class="codeline" id="line-1962"><code>** [sqlite3_open16()] or</code></span>
<span class="codeline" id="line-1963"><code>** specified as part of [ATTACH] commands are interpreted as URIs, regardless</code></span>
<span class="codeline" id="line-1964"><code>** of whether or not the [SQLITE_OPEN_URI] flag is set when the database</code></span>
<span class="codeline" id="line-1965"><code>** connection is opened. ^If it is globally disabled, filenames are</code></span>
<span class="codeline" id="line-1966"><code>** only interpreted as URIs if the SQLITE_OPEN_URI flag is set when the</code></span>
<span class="codeline" id="line-1967"><code>** database connection is opened. ^(By default, URI handling is globally</code></span>
<span class="codeline" id="line-1968"><code>** disabled. The default value may be changed by compiling with the</code></span>
<span class="codeline" id="line-1969"><code>** [SQLITE_USE_URI] symbol defined.)^</code></span>
<span class="codeline" id="line-1970"><code>**</code></span>
<span class="codeline" id="line-1971"><code>** [[SQLITE_CONFIG_COVERING_INDEX_SCAN]] &lt;dt&gt;SQLITE_CONFIG_COVERING_INDEX_SCAN</code></span>
<span class="codeline" id="line-1972"><code>** &lt;dd&gt;^The SQLITE_CONFIG_COVERING_INDEX_SCAN option takes a single integer</code></span>
<span class="codeline" id="line-1973"><code>** argument which is interpreted as a boolean in order to enable or disable</code></span>
<span class="codeline" id="line-1974"><code>** the use of covering indices for full table scans in the query optimizer.</code></span>
<span class="codeline" id="line-1975"><code>** ^The default setting is determined</code></span>
<span class="codeline" id="line-1976"><code>** by the [SQLITE_ALLOW_COVERING_INDEX_SCAN] compile-time option, or is "on"</code></span>
<span class="codeline" id="line-1977"><code>** if that compile-time option is omitted.</code></span>
<span class="codeline" id="line-1978"><code>** The ability to disable the use of covering indices for full table scans</code></span>
<span class="codeline" id="line-1979"><code>** is because some incorrectly coded legacy applications might malfunction</code></span>
<span class="codeline" id="line-1980"><code>** when the optimization is enabled.  Providing the ability to</code></span>
<span class="codeline" id="line-1981"><code>** disable the optimization allows the older, buggy application code to work</code></span>
<span class="codeline" id="line-1982"><code>** without change even with newer versions of SQLite.</code></span>
<span class="codeline" id="line-1983"><code>**</code></span>
<span class="codeline" id="line-1984"><code>** [[SQLITE_CONFIG_PCACHE]] [[SQLITE_CONFIG_GETPCACHE]]</code></span>
<span class="codeline" id="line-1985"><code>** &lt;dt&gt;SQLITE_CONFIG_PCACHE and SQLITE_CONFIG_GETPCACHE</code></span>
<span class="codeline" id="line-1986"><code>** &lt;dd&gt; These options are obsolete and should not be used by new code.</code></span>
<span class="codeline" id="line-1987"><code>** They are retained for backwards compatibility but are now no-ops.</code></span>
<span class="codeline" id="line-1988"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-1989"><code>**</code></span>
<span class="codeline" id="line-1990"><code>** [[SQLITE_CONFIG_SQLLOG]]</code></span>
<span class="codeline" id="line-1991"><code>** &lt;dt&gt;SQLITE_CONFIG_SQLLOG</code></span>
<span class="codeline" id="line-1992"><code>** &lt;dd&gt;This option is only available if sqlite is compiled with the</code></span>
<span class="codeline" id="line-1993"><code>** [SQLITE_ENABLE_SQLLOG] pre-processor macro defined. The first argument should</code></span>
<span class="codeline" id="line-1994"><code>** be a pointer to a function of type void(*)(void*,sqlite3*,const char*, int).</code></span>
<span class="codeline" id="line-1995"><code>** The second should be of type (void*). The callback is invoked by the library</code></span>
<span class="codeline" id="line-1996"><code>** in three separate circumstances, identified by the value passed as the</code></span>
<span class="codeline" id="line-1997"><code>** fourth parameter. If the fourth parameter is 0, then the database connection</code></span>
<span class="codeline" id="line-1998"><code>** passed as the second argument has just been opened. The third argument</code></span>
<span class="codeline" id="line-1999"><code>** points to a buffer containing the name of the main database file. If the</code></span>
<span class="codeline" id="line-2000"><code>** fourth parameter is 1, then the SQL statement that the third parameter</code></span>
<span class="codeline" id="line-2001"><code>** points to has just been executed. Or, if the fourth parameter is 2, then</code></span>
<span class="codeline" id="line-2002"><code>** the connection being passed as the second parameter is being closed. The</code></span>
<span class="codeline" id="line-2003"><code>** third parameter is passed NULL In this case.  An example of using this</code></span>
<span class="codeline" id="line-2004"><code>** configuration option can be seen in the "test_sqllog.c" source file in</code></span>
<span class="codeline" id="line-2005"><code>** the canonical SQLite source tree.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-2006"><code>**</code></span>
<span class="codeline" id="line-2007"><code>** [[SQLITE_CONFIG_MMAP_SIZE]]</code></span>
<span class="codeline" id="line-2008"><code>** &lt;dt&gt;SQLITE_CONFIG_MMAP_SIZE</code></span>
<span class="codeline" id="line-2009"><code>** &lt;dd&gt;^SQLITE_CONFIG_MMAP_SIZE takes two 64-bit integer (sqlite3_int64) values</code></span>
<span class="codeline" id="line-2010"><code>** that are the default mmap size limit (the default setting for</code></span>
<span class="codeline" id="line-2011"><code>** [PRAGMA mmap_size]) and the maximum allowed mmap size limit.</code></span>
<span class="codeline" id="line-2012"><code>** ^The default setting can be overridden by each database connection using</code></span>
<span class="codeline" id="line-2013"><code>** either the [PRAGMA mmap_size] command, or by using the</code></span>
<span class="codeline" id="line-2014"><code>** [SQLITE_FCNTL_MMAP_SIZE] file control.  ^(The maximum allowed mmap size</code></span>
<span class="codeline" id="line-2015"><code>** will be silently truncated if necessary so that it does not exceed the</code></span>
<span class="codeline" id="line-2016"><code>** compile-time maximum mmap size set by the</code></span>
<span class="codeline" id="line-2017"><code>** [SQLITE_MAX_MMAP_SIZE] compile-time option.)^</code></span>
<span class="codeline" id="line-2018"><code>** ^If either argument to this option is negative, then that argument is</code></span>
<span class="codeline" id="line-2019"><code>** changed to its compile-time default.</code></span>
<span class="codeline" id="line-2020"><code>**</code></span>
<span class="codeline" id="line-2021"><code>** [[SQLITE_CONFIG_WIN32_HEAPSIZE]]</code></span>
<span class="codeline" id="line-2022"><code>** &lt;dt&gt;SQLITE_CONFIG_WIN32_HEAPSIZE</code></span>
<span class="codeline" id="line-2023"><code>** &lt;dd&gt;^The SQLITE_CONFIG_WIN32_HEAPSIZE option is only available if SQLite is</code></span>
<span class="codeline" id="line-2024"><code>** compiled for Windows with the [SQLITE_WIN32_MALLOC] pre-processor macro</code></span>
<span class="codeline" id="line-2025"><code>** defined. ^SQLITE_CONFIG_WIN32_HEAPSIZE takes a 32-bit unsigned integer value</code></span>
<span class="codeline" id="line-2026"><code>** that specifies the maximum size of the created heap.</code></span>
<span class="codeline" id="line-2027"><code>**</code></span>
<span class="codeline" id="line-2028"><code>** [[SQLITE_CONFIG_PCACHE_HDRSZ]]</code></span>
<span class="codeline" id="line-2029"><code>** &lt;dt&gt;SQLITE_CONFIG_PCACHE_HDRSZ</code></span>
<span class="codeline" id="line-2030"><code>** &lt;dd&gt;^The SQLITE_CONFIG_PCACHE_HDRSZ option takes a single parameter which</code></span>
<span class="codeline" id="line-2031"><code>** is a pointer to an integer and writes into that integer the number of extra</code></span>
<span class="codeline" id="line-2032"><code>** bytes per page required for each page in [SQLITE_CONFIG_PAGECACHE].</code></span>
<span class="codeline" id="line-2033"><code>** The amount of extra space required can change depending on the compiler,</code></span>
<span class="codeline" id="line-2034"><code>** target platform, and SQLite version.</code></span>
<span class="codeline" id="line-2035"><code>**</code></span>
<span class="codeline" id="line-2036"><code>** [[SQLITE_CONFIG_PMASZ]]</code></span>
<span class="codeline" id="line-2037"><code>** &lt;dt&gt;SQLITE_CONFIG_PMASZ</code></span>
<span class="codeline" id="line-2038"><code>** &lt;dd&gt;^The SQLITE_CONFIG_PMASZ option takes a single parameter which</code></span>
<span class="codeline" id="line-2039"><code>** is an unsigned integer and sets the "Minimum PMA Size" for the multithreaded</code></span>
<span class="codeline" id="line-2040"><code>** sorter to that integer.  The default minimum PMA Size is set by the</code></span>
<span class="codeline" id="line-2041"><code>** [SQLITE_SORTER_PMASZ] compile-time option.  New threads are launched</code></span>
<span class="codeline" id="line-2042"><code>** to help with sort operations when multithreaded sorting</code></span>
<span class="codeline" id="line-2043"><code>** is enabled (using the [PRAGMA threads] command) and the amount of content</code></span>
<span class="codeline" id="line-2044"><code>** to be sorted exceeds the page size times the minimum of the</code></span>
<span class="codeline" id="line-2045"><code>** [PRAGMA cache_size] setting and this value.</code></span>
<span class="codeline" id="line-2046"><code>**</code></span>
<span class="codeline" id="line-2047"><code>** [[SQLITE_CONFIG_STMTJRNL_SPILL]]</code></span>
<span class="codeline" id="line-2048"><code>** &lt;dt&gt;SQLITE_CONFIG_STMTJRNL_SPILL</code></span>
<span class="codeline" id="line-2049"><code>** &lt;dd&gt;^The SQLITE_CONFIG_STMTJRNL_SPILL option takes a single parameter which</code></span>
<span class="codeline" id="line-2050"><code>** becomes the [statement journal] spill-to-disk threshold.</code></span>
<span class="codeline" id="line-2051"><code>** [Statement journals] are held in memory until their size (in bytes)</code></span>
<span class="codeline" id="line-2052"><code>** exceeds this threshold, at which point they are written to disk.</code></span>
<span class="codeline" id="line-2053"><code>** Or if the threshold is -1, statement journals are always held</code></span>
<span class="codeline" id="line-2054"><code>** exclusively in memory.</code></span>
<span class="codeline" id="line-2055"><code>** Since many statement journals never become large, setting the spill</code></span>
<span class="codeline" id="line-2056"><code>** threshold to a value such as 64KiB can greatly reduce the amount of</code></span>
<span class="codeline" id="line-2057"><code>** I/O required to support statement rollback.</code></span>
<span class="codeline" id="line-2058"><code>** The default value for this setting is controlled by the</code></span>
<span class="codeline" id="line-2059"><code>** [SQLITE_STMTJRNL_SPILL] compile-time option.</code></span>
<span class="codeline" id="line-2060"><code>**</code></span>
<span class="codeline" id="line-2061"><code>** [[SQLITE_CONFIG_SORTERREF_SIZE]]</code></span>
<span class="codeline" id="line-2062"><code>** &lt;dt&gt;SQLITE_CONFIG_SORTERREF_SIZE</code></span>
<span class="codeline" id="line-2063"><code>** &lt;dd&gt;The SQLITE_CONFIG_SORTERREF_SIZE option accepts a single parameter</code></span>
<span class="codeline" id="line-2064"><code>** of type (int) - the new value of the sorter-reference size threshold.</code></span>
<span class="codeline" id="line-2065"><code>** Usually, when SQLite uses an external sort to order records according</code></span>
<span class="codeline" id="line-2066"><code>** to an ORDER BY clause, all fields required by the caller are present in the</code></span>
<span class="codeline" id="line-2067"><code>** sorted records. However, if SQLite determines based on the declared type</code></span>
<span class="codeline" id="line-2068"><code>** of a table column that its values are likely to be very large - larger</code></span>
<span class="codeline" id="line-2069"><code>** than the configured sorter-reference size threshold - then a reference</code></span>
<span class="codeline" id="line-2070"><code>** is stored in each sorted record and the required column values loaded</code></span>
<span class="codeline" id="line-2071"><code>** from the database as records are returned in sorted order. The default</code></span>
<span class="codeline" id="line-2072"><code>** value for this option is to never use this optimization. Specifying a</code></span>
<span class="codeline" id="line-2073"><code>** negative value for this option restores the default behaviour.</code></span>
<span class="codeline" id="line-2074"><code>** This option is only available if SQLite is compiled with the</code></span>
<span class="codeline" id="line-2075"><code>** [SQLITE_ENABLE_SORTER_REFERENCES] compile-time option.</code></span>
<span class="codeline" id="line-2076"><code>**</code></span>
<span class="codeline" id="line-2077"><code>** [[SQLITE_CONFIG_MEMDB_MAXSIZE]]</code></span>
<span class="codeline" id="line-2078"><code>** &lt;dt&gt;SQLITE_CONFIG_MEMDB_MAXSIZE</code></span>
<span class="codeline" id="line-2079"><code>** &lt;dd&gt;The SQLITE_CONFIG_MEMDB_MAXSIZE option accepts a single parameter</code></span>
<span class="codeline" id="line-2080"><code>** [sqlite3_int64] parameter which is the default maximum size for an in-memory</code></span>
<span class="codeline" id="line-2081"><code>** database created using [sqlite3_deserialize()].  This default maximum</code></span>
<span class="codeline" id="line-2082"><code>** size can be adjusted up or down for individual databases using the</code></span>
<span class="codeline" id="line-2083"><code>** [SQLITE_FCNTL_SIZE_LIMIT] [sqlite3_file_control|file-control].  If this</code></span>
<span class="codeline" id="line-2084"><code>** configuration setting is never used, then the default maximum is determined</code></span>
<span class="codeline" id="line-2085"><code>** by the [SQLITE_MEMDB_DEFAULT_MAXSIZE] compile-time option.  If that</code></span>
<span class="codeline" id="line-2086"><code>** compile-time option is not set, then the default maximum is 1073741824.</code></span>
<span class="codeline" id="line-2087"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-2088"><code>*/</code></span>
<span class="codeline" id="line-2089"><code>#define SQLITE_CONFIG_SINGLETHREAD  1  /* nil */</code></span>
<span class="codeline" id="line-2090"><code>#define SQLITE_CONFIG_MULTITHREAD   2  /* nil */</code></span>
<span class="codeline" id="line-2091"><code>#define SQLITE_CONFIG_SERIALIZED    3  /* nil */</code></span>
<span class="codeline" id="line-2092"><code>#define SQLITE_CONFIG_MALLOC        4  /* sqlite3_mem_methods* */</code></span>
<span class="codeline" id="line-2093"><code>#define SQLITE_CONFIG_GETMALLOC     5  /* sqlite3_mem_methods* */</code></span>
<span class="codeline" id="line-2094"><code>#define SQLITE_CONFIG_SCRATCH       6  /* No longer used */</code></span>
<span class="codeline" id="line-2095"><code>#define SQLITE_CONFIG_PAGECACHE     7  /* void*, int sz, int N */</code></span>
<span class="codeline" id="line-2096"><code>#define SQLITE_CONFIG_HEAP          8  /* void*, int nByte, int min */</code></span>
<span class="codeline" id="line-2097"><code>#define SQLITE_CONFIG_MEMSTATUS     9  /* boolean */</code></span>
<span class="codeline" id="line-2098"><code>#define SQLITE_CONFIG_MUTEX        10  /* sqlite3_mutex_methods* */</code></span>
<span class="codeline" id="line-2099"><code>#define SQLITE_CONFIG_GETMUTEX     11  /* sqlite3_mutex_methods* */</code></span>
<span class="codeline" id="line-2100"><code>/* previously SQLITE_CONFIG_CHUNKALLOC 12 which is now unused. */</code></span>
<span class="codeline" id="line-2101"><code>#define SQLITE_CONFIG_LOOKASIDE    13  /* int int */</code></span>
<span class="codeline" id="line-2102"><code>#define SQLITE_CONFIG_PCACHE       14  /* no-op */</code></span>
<span class="codeline" id="line-2103"><code>#define SQLITE_CONFIG_GETPCACHE    15  /* no-op */</code></span>
<span class="codeline" id="line-2104"><code>#define SQLITE_CONFIG_LOG          16  /* xFunc, void* */</code></span>
<span class="codeline" id="line-2105"><code>#define SQLITE_CONFIG_URI          17  /* int */</code></span>
<span class="codeline" id="line-2106"><code>#define SQLITE_CONFIG_PCACHE2      18  /* sqlite3_pcache_methods2* */</code></span>
<span class="codeline" id="line-2107"><code>#define SQLITE_CONFIG_GETPCACHE2   19  /* sqlite3_pcache_methods2* */</code></span>
<span class="codeline" id="line-2108"><code>#define SQLITE_CONFIG_COVERING_INDEX_SCAN 20  /* int */</code></span>
<span class="codeline" id="line-2109"><code>#define SQLITE_CONFIG_SQLLOG       21  /* xSqllog, void* */</code></span>
<span class="codeline" id="line-2110"><code>#define SQLITE_CONFIG_MMAP_SIZE    22  /* sqlite3_int64, sqlite3_int64 */</code></span>
<span class="codeline" id="line-2111"><code>#define SQLITE_CONFIG_WIN32_HEAPSIZE      23  /* int nByte */</code></span>
<span class="codeline" id="line-2112"><code>#define SQLITE_CONFIG_PCACHE_HDRSZ        24  /* int *psz */</code></span>
<span class="codeline" id="line-2113"><code>#define SQLITE_CONFIG_PMASZ               25  /* unsigned int szPma */</code></span>
<span class="codeline" id="line-2114"><code>#define SQLITE_CONFIG_STMTJRNL_SPILL      26  /* int nByte */</code></span>
<span class="codeline" id="line-2115"><code>#define SQLITE_CONFIG_SMALL_MALLOC        27  /* boolean */</code></span>
<span class="codeline" id="line-2116"><code>#define SQLITE_CONFIG_SORTERREF_SIZE      28  /* int nByte */</code></span>
<span class="codeline" id="line-2117"><code>#define SQLITE_CONFIG_MEMDB_MAXSIZE       29  /* sqlite3_int64 */</code></span>
<span class="codeline" id="line-2118"><code></code></span>
<span class="codeline" id="line-2119"><code>/*</code></span>
<span class="codeline" id="line-2120"><code>** CAPI3REF: Database Connection Configuration Options</code></span>
<span class="codeline" id="line-2121"><code>**</code></span>
<span class="codeline" id="line-2122"><code>** These constants are the available integer configuration options that</code></span>
<span class="codeline" id="line-2123"><code>** can be passed as the second argument to the [sqlite3_db_config()] interface.</code></span>
<span class="codeline" id="line-2124"><code>**</code></span>
<span class="codeline" id="line-2125"><code>** New configuration options may be added in future releases of SQLite.</code></span>
<span class="codeline" id="line-2126"><code>** Existing configuration options might be discontinued.  Applications</code></span>
<span class="codeline" id="line-2127"><code>** should check the return code from [sqlite3_db_config()] to make sure that</code></span>
<span class="codeline" id="line-2128"><code>** the call worked.  ^The [sqlite3_db_config()] interface will return a</code></span>
<span class="codeline" id="line-2129"><code>** non-zero [error code] if a discontinued or unsupported configuration option</code></span>
<span class="codeline" id="line-2130"><code>** is invoked.</code></span>
<span class="codeline" id="line-2131"><code>**</code></span>
<span class="codeline" id="line-2132"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-2133"><code>** [[SQLITE_DBCONFIG_LOOKASIDE]]</code></span>
<span class="codeline" id="line-2134"><code>** &lt;dt&gt;SQLITE_DBCONFIG_LOOKASIDE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2135"><code>** &lt;dd&gt; ^This option takes three additional arguments that determine the</code></span>
<span class="codeline" id="line-2136"><code>** [lookaside memory allocator] configuration for the [database connection].</code></span>
<span class="codeline" id="line-2137"><code>** ^The first argument (the third parameter to [sqlite3_db_config()] is a</code></span>
<span class="codeline" id="line-2138"><code>** pointer to a memory buffer to use for lookaside memory.</code></span>
<span class="codeline" id="line-2139"><code>** ^The first argument after the SQLITE_DBCONFIG_LOOKASIDE verb</code></span>
<span class="codeline" id="line-2140"><code>** may be NULL in which case SQLite will allocate the</code></span>
<span class="codeline" id="line-2141"><code>** lookaside buffer itself using [sqlite3_malloc()]. ^The second argument is the</code></span>
<span class="codeline" id="line-2142"><code>** size of each lookaside buffer slot.  ^The third argument is the number of</code></span>
<span class="codeline" id="line-2143"><code>** slots.  The size of the buffer in the first argument must be greater than</code></span>
<span class="codeline" id="line-2144"><code>** or equal to the product of the second and third arguments.  The buffer</code></span>
<span class="codeline" id="line-2145"><code>** must be aligned to an 8-byte boundary.  ^If the second argument to</code></span>
<span class="codeline" id="line-2146"><code>** SQLITE_DBCONFIG_LOOKASIDE is not a multiple of 8, it is internally</code></span>
<span class="codeline" id="line-2147"><code>** rounded down to the next smaller multiple of 8.  ^(The lookaside memory</code></span>
<span class="codeline" id="line-2148"><code>** configuration for a database connection can only be changed when that</code></span>
<span class="codeline" id="line-2149"><code>** connection is not currently using lookaside memory, or in other words</code></span>
<span class="codeline" id="line-2150"><code>** when the "current value" returned by</code></span>
<span class="codeline" id="line-2151"><code>** [sqlite3_db_status](D,[SQLITE_CONFIG_LOOKASIDE],...) is zero.</code></span>
<span class="codeline" id="line-2152"><code>** Any attempt to change the lookaside memory configuration when lookaside</code></span>
<span class="codeline" id="line-2153"><code>** memory is in use leaves the configuration unchanged and returns</code></span>
<span class="codeline" id="line-2154"><code>** [SQLITE_BUSY].)^&lt;/dd&gt;</code></span>
<span class="codeline" id="line-2155"><code>**</code></span>
<span class="codeline" id="line-2156"><code>** [[SQLITE_DBCONFIG_ENABLE_FKEY]]</code></span>
<span class="codeline" id="line-2157"><code>** &lt;dt&gt;SQLITE_DBCONFIG_ENABLE_FKEY&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2158"><code>** &lt;dd&gt; ^This option is used to enable or disable the enforcement of</code></span>
<span class="codeline" id="line-2159"><code>** [foreign key constraints].  There should be two additional arguments.</code></span>
<span class="codeline" id="line-2160"><code>** The first argument is an integer which is 0 to disable FK enforcement,</code></span>
<span class="codeline" id="line-2161"><code>** positive to enable FK enforcement or negative to leave FK enforcement</code></span>
<span class="codeline" id="line-2162"><code>** unchanged.  The second parameter is a pointer to an integer into which</code></span>
<span class="codeline" id="line-2163"><code>** is written 0 or 1 to indicate whether FK enforcement is off or on</code></span>
<span class="codeline" id="line-2164"><code>** following this call.  The second parameter may be a NULL pointer, in</code></span>
<span class="codeline" id="line-2165"><code>** which case the FK enforcement setting is not reported back. &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2166"><code>**</code></span>
<span class="codeline" id="line-2167"><code>** [[SQLITE_DBCONFIG_ENABLE_TRIGGER]]</code></span>
<span class="codeline" id="line-2168"><code>** &lt;dt&gt;SQLITE_DBCONFIG_ENABLE_TRIGGER&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2169"><code>** &lt;dd&gt; ^This option is used to enable or disable [CREATE TRIGGER | triggers].</code></span>
<span class="codeline" id="line-2170"><code>** There should be two additional arguments.</code></span>
<span class="codeline" id="line-2171"><code>** The first argument is an integer which is 0 to disable triggers,</code></span>
<span class="codeline" id="line-2172"><code>** positive to enable triggers or negative to leave the setting unchanged.</code></span>
<span class="codeline" id="line-2173"><code>** The second parameter is a pointer to an integer into which</code></span>
<span class="codeline" id="line-2174"><code>** is written 0 or 1 to indicate whether triggers are disabled or enabled</code></span>
<span class="codeline" id="line-2175"><code>** following this call.  The second parameter may be a NULL pointer, in</code></span>
<span class="codeline" id="line-2176"><code>** which case the trigger setting is not reported back.</code></span>
<span class="codeline" id="line-2177"><code>**</code></span>
<span class="codeline" id="line-2178"><code>** &lt;p&gt;Originally this option disabled all triggers.  ^(However, since</code></span>
<span class="codeline" id="line-2179"><code>** SQLite version 3.35.0, TEMP triggers are still allowed even if</code></span>
<span class="codeline" id="line-2180"><code>** this option is off.  So, in other words, this option now only disables</code></span>
<span class="codeline" id="line-2181"><code>** triggers in the main database schema or in the schemas of ATTACH-ed</code></span>
<span class="codeline" id="line-2182"><code>** databases.)^ &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2183"><code>**</code></span>
<span class="codeline" id="line-2184"><code>** [[SQLITE_DBCONFIG_ENABLE_VIEW]]</code></span>
<span class="codeline" id="line-2185"><code>** &lt;dt&gt;SQLITE_DBCONFIG_ENABLE_VIEW&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2186"><code>** &lt;dd&gt; ^This option is used to enable or disable [CREATE VIEW | views].</code></span>
<span class="codeline" id="line-2187"><code>** There should be two additional arguments.</code></span>
<span class="codeline" id="line-2188"><code>** The first argument is an integer which is 0 to disable views,</code></span>
<span class="codeline" id="line-2189"><code>** positive to enable views or negative to leave the setting unchanged.</code></span>
<span class="codeline" id="line-2190"><code>** The second parameter is a pointer to an integer into which</code></span>
<span class="codeline" id="line-2191"><code>** is written 0 or 1 to indicate whether views are disabled or enabled</code></span>
<span class="codeline" id="line-2192"><code>** following this call.  The second parameter may be a NULL pointer, in</code></span>
<span class="codeline" id="line-2193"><code>** which case the view setting is not reported back.</code></span>
<span class="codeline" id="line-2194"><code>**</code></span>
<span class="codeline" id="line-2195"><code>** &lt;p&gt;Originally this option disabled all views.  ^(However, since</code></span>
<span class="codeline" id="line-2196"><code>** SQLite version 3.35.0, TEMP views are still allowed even if</code></span>
<span class="codeline" id="line-2197"><code>** this option is off.  So, in other words, this option now only disables</code></span>
<span class="codeline" id="line-2198"><code>** views in the main database schema or in the schemas of ATTACH-ed</code></span>
<span class="codeline" id="line-2199"><code>** databases.)^ &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2200"><code>**</code></span>
<span class="codeline" id="line-2201"><code>** [[SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER]]</code></span>
<span class="codeline" id="line-2202"><code>** &lt;dt&gt;SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2203"><code>** &lt;dd&gt; ^This option is used to enable or disable the</code></span>
<span class="codeline" id="line-2204"><code>** [fts3_tokenizer()] function which is part of the</code></span>
<span class="codeline" id="line-2205"><code>** [FTS3] full-text search engine extension.</code></span>
<span class="codeline" id="line-2206"><code>** There should be two additional arguments.</code></span>
<span class="codeline" id="line-2207"><code>** The first argument is an integer which is 0 to disable fts3_tokenizer() or</code></span>
<span class="codeline" id="line-2208"><code>** positive to enable fts3_tokenizer() or negative to leave the setting</code></span>
<span class="codeline" id="line-2209"><code>** unchanged.</code></span>
<span class="codeline" id="line-2210"><code>** The second parameter is a pointer to an integer into which</code></span>
<span class="codeline" id="line-2211"><code>** is written 0 or 1 to indicate whether fts3_tokenizer is disabled or enabled</code></span>
<span class="codeline" id="line-2212"><code>** following this call.  The second parameter may be a NULL pointer, in</code></span>
<span class="codeline" id="line-2213"><code>** which case the new setting is not reported back. &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2214"><code>**</code></span>
<span class="codeline" id="line-2215"><code>** [[SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION]]</code></span>
<span class="codeline" id="line-2216"><code>** &lt;dt&gt;SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2217"><code>** &lt;dd&gt; ^This option is used to enable or disable the [sqlite3_load_extension()]</code></span>
<span class="codeline" id="line-2218"><code>** interface independently of the [load_extension()] SQL function.</code></span>
<span class="codeline" id="line-2219"><code>** The [sqlite3_enable_load_extension()] API enables or disables both the</code></span>
<span class="codeline" id="line-2220"><code>** C-API [sqlite3_load_extension()] and the SQL function [load_extension()].</code></span>
<span class="codeline" id="line-2221"><code>** There should be two additional arguments.</code></span>
<span class="codeline" id="line-2222"><code>** When the first argument to this interface is 1, then only the C-API is</code></span>
<span class="codeline" id="line-2223"><code>** enabled and the SQL function remains disabled.  If the first argument to</code></span>
<span class="codeline" id="line-2224"><code>** this interface is 0, then both the C-API and the SQL function are disabled.</code></span>
<span class="codeline" id="line-2225"><code>** If the first argument is -1, then no changes are made to state of either the</code></span>
<span class="codeline" id="line-2226"><code>** C-API or the SQL function.</code></span>
<span class="codeline" id="line-2227"><code>** The second parameter is a pointer to an integer into which</code></span>
<span class="codeline" id="line-2228"><code>** is written 0 or 1 to indicate whether [sqlite3_load_extension()] interface</code></span>
<span class="codeline" id="line-2229"><code>** is disabled or enabled following this call.  The second parameter may</code></span>
<span class="codeline" id="line-2230"><code>** be a NULL pointer, in which case the new setting is not reported back.</code></span>
<span class="codeline" id="line-2231"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2232"><code>**</code></span>
<span class="codeline" id="line-2233"><code>** [[SQLITE_DBCONFIG_MAINDBNAME]] &lt;dt&gt;SQLITE_DBCONFIG_MAINDBNAME&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2234"><code>** &lt;dd&gt; ^This option is used to change the name of the "main" database</code></span>
<span class="codeline" id="line-2235"><code>** schema.  ^The sole argument is a pointer to a constant UTF8 string</code></span>
<span class="codeline" id="line-2236"><code>** which will become the new schema name in place of "main".  ^SQLite</code></span>
<span class="codeline" id="line-2237"><code>** does not make a copy of the new main schema name string, so the application</code></span>
<span class="codeline" id="line-2238"><code>** must ensure that the argument passed into this DBCONFIG option is unchanged</code></span>
<span class="codeline" id="line-2239"><code>** until after the database connection closes.</code></span>
<span class="codeline" id="line-2240"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2241"><code>**</code></span>
<span class="codeline" id="line-2242"><code>** [[SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE]]</code></span>
<span class="codeline" id="line-2243"><code>** &lt;dt&gt;SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2244"><code>** &lt;dd&gt; Usually, when a database in wal mode is closed or detached from a</code></span>
<span class="codeline" id="line-2245"><code>** database handle, SQLite checks if this will mean that there are now no</code></span>
<span class="codeline" id="line-2246"><code>** connections at all to the database. If so, it performs a checkpoint</code></span>
<span class="codeline" id="line-2247"><code>** operation before closing the connection. This option may be used to</code></span>
<span class="codeline" id="line-2248"><code>** override this behaviour. The first parameter passed to this operation</code></span>
<span class="codeline" id="line-2249"><code>** is an integer - positive to disable checkpoints-on-close, or zero (the</code></span>
<span class="codeline" id="line-2250"><code>** default) to enable them, and negative to leave the setting unchanged.</code></span>
<span class="codeline" id="line-2251"><code>** The second parameter is a pointer to an integer</code></span>
<span class="codeline" id="line-2252"><code>** into which is written 0 or 1 to indicate whether checkpoints-on-close</code></span>
<span class="codeline" id="line-2253"><code>** have been disabled - 0 if they are not disabled, 1 if they are.</code></span>
<span class="codeline" id="line-2254"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2255"><code>**</code></span>
<span class="codeline" id="line-2256"><code>** [[SQLITE_DBCONFIG_ENABLE_QPSG]] &lt;dt&gt;SQLITE_DBCONFIG_ENABLE_QPSG&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2257"><code>** &lt;dd&gt;^(The SQLITE_DBCONFIG_ENABLE_QPSG option activates or deactivates</code></span>
<span class="codeline" id="line-2258"><code>** the [query planner stability guarantee] (QPSG).  When the QPSG is active,</code></span>
<span class="codeline" id="line-2259"><code>** a single SQL query statement will always use the same algorithm regardless</code></span>
<span class="codeline" id="line-2260"><code>** of values of [bound parameters].)^ The QPSG disables some query optimizations</code></span>
<span class="codeline" id="line-2261"><code>** that look at the values of bound parameters, which can make some queries</code></span>
<span class="codeline" id="line-2262"><code>** slower.  But the QPSG has the advantage of more predictable behavior.  With</code></span>
<span class="codeline" id="line-2263"><code>** the QPSG active, SQLite will always use the same query plan in the field as</code></span>
<span class="codeline" id="line-2264"><code>** was used during testing in the lab.</code></span>
<span class="codeline" id="line-2265"><code>** The first argument to this setting is an integer which is 0 to disable</code></span>
<span class="codeline" id="line-2266"><code>** the QPSG, positive to enable QPSG, or negative to leave the setting</code></span>
<span class="codeline" id="line-2267"><code>** unchanged. The second parameter is a pointer to an integer into which</code></span>
<span class="codeline" id="line-2268"><code>** is written 0 or 1 to indicate whether the QPSG is disabled or enabled</code></span>
<span class="codeline" id="line-2269"><code>** following this call.</code></span>
<span class="codeline" id="line-2270"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2271"><code>**</code></span>
<span class="codeline" id="line-2272"><code>** [[SQLITE_DBCONFIG_TRIGGER_EQP]] &lt;dt&gt;SQLITE_DBCONFIG_TRIGGER_EQP&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2273"><code>** &lt;dd&gt; By default, the output of EXPLAIN QUERY PLAN commands does not</code></span>
<span class="codeline" id="line-2274"><code>** include output for any operations performed by trigger programs. This</code></span>
<span class="codeline" id="line-2275"><code>** option is used to set or clear (the default) a flag that governs this</code></span>
<span class="codeline" id="line-2276"><code>** behavior. The first parameter passed to this operation is an integer -</code></span>
<span class="codeline" id="line-2277"><code>** positive to enable output for trigger programs, or zero to disable it,</code></span>
<span class="codeline" id="line-2278"><code>** or negative to leave the setting unchanged.</code></span>
<span class="codeline" id="line-2279"><code>** The second parameter is a pointer to an integer into which is written</code></span>
<span class="codeline" id="line-2280"><code>** 0 or 1 to indicate whether output-for-triggers has been disabled - 0 if</code></span>
<span class="codeline" id="line-2281"><code>** it is not disabled, 1 if it is.</code></span>
<span class="codeline" id="line-2282"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2283"><code>**</code></span>
<span class="codeline" id="line-2284"><code>** [[SQLITE_DBCONFIG_RESET_DATABASE]] &lt;dt&gt;SQLITE_DBCONFIG_RESET_DATABASE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2285"><code>** &lt;dd&gt; Set the SQLITE_DBCONFIG_RESET_DATABASE flag and then run</code></span>
<span class="codeline" id="line-2286"><code>** [VACUUM] in order to reset a database back to an empty database</code></span>
<span class="codeline" id="line-2287"><code>** with no schema and no content. The following process works even for</code></span>
<span class="codeline" id="line-2288"><code>** a badly corrupted database file:</code></span>
<span class="codeline" id="line-2289"><code>** &lt;ol&gt;</code></span>
<span class="codeline" id="line-2290"><code>** &lt;li&gt; If the database connection is newly opened, make sure it has read the</code></span>
<span class="codeline" id="line-2291"><code>**      database schema by preparing then discarding some query against the</code></span>
<span class="codeline" id="line-2292"><code>**      database, or calling sqlite3_table_column_metadata(), ignoring any</code></span>
<span class="codeline" id="line-2293"><code>**      errors.  This step is only necessary if the application desires to keep</code></span>
<span class="codeline" id="line-2294"><code>**      the database in WAL mode after the reset if it was in WAL mode before</code></span>
<span class="codeline" id="line-2295"><code>**      the reset.</code></span>
<span class="codeline" id="line-2296"><code>** &lt;li&gt; sqlite3_db_config(db, SQLITE_DBCONFIG_RESET_DATABASE, 1, 0);</code></span>
<span class="codeline" id="line-2297"><code>** &lt;li&gt; [sqlite3_exec](db, "[VACUUM]", 0, 0, 0);</code></span>
<span class="codeline" id="line-2298"><code>** &lt;li&gt; sqlite3_db_config(db, SQLITE_DBCONFIG_RESET_DATABASE, 0, 0);</code></span>
<span class="codeline" id="line-2299"><code>** &lt;/ol&gt;</code></span>
<span class="codeline" id="line-2300"><code>** Because resetting a database is destructive and irreversible, the</code></span>
<span class="codeline" id="line-2301"><code>** process requires the use of this obscure API and multiple steps to help</code></span>
<span class="codeline" id="line-2302"><code>** ensure that it does not happen by accident.</code></span>
<span class="codeline" id="line-2303"><code>**</code></span>
<span class="codeline" id="line-2304"><code>** [[SQLITE_DBCONFIG_DEFENSIVE]] &lt;dt&gt;SQLITE_DBCONFIG_DEFENSIVE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2305"><code>** &lt;dd&gt;The SQLITE_DBCONFIG_DEFENSIVE option activates or deactivates the</code></span>
<span class="codeline" id="line-2306"><code>** "defensive" flag for a database connection.  When the defensive</code></span>
<span class="codeline" id="line-2307"><code>** flag is enabled, language features that allow ordinary SQL to</code></span>
<span class="codeline" id="line-2308"><code>** deliberately corrupt the database file are disabled.  The disabled</code></span>
<span class="codeline" id="line-2309"><code>** features include but are not limited to the following:</code></span>
<span class="codeline" id="line-2310"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-2311"><code>** &lt;li&gt; The [PRAGMA writable_schema=ON] statement.</code></span>
<span class="codeline" id="line-2312"><code>** &lt;li&gt; The [PRAGMA journal_mode=OFF] statement.</code></span>
<span class="codeline" id="line-2313"><code>** &lt;li&gt; Writes to the [sqlite_dbpage] virtual table.</code></span>
<span class="codeline" id="line-2314"><code>** &lt;li&gt; Direct writes to [shadow tables].</code></span>
<span class="codeline" id="line-2315"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-2316"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2317"><code>**</code></span>
<span class="codeline" id="line-2318"><code>** [[SQLITE_DBCONFIG_WRITABLE_SCHEMA]] &lt;dt&gt;SQLITE_DBCONFIG_WRITABLE_SCHEMA&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2319"><code>** &lt;dd&gt;The SQLITE_DBCONFIG_WRITABLE_SCHEMA option activates or deactivates the</code></span>
<span class="codeline" id="line-2320"><code>** "writable_schema" flag. This has the same effect and is logically equivalent</code></span>
<span class="codeline" id="line-2321"><code>** to setting [PRAGMA writable_schema=ON] or [PRAGMA writable_schema=OFF].</code></span>
<span class="codeline" id="line-2322"><code>** The first argument to this setting is an integer which is 0 to disable</code></span>
<span class="codeline" id="line-2323"><code>** the writable_schema, positive to enable writable_schema, or negative to</code></span>
<span class="codeline" id="line-2324"><code>** leave the setting unchanged. The second parameter is a pointer to an</code></span>
<span class="codeline" id="line-2325"><code>** integer into which is written 0 or 1 to indicate whether the writable_schema</code></span>
<span class="codeline" id="line-2326"><code>** is enabled or disabled following this call.</code></span>
<span class="codeline" id="line-2327"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2328"><code>**</code></span>
<span class="codeline" id="line-2329"><code>** [[SQLITE_DBCONFIG_LEGACY_ALTER_TABLE]]</code></span>
<span class="codeline" id="line-2330"><code>** &lt;dt&gt;SQLITE_DBCONFIG_LEGACY_ALTER_TABLE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-2331"><code>** &lt;dd&gt;The SQLITE_DBCONFIG_LEGACY_ALTER_TABLE option activates or deactivates</code></span>
<span class="codeline" id="line-2332"><code>** the legacy behavior of the [ALTER TABLE RENAME] command such it</code></span>
<span class="codeline" id="line-2333"><code>** behaves as it did prior to [version 3.24.0] (2018-06-04).  See the</code></span>
<span class="codeline" id="line-2334"><code>** "Compatibility Notice" on the [ALTER TABLE RENAME documentation] for</code></span>
<span class="codeline" id="line-2335"><code>** additional information. This feature can also be turned on and off</code></span>
<span class="codeline" id="line-2336"><code>** using the [PRAGMA legacy_alter_table] statement.</code></span>
<span class="codeline" id="line-2337"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2338"><code>**</code></span>
<span class="codeline" id="line-2339"><code>** [[SQLITE_DBCONFIG_DQS_DML]]</code></span>
<span class="codeline" id="line-2340"><code>** &lt;dt&gt;SQLITE_DBCONFIG_DQS_DML&lt;/td&gt;</code></span>
<span class="codeline" id="line-2341"><code>** &lt;dd&gt;The SQLITE_DBCONFIG_DQS_DML option activates or deactivates</code></span>
<span class="codeline" id="line-2342"><code>** the legacy [double-quoted string literal] misfeature for DML statements</code></span>
<span class="codeline" id="line-2343"><code>** only, that is DELETE, INSERT, SELECT, and UPDATE statements. The</code></span>
<span class="codeline" id="line-2344"><code>** default value of this setting is determined by the [-DSQLITE_DQS]</code></span>
<span class="codeline" id="line-2345"><code>** compile-time option.</code></span>
<span class="codeline" id="line-2346"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2347"><code>**</code></span>
<span class="codeline" id="line-2348"><code>** [[SQLITE_DBCONFIG_DQS_DDL]]</code></span>
<span class="codeline" id="line-2349"><code>** &lt;dt&gt;SQLITE_DBCONFIG_DQS_DDL&lt;/td&gt;</code></span>
<span class="codeline" id="line-2350"><code>** &lt;dd&gt;The SQLITE_DBCONFIG_DQS option activates or deactivates</code></span>
<span class="codeline" id="line-2351"><code>** the legacy [double-quoted string literal] misfeature for DDL statements,</code></span>
<span class="codeline" id="line-2352"><code>** such as CREATE TABLE and CREATE INDEX. The</code></span>
<span class="codeline" id="line-2353"><code>** default value of this setting is determined by the [-DSQLITE_DQS]</code></span>
<span class="codeline" id="line-2354"><code>** compile-time option.</code></span>
<span class="codeline" id="line-2355"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2356"><code>**</code></span>
<span class="codeline" id="line-2357"><code>** [[SQLITE_DBCONFIG_TRUSTED_SCHEMA]]</code></span>
<span class="codeline" id="line-2358"><code>** &lt;dt&gt;SQLITE_DBCONFIG_TRUSTED_SCHEMA&lt;/td&gt;</code></span>
<span class="codeline" id="line-2359"><code>** &lt;dd&gt;The SQLITE_DBCONFIG_TRUSTED_SCHEMA option tells SQLite to</code></span>
<span class="codeline" id="line-2360"><code>** assume that database schemas are untainted by malicious content.</code></span>
<span class="codeline" id="line-2361"><code>** When the SQLITE_DBCONFIG_TRUSTED_SCHEMA option is disabled, SQLite</code></span>
<span class="codeline" id="line-2362"><code>** takes additional defensive steps to protect the application from harm</code></span>
<span class="codeline" id="line-2363"><code>** including:</code></span>
<span class="codeline" id="line-2364"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-2365"><code>** &lt;li&gt; Prohibit the use of SQL functions inside triggers, views,</code></span>
<span class="codeline" id="line-2366"><code>** CHECK constraints, DEFAULT clauses, expression indexes,</code></span>
<span class="codeline" id="line-2367"><code>** partial indexes, or generated columns</code></span>
<span class="codeline" id="line-2368"><code>** unless those functions are tagged with [SQLITE_INNOCUOUS].</code></span>
<span class="codeline" id="line-2369"><code>** &lt;li&gt; Prohibit the use of virtual tables inside of triggers or views</code></span>
<span class="codeline" id="line-2370"><code>** unless those virtual tables are tagged with [SQLITE_VTAB_INNOCUOUS].</code></span>
<span class="codeline" id="line-2371"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-2372"><code>** This setting defaults to "on" for legacy compatibility, however</code></span>
<span class="codeline" id="line-2373"><code>** all applications are advised to turn it off if possible. This setting</code></span>
<span class="codeline" id="line-2374"><code>** can also be controlled using the [PRAGMA trusted_schema] statement.</code></span>
<span class="codeline" id="line-2375"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2376"><code>**</code></span>
<span class="codeline" id="line-2377"><code>** [[SQLITE_DBCONFIG_LEGACY_FILE_FORMAT]]</code></span>
<span class="codeline" id="line-2378"><code>** &lt;dt&gt;SQLITE_DBCONFIG_LEGACY_FILE_FORMAT&lt;/td&gt;</code></span>
<span class="codeline" id="line-2379"><code>** &lt;dd&gt;The SQLITE_DBCONFIG_LEGACY_FILE_FORMAT option activates or deactivates</code></span>
<span class="codeline" id="line-2380"><code>** the legacy file format flag.  When activated, this flag causes all newly</code></span>
<span class="codeline" id="line-2381"><code>** created database file to have a schema format version number (the 4-byte</code></span>
<span class="codeline" id="line-2382"><code>** integer found at offset 44 into the database header) of 1.  This in turn</code></span>
<span class="codeline" id="line-2383"><code>** means that the resulting database file will be readable and writable by</code></span>
<span class="codeline" id="line-2384"><code>** any SQLite version back to 3.0.0 ([dateof:3.0.0]).  Without this setting,</code></span>
<span class="codeline" id="line-2385"><code>** newly created databases are generally not understandable by SQLite versions</code></span>
<span class="codeline" id="line-2386"><code>** prior to 3.3.0 ([dateof:3.3.0]).  As these words are written, there</code></span>
<span class="codeline" id="line-2387"><code>** is now scarcely any need to generated database files that are compatible</code></span>
<span class="codeline" id="line-2388"><code>** all the way back to version 3.0.0, and so this setting is of little</code></span>
<span class="codeline" id="line-2389"><code>** practical use, but is provided so that SQLite can continue to claim the</code></span>
<span class="codeline" id="line-2390"><code>** ability to generate new database files that are compatible with  version</code></span>
<span class="codeline" id="line-2391"><code>** 3.0.0.</code></span>
<span class="codeline" id="line-2392"><code>** &lt;p&gt;Note that when the SQLITE_DBCONFIG_LEGACY_FILE_FORMAT setting is on,</code></span>
<span class="codeline" id="line-2393"><code>** the [VACUUM] command will fail with an obscure error when attempting to</code></span>
<span class="codeline" id="line-2394"><code>** process a table with generated columns and a descending index.  This is</code></span>
<span class="codeline" id="line-2395"><code>** not considered a bug since SQLite versions 3.3.0 and earlier do not support</code></span>
<span class="codeline" id="line-2396"><code>** either generated columns or decending indexes.</code></span>
<span class="codeline" id="line-2397"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-2398"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-2399"><code>*/</code></span>
<span class="codeline" id="line-2400"><code>#define SQLITE_DBCONFIG_MAINDBNAME            1000 /* const char* */</code></span>
<span class="codeline" id="line-2401"><code>#define SQLITE_DBCONFIG_LOOKASIDE             1001 /* void* int int */</code></span>
<span class="codeline" id="line-2402"><code>#define SQLITE_DBCONFIG_ENABLE_FKEY           1002 /* int int* */</code></span>
<span class="codeline" id="line-2403"><code>#define SQLITE_DBCONFIG_ENABLE_TRIGGER        1003 /* int int* */</code></span>
<span class="codeline" id="line-2404"><code>#define SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER 1004 /* int int* */</code></span>
<span class="codeline" id="line-2405"><code>#define SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION 1005 /* int int* */</code></span>
<span class="codeline" id="line-2406"><code>#define SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE      1006 /* int int* */</code></span>
<span class="codeline" id="line-2407"><code>#define SQLITE_DBCONFIG_ENABLE_QPSG           1007 /* int int* */</code></span>
<span class="codeline" id="line-2408"><code>#define SQLITE_DBCONFIG_TRIGGER_EQP           1008 /* int int* */</code></span>
<span class="codeline" id="line-2409"><code>#define SQLITE_DBCONFIG_RESET_DATABASE        1009 /* int int* */</code></span>
<span class="codeline" id="line-2410"><code>#define SQLITE_DBCONFIG_DEFENSIVE             1010 /* int int* */</code></span>
<span class="codeline" id="line-2411"><code>#define SQLITE_DBCONFIG_WRITABLE_SCHEMA       1011 /* int int* */</code></span>
<span class="codeline" id="line-2412"><code>#define SQLITE_DBCONFIG_LEGACY_ALTER_TABLE    1012 /* int int* */</code></span>
<span class="codeline" id="line-2413"><code>#define SQLITE_DBCONFIG_DQS_DML               1013 /* int int* */</code></span>
<span class="codeline" id="line-2414"><code>#define SQLITE_DBCONFIG_DQS_DDL               1014 /* int int* */</code></span>
<span class="codeline" id="line-2415"><code>#define SQLITE_DBCONFIG_ENABLE_VIEW           1015 /* int int* */</code></span>
<span class="codeline" id="line-2416"><code>#define SQLITE_DBCONFIG_LEGACY_FILE_FORMAT    1016 /* int int* */</code></span>
<span class="codeline" id="line-2417"><code>#define SQLITE_DBCONFIG_TRUSTED_SCHEMA        1017 /* int int* */</code></span>
<span class="codeline" id="line-2418"><code>#define SQLITE_DBCONFIG_MAX                   1017 /* Largest DBCONFIG */</code></span>
<span class="codeline" id="line-2419"><code></code></span>
<span class="codeline" id="line-2420"><code>/*</code></span>
<span class="codeline" id="line-2421"><code>** CAPI3REF: Enable Or Disable Extended Result Codes</code></span>
<span class="codeline" id="line-2422"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-2423"><code>**</code></span>
<span class="codeline" id="line-2424"><code>** ^The sqlite3_extended_result_codes() routine enables or disables the</code></span>
<span class="codeline" id="line-2425"><code>** [extended result codes] feature of SQLite. ^The extended result</code></span>
<span class="codeline" id="line-2426"><code>** codes are disabled by default for historical compatibility.</code></span>
<span class="codeline" id="line-2427"><code>*/</code></span>
<span class="codeline" id="line-2428"><code>SQLITE_API int sqlite3_extended_result_codes(sqlite3*, int onoff);</code></span>
<span class="codeline" id="line-2429"><code></code></span>
<span class="codeline" id="line-2430"><code>/*</code></span>
<span class="codeline" id="line-2431"><code>** CAPI3REF: Last Insert Rowid</code></span>
<span class="codeline" id="line-2432"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-2433"><code>**</code></span>
<span class="codeline" id="line-2434"><code>** ^Each entry in most SQLite tables (except for [WITHOUT ROWID] tables)</code></span>
<span class="codeline" id="line-2435"><code>** has a unique 64-bit signed</code></span>
<span class="codeline" id="line-2436"><code>** integer key called the [ROWID | "rowid"]. ^The rowid is always available</code></span>
<span class="codeline" id="line-2437"><code>** as an undeclared column named ROWID, OID, or _ROWID_ as long as those</code></span>
<span class="codeline" id="line-2438"><code>** names are not also used by explicitly declared columns. ^If</code></span>
<span class="codeline" id="line-2439"><code>** the table has a column of type [INTEGER PRIMARY KEY] then that column</code></span>
<span class="codeline" id="line-2440"><code>** is another alias for the rowid.</code></span>
<span class="codeline" id="line-2441"><code>**</code></span>
<span class="codeline" id="line-2442"><code>** ^The sqlite3_last_insert_rowid(D) interface usually returns the [rowid] of</code></span>
<span class="codeline" id="line-2443"><code>** the most recent successful [INSERT] into a rowid table or [virtual table]</code></span>
<span class="codeline" id="line-2444"><code>** on database connection D. ^Inserts into [WITHOUT ROWID] tables are not</code></span>
<span class="codeline" id="line-2445"><code>** recorded. ^If no successful [INSERT]s into rowid tables have ever occurred</code></span>
<span class="codeline" id="line-2446"><code>** on the database connection D, then sqlite3_last_insert_rowid(D) returns</code></span>
<span class="codeline" id="line-2447"><code>** zero.</code></span>
<span class="codeline" id="line-2448"><code>**</code></span>
<span class="codeline" id="line-2449"><code>** As well as being set automatically as rows are inserted into database</code></span>
<span class="codeline" id="line-2450"><code>** tables, the value returned by this function may be set explicitly by</code></span>
<span class="codeline" id="line-2451"><code>** [sqlite3_set_last_insert_rowid()]</code></span>
<span class="codeline" id="line-2452"><code>**</code></span>
<span class="codeline" id="line-2453"><code>** Some virtual table implementations may INSERT rows into rowid tables as</code></span>
<span class="codeline" id="line-2454"><code>** part of committing a transaction (e.g. to flush data accumulated in memory</code></span>
<span class="codeline" id="line-2455"><code>** to disk). In this case subsequent calls to this function return the rowid</code></span>
<span class="codeline" id="line-2456"><code>** associated with these internal INSERT operations, which leads to</code></span>
<span class="codeline" id="line-2457"><code>** unintuitive results. Virtual table implementations that do write to rowid</code></span>
<span class="codeline" id="line-2458"><code>** tables in this way can avoid this problem by restoring the original</code></span>
<span class="codeline" id="line-2459"><code>** rowid value using [sqlite3_set_last_insert_rowid()] before returning</code></span>
<span class="codeline" id="line-2460"><code>** control to the user.</code></span>
<span class="codeline" id="line-2461"><code>**</code></span>
<span class="codeline" id="line-2462"><code>** ^(If an [INSERT] occurs within a trigger then this routine will</code></span>
<span class="codeline" id="line-2463"><code>** return the [rowid] of the inserted row as long as the trigger is</code></span>
<span class="codeline" id="line-2464"><code>** running. Once the trigger program ends, the value returned</code></span>
<span class="codeline" id="line-2465"><code>** by this routine reverts to what it was before the trigger was fired.)^</code></span>
<span class="codeline" id="line-2466"><code>**</code></span>
<span class="codeline" id="line-2467"><code>** ^An [INSERT] that fails due to a constraint violation is not a</code></span>
<span class="codeline" id="line-2468"><code>** successful [INSERT] and does not change the value returned by this</code></span>
<span class="codeline" id="line-2469"><code>** routine.  ^Thus INSERT OR FAIL, INSERT OR IGNORE, INSERT OR ROLLBACK,</code></span>
<span class="codeline" id="line-2470"><code>** and INSERT OR ABORT make no changes to the return value of this</code></span>
<span class="codeline" id="line-2471"><code>** routine when their insertion fails.  ^(When INSERT OR REPLACE</code></span>
<span class="codeline" id="line-2472"><code>** encounters a constraint violation, it does not fail.  The</code></span>
<span class="codeline" id="line-2473"><code>** INSERT continues to completion after deleting rows that caused</code></span>
<span class="codeline" id="line-2474"><code>** the constraint problem so INSERT OR REPLACE will always change</code></span>
<span class="codeline" id="line-2475"><code>** the return value of this interface.)^</code></span>
<span class="codeline" id="line-2476"><code>**</code></span>
<span class="codeline" id="line-2477"><code>** ^For the purposes of this routine, an [INSERT] is considered to</code></span>
<span class="codeline" id="line-2478"><code>** be successful even if it is subsequently rolled back.</code></span>
<span class="codeline" id="line-2479"><code>**</code></span>
<span class="codeline" id="line-2480"><code>** This function is accessible to SQL statements via the</code></span>
<span class="codeline" id="line-2481"><code>** [last_insert_rowid() SQL function].</code></span>
<span class="codeline" id="line-2482"><code>**</code></span>
<span class="codeline" id="line-2483"><code>** If a separate thread performs a new [INSERT] on the same</code></span>
<span class="codeline" id="line-2484"><code>** database connection while the [sqlite3_last_insert_rowid()]</code></span>
<span class="codeline" id="line-2485"><code>** function is running and thus changes the last insert [rowid],</code></span>
<span class="codeline" id="line-2486"><code>** then the value returned by [sqlite3_last_insert_rowid()] is</code></span>
<span class="codeline" id="line-2487"><code>** unpredictable and might not equal either the old or the new</code></span>
<span class="codeline" id="line-2488"><code>** last insert [rowid].</code></span>
<span class="codeline" id="line-2489"><code>*/</code></span>
<span class="codeline" id="line-2490"><code>SQLITE_API sqlite3_int64 sqlite3_last_insert_rowid(sqlite3*);</code></span>
<span class="codeline" id="line-2491"><code></code></span>
<span class="codeline" id="line-2492"><code>/*</code></span>
<span class="codeline" id="line-2493"><code>** CAPI3REF: Set the Last Insert Rowid value.</code></span>
<span class="codeline" id="line-2494"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-2495"><code>**</code></span>
<span class="codeline" id="line-2496"><code>** The sqlite3_set_last_insert_rowid(D, R) method allows the application to</code></span>
<span class="codeline" id="line-2497"><code>** set the value returned by calling sqlite3_last_insert_rowid(D) to R</code></span>
<span class="codeline" id="line-2498"><code>** without inserting a row into the database.</code></span>
<span class="codeline" id="line-2499"><code>*/</code></span>
<span class="codeline" id="line-2500"><code>SQLITE_API void sqlite3_set_last_insert_rowid(sqlite3*,sqlite3_int64);</code></span>
<span class="codeline" id="line-2501"><code></code></span>
<span class="codeline" id="line-2502"><code>/*</code></span>
<span class="codeline" id="line-2503"><code>** CAPI3REF: Count The Number Of Rows Modified</code></span>
<span class="codeline" id="line-2504"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-2505"><code>**</code></span>
<span class="codeline" id="line-2506"><code>** ^These functions return the number of rows modified, inserted or</code></span>
<span class="codeline" id="line-2507"><code>** deleted by the most recently completed INSERT, UPDATE or DELETE</code></span>
<span class="codeline" id="line-2508"><code>** statement on the database connection specified by the only parameter.</code></span>
<span class="codeline" id="line-2509"><code>** The two functions are identical except for the type of the return value</code></span>
<span class="codeline" id="line-2510"><code>** and that if the number of rows modified by the most recent INSERT, UPDATE</code></span>
<span class="codeline" id="line-2511"><code>** or DELETE is greater than the maximum value supported by type "int", then</code></span>
<span class="codeline" id="line-2512"><code>** the return value of sqlite3_changes() is undefined. ^Executing any other</code></span>
<span class="codeline" id="line-2513"><code>** type of SQL statement does not modify the value returned by these functions.</code></span>
<span class="codeline" id="line-2514"><code>**</code></span>
<span class="codeline" id="line-2515"><code>** ^Only changes made directly by the INSERT, UPDATE or DELETE statement are</code></span>
<span class="codeline" id="line-2516"><code>** considered - auxiliary changes caused by [CREATE TRIGGER | triggers],</code></span>
<span class="codeline" id="line-2517"><code>** [foreign key actions] or [REPLACE] constraint resolution are not counted.</code></span>
<span class="codeline" id="line-2518"><code>**</code></span>
<span class="codeline" id="line-2519"><code>** Changes to a view that are intercepted by</code></span>
<span class="codeline" id="line-2520"><code>** [INSTEAD OF trigger | INSTEAD OF triggers] are not counted. ^The value</code></span>
<span class="codeline" id="line-2521"><code>** returned by sqlite3_changes() immediately after an INSERT, UPDATE or</code></span>
<span class="codeline" id="line-2522"><code>** DELETE statement run on a view is always zero. Only changes made to real</code></span>
<span class="codeline" id="line-2523"><code>** tables are counted.</code></span>
<span class="codeline" id="line-2524"><code>**</code></span>
<span class="codeline" id="line-2525"><code>** Things are more complicated if the sqlite3_changes() function is</code></span>
<span class="codeline" id="line-2526"><code>** executed while a trigger program is running. This may happen if the</code></span>
<span class="codeline" id="line-2527"><code>** program uses the [changes() SQL function], or if some other callback</code></span>
<span class="codeline" id="line-2528"><code>** function invokes sqlite3_changes() directly. Essentially:</code></span>
<span class="codeline" id="line-2529"><code>**</code></span>
<span class="codeline" id="line-2530"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-2531"><code>**   &lt;li&gt; ^(Before entering a trigger program the value returned by</code></span>
<span class="codeline" id="line-2532"><code>**        sqlite3_changes() function is saved. After the trigger program</code></span>
<span class="codeline" id="line-2533"><code>**        has finished, the original value is restored.)^</code></span>
<span class="codeline" id="line-2534"><code>**</code></span>
<span class="codeline" id="line-2535"><code>**   &lt;li&gt; ^(Within a trigger program each INSERT, UPDATE and DELETE</code></span>
<span class="codeline" id="line-2536"><code>**        statement sets the value returned by sqlite3_changes()</code></span>
<span class="codeline" id="line-2537"><code>**        upon completion as normal. Of course, this value will not include</code></span>
<span class="codeline" id="line-2538"><code>**        any changes performed by sub-triggers, as the sqlite3_changes()</code></span>
<span class="codeline" id="line-2539"><code>**        value will be saved and restored after each sub-trigger has run.)^</code></span>
<span class="codeline" id="line-2540"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-2541"><code>**</code></span>
<span class="codeline" id="line-2542"><code>** ^This means that if the changes() SQL function (or similar) is used</code></span>
<span class="codeline" id="line-2543"><code>** by the first INSERT, UPDATE or DELETE statement within a trigger, it</code></span>
<span class="codeline" id="line-2544"><code>** returns the value as set when the calling statement began executing.</code></span>
<span class="codeline" id="line-2545"><code>** ^If it is used by the second or subsequent such statement within a trigger</code></span>
<span class="codeline" id="line-2546"><code>** program, the value returned reflects the number of rows modified by the</code></span>
<span class="codeline" id="line-2547"><code>** previous INSERT, UPDATE or DELETE statement within the same trigger.</code></span>
<span class="codeline" id="line-2548"><code>**</code></span>
<span class="codeline" id="line-2549"><code>** If a separate thread makes changes on the same database connection</code></span>
<span class="codeline" id="line-2550"><code>** while [sqlite3_changes()] is running then the value returned</code></span>
<span class="codeline" id="line-2551"><code>** is unpredictable and not meaningful.</code></span>
<span class="codeline" id="line-2552"><code>**</code></span>
<span class="codeline" id="line-2553"><code>** See also:</code></span>
<span class="codeline" id="line-2554"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-2555"><code>** &lt;li&gt; the [sqlite3_total_changes()] interface</code></span>
<span class="codeline" id="line-2556"><code>** &lt;li&gt; the [count_changes pragma]</code></span>
<span class="codeline" id="line-2557"><code>** &lt;li&gt; the [changes() SQL function]</code></span>
<span class="codeline" id="line-2558"><code>** &lt;li&gt; the [data_version pragma]</code></span>
<span class="codeline" id="line-2559"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-2560"><code>*/</code></span>
<span class="codeline" id="line-2561"><code>SQLITE_API int sqlite3_changes(sqlite3*);</code></span>
<span class="codeline" id="line-2562"><code>SQLITE_API sqlite3_int64 sqlite3_changes64(sqlite3*);</code></span>
<span class="codeline" id="line-2563"><code></code></span>
<span class="codeline" id="line-2564"><code>/*</code></span>
<span class="codeline" id="line-2565"><code>** CAPI3REF: Total Number Of Rows Modified</code></span>
<span class="codeline" id="line-2566"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-2567"><code>**</code></span>
<span class="codeline" id="line-2568"><code>** ^These functions return the total number of rows inserted, modified or</code></span>
<span class="codeline" id="line-2569"><code>** deleted by all [INSERT], [UPDATE] or [DELETE] statements completed</code></span>
<span class="codeline" id="line-2570"><code>** since the database connection was opened, including those executed as</code></span>
<span class="codeline" id="line-2571"><code>** part of trigger programs. The two functions are identical except for the</code></span>
<span class="codeline" id="line-2572"><code>** type of the return value and that if the number of rows modified by the</code></span>
<span class="codeline" id="line-2573"><code>** connection exceeds the maximum value supported by type "int", then</code></span>
<span class="codeline" id="line-2574"><code>** the return value of sqlite3_total_changes() is undefined. ^Executing</code></span>
<span class="codeline" id="line-2575"><code>** any other type of SQL statement does not affect the value returned by</code></span>
<span class="codeline" id="line-2576"><code>** sqlite3_total_changes().</code></span>
<span class="codeline" id="line-2577"><code>**</code></span>
<span class="codeline" id="line-2578"><code>** ^Changes made as part of [foreign key actions] are included in the</code></span>
<span class="codeline" id="line-2579"><code>** count, but those made as part of REPLACE constraint resolution are</code></span>
<span class="codeline" id="line-2580"><code>** not. ^Changes to a view that are intercepted by INSTEAD OF triggers</code></span>
<span class="codeline" id="line-2581"><code>** are not counted.</code></span>
<span class="codeline" id="line-2582"><code>**</code></span>
<span class="codeline" id="line-2583"><code>** The [sqlite3_total_changes(D)] interface only reports the number</code></span>
<span class="codeline" id="line-2584"><code>** of rows that changed due to SQL statement run against database</code></span>
<span class="codeline" id="line-2585"><code>** connection D.  Any changes by other database connections are ignored.</code></span>
<span class="codeline" id="line-2586"><code>** To detect changes against a database file from other database</code></span>
<span class="codeline" id="line-2587"><code>** connections use the [PRAGMA data_version] command or the</code></span>
<span class="codeline" id="line-2588"><code>** [SQLITE_FCNTL_DATA_VERSION] [file control].</code></span>
<span class="codeline" id="line-2589"><code>**</code></span>
<span class="codeline" id="line-2590"><code>** If a separate thread makes changes on the same database connection</code></span>
<span class="codeline" id="line-2591"><code>** while [sqlite3_total_changes()] is running then the value</code></span>
<span class="codeline" id="line-2592"><code>** returned is unpredictable and not meaningful.</code></span>
<span class="codeline" id="line-2593"><code>**</code></span>
<span class="codeline" id="line-2594"><code>** See also:</code></span>
<span class="codeline" id="line-2595"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-2596"><code>** &lt;li&gt; the [sqlite3_changes()] interface</code></span>
<span class="codeline" id="line-2597"><code>** &lt;li&gt; the [count_changes pragma]</code></span>
<span class="codeline" id="line-2598"><code>** &lt;li&gt; the [changes() SQL function]</code></span>
<span class="codeline" id="line-2599"><code>** &lt;li&gt; the [data_version pragma]</code></span>
<span class="codeline" id="line-2600"><code>** &lt;li&gt; the [SQLITE_FCNTL_DATA_VERSION] [file control]</code></span>
<span class="codeline" id="line-2601"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-2602"><code>*/</code></span>
<span class="codeline" id="line-2603"><code>SQLITE_API int sqlite3_total_changes(sqlite3*);</code></span>
<span class="codeline" id="line-2604"><code>SQLITE_API sqlite3_int64 sqlite3_total_changes64(sqlite3*);</code></span>
<span class="codeline" id="line-2605"><code></code></span>
<span class="codeline" id="line-2606"><code>/*</code></span>
<span class="codeline" id="line-2607"><code>** CAPI3REF: Interrupt A Long-Running Query</code></span>
<span class="codeline" id="line-2608"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-2609"><code>**</code></span>
<span class="codeline" id="line-2610"><code>** ^This function causes any pending database operation to abort and</code></span>
<span class="codeline" id="line-2611"><code>** return at its earliest opportunity. This routine is typically</code></span>
<span class="codeline" id="line-2612"><code>** called in response to a user action such as pressing "Cancel"</code></span>
<span class="codeline" id="line-2613"><code>** or Ctrl-C where the user wants a long query operation to halt</code></span>
<span class="codeline" id="line-2614"><code>** immediately.</code></span>
<span class="codeline" id="line-2615"><code>**</code></span>
<span class="codeline" id="line-2616"><code>** ^It is safe to call this routine from a thread different from the</code></span>
<span class="codeline" id="line-2617"><code>** thread that is currently running the database operation.  But it</code></span>
<span class="codeline" id="line-2618"><code>** is not safe to call this routine with a [database connection] that</code></span>
<span class="codeline" id="line-2619"><code>** is closed or might close before sqlite3_interrupt() returns.</code></span>
<span class="codeline" id="line-2620"><code>**</code></span>
<span class="codeline" id="line-2621"><code>** ^If an SQL operation is very nearly finished at the time when</code></span>
<span class="codeline" id="line-2622"><code>** sqlite3_interrupt() is called, then it might not have an opportunity</code></span>
<span class="codeline" id="line-2623"><code>** to be interrupted and might continue to completion.</code></span>
<span class="codeline" id="line-2624"><code>**</code></span>
<span class="codeline" id="line-2625"><code>** ^An SQL operation that is interrupted will return [SQLITE_INTERRUPT].</code></span>
<span class="codeline" id="line-2626"><code>** ^If the interrupted SQL operation is an INSERT, UPDATE, or DELETE</code></span>
<span class="codeline" id="line-2627"><code>** that is inside an explicit transaction, then the entire transaction</code></span>
<span class="codeline" id="line-2628"><code>** will be rolled back automatically.</code></span>
<span class="codeline" id="line-2629"><code>**</code></span>
<span class="codeline" id="line-2630"><code>** ^The sqlite3_interrupt(D) call is in effect until all currently running</code></span>
<span class="codeline" id="line-2631"><code>** SQL statements on [database connection] D complete.  ^Any new SQL statements</code></span>
<span class="codeline" id="line-2632"><code>** that are started after the sqlite3_interrupt() call and before the</code></span>
<span class="codeline" id="line-2633"><code>** running statement count reaches zero are interrupted as if they had been</code></span>
<span class="codeline" id="line-2634"><code>** running prior to the sqlite3_interrupt() call.  ^New SQL statements</code></span>
<span class="codeline" id="line-2635"><code>** that are started after the running statement count reaches zero are</code></span>
<span class="codeline" id="line-2636"><code>** not effected by the sqlite3_interrupt().</code></span>
<span class="codeline" id="line-2637"><code>** ^A call to sqlite3_interrupt(D) that occurs when there are no running</code></span>
<span class="codeline" id="line-2638"><code>** SQL statements is a no-op and has no effect on SQL statements</code></span>
<span class="codeline" id="line-2639"><code>** that are started after the sqlite3_interrupt() call returns.</code></span>
<span class="codeline" id="line-2640"><code>*/</code></span>
<span class="codeline" id="line-2641"><code>SQLITE_API void sqlite3_interrupt(sqlite3*);</code></span>
<span class="codeline" id="line-2642"><code></code></span>
<span class="codeline" id="line-2643"><code>/*</code></span>
<span class="codeline" id="line-2644"><code>** CAPI3REF: Determine If An SQL Statement Is Complete</code></span>
<span class="codeline" id="line-2645"><code>**</code></span>
<span class="codeline" id="line-2646"><code>** These routines are useful during command-line input to determine if the</code></span>
<span class="codeline" id="line-2647"><code>** currently entered text seems to form a complete SQL statement or</code></span>
<span class="codeline" id="line-2648"><code>** if additional input is needed before sending the text into</code></span>
<span class="codeline" id="line-2649"><code>** SQLite for parsing.  ^These routines return 1 if the input string</code></span>
<span class="codeline" id="line-2650"><code>** appears to be a complete SQL statement.  ^A statement is judged to be</code></span>
<span class="codeline" id="line-2651"><code>** complete if it ends with a semicolon token and is not a prefix of a</code></span>
<span class="codeline" id="line-2652"><code>** well-formed CREATE TRIGGER statement.  ^Semicolons that are embedded within</code></span>
<span class="codeline" id="line-2653"><code>** string literals or quoted identifier names or comments are not</code></span>
<span class="codeline" id="line-2654"><code>** independent tokens (they are part of the token in which they are</code></span>
<span class="codeline" id="line-2655"><code>** embedded) and thus do not count as a statement terminator.  ^Whitespace</code></span>
<span class="codeline" id="line-2656"><code>** and comments that follow the final semicolon are ignored.</code></span>
<span class="codeline" id="line-2657"><code>**</code></span>
<span class="codeline" id="line-2658"><code>** ^These routines return 0 if the statement is incomplete.  ^If a</code></span>
<span class="codeline" id="line-2659"><code>** memory allocation fails, then SQLITE_NOMEM is returned.</code></span>
<span class="codeline" id="line-2660"><code>**</code></span>
<span class="codeline" id="line-2661"><code>** ^These routines do not parse the SQL statements thus</code></span>
<span class="codeline" id="line-2662"><code>** will not detect syntactically incorrect SQL.</code></span>
<span class="codeline" id="line-2663"><code>**</code></span>
<span class="codeline" id="line-2664"><code>** ^(If SQLite has not been initialized using [sqlite3_initialize()] prior</code></span>
<span class="codeline" id="line-2665"><code>** to invoking sqlite3_complete16() then sqlite3_initialize() is invoked</code></span>
<span class="codeline" id="line-2666"><code>** automatically by sqlite3_complete16().  If that initialization fails,</code></span>
<span class="codeline" id="line-2667"><code>** then the return value from sqlite3_complete16() will be non-zero</code></span>
<span class="codeline" id="line-2668"><code>** regardless of whether or not the input SQL is complete.)^</code></span>
<span class="codeline" id="line-2669"><code>**</code></span>
<span class="codeline" id="line-2670"><code>** The input to [sqlite3_complete()] must be a zero-terminated</code></span>
<span class="codeline" id="line-2671"><code>** UTF-8 string.</code></span>
<span class="codeline" id="line-2672"><code>**</code></span>
<span class="codeline" id="line-2673"><code>** The input to [sqlite3_complete16()] must be a zero-terminated</code></span>
<span class="codeline" id="line-2674"><code>** UTF-16 string in native byte order.</code></span>
<span class="codeline" id="line-2675"><code>*/</code></span>
<span class="codeline" id="line-2676"><code>SQLITE_API int sqlite3_complete(const char *sql);</code></span>
<span class="codeline" id="line-2677"><code>SQLITE_API int sqlite3_complete16(const void *sql);</code></span>
<span class="codeline" id="line-2678"><code></code></span>
<span class="codeline" id="line-2679"><code>/*</code></span>
<span class="codeline" id="line-2680"><code>** CAPI3REF: Register A Callback To Handle SQLITE_BUSY Errors</code></span>
<span class="codeline" id="line-2681"><code>** KEYWORDS: {busy-handler callback} {busy handler}</code></span>
<span class="codeline" id="line-2682"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-2683"><code>**</code></span>
<span class="codeline" id="line-2684"><code>** ^The sqlite3_busy_handler(D,X,P) routine sets a callback function X</code></span>
<span class="codeline" id="line-2685"><code>** that might be invoked with argument P whenever</code></span>
<span class="codeline" id="line-2686"><code>** an attempt is made to access a database table associated with</code></span>
<span class="codeline" id="line-2687"><code>** [database connection] D when another thread</code></span>
<span class="codeline" id="line-2688"><code>** or process has the table locked.</code></span>
<span class="codeline" id="line-2689"><code>** The sqlite3_busy_handler() interface is used to implement</code></span>
<span class="codeline" id="line-2690"><code>** [sqlite3_busy_timeout()] and [PRAGMA busy_timeout].</code></span>
<span class="codeline" id="line-2691"><code>**</code></span>
<span class="codeline" id="line-2692"><code>** ^If the busy callback is NULL, then [SQLITE_BUSY]</code></span>
<span class="codeline" id="line-2693"><code>** is returned immediately upon encountering the lock.  ^If the busy callback</code></span>
<span class="codeline" id="line-2694"><code>** is not NULL, then the callback might be invoked with two arguments.</code></span>
<span class="codeline" id="line-2695"><code>**</code></span>
<span class="codeline" id="line-2696"><code>** ^The first argument to the busy handler is a copy of the void* pointer which</code></span>
<span class="codeline" id="line-2697"><code>** is the third argument to sqlite3_busy_handler().  ^The second argument to</code></span>
<span class="codeline" id="line-2698"><code>** the busy handler callback is the number of times that the busy handler has</code></span>
<span class="codeline" id="line-2699"><code>** been invoked previously for the same locking event.  ^If the</code></span>
<span class="codeline" id="line-2700"><code>** busy callback returns 0, then no additional attempts are made to</code></span>
<span class="codeline" id="line-2701"><code>** access the database and [SQLITE_BUSY] is returned</code></span>
<span class="codeline" id="line-2702"><code>** to the application.</code></span>
<span class="codeline" id="line-2703"><code>** ^If the callback returns non-zero, then another attempt</code></span>
<span class="codeline" id="line-2704"><code>** is made to access the database and the cycle repeats.</code></span>
<span class="codeline" id="line-2705"><code>**</code></span>
<span class="codeline" id="line-2706"><code>** The presence of a busy handler does not guarantee that it will be invoked</code></span>
<span class="codeline" id="line-2707"><code>** when there is lock contention. ^If SQLite determines that invoking the busy</code></span>
<span class="codeline" id="line-2708"><code>** handler could result in a deadlock, it will go ahead and return [SQLITE_BUSY]</code></span>
<span class="codeline" id="line-2709"><code>** to the application instead of invoking the</code></span>
<span class="codeline" id="line-2710"><code>** busy handler.</code></span>
<span class="codeline" id="line-2711"><code>** Consider a scenario where one process is holding a read lock that</code></span>
<span class="codeline" id="line-2712"><code>** it is trying to promote to a reserved lock and</code></span>
<span class="codeline" id="line-2713"><code>** a second process is holding a reserved lock that it is trying</code></span>
<span class="codeline" id="line-2714"><code>** to promote to an exclusive lock.  The first process cannot proceed</code></span>
<span class="codeline" id="line-2715"><code>** because it is blocked by the second and the second process cannot</code></span>
<span class="codeline" id="line-2716"><code>** proceed because it is blocked by the first.  If both processes</code></span>
<span class="codeline" id="line-2717"><code>** invoke the busy handlers, neither will make any progress.  Therefore,</code></span>
<span class="codeline" id="line-2718"><code>** SQLite returns [SQLITE_BUSY] for the first process, hoping that this</code></span>
<span class="codeline" id="line-2719"><code>** will induce the first process to release its read lock and allow</code></span>
<span class="codeline" id="line-2720"><code>** the second process to proceed.</code></span>
<span class="codeline" id="line-2721"><code>**</code></span>
<span class="codeline" id="line-2722"><code>** ^The default busy callback is NULL.</code></span>
<span class="codeline" id="line-2723"><code>**</code></span>
<span class="codeline" id="line-2724"><code>** ^(There can only be a single busy handler defined for each</code></span>
<span class="codeline" id="line-2725"><code>** [database connection].  Setting a new busy handler clears any</code></span>
<span class="codeline" id="line-2726"><code>** previously set handler.)^  ^Note that calling [sqlite3_busy_timeout()]</code></span>
<span class="codeline" id="line-2727"><code>** or evaluating [PRAGMA busy_timeout=N] will change the</code></span>
<span class="codeline" id="line-2728"><code>** busy handler and thus clear any previously set busy handler.</code></span>
<span class="codeline" id="line-2729"><code>**</code></span>
<span class="codeline" id="line-2730"><code>** The busy callback should not take any actions which modify the</code></span>
<span class="codeline" id="line-2731"><code>** database connection that invoked the busy handler.  In other words,</code></span>
<span class="codeline" id="line-2732"><code>** the busy handler is not reentrant.  Any such actions</code></span>
<span class="codeline" id="line-2733"><code>** result in undefined behavior.</code></span>
<span class="codeline" id="line-2734"><code>**</code></span>
<span class="codeline" id="line-2735"><code>** A busy handler must not close the database connection</code></span>
<span class="codeline" id="line-2736"><code>** or [prepared statement] that invoked the busy handler.</code></span>
<span class="codeline" id="line-2737"><code>*/</code></span>
<span class="codeline" id="line-2738"><code>SQLITE_API int sqlite3_busy_handler(sqlite3*,int(*)(void*,int),void*);</code></span>
<span class="codeline" id="line-2739"><code></code></span>
<span class="codeline" id="line-2740"><code>/*</code></span>
<span class="codeline" id="line-2741"><code>** CAPI3REF: Set A Busy Timeout</code></span>
<span class="codeline" id="line-2742"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-2743"><code>**</code></span>
<span class="codeline" id="line-2744"><code>** ^This routine sets a [sqlite3_busy_handler | busy handler] that sleeps</code></span>
<span class="codeline" id="line-2745"><code>** for a specified amount of time when a table is locked.  ^The handler</code></span>
<span class="codeline" id="line-2746"><code>** will sleep multiple times until at least "ms" milliseconds of sleeping</code></span>
<span class="codeline" id="line-2747"><code>** have accumulated.  ^After at least "ms" milliseconds of sleeping,</code></span>
<span class="codeline" id="line-2748"><code>** the handler returns 0 which causes [sqlite3_step()] to return</code></span>
<span class="codeline" id="line-2749"><code>** [SQLITE_BUSY].</code></span>
<span class="codeline" id="line-2750"><code>**</code></span>
<span class="codeline" id="line-2751"><code>** ^Calling this routine with an argument less than or equal to zero</code></span>
<span class="codeline" id="line-2752"><code>** turns off all busy handlers.</code></span>
<span class="codeline" id="line-2753"><code>**</code></span>
<span class="codeline" id="line-2754"><code>** ^(There can only be a single busy handler for a particular</code></span>
<span class="codeline" id="line-2755"><code>** [database connection] at any given moment.  If another busy handler</code></span>
<span class="codeline" id="line-2756"><code>** was defined  (using [sqlite3_busy_handler()]) prior to calling</code></span>
<span class="codeline" id="line-2757"><code>** this routine, that other busy handler is cleared.)^</code></span>
<span class="codeline" id="line-2758"><code>**</code></span>
<span class="codeline" id="line-2759"><code>** See also:  [PRAGMA busy_timeout]</code></span>
<span class="codeline" id="line-2760"><code>*/</code></span>
<span class="codeline" id="line-2761"><code>SQLITE_API int sqlite3_busy_timeout(sqlite3*, int ms);</code></span>
<span class="codeline" id="line-2762"><code></code></span>
<span class="codeline" id="line-2763"><code>/*</code></span>
<span class="codeline" id="line-2764"><code>** CAPI3REF: Convenience Routines For Running Queries</code></span>
<span class="codeline" id="line-2765"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-2766"><code>**</code></span>
<span class="codeline" id="line-2767"><code>** This is a legacy interface that is preserved for backwards compatibility.</code></span>
<span class="codeline" id="line-2768"><code>** Use of this interface is not recommended.</code></span>
<span class="codeline" id="line-2769"><code>**</code></span>
<span class="codeline" id="line-2770"><code>** Definition: A &lt;b&gt;result table&lt;/b&gt; is memory data structure created by the</code></span>
<span class="codeline" id="line-2771"><code>** [sqlite3_get_table()] interface.  A result table records the</code></span>
<span class="codeline" id="line-2772"><code>** complete query results from one or more queries.</code></span>
<span class="codeline" id="line-2773"><code>**</code></span>
<span class="codeline" id="line-2774"><code>** The table conceptually has a number of rows and columns.  But</code></span>
<span class="codeline" id="line-2775"><code>** these numbers are not part of the result table itself.  These</code></span>
<span class="codeline" id="line-2776"><code>** numbers are obtained separately.  Let N be the number of rows</code></span>
<span class="codeline" id="line-2777"><code>** and M be the number of columns.</code></span>
<span class="codeline" id="line-2778"><code>**</code></span>
<span class="codeline" id="line-2779"><code>** A result table is an array of pointers to zero-terminated UTF-8 strings.</code></span>
<span class="codeline" id="line-2780"><code>** There are (N+1)*M elements in the array.  The first M pointers point</code></span>
<span class="codeline" id="line-2781"><code>** to zero-terminated strings that  contain the names of the columns.</code></span>
<span class="codeline" id="line-2782"><code>** The remaining entries all point to query results.  NULL values result</code></span>
<span class="codeline" id="line-2783"><code>** in NULL pointers.  All other values are in their UTF-8 zero-terminated</code></span>
<span class="codeline" id="line-2784"><code>** string representation as returned by [sqlite3_column_text()].</code></span>
<span class="codeline" id="line-2785"><code>**</code></span>
<span class="codeline" id="line-2786"><code>** A result table might consist of one or more memory allocations.</code></span>
<span class="codeline" id="line-2787"><code>** It is not safe to pass a result table directly to [sqlite3_free()].</code></span>
<span class="codeline" id="line-2788"><code>** A result table should be deallocated using [sqlite3_free_table()].</code></span>
<span class="codeline" id="line-2789"><code>**</code></span>
<span class="codeline" id="line-2790"><code>** ^(As an example of the result table format, suppose a query result</code></span>
<span class="codeline" id="line-2791"><code>** is as follows:</code></span>
<span class="codeline" id="line-2792"><code>**</code></span>
<span class="codeline" id="line-2793"><code>** &lt;blockquote&gt;&lt;pre&gt;</code></span>
<span class="codeline" id="line-2794"><code>**        Name        | Age</code></span>
<span class="codeline" id="line-2795"><code>**        -----------------------</code></span>
<span class="codeline" id="line-2796"><code>**        Alice       | 43</code></span>
<span class="codeline" id="line-2797"><code>**        Bob         | 28</code></span>
<span class="codeline" id="line-2798"><code>**        Cindy       | 21</code></span>
<span class="codeline" id="line-2799"><code>** &lt;/pre&gt;&lt;/blockquote&gt;</code></span>
<span class="codeline" id="line-2800"><code>**</code></span>
<span class="codeline" id="line-2801"><code>** There are two columns (M==2) and three rows (N==3).  Thus the</code></span>
<span class="codeline" id="line-2802"><code>** result table has 8 entries.  Suppose the result table is stored</code></span>
<span class="codeline" id="line-2803"><code>** in an array named azResult.  Then azResult holds this content:</code></span>
<span class="codeline" id="line-2804"><code>**</code></span>
<span class="codeline" id="line-2805"><code>** &lt;blockquote&gt;&lt;pre&gt;</code></span>
<span class="codeline" id="line-2806"><code>**        azResult&amp;#91;0] = "Name";</code></span>
<span class="codeline" id="line-2807"><code>**        azResult&amp;#91;1] = "Age";</code></span>
<span class="codeline" id="line-2808"><code>**        azResult&amp;#91;2] = "Alice";</code></span>
<span class="codeline" id="line-2809"><code>**        azResult&amp;#91;3] = "43";</code></span>
<span class="codeline" id="line-2810"><code>**        azResult&amp;#91;4] = "Bob";</code></span>
<span class="codeline" id="line-2811"><code>**        azResult&amp;#91;5] = "28";</code></span>
<span class="codeline" id="line-2812"><code>**        azResult&amp;#91;6] = "Cindy";</code></span>
<span class="codeline" id="line-2813"><code>**        azResult&amp;#91;7] = "21";</code></span>
<span class="codeline" id="line-2814"><code>** &lt;/pre&gt;&lt;/blockquote&gt;)^</code></span>
<span class="codeline" id="line-2815"><code>**</code></span>
<span class="codeline" id="line-2816"><code>** ^The sqlite3_get_table() function evaluates one or more</code></span>
<span class="codeline" id="line-2817"><code>** semicolon-separated SQL statements in the zero-terminated UTF-8</code></span>
<span class="codeline" id="line-2818"><code>** string of its 2nd parameter and returns a result table to the</code></span>
<span class="codeline" id="line-2819"><code>** pointer given in its 3rd parameter.</code></span>
<span class="codeline" id="line-2820"><code>**</code></span>
<span class="codeline" id="line-2821"><code>** After the application has finished with the result from sqlite3_get_table(),</code></span>
<span class="codeline" id="line-2822"><code>** it must pass the result table pointer to sqlite3_free_table() in order to</code></span>
<span class="codeline" id="line-2823"><code>** release the memory that was malloced.  Because of the way the</code></span>
<span class="codeline" id="line-2824"><code>** [sqlite3_malloc()] happens within sqlite3_get_table(), the calling</code></span>
<span class="codeline" id="line-2825"><code>** function must not try to call [sqlite3_free()] directly.  Only</code></span>
<span class="codeline" id="line-2826"><code>** [sqlite3_free_table()] is able to release the memory properly and safely.</code></span>
<span class="codeline" id="line-2827"><code>**</code></span>
<span class="codeline" id="line-2828"><code>** The sqlite3_get_table() interface is implemented as a wrapper around</code></span>
<span class="codeline" id="line-2829"><code>** [sqlite3_exec()].  The sqlite3_get_table() routine does not have access</code></span>
<span class="codeline" id="line-2830"><code>** to any internal data structures of SQLite.  It uses only the public</code></span>
<span class="codeline" id="line-2831"><code>** interface defined here.  As a consequence, errors that occur in the</code></span>
<span class="codeline" id="line-2832"><code>** wrapper layer outside of the internal [sqlite3_exec()] call are not</code></span>
<span class="codeline" id="line-2833"><code>** reflected in subsequent calls to [sqlite3_errcode()] or</code></span>
<span class="codeline" id="line-2834"><code>** [sqlite3_errmsg()].</code></span>
<span class="codeline" id="line-2835"><code>*/</code></span>
<span class="codeline" id="line-2836"><code>SQLITE_API int sqlite3_get_table(</code></span>
<span class="codeline" id="line-2837"><code>  sqlite3 *db,          /* An open database */</code></span>
<span class="codeline" id="line-2838"><code>  const char *zSql,     /* SQL to be evaluated */</code></span>
<span class="codeline" id="line-2839"><code>  char ***pazResult,    /* Results of the query */</code></span>
<span class="codeline" id="line-2840"><code>  int *pnRow,           /* Number of result rows written here */</code></span>
<span class="codeline" id="line-2841"><code>  int *pnColumn,        /* Number of result columns written here */</code></span>
<span class="codeline" id="line-2842"><code>  char **pzErrmsg       /* Error msg written here */</code></span>
<span class="codeline" id="line-2843"><code>);</code></span>
<span class="codeline" id="line-2844"><code>SQLITE_API void sqlite3_free_table(char **result);</code></span>
<span class="codeline" id="line-2845"><code></code></span>
<span class="codeline" id="line-2846"><code>/*</code></span>
<span class="codeline" id="line-2847"><code>** CAPI3REF: Formatted String Printing Functions</code></span>
<span class="codeline" id="line-2848"><code>**</code></span>
<span class="codeline" id="line-2849"><code>** These routines are work-alikes of the "printf()" family of functions</code></span>
<span class="codeline" id="line-2850"><code>** from the standard C library.</code></span>
<span class="codeline" id="line-2851"><code>** These routines understand most of the common formatting options from</code></span>
<span class="codeline" id="line-2852"><code>** the standard library printf()</code></span>
<span class="codeline" id="line-2853"><code>** plus some additional non-standard formats ([%q], [%Q], [%w], and [%z]).</code></span>
<span class="codeline" id="line-2854"><code>** See the [built-in printf()] documentation for details.</code></span>
<span class="codeline" id="line-2855"><code>**</code></span>
<span class="codeline" id="line-2856"><code>** ^The sqlite3_mprintf() and sqlite3_vmprintf() routines write their</code></span>
<span class="codeline" id="line-2857"><code>** results into memory obtained from [sqlite3_malloc64()].</code></span>
<span class="codeline" id="line-2858"><code>** The strings returned by these two routines should be</code></span>
<span class="codeline" id="line-2859"><code>** released by [sqlite3_free()].  ^Both routines return a</code></span>
<span class="codeline" id="line-2860"><code>** NULL pointer if [sqlite3_malloc64()] is unable to allocate enough</code></span>
<span class="codeline" id="line-2861"><code>** memory to hold the resulting string.</code></span>
<span class="codeline" id="line-2862"><code>**</code></span>
<span class="codeline" id="line-2863"><code>** ^(The sqlite3_snprintf() routine is similar to "snprintf()" from</code></span>
<span class="codeline" id="line-2864"><code>** the standard C library.  The result is written into the</code></span>
<span class="codeline" id="line-2865"><code>** buffer supplied as the second parameter whose size is given by</code></span>
<span class="codeline" id="line-2866"><code>** the first parameter. Note that the order of the</code></span>
<span class="codeline" id="line-2867"><code>** first two parameters is reversed from snprintf().)^  This is an</code></span>
<span class="codeline" id="line-2868"><code>** historical accident that cannot be fixed without breaking</code></span>
<span class="codeline" id="line-2869"><code>** backwards compatibility.  ^(Note also that sqlite3_snprintf()</code></span>
<span class="codeline" id="line-2870"><code>** returns a pointer to its buffer instead of the number of</code></span>
<span class="codeline" id="line-2871"><code>** characters actually written into the buffer.)^  We admit that</code></span>
<span class="codeline" id="line-2872"><code>** the number of characters written would be a more useful return</code></span>
<span class="codeline" id="line-2873"><code>** value but we cannot change the implementation of sqlite3_snprintf()</code></span>
<span class="codeline" id="line-2874"><code>** now without breaking compatibility.</code></span>
<span class="codeline" id="line-2875"><code>**</code></span>
<span class="codeline" id="line-2876"><code>** ^As long as the buffer size is greater than zero, sqlite3_snprintf()</code></span>
<span class="codeline" id="line-2877"><code>** guarantees that the buffer is always zero-terminated.  ^The first</code></span>
<span class="codeline" id="line-2878"><code>** parameter "n" is the total size of the buffer, including space for</code></span>
<span class="codeline" id="line-2879"><code>** the zero terminator.  So the longest string that can be completely</code></span>
<span class="codeline" id="line-2880"><code>** written will be n-1 characters.</code></span>
<span class="codeline" id="line-2881"><code>**</code></span>
<span class="codeline" id="line-2882"><code>** ^The sqlite3_vsnprintf() routine is a varargs version of sqlite3_snprintf().</code></span>
<span class="codeline" id="line-2883"><code>**</code></span>
<span class="codeline" id="line-2884"><code>** See also:  [built-in printf()], [printf() SQL function]</code></span>
<span class="codeline" id="line-2885"><code>*/</code></span>
<span class="codeline" id="line-2886"><code>SQLITE_API char *sqlite3_mprintf(const char*,...);</code></span>
<span class="codeline" id="line-2887"><code>SQLITE_API char *sqlite3_vmprintf(const char*, va_list);</code></span>
<span class="codeline" id="line-2888"><code>SQLITE_API char *sqlite3_snprintf(int,char*,const char*, ...);</code></span>
<span class="codeline" id="line-2889"><code>SQLITE_API char *sqlite3_vsnprintf(int,char*,const char*, va_list);</code></span>
<span class="codeline" id="line-2890"><code></code></span>
<span class="codeline" id="line-2891"><code>/*</code></span>
<span class="codeline" id="line-2892"><code>** CAPI3REF: Memory Allocation Subsystem</code></span>
<span class="codeline" id="line-2893"><code>**</code></span>
<span class="codeline" id="line-2894"><code>** The SQLite core uses these three routines for all of its own</code></span>
<span class="codeline" id="line-2895"><code>** internal memory allocation needs. "Core" in the previous sentence</code></span>
<span class="codeline" id="line-2896"><code>** does not include operating-system specific [VFS] implementation.  The</code></span>
<span class="codeline" id="line-2897"><code>** Windows VFS uses native malloc() and free() for some operations.</code></span>
<span class="codeline" id="line-2898"><code>**</code></span>
<span class="codeline" id="line-2899"><code>** ^The sqlite3_malloc() routine returns a pointer to a block</code></span>
<span class="codeline" id="line-2900"><code>** of memory at least N bytes in length, where N is the parameter.</code></span>
<span class="codeline" id="line-2901"><code>** ^If sqlite3_malloc() is unable to obtain sufficient free</code></span>
<span class="codeline" id="line-2902"><code>** memory, it returns a NULL pointer.  ^If the parameter N to</code></span>
<span class="codeline" id="line-2903"><code>** sqlite3_malloc() is zero or negative then sqlite3_malloc() returns</code></span>
<span class="codeline" id="line-2904"><code>** a NULL pointer.</code></span>
<span class="codeline" id="line-2905"><code>**</code></span>
<span class="codeline" id="line-2906"><code>** ^The sqlite3_malloc64(N) routine works just like</code></span>
<span class="codeline" id="line-2907"><code>** sqlite3_malloc(N) except that N is an unsigned 64-bit integer instead</code></span>
<span class="codeline" id="line-2908"><code>** of a signed 32-bit integer.</code></span>
<span class="codeline" id="line-2909"><code>**</code></span>
<span class="codeline" id="line-2910"><code>** ^Calling sqlite3_free() with a pointer previously returned</code></span>
<span class="codeline" id="line-2911"><code>** by sqlite3_malloc() or sqlite3_realloc() releases that memory so</code></span>
<span class="codeline" id="line-2912"><code>** that it might be reused.  ^The sqlite3_free() routine is</code></span>
<span class="codeline" id="line-2913"><code>** a no-op if is called with a NULL pointer.  Passing a NULL pointer</code></span>
<span class="codeline" id="line-2914"><code>** to sqlite3_free() is harmless.  After being freed, memory</code></span>
<span class="codeline" id="line-2915"><code>** should neither be read nor written.  Even reading previously freed</code></span>
<span class="codeline" id="line-2916"><code>** memory might result in a segmentation fault or other severe error.</code></span>
<span class="codeline" id="line-2917"><code>** Memory corruption, a segmentation fault, or other severe error</code></span>
<span class="codeline" id="line-2918"><code>** might result if sqlite3_free() is called with a non-NULL pointer that</code></span>
<span class="codeline" id="line-2919"><code>** was not obtained from sqlite3_malloc() or sqlite3_realloc().</code></span>
<span class="codeline" id="line-2920"><code>**</code></span>
<span class="codeline" id="line-2921"><code>** ^The sqlite3_realloc(X,N) interface attempts to resize a</code></span>
<span class="codeline" id="line-2922"><code>** prior memory allocation X to be at least N bytes.</code></span>
<span class="codeline" id="line-2923"><code>** ^If the X parameter to sqlite3_realloc(X,N)</code></span>
<span class="codeline" id="line-2924"><code>** is a NULL pointer then its behavior is identical to calling</code></span>
<span class="codeline" id="line-2925"><code>** sqlite3_malloc(N).</code></span>
<span class="codeline" id="line-2926"><code>** ^If the N parameter to sqlite3_realloc(X,N) is zero or</code></span>
<span class="codeline" id="line-2927"><code>** negative then the behavior is exactly the same as calling</code></span>
<span class="codeline" id="line-2928"><code>** sqlite3_free(X).</code></span>
<span class="codeline" id="line-2929"><code>** ^sqlite3_realloc(X,N) returns a pointer to a memory allocation</code></span>
<span class="codeline" id="line-2930"><code>** of at least N bytes in size or NULL if insufficient memory is available.</code></span>
<span class="codeline" id="line-2931"><code>** ^If M is the size of the prior allocation, then min(N,M) bytes</code></span>
<span class="codeline" id="line-2932"><code>** of the prior allocation are copied into the beginning of buffer returned</code></span>
<span class="codeline" id="line-2933"><code>** by sqlite3_realloc(X,N) and the prior allocation is freed.</code></span>
<span class="codeline" id="line-2934"><code>** ^If sqlite3_realloc(X,N) returns NULL and N is positive, then the</code></span>
<span class="codeline" id="line-2935"><code>** prior allocation is not freed.</code></span>
<span class="codeline" id="line-2936"><code>**</code></span>
<span class="codeline" id="line-2937"><code>** ^The sqlite3_realloc64(X,N) interfaces works the same as</code></span>
<span class="codeline" id="line-2938"><code>** sqlite3_realloc(X,N) except that N is a 64-bit unsigned integer instead</code></span>
<span class="codeline" id="line-2939"><code>** of a 32-bit signed integer.</code></span>
<span class="codeline" id="line-2940"><code>**</code></span>
<span class="codeline" id="line-2941"><code>** ^If X is a memory allocation previously obtained from sqlite3_malloc(),</code></span>
<span class="codeline" id="line-2942"><code>** sqlite3_malloc64(), sqlite3_realloc(), or sqlite3_realloc64(), then</code></span>
<span class="codeline" id="line-2943"><code>** sqlite3_msize(X) returns the size of that memory allocation in bytes.</code></span>
<span class="codeline" id="line-2944"><code>** ^The value returned by sqlite3_msize(X) might be larger than the number</code></span>
<span class="codeline" id="line-2945"><code>** of bytes requested when X was allocated.  ^If X is a NULL pointer then</code></span>
<span class="codeline" id="line-2946"><code>** sqlite3_msize(X) returns zero.  If X points to something that is not</code></span>
<span class="codeline" id="line-2947"><code>** the beginning of memory allocation, or if it points to a formerly</code></span>
<span class="codeline" id="line-2948"><code>** valid memory allocation that has now been freed, then the behavior</code></span>
<span class="codeline" id="line-2949"><code>** of sqlite3_msize(X) is undefined and possibly harmful.</code></span>
<span class="codeline" id="line-2950"><code>**</code></span>
<span class="codeline" id="line-2951"><code>** ^The memory returned by sqlite3_malloc(), sqlite3_realloc(),</code></span>
<span class="codeline" id="line-2952"><code>** sqlite3_malloc64(), and sqlite3_realloc64()</code></span>
<span class="codeline" id="line-2953"><code>** is always aligned to at least an 8 byte boundary, or to a</code></span>
<span class="codeline" id="line-2954"><code>** 4 byte boundary if the [SQLITE_4_BYTE_ALIGNED_MALLOC] compile-time</code></span>
<span class="codeline" id="line-2955"><code>** option is used.</code></span>
<span class="codeline" id="line-2956"><code>**</code></span>
<span class="codeline" id="line-2957"><code>** The pointer arguments to [sqlite3_free()] and [sqlite3_realloc()]</code></span>
<span class="codeline" id="line-2958"><code>** must be either NULL or else pointers obtained from a prior</code></span>
<span class="codeline" id="line-2959"><code>** invocation of [sqlite3_malloc()] or [sqlite3_realloc()] that have</code></span>
<span class="codeline" id="line-2960"><code>** not yet been released.</code></span>
<span class="codeline" id="line-2961"><code>**</code></span>
<span class="codeline" id="line-2962"><code>** The application must not read or write any part of</code></span>
<span class="codeline" id="line-2963"><code>** a block of memory after it has been released using</code></span>
<span class="codeline" id="line-2964"><code>** [sqlite3_free()] or [sqlite3_realloc()].</code></span>
<span class="codeline" id="line-2965"><code>*/</code></span>
<span class="codeline" id="line-2966"><code>SQLITE_API void *sqlite3_malloc(int);</code></span>
<span class="codeline" id="line-2967"><code>SQLITE_API void *sqlite3_malloc64(sqlite3_uint64);</code></span>
<span class="codeline" id="line-2968"><code>SQLITE_API void *sqlite3_realloc(void*, int);</code></span>
<span class="codeline" id="line-2969"><code>SQLITE_API void *sqlite3_realloc64(void*, sqlite3_uint64);</code></span>
<span class="codeline" id="line-2970"><code>SQLITE_API void sqlite3_free(void*);</code></span>
<span class="codeline" id="line-2971"><code>SQLITE_API sqlite3_uint64 sqlite3_msize(void*);</code></span>
<span class="codeline" id="line-2972"><code></code></span>
<span class="codeline" id="line-2973"><code>/*</code></span>
<span class="codeline" id="line-2974"><code>** CAPI3REF: Memory Allocator Statistics</code></span>
<span class="codeline" id="line-2975"><code>**</code></span>
<span class="codeline" id="line-2976"><code>** SQLite provides these two interfaces for reporting on the status</code></span>
<span class="codeline" id="line-2977"><code>** of the [sqlite3_malloc()], [sqlite3_free()], and [sqlite3_realloc()]</code></span>
<span class="codeline" id="line-2978"><code>** routines, which form the built-in memory allocation subsystem.</code></span>
<span class="codeline" id="line-2979"><code>**</code></span>
<span class="codeline" id="line-2980"><code>** ^The [sqlite3_memory_used()] routine returns the number of bytes</code></span>
<span class="codeline" id="line-2981"><code>** of memory currently outstanding (malloced but not freed).</code></span>
<span class="codeline" id="line-2982"><code>** ^The [sqlite3_memory_highwater()] routine returns the maximum</code></span>
<span class="codeline" id="line-2983"><code>** value of [sqlite3_memory_used()] since the high-water mark</code></span>
<span class="codeline" id="line-2984"><code>** was last reset.  ^The values returned by [sqlite3_memory_used()] and</code></span>
<span class="codeline" id="line-2985"><code>** [sqlite3_memory_highwater()] include any overhead</code></span>
<span class="codeline" id="line-2986"><code>** added by SQLite in its implementation of [sqlite3_malloc()],</code></span>
<span class="codeline" id="line-2987"><code>** but not overhead added by the any underlying system library</code></span>
<span class="codeline" id="line-2988"><code>** routines that [sqlite3_malloc()] may call.</code></span>
<span class="codeline" id="line-2989"><code>**</code></span>
<span class="codeline" id="line-2990"><code>** ^The memory high-water mark is reset to the current value of</code></span>
<span class="codeline" id="line-2991"><code>** [sqlite3_memory_used()] if and only if the parameter to</code></span>
<span class="codeline" id="line-2992"><code>** [sqlite3_memory_highwater()] is true.  ^The value returned</code></span>
<span class="codeline" id="line-2993"><code>** by [sqlite3_memory_highwater(1)] is the high-water mark</code></span>
<span class="codeline" id="line-2994"><code>** prior to the reset.</code></span>
<span class="codeline" id="line-2995"><code>*/</code></span>
<span class="codeline" id="line-2996"><code>SQLITE_API sqlite3_int64 sqlite3_memory_used(void);</code></span>
<span class="codeline" id="line-2997"><code>SQLITE_API sqlite3_int64 sqlite3_memory_highwater(int resetFlag);</code></span>
<span class="codeline" id="line-2998"><code></code></span>
<span class="codeline" id="line-2999"><code>/*</code></span>
<span class="codeline" id="line-3000"><code>** CAPI3REF: Pseudo-Random Number Generator</code></span>
<span class="codeline" id="line-3001"><code>**</code></span>
<span class="codeline" id="line-3002"><code>** SQLite contains a high-quality pseudo-random number generator (PRNG) used to</code></span>
<span class="codeline" id="line-3003"><code>** select random [ROWID | ROWIDs] when inserting new records into a table that</code></span>
<span class="codeline" id="line-3004"><code>** already uses the largest possible [ROWID].  The PRNG is also used for</code></span>
<span class="codeline" id="line-3005"><code>** the built-in random() and randomblob() SQL functions.  This interface allows</code></span>
<span class="codeline" id="line-3006"><code>** applications to access the same PRNG for other purposes.</code></span>
<span class="codeline" id="line-3007"><code>**</code></span>
<span class="codeline" id="line-3008"><code>** ^A call to this routine stores N bytes of randomness into buffer P.</code></span>
<span class="codeline" id="line-3009"><code>** ^The P parameter can be a NULL pointer.</code></span>
<span class="codeline" id="line-3010"><code>**</code></span>
<span class="codeline" id="line-3011"><code>** ^If this routine has not been previously called or if the previous</code></span>
<span class="codeline" id="line-3012"><code>** call had N less than one or a NULL pointer for P, then the PRNG is</code></span>
<span class="codeline" id="line-3013"><code>** seeded using randomness obtained from the xRandomness method of</code></span>
<span class="codeline" id="line-3014"><code>** the default [sqlite3_vfs] object.</code></span>
<span class="codeline" id="line-3015"><code>** ^If the previous call to this routine had an N of 1 or more and a</code></span>
<span class="codeline" id="line-3016"><code>** non-NULL P then the pseudo-randomness is generated</code></span>
<span class="codeline" id="line-3017"><code>** internally and without recourse to the [sqlite3_vfs] xRandomness</code></span>
<span class="codeline" id="line-3018"><code>** method.</code></span>
<span class="codeline" id="line-3019"><code>*/</code></span>
<span class="codeline" id="line-3020"><code>SQLITE_API void sqlite3_randomness(int N, void *P);</code></span>
<span class="codeline" id="line-3021"><code></code></span>
<span class="codeline" id="line-3022"><code>/*</code></span>
<span class="codeline" id="line-3023"><code>** CAPI3REF: Compile-Time Authorization Callbacks</code></span>
<span class="codeline" id="line-3024"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-3025"><code>** KEYWORDS: {authorizer callback}</code></span>
<span class="codeline" id="line-3026"><code>**</code></span>
<span class="codeline" id="line-3027"><code>** ^This routine registers an authorizer callback with a particular</code></span>
<span class="codeline" id="line-3028"><code>** [database connection], supplied in the first argument.</code></span>
<span class="codeline" id="line-3029"><code>** ^The authorizer callback is invoked as SQL statements are being compiled</code></span>
<span class="codeline" id="line-3030"><code>** by [sqlite3_prepare()] or its variants [sqlite3_prepare_v2()],</code></span>
<span class="codeline" id="line-3031"><code>** [sqlite3_prepare_v3()], [sqlite3_prepare16()], [sqlite3_prepare16_v2()],</code></span>
<span class="codeline" id="line-3032"><code>** and [sqlite3_prepare16_v3()].  ^At various</code></span>
<span class="codeline" id="line-3033"><code>** points during the compilation process, as logic is being created</code></span>
<span class="codeline" id="line-3034"><code>** to perform various actions, the authorizer callback is invoked to</code></span>
<span class="codeline" id="line-3035"><code>** see if those actions are allowed.  ^The authorizer callback should</code></span>
<span class="codeline" id="line-3036"><code>** return [SQLITE_OK] to allow the action, [SQLITE_IGNORE] to disallow the</code></span>
<span class="codeline" id="line-3037"><code>** specific action but allow the SQL statement to continue to be</code></span>
<span class="codeline" id="line-3038"><code>** compiled, or [SQLITE_DENY] to cause the entire SQL statement to be</code></span>
<span class="codeline" id="line-3039"><code>** rejected with an error.  ^If the authorizer callback returns</code></span>
<span class="codeline" id="line-3040"><code>** any value other than [SQLITE_IGNORE], [SQLITE_OK], or [SQLITE_DENY]</code></span>
<span class="codeline" id="line-3041"><code>** then the [sqlite3_prepare_v2()] or equivalent call that triggered</code></span>
<span class="codeline" id="line-3042"><code>** the authorizer will fail with an error message.</code></span>
<span class="codeline" id="line-3043"><code>**</code></span>
<span class="codeline" id="line-3044"><code>** When the callback returns [SQLITE_OK], that means the operation</code></span>
<span class="codeline" id="line-3045"><code>** requested is ok.  ^When the callback returns [SQLITE_DENY], the</code></span>
<span class="codeline" id="line-3046"><code>** [sqlite3_prepare_v2()] or equivalent call that triggered the</code></span>
<span class="codeline" id="line-3047"><code>** authorizer will fail with an error message explaining that</code></span>
<span class="codeline" id="line-3048"><code>** access is denied.</code></span>
<span class="codeline" id="line-3049"><code>**</code></span>
<span class="codeline" id="line-3050"><code>** ^The first parameter to the authorizer callback is a copy of the third</code></span>
<span class="codeline" id="line-3051"><code>** parameter to the sqlite3_set_authorizer() interface. ^The second parameter</code></span>
<span class="codeline" id="line-3052"><code>** to the callback is an integer [SQLITE_COPY | action code] that specifies</code></span>
<span class="codeline" id="line-3053"><code>** the particular action to be authorized. ^The third through sixth parameters</code></span>
<span class="codeline" id="line-3054"><code>** to the callback are either NULL pointers or zero-terminated strings</code></span>
<span class="codeline" id="line-3055"><code>** that contain additional details about the action to be authorized.</code></span>
<span class="codeline" id="line-3056"><code>** Applications must always be prepared to encounter a NULL pointer in any</code></span>
<span class="codeline" id="line-3057"><code>** of the third through the sixth parameters of the authorization callback.</code></span>
<span class="codeline" id="line-3058"><code>**</code></span>
<span class="codeline" id="line-3059"><code>** ^If the action code is [SQLITE_READ]</code></span>
<span class="codeline" id="line-3060"><code>** and the callback returns [SQLITE_IGNORE] then the</code></span>
<span class="codeline" id="line-3061"><code>** [prepared statement] statement is constructed to substitute</code></span>
<span class="codeline" id="line-3062"><code>** a NULL value in place of the table column that would have</code></span>
<span class="codeline" id="line-3063"><code>** been read if [SQLITE_OK] had been returned.  The [SQLITE_IGNORE]</code></span>
<span class="codeline" id="line-3064"><code>** return can be used to deny an untrusted user access to individual</code></span>
<span class="codeline" id="line-3065"><code>** columns of a table.</code></span>
<span class="codeline" id="line-3066"><code>** ^When a table is referenced by a [SELECT] but no column values are</code></span>
<span class="codeline" id="line-3067"><code>** extracted from that table (for example in a query like</code></span>
<span class="codeline" id="line-3068"><code>** "SELECT count(*) FROM tab") then the [SQLITE_READ] authorizer callback</code></span>
<span class="codeline" id="line-3069"><code>** is invoked once for that table with a column name that is an empty string.</code></span>
<span class="codeline" id="line-3070"><code>** ^If the action code is [SQLITE_DELETE] and the callback returns</code></span>
<span class="codeline" id="line-3071"><code>** [SQLITE_IGNORE] then the [DELETE] operation proceeds but the</code></span>
<span class="codeline" id="line-3072"><code>** [truncate optimization] is disabled and all rows are deleted individually.</code></span>
<span class="codeline" id="line-3073"><code>**</code></span>
<span class="codeline" id="line-3074"><code>** An authorizer is used when [sqlite3_prepare | preparing]</code></span>
<span class="codeline" id="line-3075"><code>** SQL statements from an untrusted source, to ensure that the SQL statements</code></span>
<span class="codeline" id="line-3076"><code>** do not try to access data they are not allowed to see, or that they do not</code></span>
<span class="codeline" id="line-3077"><code>** try to execute malicious statements that damage the database.  For</code></span>
<span class="codeline" id="line-3078"><code>** example, an application may allow a user to enter arbitrary</code></span>
<span class="codeline" id="line-3079"><code>** SQL queries for evaluation by a database.  But the application does</code></span>
<span class="codeline" id="line-3080"><code>** not want the user to be able to make arbitrary changes to the</code></span>
<span class="codeline" id="line-3081"><code>** database.  An authorizer could then be put in place while the</code></span>
<span class="codeline" id="line-3082"><code>** user-entered SQL is being [sqlite3_prepare | prepared] that</code></span>
<span class="codeline" id="line-3083"><code>** disallows everything except [SELECT] statements.</code></span>
<span class="codeline" id="line-3084"><code>**</code></span>
<span class="codeline" id="line-3085"><code>** Applications that need to process SQL from untrusted sources</code></span>
<span class="codeline" id="line-3086"><code>** might also consider lowering resource limits using [sqlite3_limit()]</code></span>
<span class="codeline" id="line-3087"><code>** and limiting database size using the [max_page_count] [PRAGMA]</code></span>
<span class="codeline" id="line-3088"><code>** in addition to using an authorizer.</code></span>
<span class="codeline" id="line-3089"><code>**</code></span>
<span class="codeline" id="line-3090"><code>** ^(Only a single authorizer can be in place on a database connection</code></span>
<span class="codeline" id="line-3091"><code>** at a time.  Each call to sqlite3_set_authorizer overrides the</code></span>
<span class="codeline" id="line-3092"><code>** previous call.)^  ^Disable the authorizer by installing a NULL callback.</code></span>
<span class="codeline" id="line-3093"><code>** The authorizer is disabled by default.</code></span>
<span class="codeline" id="line-3094"><code>**</code></span>
<span class="codeline" id="line-3095"><code>** The authorizer callback must not do anything that will modify</code></span>
<span class="codeline" id="line-3096"><code>** the database connection that invoked the authorizer callback.</code></span>
<span class="codeline" id="line-3097"><code>** Note that [sqlite3_prepare_v2()] and [sqlite3_step()] both modify their</code></span>
<span class="codeline" id="line-3098"><code>** database connections for the meaning of "modify" in this paragraph.</code></span>
<span class="codeline" id="line-3099"><code>**</code></span>
<span class="codeline" id="line-3100"><code>** ^When [sqlite3_prepare_v2()] is used to prepare a statement, the</code></span>
<span class="codeline" id="line-3101"><code>** statement might be re-prepared during [sqlite3_step()] due to a</code></span>
<span class="codeline" id="line-3102"><code>** schema change.  Hence, the application should ensure that the</code></span>
<span class="codeline" id="line-3103"><code>** correct authorizer callback remains in place during the [sqlite3_step()].</code></span>
<span class="codeline" id="line-3104"><code>**</code></span>
<span class="codeline" id="line-3105"><code>** ^Note that the authorizer callback is invoked only during</code></span>
<span class="codeline" id="line-3106"><code>** [sqlite3_prepare()] or its variants.  Authorization is not</code></span>
<span class="codeline" id="line-3107"><code>** performed during statement evaluation in [sqlite3_step()], unless</code></span>
<span class="codeline" id="line-3108"><code>** as stated in the previous paragraph, sqlite3_step() invokes</code></span>
<span class="codeline" id="line-3109"><code>** sqlite3_prepare_v2() to reprepare a statement after a schema change.</code></span>
<span class="codeline" id="line-3110"><code>*/</code></span>
<span class="codeline" id="line-3111"><code>SQLITE_API int sqlite3_set_authorizer(</code></span>
<span class="codeline" id="line-3112"><code>  sqlite3*,</code></span>
<span class="codeline" id="line-3113"><code>  int (*xAuth)(void*,int,const char*,const char*,const char*,const char*),</code></span>
<span class="codeline" id="line-3114"><code>  void *pUserData</code></span>
<span class="codeline" id="line-3115"><code>);</code></span>
<span class="codeline" id="line-3116"><code></code></span>
<span class="codeline" id="line-3117"><code>/*</code></span>
<span class="codeline" id="line-3118"><code>** CAPI3REF: Authorizer Return Codes</code></span>
<span class="codeline" id="line-3119"><code>**</code></span>
<span class="codeline" id="line-3120"><code>** The [sqlite3_set_authorizer | authorizer callback function] must</code></span>
<span class="codeline" id="line-3121"><code>** return either [SQLITE_OK] or one of these two constants in order</code></span>
<span class="codeline" id="line-3122"><code>** to signal SQLite whether or not the action is permitted.  See the</code></span>
<span class="codeline" id="line-3123"><code>** [sqlite3_set_authorizer | authorizer documentation] for additional</code></span>
<span class="codeline" id="line-3124"><code>** information.</code></span>
<span class="codeline" id="line-3125"><code>**</code></span>
<span class="codeline" id="line-3126"><code>** Note that SQLITE_IGNORE is also used as a [conflict resolution mode]</code></span>
<span class="codeline" id="line-3127"><code>** returned from the [sqlite3_vtab_on_conflict()] interface.</code></span>
<span class="codeline" id="line-3128"><code>*/</code></span>
<span class="codeline" id="line-3129"><code>#define SQLITE_DENY   1   /* Abort the SQL statement with an error */</code></span>
<span class="codeline" id="line-3130"><code>#define SQLITE_IGNORE 2   /* Don't allow access, but don't generate an error */</code></span>
<span class="codeline" id="line-3131"><code></code></span>
<span class="codeline" id="line-3132"><code>/*</code></span>
<span class="codeline" id="line-3133"><code>** CAPI3REF: Authorizer Action Codes</code></span>
<span class="codeline" id="line-3134"><code>**</code></span>
<span class="codeline" id="line-3135"><code>** The [sqlite3_set_authorizer()] interface registers a callback function</code></span>
<span class="codeline" id="line-3136"><code>** that is invoked to authorize certain SQL statement actions.  The</code></span>
<span class="codeline" id="line-3137"><code>** second parameter to the callback is an integer code that specifies</code></span>
<span class="codeline" id="line-3138"><code>** what action is being authorized.  These are the integer action codes that</code></span>
<span class="codeline" id="line-3139"><code>** the authorizer callback may be passed.</code></span>
<span class="codeline" id="line-3140"><code>**</code></span>
<span class="codeline" id="line-3141"><code>** These action code values signify what kind of operation is to be</code></span>
<span class="codeline" id="line-3142"><code>** authorized.  The 3rd and 4th parameters to the authorization</code></span>
<span class="codeline" id="line-3143"><code>** callback function will be parameters or NULL depending on which of these</code></span>
<span class="codeline" id="line-3144"><code>** codes is used as the second parameter.  ^(The 5th parameter to the</code></span>
<span class="codeline" id="line-3145"><code>** authorizer callback is the name of the database ("main", "temp",</code></span>
<span class="codeline" id="line-3146"><code>** etc.) if applicable.)^  ^The 6th parameter to the authorizer callback</code></span>
<span class="codeline" id="line-3147"><code>** is the name of the inner-most trigger or view that is responsible for</code></span>
<span class="codeline" id="line-3148"><code>** the access attempt or NULL if this access attempt is directly from</code></span>
<span class="codeline" id="line-3149"><code>** top-level SQL code.</code></span>
<span class="codeline" id="line-3150"><code>*/</code></span>
<span class="codeline" id="line-3151"><code>/******************************************* 3rd ************ 4th ***********/</code></span>
<span class="codeline" id="line-3152"><code>#define SQLITE_CREATE_INDEX          1   /* Index Name      Table Name      */</code></span>
<span class="codeline" id="line-3153"><code>#define SQLITE_CREATE_TABLE          2   /* Table Name      NULL            */</code></span>
<span class="codeline" id="line-3154"><code>#define SQLITE_CREATE_TEMP_INDEX     3   /* Index Name      Table Name      */</code></span>
<span class="codeline" id="line-3155"><code>#define SQLITE_CREATE_TEMP_TABLE     4   /* Table Name      NULL            */</code></span>
<span class="codeline" id="line-3156"><code>#define SQLITE_CREATE_TEMP_TRIGGER   5   /* Trigger Name    Table Name      */</code></span>
<span class="codeline" id="line-3157"><code>#define SQLITE_CREATE_TEMP_VIEW      6   /* View Name       NULL            */</code></span>
<span class="codeline" id="line-3158"><code>#define SQLITE_CREATE_TRIGGER        7   /* Trigger Name    Table Name      */</code></span>
<span class="codeline" id="line-3159"><code>#define SQLITE_CREATE_VIEW           8   /* View Name       NULL            */</code></span>
<span class="codeline" id="line-3160"><code>#define SQLITE_DELETE                9   /* Table Name      NULL            */</code></span>
<span class="codeline" id="line-3161"><code>#define SQLITE_DROP_INDEX           10   /* Index Name      Table Name      */</code></span>
<span class="codeline" id="line-3162"><code>#define SQLITE_DROP_TABLE           11   /* Table Name      NULL            */</code></span>
<span class="codeline" id="line-3163"><code>#define SQLITE_DROP_TEMP_INDEX      12   /* Index Name      Table Name      */</code></span>
<span class="codeline" id="line-3164"><code>#define SQLITE_DROP_TEMP_TABLE      13   /* Table Name      NULL            */</code></span>
<span class="codeline" id="line-3165"><code>#define SQLITE_DROP_TEMP_TRIGGER    14   /* Trigger Name    Table Name      */</code></span>
<span class="codeline" id="line-3166"><code>#define SQLITE_DROP_TEMP_VIEW       15   /* View Name       NULL            */</code></span>
<span class="codeline" id="line-3167"><code>#define SQLITE_DROP_TRIGGER         16   /* Trigger Name    Table Name      */</code></span>
<span class="codeline" id="line-3168"><code>#define SQLITE_DROP_VIEW            17   /* View Name       NULL            */</code></span>
<span class="codeline" id="line-3169"><code>#define SQLITE_INSERT               18   /* Table Name      NULL            */</code></span>
<span class="codeline" id="line-3170"><code>#define SQLITE_PRAGMA               19   /* Pragma Name     1st arg or NULL */</code></span>
<span class="codeline" id="line-3171"><code>#define SQLITE_READ                 20   /* Table Name      Column Name     */</code></span>
<span class="codeline" id="line-3172"><code>#define SQLITE_SELECT               21   /* NULL            NULL            */</code></span>
<span class="codeline" id="line-3173"><code>#define SQLITE_TRANSACTION          22   /* Operation       NULL            */</code></span>
<span class="codeline" id="line-3174"><code>#define SQLITE_UPDATE               23   /* Table Name      Column Name     */</code></span>
<span class="codeline" id="line-3175"><code>#define SQLITE_ATTACH               24   /* Filename        NULL            */</code></span>
<span class="codeline" id="line-3176"><code>#define SQLITE_DETACH               25   /* Database Name   NULL            */</code></span>
<span class="codeline" id="line-3177"><code>#define SQLITE_ALTER_TABLE          26   /* Database Name   Table Name      */</code></span>
<span class="codeline" id="line-3178"><code>#define SQLITE_REINDEX              27   /* Index Name      NULL            */</code></span>
<span class="codeline" id="line-3179"><code>#define SQLITE_ANALYZE              28   /* Table Name      NULL            */</code></span>
<span class="codeline" id="line-3180"><code>#define SQLITE_CREATE_VTABLE        29   /* Table Name      Module Name     */</code></span>
<span class="codeline" id="line-3181"><code>#define SQLITE_DROP_VTABLE          30   /* Table Name      Module Name     */</code></span>
<span class="codeline" id="line-3182"><code>#define SQLITE_FUNCTION             31   /* NULL            Function Name   */</code></span>
<span class="codeline" id="line-3183"><code>#define SQLITE_SAVEPOINT            32   /* Operation       Savepoint Name  */</code></span>
<span class="codeline" id="line-3184"><code>#define SQLITE_COPY                  0   /* No longer used */</code></span>
<span class="codeline" id="line-3185"><code>#define SQLITE_RECURSIVE            33   /* NULL            NULL            */</code></span>
<span class="codeline" id="line-3186"><code></code></span>
<span class="codeline" id="line-3187"><code>/*</code></span>
<span class="codeline" id="line-3188"><code>** CAPI3REF: Tracing And Profiling Functions</code></span>
<span class="codeline" id="line-3189"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-3190"><code>**</code></span>
<span class="codeline" id="line-3191"><code>** These routines are deprecated. Use the [sqlite3_trace_v2()] interface</code></span>
<span class="codeline" id="line-3192"><code>** instead of the routines described here.</code></span>
<span class="codeline" id="line-3193"><code>**</code></span>
<span class="codeline" id="line-3194"><code>** These routines register callback functions that can be used for</code></span>
<span class="codeline" id="line-3195"><code>** tracing and profiling the execution of SQL statements.</code></span>
<span class="codeline" id="line-3196"><code>**</code></span>
<span class="codeline" id="line-3197"><code>** ^The callback function registered by sqlite3_trace() is invoked at</code></span>
<span class="codeline" id="line-3198"><code>** various times when an SQL statement is being run by [sqlite3_step()].</code></span>
<span class="codeline" id="line-3199"><code>** ^The sqlite3_trace() callback is invoked with a UTF-8 rendering of the</code></span>
<span class="codeline" id="line-3200"><code>** SQL statement text as the statement first begins executing.</code></span>
<span class="codeline" id="line-3201"><code>** ^(Additional sqlite3_trace() callbacks might occur</code></span>
<span class="codeline" id="line-3202"><code>** as each triggered subprogram is entered.  The callbacks for triggers</code></span>
<span class="codeline" id="line-3203"><code>** contain a UTF-8 SQL comment that identifies the trigger.)^</code></span>
<span class="codeline" id="line-3204"><code>**</code></span>
<span class="codeline" id="line-3205"><code>** The [SQLITE_TRACE_SIZE_LIMIT] compile-time option can be used to limit</code></span>
<span class="codeline" id="line-3206"><code>** the length of [bound parameter] expansion in the output of sqlite3_trace().</code></span>
<span class="codeline" id="line-3207"><code>**</code></span>
<span class="codeline" id="line-3208"><code>** ^The callback function registered by sqlite3_profile() is invoked</code></span>
<span class="codeline" id="line-3209"><code>** as each SQL statement finishes.  ^The profile callback contains</code></span>
<span class="codeline" id="line-3210"><code>** the original statement text and an estimate of wall-clock time</code></span>
<span class="codeline" id="line-3211"><code>** of how long that statement took to run.  ^The profile callback</code></span>
<span class="codeline" id="line-3212"><code>** time is in units of nanoseconds, however the current implementation</code></span>
<span class="codeline" id="line-3213"><code>** is only capable of millisecond resolution so the six least significant</code></span>
<span class="codeline" id="line-3214"><code>** digits in the time are meaningless.  Future versions of SQLite</code></span>
<span class="codeline" id="line-3215"><code>** might provide greater resolution on the profiler callback.  Invoking</code></span>
<span class="codeline" id="line-3216"><code>** either [sqlite3_trace()] or [sqlite3_trace_v2()] will cancel the</code></span>
<span class="codeline" id="line-3217"><code>** profile callback.</code></span>
<span class="codeline" id="line-3218"><code>*/</code></span>
<span class="codeline" id="line-3219"><code>SQLITE_API SQLITE_DEPRECATED void *sqlite3_trace(sqlite3*,</code></span>
<span class="codeline" id="line-3220"><code>   void(*xTrace)(void*,const char*), void*);</code></span>
<span class="codeline" id="line-3221"><code>SQLITE_API SQLITE_DEPRECATED void *sqlite3_profile(sqlite3*,</code></span>
<span class="codeline" id="line-3222"><code>   void(*xProfile)(void*,const char*,sqlite3_uint64), void*);</code></span>
<span class="codeline" id="line-3223"><code></code></span>
<span class="codeline" id="line-3224"><code>/*</code></span>
<span class="codeline" id="line-3225"><code>** CAPI3REF: SQL Trace Event Codes</code></span>
<span class="codeline" id="line-3226"><code>** KEYWORDS: SQLITE_TRACE</code></span>
<span class="codeline" id="line-3227"><code>**</code></span>
<span class="codeline" id="line-3228"><code>** These constants identify classes of events that can be monitored</code></span>
<span class="codeline" id="line-3229"><code>** using the [sqlite3_trace_v2()] tracing logic.  The M argument</code></span>
<span class="codeline" id="line-3230"><code>** to [sqlite3_trace_v2(D,M,X,P)] is an OR-ed combination of one or more of</code></span>
<span class="codeline" id="line-3231"><code>** the following constants.  ^The first argument to the trace callback</code></span>
<span class="codeline" id="line-3232"><code>** is one of the following constants.</code></span>
<span class="codeline" id="line-3233"><code>**</code></span>
<span class="codeline" id="line-3234"><code>** New tracing constants may be added in future releases.</code></span>
<span class="codeline" id="line-3235"><code>**</code></span>
<span class="codeline" id="line-3236"><code>** ^A trace callback has four arguments: xCallback(T,C,P,X).</code></span>
<span class="codeline" id="line-3237"><code>** ^The T argument is one of the integer type codes above.</code></span>
<span class="codeline" id="line-3238"><code>** ^The C argument is a copy of the context pointer passed in as the</code></span>
<span class="codeline" id="line-3239"><code>** fourth argument to [sqlite3_trace_v2()].</code></span>
<span class="codeline" id="line-3240"><code>** The P and X arguments are pointers whose meanings depend on T.</code></span>
<span class="codeline" id="line-3241"><code>**</code></span>
<span class="codeline" id="line-3242"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-3243"><code>** [[SQLITE_TRACE_STMT]] &lt;dt&gt;SQLITE_TRACE_STMT&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3244"><code>** &lt;dd&gt;^An SQLITE_TRACE_STMT callback is invoked when a prepared statement</code></span>
<span class="codeline" id="line-3245"><code>** first begins running and possibly at other times during the</code></span>
<span class="codeline" id="line-3246"><code>** execution of the prepared statement, such as at the start of each</code></span>
<span class="codeline" id="line-3247"><code>** trigger subprogram. ^The P argument is a pointer to the</code></span>
<span class="codeline" id="line-3248"><code>** [prepared statement]. ^The X argument is a pointer to a string which</code></span>
<span class="codeline" id="line-3249"><code>** is the unexpanded SQL text of the prepared statement or an SQL comment</code></span>
<span class="codeline" id="line-3250"><code>** that indicates the invocation of a trigger.  ^The callback can compute</code></span>
<span class="codeline" id="line-3251"><code>** the same text that would have been returned by the legacy [sqlite3_trace()]</code></span>
<span class="codeline" id="line-3252"><code>** interface by using the X argument when X begins with "--" and invoking</code></span>
<span class="codeline" id="line-3253"><code>** [sqlite3_expanded_sql(P)] otherwise.</code></span>
<span class="codeline" id="line-3254"><code>**</code></span>
<span class="codeline" id="line-3255"><code>** [[SQLITE_TRACE_PROFILE]] &lt;dt&gt;SQLITE_TRACE_PROFILE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3256"><code>** &lt;dd&gt;^An SQLITE_TRACE_PROFILE callback provides approximately the same</code></span>
<span class="codeline" id="line-3257"><code>** information as is provided by the [sqlite3_profile()] callback.</code></span>
<span class="codeline" id="line-3258"><code>** ^The P argument is a pointer to the [prepared statement] and the</code></span>
<span class="codeline" id="line-3259"><code>** X argument points to a 64-bit integer which is the estimated of</code></span>
<span class="codeline" id="line-3260"><code>** the number of nanosecond that the prepared statement took to run.</code></span>
<span class="codeline" id="line-3261"><code>** ^The SQLITE_TRACE_PROFILE callback is invoked when the statement finishes.</code></span>
<span class="codeline" id="line-3262"><code>**</code></span>
<span class="codeline" id="line-3263"><code>** [[SQLITE_TRACE_ROW]] &lt;dt&gt;SQLITE_TRACE_ROW&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3264"><code>** &lt;dd&gt;^An SQLITE_TRACE_ROW callback is invoked whenever a prepared</code></span>
<span class="codeline" id="line-3265"><code>** statement generates a single row of result.</code></span>
<span class="codeline" id="line-3266"><code>** ^The P argument is a pointer to the [prepared statement] and the</code></span>
<span class="codeline" id="line-3267"><code>** X argument is unused.</code></span>
<span class="codeline" id="line-3268"><code>**</code></span>
<span class="codeline" id="line-3269"><code>** [[SQLITE_TRACE_CLOSE]] &lt;dt&gt;SQLITE_TRACE_CLOSE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3270"><code>** &lt;dd&gt;^An SQLITE_TRACE_CLOSE callback is invoked when a database</code></span>
<span class="codeline" id="line-3271"><code>** connection closes.</code></span>
<span class="codeline" id="line-3272"><code>** ^The P argument is a pointer to the [database connection] object</code></span>
<span class="codeline" id="line-3273"><code>** and the X argument is unused.</code></span>
<span class="codeline" id="line-3274"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-3275"><code>*/</code></span>
<span class="codeline" id="line-3276"><code>#define SQLITE_TRACE_STMT       0x01</code></span>
<span class="codeline" id="line-3277"><code>#define SQLITE_TRACE_PROFILE    0x02</code></span>
<span class="codeline" id="line-3278"><code>#define SQLITE_TRACE_ROW        0x04</code></span>
<span class="codeline" id="line-3279"><code>#define SQLITE_TRACE_CLOSE      0x08</code></span>
<span class="codeline" id="line-3280"><code></code></span>
<span class="codeline" id="line-3281"><code>/*</code></span>
<span class="codeline" id="line-3282"><code>** CAPI3REF: SQL Trace Hook</code></span>
<span class="codeline" id="line-3283"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-3284"><code>**</code></span>
<span class="codeline" id="line-3285"><code>** ^The sqlite3_trace_v2(D,M,X,P) interface registers a trace callback</code></span>
<span class="codeline" id="line-3286"><code>** function X against [database connection] D, using property mask M</code></span>
<span class="codeline" id="line-3287"><code>** and context pointer P.  ^If the X callback is</code></span>
<span class="codeline" id="line-3288"><code>** NULL or if the M mask is zero, then tracing is disabled.  The</code></span>
<span class="codeline" id="line-3289"><code>** M argument should be the bitwise OR-ed combination of</code></span>
<span class="codeline" id="line-3290"><code>** zero or more [SQLITE_TRACE] constants.</code></span>
<span class="codeline" id="line-3291"><code>**</code></span>
<span class="codeline" id="line-3292"><code>** ^Each call to either sqlite3_trace() or sqlite3_trace_v2() overrides</code></span>
<span class="codeline" id="line-3293"><code>** (cancels) any prior calls to sqlite3_trace() or sqlite3_trace_v2().</code></span>
<span class="codeline" id="line-3294"><code>**</code></span>
<span class="codeline" id="line-3295"><code>** ^The X callback is invoked whenever any of the events identified by</code></span>
<span class="codeline" id="line-3296"><code>** mask M occur.  ^The integer return value from the callback is currently</code></span>
<span class="codeline" id="line-3297"><code>** ignored, though this may change in future releases.  Callback</code></span>
<span class="codeline" id="line-3298"><code>** implementations should return zero to ensure future compatibility.</code></span>
<span class="codeline" id="line-3299"><code>**</code></span>
<span class="codeline" id="line-3300"><code>** ^A trace callback is invoked with four arguments: callback(T,C,P,X).</code></span>
<span class="codeline" id="line-3301"><code>** ^The T argument is one of the [SQLITE_TRACE]</code></span>
<span class="codeline" id="line-3302"><code>** constants to indicate why the callback was invoked.</code></span>
<span class="codeline" id="line-3303"><code>** ^The C argument is a copy of the context pointer.</code></span>
<span class="codeline" id="line-3304"><code>** The P and X arguments are pointers whose meanings depend on T.</code></span>
<span class="codeline" id="line-3305"><code>**</code></span>
<span class="codeline" id="line-3306"><code>** The sqlite3_trace_v2() interface is intended to replace the legacy</code></span>
<span class="codeline" id="line-3307"><code>** interfaces [sqlite3_trace()] and [sqlite3_profile()], both of which</code></span>
<span class="codeline" id="line-3308"><code>** are deprecated.</code></span>
<span class="codeline" id="line-3309"><code>*/</code></span>
<span class="codeline" id="line-3310"><code>SQLITE_API int sqlite3_trace_v2(</code></span>
<span class="codeline" id="line-3311"><code>  sqlite3*,</code></span>
<span class="codeline" id="line-3312"><code>  unsigned uMask,</code></span>
<span class="codeline" id="line-3313"><code>  int(*xCallback)(unsigned,void*,void*,void*),</code></span>
<span class="codeline" id="line-3314"><code>  void *pCtx</code></span>
<span class="codeline" id="line-3315"><code>);</code></span>
<span class="codeline" id="line-3316"><code></code></span>
<span class="codeline" id="line-3317"><code>/*</code></span>
<span class="codeline" id="line-3318"><code>** CAPI3REF: Query Progress Callbacks</code></span>
<span class="codeline" id="line-3319"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-3320"><code>**</code></span>
<span class="codeline" id="line-3321"><code>** ^The sqlite3_progress_handler(D,N,X,P) interface causes the callback</code></span>
<span class="codeline" id="line-3322"><code>** function X to be invoked periodically during long running calls to</code></span>
<span class="codeline" id="line-3323"><code>** [sqlite3_exec()], [sqlite3_step()] and [sqlite3_get_table()] for</code></span>
<span class="codeline" id="line-3324"><code>** database connection D.  An example use for this</code></span>
<span class="codeline" id="line-3325"><code>** interface is to keep a GUI updated during a large query.</code></span>
<span class="codeline" id="line-3326"><code>**</code></span>
<span class="codeline" id="line-3327"><code>** ^The parameter P is passed through as the only parameter to the</code></span>
<span class="codeline" id="line-3328"><code>** callback function X.  ^The parameter N is the approximate number of</code></span>
<span class="codeline" id="line-3329"><code>** [virtual machine instructions] that are evaluated between successive</code></span>
<span class="codeline" id="line-3330"><code>** invocations of the callback X.  ^If N is less than one then the progress</code></span>
<span class="codeline" id="line-3331"><code>** handler is disabled.</code></span>
<span class="codeline" id="line-3332"><code>**</code></span>
<span class="codeline" id="line-3333"><code>** ^Only a single progress handler may be defined at one time per</code></span>
<span class="codeline" id="line-3334"><code>** [database connection]; setting a new progress handler cancels the</code></span>
<span class="codeline" id="line-3335"><code>** old one.  ^Setting parameter X to NULL disables the progress handler.</code></span>
<span class="codeline" id="line-3336"><code>** ^The progress handler is also disabled by setting N to a value less</code></span>
<span class="codeline" id="line-3337"><code>** than 1.</code></span>
<span class="codeline" id="line-3338"><code>**</code></span>
<span class="codeline" id="line-3339"><code>** ^If the progress callback returns non-zero, the operation is</code></span>
<span class="codeline" id="line-3340"><code>** interrupted.  This feature can be used to implement a</code></span>
<span class="codeline" id="line-3341"><code>** "Cancel" button on a GUI progress dialog box.</code></span>
<span class="codeline" id="line-3342"><code>**</code></span>
<span class="codeline" id="line-3343"><code>** The progress handler callback must not do anything that will modify</code></span>
<span class="codeline" id="line-3344"><code>** the database connection that invoked the progress handler.</code></span>
<span class="codeline" id="line-3345"><code>** Note that [sqlite3_prepare_v2()] and [sqlite3_step()] both modify their</code></span>
<span class="codeline" id="line-3346"><code>** database connections for the meaning of "modify" in this paragraph.</code></span>
<span class="codeline" id="line-3347"><code>**</code></span>
<span class="codeline" id="line-3348"><code>*/</code></span>
<span class="codeline" id="line-3349"><code>SQLITE_API void sqlite3_progress_handler(sqlite3*, int, int(*)(void*), void*);</code></span>
<span class="codeline" id="line-3350"><code></code></span>
<span class="codeline" id="line-3351"><code>/*</code></span>
<span class="codeline" id="line-3352"><code>** CAPI3REF: Opening A New Database Connection</code></span>
<span class="codeline" id="line-3353"><code>** CONSTRUCTOR: sqlite3</code></span>
<span class="codeline" id="line-3354"><code>**</code></span>
<span class="codeline" id="line-3355"><code>** ^These routines open an SQLite database file as specified by the</code></span>
<span class="codeline" id="line-3356"><code>** filename argument. ^The filename argument is interpreted as UTF-8 for</code></span>
<span class="codeline" id="line-3357"><code>** sqlite3_open() and sqlite3_open_v2() and as UTF-16 in the native byte</code></span>
<span class="codeline" id="line-3358"><code>** order for sqlite3_open16(). ^(A [database connection] handle is usually</code></span>
<span class="codeline" id="line-3359"><code>** returned in *ppDb, even if an error occurs.  The only exception is that</code></span>
<span class="codeline" id="line-3360"><code>** if SQLite is unable to allocate memory to hold the [sqlite3] object,</code></span>
<span class="codeline" id="line-3361"><code>** a NULL will be written into *ppDb instead of a pointer to the [sqlite3]</code></span>
<span class="codeline" id="line-3362"><code>** object.)^ ^(If the database is opened (and/or created) successfully, then</code></span>
<span class="codeline" id="line-3363"><code>** [SQLITE_OK] is returned.  Otherwise an [error code] is returned.)^ ^The</code></span>
<span class="codeline" id="line-3364"><code>** [sqlite3_errmsg()] or [sqlite3_errmsg16()] routines can be used to obtain</code></span>
<span class="codeline" id="line-3365"><code>** an English language description of the error following a failure of any</code></span>
<span class="codeline" id="line-3366"><code>** of the sqlite3_open() routines.</code></span>
<span class="codeline" id="line-3367"><code>**</code></span>
<span class="codeline" id="line-3368"><code>** ^The default encoding will be UTF-8 for databases created using</code></span>
<span class="codeline" id="line-3369"><code>** sqlite3_open() or sqlite3_open_v2().  ^The default encoding for databases</code></span>
<span class="codeline" id="line-3370"><code>** created using sqlite3_open16() will be UTF-16 in the native byte order.</code></span>
<span class="codeline" id="line-3371"><code>**</code></span>
<span class="codeline" id="line-3372"><code>** Whether or not an error occurs when it is opened, resources</code></span>
<span class="codeline" id="line-3373"><code>** associated with the [database connection] handle should be released by</code></span>
<span class="codeline" id="line-3374"><code>** passing it to [sqlite3_close()] when it is no longer required.</code></span>
<span class="codeline" id="line-3375"><code>**</code></span>
<span class="codeline" id="line-3376"><code>** The sqlite3_open_v2() interface works like sqlite3_open()</code></span>
<span class="codeline" id="line-3377"><code>** except that it accepts two additional parameters for additional control</code></span>
<span class="codeline" id="line-3378"><code>** over the new database connection.  ^(The flags parameter to</code></span>
<span class="codeline" id="line-3379"><code>** sqlite3_open_v2() must include, at a minimum, one of the following</code></span>
<span class="codeline" id="line-3380"><code>** three flag combinations:)^</code></span>
<span class="codeline" id="line-3381"><code>**</code></span>
<span class="codeline" id="line-3382"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-3383"><code>** ^(&lt;dt&gt;[SQLITE_OPEN_READONLY]&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3384"><code>** &lt;dd&gt;The database is opened in read-only mode.  If the database does not</code></span>
<span class="codeline" id="line-3385"><code>** already exist, an error is returned.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3386"><code>**</code></span>
<span class="codeline" id="line-3387"><code>** ^(&lt;dt&gt;[SQLITE_OPEN_READWRITE]&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3388"><code>** &lt;dd&gt;The database is opened for reading and writing if possible, or reading</code></span>
<span class="codeline" id="line-3389"><code>** only if the file is write protected by the operating system.  In either</code></span>
<span class="codeline" id="line-3390"><code>** case the database must already exist, otherwise an error is returned.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3391"><code>**</code></span>
<span class="codeline" id="line-3392"><code>** ^(&lt;dt&gt;[SQLITE_OPEN_READWRITE] | [SQLITE_OPEN_CREATE]&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3393"><code>** &lt;dd&gt;The database is opened for reading and writing, and is created if</code></span>
<span class="codeline" id="line-3394"><code>** it does not already exist. This is the behavior that is always used for</code></span>
<span class="codeline" id="line-3395"><code>** sqlite3_open() and sqlite3_open16().&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3396"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-3397"><code>**</code></span>
<span class="codeline" id="line-3398"><code>** In addition to the required flags, the following optional flags are</code></span>
<span class="codeline" id="line-3399"><code>** also supported:</code></span>
<span class="codeline" id="line-3400"><code>**</code></span>
<span class="codeline" id="line-3401"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-3402"><code>** ^(&lt;dt&gt;[SQLITE_OPEN_URI]&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3403"><code>** &lt;dd&gt;The filename can be interpreted as a URI if this flag is set.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3404"><code>**</code></span>
<span class="codeline" id="line-3405"><code>** ^(&lt;dt&gt;[SQLITE_OPEN_MEMORY]&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3406"><code>** &lt;dd&gt;The database will be opened as an in-memory database.  The database</code></span>
<span class="codeline" id="line-3407"><code>** is named by the "filename" argument for the purposes of cache-sharing,</code></span>
<span class="codeline" id="line-3408"><code>** if shared cache mode is enabled, but the "filename" is otherwise ignored.</code></span>
<span class="codeline" id="line-3409"><code>** &lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3410"><code>**</code></span>
<span class="codeline" id="line-3411"><code>** ^(&lt;dt&gt;[SQLITE_OPEN_NOMUTEX]&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3412"><code>** &lt;dd&gt;The new database connection will use the "multi-thread"</code></span>
<span class="codeline" id="line-3413"><code>** [threading mode].)^  This means that separate threads are allowed</code></span>
<span class="codeline" id="line-3414"><code>** to use SQLite at the same time, as long as each thread is using</code></span>
<span class="codeline" id="line-3415"><code>** a different [database connection].</code></span>
<span class="codeline" id="line-3416"><code>**</code></span>
<span class="codeline" id="line-3417"><code>** ^(&lt;dt&gt;[SQLITE_OPEN_FULLMUTEX]&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3418"><code>** &lt;dd&gt;The new database connection will use the "serialized"</code></span>
<span class="codeline" id="line-3419"><code>** [threading mode].)^  This means the multiple threads can safely</code></span>
<span class="codeline" id="line-3420"><code>** attempt to use the same database connection at the same time.</code></span>
<span class="codeline" id="line-3421"><code>** (Mutexes will block any actual concurrency, but in this mode</code></span>
<span class="codeline" id="line-3422"><code>** there is no harm in trying.)</code></span>
<span class="codeline" id="line-3423"><code>**</code></span>
<span class="codeline" id="line-3424"><code>** ^(&lt;dt&gt;[SQLITE_OPEN_SHAREDCACHE]&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3425"><code>** &lt;dd&gt;The database is opened [shared cache] enabled, overriding</code></span>
<span class="codeline" id="line-3426"><code>** the default shared cache setting provided by</code></span>
<span class="codeline" id="line-3427"><code>** [sqlite3_enable_shared_cache()].)^</code></span>
<span class="codeline" id="line-3428"><code>**</code></span>
<span class="codeline" id="line-3429"><code>** ^(&lt;dt&gt;[SQLITE_OPEN_PRIVATECACHE]&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3430"><code>** &lt;dd&gt;The database is opened [shared cache] disabled, overriding</code></span>
<span class="codeline" id="line-3431"><code>** the default shared cache setting provided by</code></span>
<span class="codeline" id="line-3432"><code>** [sqlite3_enable_shared_cache()].)^</code></span>
<span class="codeline" id="line-3433"><code>**</code></span>
<span class="codeline" id="line-3434"><code>** [[OPEN_EXRESCODE]] ^(&lt;dt&gt;[SQLITE_OPEN_EXRESCODE]&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3435"><code>** &lt;dd&gt;The database connection comes up in "extended result code mode".</code></span>
<span class="codeline" id="line-3436"><code>** In other words, the database behaves has if</code></span>
<span class="codeline" id="line-3437"><code>** [sqlite3_extended_result_codes(db,1)] where called on the database</code></span>
<span class="codeline" id="line-3438"><code>** connection as soon as the connection is created. In addition to setting</code></span>
<span class="codeline" id="line-3439"><code>** the extended result code mode, this flag also causes [sqlite3_open_v2()]</code></span>
<span class="codeline" id="line-3440"><code>** to return an extended result code.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-3441"><code>**</code></span>
<span class="codeline" id="line-3442"><code>** [[OPEN_NOFOLLOW]] ^(&lt;dt&gt;[SQLITE_OPEN_NOFOLLOW]&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3443"><code>** &lt;dd&gt;The database filename is not allowed to be a symbolic link&lt;/dd&gt;</code></span>
<span class="codeline" id="line-3444"><code>** &lt;/dl&gt;)^</code></span>
<span class="codeline" id="line-3445"><code>**</code></span>
<span class="codeline" id="line-3446"><code>** If the 3rd parameter to sqlite3_open_v2() is not one of the</code></span>
<span class="codeline" id="line-3447"><code>** required combinations shown above optionally combined with other</code></span>
<span class="codeline" id="line-3448"><code>** [SQLITE_OPEN_READONLY | SQLITE_OPEN_* bits]</code></span>
<span class="codeline" id="line-3449"><code>** then the behavior is undefined.  Historic versions of SQLite</code></span>
<span class="codeline" id="line-3450"><code>** have silently ignored surplus bits in the flags parameter to</code></span>
<span class="codeline" id="line-3451"><code>** sqlite3_open_v2(), however that behavior might not be carried through</code></span>
<span class="codeline" id="line-3452"><code>** into future versions of SQLite and so applications should not rely</code></span>
<span class="codeline" id="line-3453"><code>** upon it.  Note in particular that the SQLITE_OPEN_EXCLUSIVE flag is a no-op</code></span>
<span class="codeline" id="line-3454"><code>** for sqlite3_open_v2().  The SQLITE_OPEN_EXCLUSIVE does *not* cause</code></span>
<span class="codeline" id="line-3455"><code>** the open to fail if the database already exists.  The SQLITE_OPEN_EXCLUSIVE</code></span>
<span class="codeline" id="line-3456"><code>** flag is intended for use by the [sqlite3_vfs|VFS interface] only, and not</code></span>
<span class="codeline" id="line-3457"><code>** by sqlite3_open_v2().</code></span>
<span class="codeline" id="line-3458"><code>**</code></span>
<span class="codeline" id="line-3459"><code>** ^The fourth parameter to sqlite3_open_v2() is the name of the</code></span>
<span class="codeline" id="line-3460"><code>** [sqlite3_vfs] object that defines the operating system interface that</code></span>
<span class="codeline" id="line-3461"><code>** the new database connection should use.  ^If the fourth parameter is</code></span>
<span class="codeline" id="line-3462"><code>** a NULL pointer then the default [sqlite3_vfs] object is used.</code></span>
<span class="codeline" id="line-3463"><code>**</code></span>
<span class="codeline" id="line-3464"><code>** ^If the filename is ":memory:", then a private, temporary in-memory database</code></span>
<span class="codeline" id="line-3465"><code>** is created for the connection.  ^This in-memory database will vanish when</code></span>
<span class="codeline" id="line-3466"><code>** the database connection is closed.  Future versions of SQLite might</code></span>
<span class="codeline" id="line-3467"><code>** make use of additional special filenames that begin with the ":" character.</code></span>
<span class="codeline" id="line-3468"><code>** It is recommended that when a database filename actually does begin with</code></span>
<span class="codeline" id="line-3469"><code>** a ":" character you should prefix the filename with a pathname such as</code></span>
<span class="codeline" id="line-3470"><code>** "./" to avoid ambiguity.</code></span>
<span class="codeline" id="line-3471"><code>**</code></span>
<span class="codeline" id="line-3472"><code>** ^If the filename is an empty string, then a private, temporary</code></span>
<span class="codeline" id="line-3473"><code>** on-disk database will be created.  ^This private database will be</code></span>
<span class="codeline" id="line-3474"><code>** automatically deleted as soon as the database connection is closed.</code></span>
<span class="codeline" id="line-3475"><code>**</code></span>
<span class="codeline" id="line-3476"><code>** [[URI filenames in sqlite3_open()]] &lt;h3&gt;URI Filenames&lt;/h3&gt;</code></span>
<span class="codeline" id="line-3477"><code>**</code></span>
<span class="codeline" id="line-3478"><code>** ^If [URI filename] interpretation is enabled, and the filename argument</code></span>
<span class="codeline" id="line-3479"><code>** begins with "file:", then the filename is interpreted as a URI. ^URI</code></span>
<span class="codeline" id="line-3480"><code>** filename interpretation is enabled if the [SQLITE_OPEN_URI] flag is</code></span>
<span class="codeline" id="line-3481"><code>** set in the third argument to sqlite3_open_v2(), or if it has</code></span>
<span class="codeline" id="line-3482"><code>** been enabled globally using the [SQLITE_CONFIG_URI] option with the</code></span>
<span class="codeline" id="line-3483"><code>** [sqlite3_config()] method or by the [SQLITE_USE_URI] compile-time option.</code></span>
<span class="codeline" id="line-3484"><code>** URI filename interpretation is turned off</code></span>
<span class="codeline" id="line-3485"><code>** by default, but future releases of SQLite might enable URI filename</code></span>
<span class="codeline" id="line-3486"><code>** interpretation by default.  See "[URI filenames]" for additional</code></span>
<span class="codeline" id="line-3487"><code>** information.</code></span>
<span class="codeline" id="line-3488"><code>**</code></span>
<span class="codeline" id="line-3489"><code>** URI filenames are parsed according to RFC 3986. ^If the URI contains an</code></span>
<span class="codeline" id="line-3490"><code>** authority, then it must be either an empty string or the string</code></span>
<span class="codeline" id="line-3491"><code>** "localhost". ^If the authority is not an empty string or "localhost", an</code></span>
<span class="codeline" id="line-3492"><code>** error is returned to the caller. ^The fragment component of a URI, if</code></span>
<span class="codeline" id="line-3493"><code>** present, is ignored.</code></span>
<span class="codeline" id="line-3494"><code>**</code></span>
<span class="codeline" id="line-3495"><code>** ^SQLite uses the path component of the URI as the name of the disk file</code></span>
<span class="codeline" id="line-3496"><code>** which contains the database. ^If the path begins with a '/' character,</code></span>
<span class="codeline" id="line-3497"><code>** then it is interpreted as an absolute path. ^If the path does not begin</code></span>
<span class="codeline" id="line-3498"><code>** with a '/' (meaning that the authority section is omitted from the URI)</code></span>
<span class="codeline" id="line-3499"><code>** then the path is interpreted as a relative path.</code></span>
<span class="codeline" id="line-3500"><code>** ^(On windows, the first component of an absolute path</code></span>
<span class="codeline" id="line-3501"><code>** is a drive specification (e.g. "C:").)^</code></span>
<span class="codeline" id="line-3502"><code>**</code></span>
<span class="codeline" id="line-3503"><code>** [[core URI query parameters]]</code></span>
<span class="codeline" id="line-3504"><code>** The query component of a URI may contain parameters that are interpreted</code></span>
<span class="codeline" id="line-3505"><code>** either by SQLite itself, or by a [VFS | custom VFS implementation].</code></span>
<span class="codeline" id="line-3506"><code>** SQLite and its built-in [VFSes] interpret the</code></span>
<span class="codeline" id="line-3507"><code>** following query parameters:</code></span>
<span class="codeline" id="line-3508"><code>**</code></span>
<span class="codeline" id="line-3509"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-3510"><code>**   &lt;li&gt; &lt;b&gt;vfs&lt;/b&gt;: ^The "vfs" parameter may be used to specify the name of</code></span>
<span class="codeline" id="line-3511"><code>**     a VFS object that provides the operating system interface that should</code></span>
<span class="codeline" id="line-3512"><code>**     be used to access the database file on disk. ^If this option is set to</code></span>
<span class="codeline" id="line-3513"><code>**     an empty string the default VFS object is used. ^Specifying an unknown</code></span>
<span class="codeline" id="line-3514"><code>**     VFS is an error. ^If sqlite3_open_v2() is used and the vfs option is</code></span>
<span class="codeline" id="line-3515"><code>**     present, then the VFS specified by the option takes precedence over</code></span>
<span class="codeline" id="line-3516"><code>**     the value passed as the fourth parameter to sqlite3_open_v2().</code></span>
<span class="codeline" id="line-3517"><code>**</code></span>
<span class="codeline" id="line-3518"><code>**   &lt;li&gt; &lt;b&gt;mode&lt;/b&gt;: ^(The mode parameter may be set to either "ro", "rw",</code></span>
<span class="codeline" id="line-3519"><code>**     "rwc", or "memory". Attempting to set it to any other value is</code></span>
<span class="codeline" id="line-3520"><code>**     an error)^.</code></span>
<span class="codeline" id="line-3521"><code>**     ^If "ro" is specified, then the database is opened for read-only</code></span>
<span class="codeline" id="line-3522"><code>**     access, just as if the [SQLITE_OPEN_READONLY] flag had been set in the</code></span>
<span class="codeline" id="line-3523"><code>**     third argument to sqlite3_open_v2(). ^If the mode option is set to</code></span>
<span class="codeline" id="line-3524"><code>**     "rw", then the database is opened for read-write (but not create)</code></span>
<span class="codeline" id="line-3525"><code>**     access, as if SQLITE_OPEN_READWRITE (but not SQLITE_OPEN_CREATE) had</code></span>
<span class="codeline" id="line-3526"><code>**     been set. ^Value "rwc" is equivalent to setting both</code></span>
<span class="codeline" id="line-3527"><code>**     SQLITE_OPEN_READWRITE and SQLITE_OPEN_CREATE.  ^If the mode option is</code></span>
<span class="codeline" id="line-3528"><code>**     set to "memory" then a pure [in-memory database] that never reads</code></span>
<span class="codeline" id="line-3529"><code>**     or writes from disk is used. ^It is an error to specify a value for</code></span>
<span class="codeline" id="line-3530"><code>**     the mode parameter that is less restrictive than that specified by</code></span>
<span class="codeline" id="line-3531"><code>**     the flags passed in the third parameter to sqlite3_open_v2().</code></span>
<span class="codeline" id="line-3532"><code>**</code></span>
<span class="codeline" id="line-3533"><code>**   &lt;li&gt; &lt;b&gt;cache&lt;/b&gt;: ^The cache parameter may be set to either "shared" or</code></span>
<span class="codeline" id="line-3534"><code>**     "private". ^Setting it to "shared" is equivalent to setting the</code></span>
<span class="codeline" id="line-3535"><code>**     SQLITE_OPEN_SHAREDCACHE bit in the flags argument passed to</code></span>
<span class="codeline" id="line-3536"><code>**     sqlite3_open_v2(). ^Setting the cache parameter to "private" is</code></span>
<span class="codeline" id="line-3537"><code>**     equivalent to setting the SQLITE_OPEN_PRIVATECACHE bit.</code></span>
<span class="codeline" id="line-3538"><code>**     ^If sqlite3_open_v2() is used and the "cache" parameter is present in</code></span>
<span class="codeline" id="line-3539"><code>**     a URI filename, its value overrides any behavior requested by setting</code></span>
<span class="codeline" id="line-3540"><code>**     SQLITE_OPEN_PRIVATECACHE or SQLITE_OPEN_SHAREDCACHE flag.</code></span>
<span class="codeline" id="line-3541"><code>**</code></span>
<span class="codeline" id="line-3542"><code>**  &lt;li&gt; &lt;b&gt;psow&lt;/b&gt;: ^The psow parameter indicates whether or not the</code></span>
<span class="codeline" id="line-3543"><code>**     [powersafe overwrite] property does or does not apply to the</code></span>
<span class="codeline" id="line-3544"><code>**     storage media on which the database file resides.</code></span>
<span class="codeline" id="line-3545"><code>**</code></span>
<span class="codeline" id="line-3546"><code>**  &lt;li&gt; &lt;b&gt;nolock&lt;/b&gt;: ^The nolock parameter is a boolean query parameter</code></span>
<span class="codeline" id="line-3547"><code>**     which if set disables file locking in rollback journal modes.  This</code></span>
<span class="codeline" id="line-3548"><code>**     is useful for accessing a database on a filesystem that does not</code></span>
<span class="codeline" id="line-3549"><code>**     support locking.  Caution:  Database corruption might result if two</code></span>
<span class="codeline" id="line-3550"><code>**     or more processes write to the same database and any one of those</code></span>
<span class="codeline" id="line-3551"><code>**     processes uses nolock=1.</code></span>
<span class="codeline" id="line-3552"><code>**</code></span>
<span class="codeline" id="line-3553"><code>**  &lt;li&gt; &lt;b&gt;immutable&lt;/b&gt;: ^The immutable parameter is a boolean query</code></span>
<span class="codeline" id="line-3554"><code>**     parameter that indicates that the database file is stored on</code></span>
<span class="codeline" id="line-3555"><code>**     read-only media.  ^When immutable is set, SQLite assumes that the</code></span>
<span class="codeline" id="line-3556"><code>**     database file cannot be changed, even by a process with higher</code></span>
<span class="codeline" id="line-3557"><code>**     privilege, and so the database is opened read-only and all locking</code></span>
<span class="codeline" id="line-3558"><code>**     and change detection is disabled.  Caution: Setting the immutable</code></span>
<span class="codeline" id="line-3559"><code>**     property on a database file that does in fact change can result</code></span>
<span class="codeline" id="line-3560"><code>**     in incorrect query results and/or [SQLITE_CORRUPT] errors.</code></span>
<span class="codeline" id="line-3561"><code>**     See also: [SQLITE_IOCAP_IMMUTABLE].</code></span>
<span class="codeline" id="line-3562"><code>**</code></span>
<span class="codeline" id="line-3563"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-3564"><code>**</code></span>
<span class="codeline" id="line-3565"><code>** ^Specifying an unknown parameter in the query component of a URI is not an</code></span>
<span class="codeline" id="line-3566"><code>** error.  Future versions of SQLite might understand additional query</code></span>
<span class="codeline" id="line-3567"><code>** parameters.  See "[query parameters with special meaning to SQLite]" for</code></span>
<span class="codeline" id="line-3568"><code>** additional information.</code></span>
<span class="codeline" id="line-3569"><code>**</code></span>
<span class="codeline" id="line-3570"><code>** [[URI filename examples]] &lt;h3&gt;URI filename examples&lt;/h3&gt;</code></span>
<span class="codeline" id="line-3571"><code>**</code></span>
<span class="codeline" id="line-3572"><code>** &lt;table border="1" align=center cellpadding=5&gt;</code></span>
<span class="codeline" id="line-3573"><code>** &lt;tr&gt;&lt;th&gt; URI filenames &lt;th&gt; Results</code></span>
<span class="codeline" id="line-3574"><code>** &lt;tr&gt;&lt;td&gt; file:data.db &lt;td&gt;</code></span>
<span class="codeline" id="line-3575"><code>**          Open the file "data.db" in the current directory.</code></span>
<span class="codeline" id="line-3576"><code>** &lt;tr&gt;&lt;td&gt; file:/home/fred/data.db&lt;br&gt;</code></span>
<span class="codeline" id="line-3577"><code>**          file:///home/fred/data.db &lt;br&gt;</code></span>
<span class="codeline" id="line-3578"><code>**          file://localhost/home/fred/data.db &lt;br&gt; &lt;td&gt;</code></span>
<span class="codeline" id="line-3579"><code>**          Open the database file "/home/fred/data.db".</code></span>
<span class="codeline" id="line-3580"><code>** &lt;tr&gt;&lt;td&gt; file://darkstar/home/fred/data.db &lt;td&gt;</code></span>
<span class="codeline" id="line-3581"><code>**          An error. "darkstar" is not a recognized authority.</code></span>
<span class="codeline" id="line-3582"><code>** &lt;tr&gt;&lt;td style="white-space:nowrap"&gt;</code></span>
<span class="codeline" id="line-3583"><code>**          file:///C:/Documents%20and%20Settings/fred/Desktop/data.db</code></span>
<span class="codeline" id="line-3584"><code>**     &lt;td&gt; Windows only: Open the file "data.db" on fred's desktop on drive</code></span>
<span class="codeline" id="line-3585"><code>**          C:. Note that the %20 escaping in this example is not strictly</code></span>
<span class="codeline" id="line-3586"><code>**          necessary - space characters can be used literally</code></span>
<span class="codeline" id="line-3587"><code>**          in URI filenames.</code></span>
<span class="codeline" id="line-3588"><code>** &lt;tr&gt;&lt;td&gt; file:data.db?mode=ro&amp;cache=private &lt;td&gt;</code></span>
<span class="codeline" id="line-3589"><code>**          Open file "data.db" in the current directory for read-only access.</code></span>
<span class="codeline" id="line-3590"><code>**          Regardless of whether or not shared-cache mode is enabled by</code></span>
<span class="codeline" id="line-3591"><code>**          default, use a private cache.</code></span>
<span class="codeline" id="line-3592"><code>** &lt;tr&gt;&lt;td&gt; file:/home/fred/data.db?vfs=unix-dotfile &lt;td&gt;</code></span>
<span class="codeline" id="line-3593"><code>**          Open file "/home/fred/data.db". Use the special VFS "unix-dotfile"</code></span>
<span class="codeline" id="line-3594"><code>**          that uses dot-files in place of posix advisory locking.</code></span>
<span class="codeline" id="line-3595"><code>** &lt;tr&gt;&lt;td&gt; file:data.db?mode=readonly &lt;td&gt;</code></span>
<span class="codeline" id="line-3596"><code>**          An error. "readonly" is not a valid option for the "mode" parameter.</code></span>
<span class="codeline" id="line-3597"><code>**          Use "ro" instead:  "file:data.db?mode=ro".</code></span>
<span class="codeline" id="line-3598"><code>** &lt;/table&gt;</code></span>
<span class="codeline" id="line-3599"><code>**</code></span>
<span class="codeline" id="line-3600"><code>** ^URI hexadecimal escape sequences (%HH) are supported within the path and</code></span>
<span class="codeline" id="line-3601"><code>** query components of a URI. A hexadecimal escape sequence consists of a</code></span>
<span class="codeline" id="line-3602"><code>** percent sign - "%" - followed by exactly two hexadecimal digits</code></span>
<span class="codeline" id="line-3603"><code>** specifying an octet value. ^Before the path or query components of a</code></span>
<span class="codeline" id="line-3604"><code>** URI filename are interpreted, they are encoded using UTF-8 and all</code></span>
<span class="codeline" id="line-3605"><code>** hexadecimal escape sequences replaced by a single byte containing the</code></span>
<span class="codeline" id="line-3606"><code>** corresponding octet. If this process generates an invalid UTF-8 encoding,</code></span>
<span class="codeline" id="line-3607"><code>** the results are undefined.</code></span>
<span class="codeline" id="line-3608"><code>**</code></span>
<span class="codeline" id="line-3609"><code>** &lt;b&gt;Note to Windows users:&lt;/b&gt;  The encoding used for the filename argument</code></span>
<span class="codeline" id="line-3610"><code>** of sqlite3_open() and sqlite3_open_v2() must be UTF-8, not whatever</code></span>
<span class="codeline" id="line-3611"><code>** codepage is currently defined.  Filenames containing international</code></span>
<span class="codeline" id="line-3612"><code>** characters must be converted to UTF-8 prior to passing them into</code></span>
<span class="codeline" id="line-3613"><code>** sqlite3_open() or sqlite3_open_v2().</code></span>
<span class="codeline" id="line-3614"><code>**</code></span>
<span class="codeline" id="line-3615"><code>** &lt;b&gt;Note to Windows Runtime users:&lt;/b&gt;  The temporary directory must be set</code></span>
<span class="codeline" id="line-3616"><code>** prior to calling sqlite3_open() or sqlite3_open_v2().  Otherwise, various</code></span>
<span class="codeline" id="line-3617"><code>** features that require the use of temporary files may fail.</code></span>
<span class="codeline" id="line-3618"><code>**</code></span>
<span class="codeline" id="line-3619"><code>** See also: [sqlite3_temp_directory]</code></span>
<span class="codeline" id="line-3620"><code>*/</code></span>
<span class="codeline" id="line-3621"><code>SQLITE_API int sqlite3_open(</code></span>
<span class="codeline" id="line-3622"><code>  const char *filename,   /* Database filename (UTF-8) */</code></span>
<span class="codeline" id="line-3623"><code>  sqlite3 **ppDb          /* OUT: SQLite db handle */</code></span>
<span class="codeline" id="line-3624"><code>);</code></span>
<span class="codeline" id="line-3625"><code>SQLITE_API int sqlite3_open16(</code></span>
<span class="codeline" id="line-3626"><code>  const void *filename,   /* Database filename (UTF-16) */</code></span>
<span class="codeline" id="line-3627"><code>  sqlite3 **ppDb          /* OUT: SQLite db handle */</code></span>
<span class="codeline" id="line-3628"><code>);</code></span>
<span class="codeline" id="line-3629"><code>SQLITE_API int sqlite3_open_v2(</code></span>
<span class="codeline" id="line-3630"><code>  const char *filename,   /* Database filename (UTF-8) */</code></span>
<span class="codeline" id="line-3631"><code>  sqlite3 **ppDb,         /* OUT: SQLite db handle */</code></span>
<span class="codeline" id="line-3632"><code>  int flags,              /* Flags */</code></span>
<span class="codeline" id="line-3633"><code>  const char *zVfs        /* Name of VFS module to use */</code></span>
<span class="codeline" id="line-3634"><code>);</code></span>
<span class="codeline" id="line-3635"><code></code></span>
<span class="codeline" id="line-3636"><code>/*</code></span>
<span class="codeline" id="line-3637"><code>** CAPI3REF: Obtain Values For URI Parameters</code></span>
<span class="codeline" id="line-3638"><code>**</code></span>
<span class="codeline" id="line-3639"><code>** These are utility routines, useful to [VFS|custom VFS implementations],</code></span>
<span class="codeline" id="line-3640"><code>** that check if a database file was a URI that contained a specific query</code></span>
<span class="codeline" id="line-3641"><code>** parameter, and if so obtains the value of that query parameter.</code></span>
<span class="codeline" id="line-3642"><code>**</code></span>
<span class="codeline" id="line-3643"><code>** The first parameter to these interfaces (hereafter referred to</code></span>
<span class="codeline" id="line-3644"><code>** as F) must be one of:</code></span>
<span class="codeline" id="line-3645"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-3646"><code>** &lt;li&gt; A database filename pointer created by the SQLite core and</code></span>
<span class="codeline" id="line-3647"><code>** passed into the xOpen() method of a VFS implemention, or</code></span>
<span class="codeline" id="line-3648"><code>** &lt;li&gt; A filename obtained from [sqlite3_db_filename()], or</code></span>
<span class="codeline" id="line-3649"><code>** &lt;li&gt; A new filename constructed using [sqlite3_create_filename()].</code></span>
<span class="codeline" id="line-3650"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-3651"><code>** If the F parameter is not one of the above, then the behavior is</code></span>
<span class="codeline" id="line-3652"><code>** undefined and probably undesirable.  Older versions of SQLite were</code></span>
<span class="codeline" id="line-3653"><code>** more tolerant of invalid F parameters than newer versions.</code></span>
<span class="codeline" id="line-3654"><code>**</code></span>
<span class="codeline" id="line-3655"><code>** If F is a suitable filename (as described in the previous paragraph)</code></span>
<span class="codeline" id="line-3656"><code>** and if P is the name of the query parameter, then</code></span>
<span class="codeline" id="line-3657"><code>** sqlite3_uri_parameter(F,P) returns the value of the P</code></span>
<span class="codeline" id="line-3658"><code>** parameter if it exists or a NULL pointer if P does not appear as a</code></span>
<span class="codeline" id="line-3659"><code>** query parameter on F.  If P is a query parameter of F and it</code></span>
<span class="codeline" id="line-3660"><code>** has no explicit value, then sqlite3_uri_parameter(F,P) returns</code></span>
<span class="codeline" id="line-3661"><code>** a pointer to an empty string.</code></span>
<span class="codeline" id="line-3662"><code>**</code></span>
<span class="codeline" id="line-3663"><code>** The sqlite3_uri_boolean(F,P,B) routine assumes that P is a boolean</code></span>
<span class="codeline" id="line-3664"><code>** parameter and returns true (1) or false (0) according to the value</code></span>
<span class="codeline" id="line-3665"><code>** of P.  The sqlite3_uri_boolean(F,P,B) routine returns true (1) if the</code></span>
<span class="codeline" id="line-3666"><code>** value of query parameter P is one of "yes", "true", or "on" in any</code></span>
<span class="codeline" id="line-3667"><code>** case or if the value begins with a non-zero number.  The</code></span>
<span class="codeline" id="line-3668"><code>** sqlite3_uri_boolean(F,P,B) routines returns false (0) if the value of</code></span>
<span class="codeline" id="line-3669"><code>** query parameter P is one of "no", "false", or "off" in any case or</code></span>
<span class="codeline" id="line-3670"><code>** if the value begins with a numeric zero.  If P is not a query</code></span>
<span class="codeline" id="line-3671"><code>** parameter on F or if the value of P does not match any of the</code></span>
<span class="codeline" id="line-3672"><code>** above, then sqlite3_uri_boolean(F,P,B) returns (B!=0).</code></span>
<span class="codeline" id="line-3673"><code>**</code></span>
<span class="codeline" id="line-3674"><code>** The sqlite3_uri_int64(F,P,D) routine converts the value of P into a</code></span>
<span class="codeline" id="line-3675"><code>** 64-bit signed integer and returns that integer, or D if P does not</code></span>
<span class="codeline" id="line-3676"><code>** exist.  If the value of P is something other than an integer, then</code></span>
<span class="codeline" id="line-3677"><code>** zero is returned.</code></span>
<span class="codeline" id="line-3678"><code>**</code></span>
<span class="codeline" id="line-3679"><code>** The sqlite3_uri_key(F,N) returns a pointer to the name (not</code></span>
<span class="codeline" id="line-3680"><code>** the value) of the N-th query parameter for filename F, or a NULL</code></span>
<span class="codeline" id="line-3681"><code>** pointer if N is less than zero or greater than the number of query</code></span>
<span class="codeline" id="line-3682"><code>** parameters minus 1.  The N value is zero-based so N should be 0 to obtain</code></span>
<span class="codeline" id="line-3683"><code>** the name of the first query parameter, 1 for the second parameter, and</code></span>
<span class="codeline" id="line-3684"><code>** so forth.</code></span>
<span class="codeline" id="line-3685"><code>**</code></span>
<span class="codeline" id="line-3686"><code>** If F is a NULL pointer, then sqlite3_uri_parameter(F,P) returns NULL and</code></span>
<span class="codeline" id="line-3687"><code>** sqlite3_uri_boolean(F,P,B) returns B.  If F is not a NULL pointer and</code></span>
<span class="codeline" id="line-3688"><code>** is not a database file pathname pointer that the SQLite core passed</code></span>
<span class="codeline" id="line-3689"><code>** into the xOpen VFS method, then the behavior of this routine is undefined</code></span>
<span class="codeline" id="line-3690"><code>** and probably undesirable.</code></span>
<span class="codeline" id="line-3691"><code>**</code></span>
<span class="codeline" id="line-3692"><code>** Beginning with SQLite [version 3.31.0] ([dateof:3.31.0]) the input F</code></span>
<span class="codeline" id="line-3693"><code>** parameter can also be the name of a rollback journal file or WAL file</code></span>
<span class="codeline" id="line-3694"><code>** in addition to the main database file.  Prior to version 3.31.0, these</code></span>
<span class="codeline" id="line-3695"><code>** routines would only work if F was the name of the main database file.</code></span>
<span class="codeline" id="line-3696"><code>** When the F parameter is the name of the rollback journal or WAL file,</code></span>
<span class="codeline" id="line-3697"><code>** it has access to all the same query parameters as were found on the</code></span>
<span class="codeline" id="line-3698"><code>** main database file.</code></span>
<span class="codeline" id="line-3699"><code>**</code></span>
<span class="codeline" id="line-3700"><code>** See the [URI filename] documentation for additional information.</code></span>
<span class="codeline" id="line-3701"><code>*/</code></span>
<span class="codeline" id="line-3702"><code>SQLITE_API const char *sqlite3_uri_parameter(const char *zFilename, const char *zParam);</code></span>
<span class="codeline" id="line-3703"><code>SQLITE_API int sqlite3_uri_boolean(const char *zFile, const char *zParam, int bDefault);</code></span>
<span class="codeline" id="line-3704"><code>SQLITE_API sqlite3_int64 sqlite3_uri_int64(const char*, const char*, sqlite3_int64);</code></span>
<span class="codeline" id="line-3705"><code>SQLITE_API const char *sqlite3_uri_key(const char *zFilename, int N);</code></span>
<span class="codeline" id="line-3706"><code></code></span>
<span class="codeline" id="line-3707"><code>/*</code></span>
<span class="codeline" id="line-3708"><code>** CAPI3REF:  Translate filenames</code></span>
<span class="codeline" id="line-3709"><code>**</code></span>
<span class="codeline" id="line-3710"><code>** These routines are available to [VFS|custom VFS implementations] for</code></span>
<span class="codeline" id="line-3711"><code>** translating filenames between the main database file, the journal file,</code></span>
<span class="codeline" id="line-3712"><code>** and the WAL file.</code></span>
<span class="codeline" id="line-3713"><code>**</code></span>
<span class="codeline" id="line-3714"><code>** If F is the name of an sqlite database file, journal file, or WAL file</code></span>
<span class="codeline" id="line-3715"><code>** passed by the SQLite core into the VFS, then sqlite3_filename_database(F)</code></span>
<span class="codeline" id="line-3716"><code>** returns the name of the corresponding database file.</code></span>
<span class="codeline" id="line-3717"><code>**</code></span>
<span class="codeline" id="line-3718"><code>** If F is the name of an sqlite database file, journal file, or WAL file</code></span>
<span class="codeline" id="line-3719"><code>** passed by the SQLite core into the VFS, or if F is a database filename</code></span>
<span class="codeline" id="line-3720"><code>** obtained from [sqlite3_db_filename()], then sqlite3_filename_journal(F)</code></span>
<span class="codeline" id="line-3721"><code>** returns the name of the corresponding rollback journal file.</code></span>
<span class="codeline" id="line-3722"><code>**</code></span>
<span class="codeline" id="line-3723"><code>** If F is the name of an sqlite database file, journal file, or WAL file</code></span>
<span class="codeline" id="line-3724"><code>** that was passed by the SQLite core into the VFS, or if F is a database</code></span>
<span class="codeline" id="line-3725"><code>** filename obtained from [sqlite3_db_filename()], then</code></span>
<span class="codeline" id="line-3726"><code>** sqlite3_filename_wal(F) returns the name of the corresponding</code></span>
<span class="codeline" id="line-3727"><code>** WAL file.</code></span>
<span class="codeline" id="line-3728"><code>**</code></span>
<span class="codeline" id="line-3729"><code>** In all of the above, if F is not the name of a database, journal or WAL</code></span>
<span class="codeline" id="line-3730"><code>** filename passed into the VFS from the SQLite core and F is not the</code></span>
<span class="codeline" id="line-3731"><code>** return value from [sqlite3_db_filename()], then the result is</code></span>
<span class="codeline" id="line-3732"><code>** undefined and is likely a memory access violation.</code></span>
<span class="codeline" id="line-3733"><code>*/</code></span>
<span class="codeline" id="line-3734"><code>SQLITE_API const char *sqlite3_filename_database(const char*);</code></span>
<span class="codeline" id="line-3735"><code>SQLITE_API const char *sqlite3_filename_journal(const char*);</code></span>
<span class="codeline" id="line-3736"><code>SQLITE_API const char *sqlite3_filename_wal(const char*);</code></span>
<span class="codeline" id="line-3737"><code></code></span>
<span class="codeline" id="line-3738"><code>/*</code></span>
<span class="codeline" id="line-3739"><code>** CAPI3REF:  Database File Corresponding To A Journal</code></span>
<span class="codeline" id="line-3740"><code>**</code></span>
<span class="codeline" id="line-3741"><code>** ^If X is the name of a rollback or WAL-mode journal file that is</code></span>
<span class="codeline" id="line-3742"><code>** passed into the xOpen method of [sqlite3_vfs], then</code></span>
<span class="codeline" id="line-3743"><code>** sqlite3_database_file_object(X) returns a pointer to the [sqlite3_file]</code></span>
<span class="codeline" id="line-3744"><code>** object that represents the main database file.</code></span>
<span class="codeline" id="line-3745"><code>**</code></span>
<span class="codeline" id="line-3746"><code>** This routine is intended for use in custom [VFS] implementations</code></span>
<span class="codeline" id="line-3747"><code>** only.  It is not a general-purpose interface.</code></span>
<span class="codeline" id="line-3748"><code>** The argument sqlite3_file_object(X) must be a filename pointer that</code></span>
<span class="codeline" id="line-3749"><code>** has been passed into [sqlite3_vfs].xOpen method where the</code></span>
<span class="codeline" id="line-3750"><code>** flags parameter to xOpen contains one of the bits</code></span>
<span class="codeline" id="line-3751"><code>** [SQLITE_OPEN_MAIN_JOURNAL] or [SQLITE_OPEN_WAL].  Any other use</code></span>
<span class="codeline" id="line-3752"><code>** of this routine results in undefined and probably undesirable</code></span>
<span class="codeline" id="line-3753"><code>** behavior.</code></span>
<span class="codeline" id="line-3754"><code>*/</code></span>
<span class="codeline" id="line-3755"><code>SQLITE_API sqlite3_file *sqlite3_database_file_object(const char*);</code></span>
<span class="codeline" id="line-3756"><code></code></span>
<span class="codeline" id="line-3757"><code>/*</code></span>
<span class="codeline" id="line-3758"><code>** CAPI3REF: Create and Destroy VFS Filenames</code></span>
<span class="codeline" id="line-3759"><code>**</code></span>
<span class="codeline" id="line-3760"><code>** These interfces are provided for use by [VFS shim] implementations and</code></span>
<span class="codeline" id="line-3761"><code>** are not useful outside of that context.</code></span>
<span class="codeline" id="line-3762"><code>**</code></span>
<span class="codeline" id="line-3763"><code>** The sqlite3_create_filename(D,J,W,N,P) allocates memory to hold a version of</code></span>
<span class="codeline" id="line-3764"><code>** database filename D with corresponding journal file J and WAL file W and</code></span>
<span class="codeline" id="line-3765"><code>** with N URI parameters key/values pairs in the array P.  The result from</code></span>
<span class="codeline" id="line-3766"><code>** sqlite3_create_filename(D,J,W,N,P) is a pointer to a database filename that</code></span>
<span class="codeline" id="line-3767"><code>** is safe to pass to routines like:</code></span>
<span class="codeline" id="line-3768"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-3769"><code>** &lt;li&gt; [sqlite3_uri_parameter()],</code></span>
<span class="codeline" id="line-3770"><code>** &lt;li&gt; [sqlite3_uri_boolean()],</code></span>
<span class="codeline" id="line-3771"><code>** &lt;li&gt; [sqlite3_uri_int64()],</code></span>
<span class="codeline" id="line-3772"><code>** &lt;li&gt; [sqlite3_uri_key()],</code></span>
<span class="codeline" id="line-3773"><code>** &lt;li&gt; [sqlite3_filename_database()],</code></span>
<span class="codeline" id="line-3774"><code>** &lt;li&gt; [sqlite3_filename_journal()], or</code></span>
<span class="codeline" id="line-3775"><code>** &lt;li&gt; [sqlite3_filename_wal()].</code></span>
<span class="codeline" id="line-3776"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-3777"><code>** If a memory allocation error occurs, sqlite3_create_filename() might</code></span>
<span class="codeline" id="line-3778"><code>** return a NULL pointer.  The memory obtained from sqlite3_create_filename(X)</code></span>
<span class="codeline" id="line-3779"><code>** must be released by a corresponding call to sqlite3_free_filename(Y).</code></span>
<span class="codeline" id="line-3780"><code>**</code></span>
<span class="codeline" id="line-3781"><code>** The P parameter in sqlite3_create_filename(D,J,W,N,P) should be an array</code></span>
<span class="codeline" id="line-3782"><code>** of 2*N pointers to strings.  Each pair of pointers in this array corresponds</code></span>
<span class="codeline" id="line-3783"><code>** to a key and value for a query parameter.  The P parameter may be a NULL</code></span>
<span class="codeline" id="line-3784"><code>** pointer if N is zero.  None of the 2*N pointers in the P array may be</code></span>
<span class="codeline" id="line-3785"><code>** NULL pointers and key pointers should not be empty strings.</code></span>
<span class="codeline" id="line-3786"><code>** None of the D, J, or W parameters to sqlite3_create_filename(D,J,W,N,P) may</code></span>
<span class="codeline" id="line-3787"><code>** be NULL pointers, though they can be empty strings.</code></span>
<span class="codeline" id="line-3788"><code>**</code></span>
<span class="codeline" id="line-3789"><code>** The sqlite3_free_filename(Y) routine releases a memory allocation</code></span>
<span class="codeline" id="line-3790"><code>** previously obtained from sqlite3_create_filename().  Invoking</code></span>
<span class="codeline" id="line-3791"><code>** sqlite3_free_filename(Y) where Y is a NULL pointer is a harmless no-op.</code></span>
<span class="codeline" id="line-3792"><code>**</code></span>
<span class="codeline" id="line-3793"><code>** If the Y parameter to sqlite3_free_filename(Y) is anything other</code></span>
<span class="codeline" id="line-3794"><code>** than a NULL pointer or a pointer previously acquired from</code></span>
<span class="codeline" id="line-3795"><code>** sqlite3_create_filename(), then bad things such as heap</code></span>
<span class="codeline" id="line-3796"><code>** corruption or segfaults may occur. The value Y should not be</code></span>
<span class="codeline" id="line-3797"><code>** used again after sqlite3_free_filename(Y) has been called.  This means</code></span>
<span class="codeline" id="line-3798"><code>** that if the [sqlite3_vfs.xOpen()] method of a VFS has been called using Y,</code></span>
<span class="codeline" id="line-3799"><code>** then the corresponding [sqlite3_module.xClose() method should also be</code></span>
<span class="codeline" id="line-3800"><code>** invoked prior to calling sqlite3_free_filename(Y).</code></span>
<span class="codeline" id="line-3801"><code>*/</code></span>
<span class="codeline" id="line-3802"><code>SQLITE_API char *sqlite3_create_filename(</code></span>
<span class="codeline" id="line-3803"><code>  const char *zDatabase,</code></span>
<span class="codeline" id="line-3804"><code>  const char *zJournal,</code></span>
<span class="codeline" id="line-3805"><code>  const char *zWal,</code></span>
<span class="codeline" id="line-3806"><code>  int nParam,</code></span>
<span class="codeline" id="line-3807"><code>  const char **azParam</code></span>
<span class="codeline" id="line-3808"><code>);</code></span>
<span class="codeline" id="line-3809"><code>SQLITE_API void sqlite3_free_filename(char*);</code></span>
<span class="codeline" id="line-3810"><code></code></span>
<span class="codeline" id="line-3811"><code>/*</code></span>
<span class="codeline" id="line-3812"><code>** CAPI3REF: Error Codes And Messages</code></span>
<span class="codeline" id="line-3813"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-3814"><code>**</code></span>
<span class="codeline" id="line-3815"><code>** ^If the most recent sqlite3_* API call associated with</code></span>
<span class="codeline" id="line-3816"><code>** [database connection] D failed, then the sqlite3_errcode(D) interface</code></span>
<span class="codeline" id="line-3817"><code>** returns the numeric [result code] or [extended result code] for that</code></span>
<span class="codeline" id="line-3818"><code>** API call.</code></span>
<span class="codeline" id="line-3819"><code>** ^The sqlite3_extended_errcode()</code></span>
<span class="codeline" id="line-3820"><code>** interface is the same except that it always returns the</code></span>
<span class="codeline" id="line-3821"><code>** [extended result code] even when extended result codes are</code></span>
<span class="codeline" id="line-3822"><code>** disabled.</code></span>
<span class="codeline" id="line-3823"><code>**</code></span>
<span class="codeline" id="line-3824"><code>** The values returned by sqlite3_errcode() and/or</code></span>
<span class="codeline" id="line-3825"><code>** sqlite3_extended_errcode() might change with each API call.</code></span>
<span class="codeline" id="line-3826"><code>** Except, there are some interfaces that are guaranteed to never</code></span>
<span class="codeline" id="line-3827"><code>** change the value of the error code.  The error-code preserving</code></span>
<span class="codeline" id="line-3828"><code>** interfaces include the following:</code></span>
<span class="codeline" id="line-3829"><code>**</code></span>
<span class="codeline" id="line-3830"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-3831"><code>** &lt;li&gt; sqlite3_errcode()</code></span>
<span class="codeline" id="line-3832"><code>** &lt;li&gt; sqlite3_extended_errcode()</code></span>
<span class="codeline" id="line-3833"><code>** &lt;li&gt; sqlite3_errmsg()</code></span>
<span class="codeline" id="line-3834"><code>** &lt;li&gt; sqlite3_errmsg16()</code></span>
<span class="codeline" id="line-3835"><code>** &lt;li&gt; sqlite3_error_offset()</code></span>
<span class="codeline" id="line-3836"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-3837"><code>**</code></span>
<span class="codeline" id="line-3838"><code>** ^The sqlite3_errmsg() and sqlite3_errmsg16() return English-language</code></span>
<span class="codeline" id="line-3839"><code>** text that describes the error, as either UTF-8 or UTF-16 respectively.</code></span>
<span class="codeline" id="line-3840"><code>** ^(Memory to hold the error message string is managed internally.</code></span>
<span class="codeline" id="line-3841"><code>** The application does not need to worry about freeing the result.</code></span>
<span class="codeline" id="line-3842"><code>** However, the error string might be overwritten or deallocated by</code></span>
<span class="codeline" id="line-3843"><code>** subsequent calls to other SQLite interface functions.)^</code></span>
<span class="codeline" id="line-3844"><code>**</code></span>
<span class="codeline" id="line-3845"><code>** ^The sqlite3_errstr() interface returns the English-language text</code></span>
<span class="codeline" id="line-3846"><code>** that describes the [result code], as UTF-8.</code></span>
<span class="codeline" id="line-3847"><code>** ^(Memory to hold the error message string is managed internally</code></span>
<span class="codeline" id="line-3848"><code>** and must not be freed by the application)^.</code></span>
<span class="codeline" id="line-3849"><code>**</code></span>
<span class="codeline" id="line-3850"><code>** ^If the most recent error references a specific token in the input</code></span>
<span class="codeline" id="line-3851"><code>** SQL, the sqlite3_error_offset() interface returns the byte offset</code></span>
<span class="codeline" id="line-3852"><code>** of the start of that token.  ^The byte offset returned by</code></span>
<span class="codeline" id="line-3853"><code>** sqlite3_error_offset() assumes that the input SQL is UTF8.</code></span>
<span class="codeline" id="line-3854"><code>** ^If the most recent error does not reference a specific token in the input</code></span>
<span class="codeline" id="line-3855"><code>** SQL, then the sqlite3_error_offset() function returns -1.</code></span>
<span class="codeline" id="line-3856"><code>**</code></span>
<span class="codeline" id="line-3857"><code>** When the serialized [threading mode] is in use, it might be the</code></span>
<span class="codeline" id="line-3858"><code>** case that a second error occurs on a separate thread in between</code></span>
<span class="codeline" id="line-3859"><code>** the time of the first error and the call to these interfaces.</code></span>
<span class="codeline" id="line-3860"><code>** When that happens, the second error will be reported since these</code></span>
<span class="codeline" id="line-3861"><code>** interfaces always report the most recent result.  To avoid</code></span>
<span class="codeline" id="line-3862"><code>** this, each thread can obtain exclusive use of the [database connection] D</code></span>
<span class="codeline" id="line-3863"><code>** by invoking [sqlite3_mutex_enter]([sqlite3_db_mutex](D)) before beginning</code></span>
<span class="codeline" id="line-3864"><code>** to use D and invoking [sqlite3_mutex_leave]([sqlite3_db_mutex](D)) after</code></span>
<span class="codeline" id="line-3865"><code>** all calls to the interfaces listed here are completed.</code></span>
<span class="codeline" id="line-3866"><code>**</code></span>
<span class="codeline" id="line-3867"><code>** If an interface fails with SQLITE_MISUSE, that means the interface</code></span>
<span class="codeline" id="line-3868"><code>** was invoked incorrectly by the application.  In that case, the</code></span>
<span class="codeline" id="line-3869"><code>** error code and message may or may not be set.</code></span>
<span class="codeline" id="line-3870"><code>*/</code></span>
<span class="codeline" id="line-3871"><code>SQLITE_API int sqlite3_errcode(sqlite3 *db);</code></span>
<span class="codeline" id="line-3872"><code>SQLITE_API int sqlite3_extended_errcode(sqlite3 *db);</code></span>
<span class="codeline" id="line-3873"><code>SQLITE_API const char *sqlite3_errmsg(sqlite3*);</code></span>
<span class="codeline" id="line-3874"><code>SQLITE_API const void *sqlite3_errmsg16(sqlite3*);</code></span>
<span class="codeline" id="line-3875"><code>SQLITE_API const char *sqlite3_errstr(int);</code></span>
<span class="codeline" id="line-3876"><code>SQLITE_API int sqlite3_error_offset(sqlite3 *db);</code></span>
<span class="codeline" id="line-3877"><code></code></span>
<span class="codeline" id="line-3878"><code>/*</code></span>
<span class="codeline" id="line-3879"><code>** CAPI3REF: Prepared Statement Object</code></span>
<span class="codeline" id="line-3880"><code>** KEYWORDS: {prepared statement} {prepared statements}</code></span>
<span class="codeline" id="line-3881"><code>**</code></span>
<span class="codeline" id="line-3882"><code>** An instance of this object represents a single SQL statement that</code></span>
<span class="codeline" id="line-3883"><code>** has been compiled into binary form and is ready to be evaluated.</code></span>
<span class="codeline" id="line-3884"><code>**</code></span>
<span class="codeline" id="line-3885"><code>** Think of each SQL statement as a separate computer program.  The</code></span>
<span class="codeline" id="line-3886"><code>** original SQL text is source code.  A prepared statement object</code></span>
<span class="codeline" id="line-3887"><code>** is the compiled object code.  All SQL must be converted into a</code></span>
<span class="codeline" id="line-3888"><code>** prepared statement before it can be run.</code></span>
<span class="codeline" id="line-3889"><code>**</code></span>
<span class="codeline" id="line-3890"><code>** The life-cycle of a prepared statement object usually goes like this:</code></span>
<span class="codeline" id="line-3891"><code>**</code></span>
<span class="codeline" id="line-3892"><code>** &lt;ol&gt;</code></span>
<span class="codeline" id="line-3893"><code>** &lt;li&gt; Create the prepared statement object using [sqlite3_prepare_v2()].</code></span>
<span class="codeline" id="line-3894"><code>** &lt;li&gt; Bind values to [parameters] using the sqlite3_bind_*()</code></span>
<span class="codeline" id="line-3895"><code>**      interfaces.</code></span>
<span class="codeline" id="line-3896"><code>** &lt;li&gt; Run the SQL by calling [sqlite3_step()] one or more times.</code></span>
<span class="codeline" id="line-3897"><code>** &lt;li&gt; Reset the prepared statement using [sqlite3_reset()] then go back</code></span>
<span class="codeline" id="line-3898"><code>**      to step 2.  Do this zero or more times.</code></span>
<span class="codeline" id="line-3899"><code>** &lt;li&gt; Destroy the object using [sqlite3_finalize()].</code></span>
<span class="codeline" id="line-3900"><code>** &lt;/ol&gt;</code></span>
<span class="codeline" id="line-3901"><code>*/</code></span>
<span class="codeline" id="line-3902"><code>typedef struct sqlite3_stmt sqlite3_stmt;</code></span>
<span class="codeline" id="line-3903"><code></code></span>
<span class="codeline" id="line-3904"><code>/*</code></span>
<span class="codeline" id="line-3905"><code>** CAPI3REF: Run-time Limits</code></span>
<span class="codeline" id="line-3906"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-3907"><code>**</code></span>
<span class="codeline" id="line-3908"><code>** ^(This interface allows the size of various constructs to be limited</code></span>
<span class="codeline" id="line-3909"><code>** on a connection by connection basis.  The first parameter is the</code></span>
<span class="codeline" id="line-3910"><code>** [database connection] whose limit is to be set or queried.  The</code></span>
<span class="codeline" id="line-3911"><code>** second parameter is one of the [limit categories] that define a</code></span>
<span class="codeline" id="line-3912"><code>** class of constructs to be size limited.  The third parameter is the</code></span>
<span class="codeline" id="line-3913"><code>** new limit for that construct.)^</code></span>
<span class="codeline" id="line-3914"><code>**</code></span>
<span class="codeline" id="line-3915"><code>** ^If the new limit is a negative number, the limit is unchanged.</code></span>
<span class="codeline" id="line-3916"><code>** ^(For each limit category SQLITE_LIMIT_&lt;i&gt;NAME&lt;/i&gt; there is a</code></span>
<span class="codeline" id="line-3917"><code>** [limits | hard upper bound]</code></span>
<span class="codeline" id="line-3918"><code>** set at compile-time by a C preprocessor macro called</code></span>
<span class="codeline" id="line-3919"><code>** [limits | SQLITE_MAX_&lt;i&gt;NAME&lt;/i&gt;].</code></span>
<span class="codeline" id="line-3920"><code>** (The "_LIMIT_" in the name is changed to "_MAX_".))^</code></span>
<span class="codeline" id="line-3921"><code>** ^Attempts to increase a limit above its hard upper bound are</code></span>
<span class="codeline" id="line-3922"><code>** silently truncated to the hard upper bound.</code></span>
<span class="codeline" id="line-3923"><code>**</code></span>
<span class="codeline" id="line-3924"><code>** ^Regardless of whether or not the limit was changed, the</code></span>
<span class="codeline" id="line-3925"><code>** [sqlite3_limit()] interface returns the prior value of the limit.</code></span>
<span class="codeline" id="line-3926"><code>** ^Hence, to find the current value of a limit without changing it,</code></span>
<span class="codeline" id="line-3927"><code>** simply invoke this interface with the third parameter set to -1.</code></span>
<span class="codeline" id="line-3928"><code>**</code></span>
<span class="codeline" id="line-3929"><code>** Run-time limits are intended for use in applications that manage</code></span>
<span class="codeline" id="line-3930"><code>** both their own internal database and also databases that are controlled</code></span>
<span class="codeline" id="line-3931"><code>** by untrusted external sources.  An example application might be a</code></span>
<span class="codeline" id="line-3932"><code>** web browser that has its own databases for storing history and</code></span>
<span class="codeline" id="line-3933"><code>** separate databases controlled by JavaScript applications downloaded</code></span>
<span class="codeline" id="line-3934"><code>** off the Internet.  The internal databases can be given the</code></span>
<span class="codeline" id="line-3935"><code>** large, default limits.  Databases managed by external sources can</code></span>
<span class="codeline" id="line-3936"><code>** be given much smaller limits designed to prevent a denial of service</code></span>
<span class="codeline" id="line-3937"><code>** attack.  Developers might also want to use the [sqlite3_set_authorizer()]</code></span>
<span class="codeline" id="line-3938"><code>** interface to further control untrusted SQL.  The size of the database</code></span>
<span class="codeline" id="line-3939"><code>** created by an untrusted script can be contained using the</code></span>
<span class="codeline" id="line-3940"><code>** [max_page_count] [PRAGMA].</code></span>
<span class="codeline" id="line-3941"><code>**</code></span>
<span class="codeline" id="line-3942"><code>** New run-time limit categories may be added in future releases.</code></span>
<span class="codeline" id="line-3943"><code>*/</code></span>
<span class="codeline" id="line-3944"><code>SQLITE_API int sqlite3_limit(sqlite3*, int id, int newVal);</code></span>
<span class="codeline" id="line-3945"><code></code></span>
<span class="codeline" id="line-3946"><code>/*</code></span>
<span class="codeline" id="line-3947"><code>** CAPI3REF: Run-Time Limit Categories</code></span>
<span class="codeline" id="line-3948"><code>** KEYWORDS: {limit category} {*limit categories}</code></span>
<span class="codeline" id="line-3949"><code>**</code></span>
<span class="codeline" id="line-3950"><code>** These constants define various performance limits</code></span>
<span class="codeline" id="line-3951"><code>** that can be lowered at run-time using [sqlite3_limit()].</code></span>
<span class="codeline" id="line-3952"><code>** The synopsis of the meanings of the various limits is shown below.</code></span>
<span class="codeline" id="line-3953"><code>** Additional information is available at [limits | Limits in SQLite].</code></span>
<span class="codeline" id="line-3954"><code>**</code></span>
<span class="codeline" id="line-3955"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-3956"><code>** [[SQLITE_LIMIT_LENGTH]] ^(&lt;dt&gt;SQLITE_LIMIT_LENGTH&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3957"><code>** &lt;dd&gt;The maximum size of any string or BLOB or table row, in bytes.&lt;dd&gt;)^</code></span>
<span class="codeline" id="line-3958"><code>**</code></span>
<span class="codeline" id="line-3959"><code>** [[SQLITE_LIMIT_SQL_LENGTH]] ^(&lt;dt&gt;SQLITE_LIMIT_SQL_LENGTH&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3960"><code>** &lt;dd&gt;The maximum length of an SQL statement, in bytes.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3961"><code>**</code></span>
<span class="codeline" id="line-3962"><code>** [[SQLITE_LIMIT_COLUMN]] ^(&lt;dt&gt;SQLITE_LIMIT_COLUMN&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3963"><code>** &lt;dd&gt;The maximum number of columns in a table definition or in the</code></span>
<span class="codeline" id="line-3964"><code>** result set of a [SELECT] or the maximum number of columns in an index</code></span>
<span class="codeline" id="line-3965"><code>** or in an ORDER BY or GROUP BY clause.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3966"><code>**</code></span>
<span class="codeline" id="line-3967"><code>** [[SQLITE_LIMIT_EXPR_DEPTH]] ^(&lt;dt&gt;SQLITE_LIMIT_EXPR_DEPTH&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3968"><code>** &lt;dd&gt;The maximum depth of the parse tree on any expression.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3969"><code>**</code></span>
<span class="codeline" id="line-3970"><code>** [[SQLITE_LIMIT_COMPOUND_SELECT]] ^(&lt;dt&gt;SQLITE_LIMIT_COMPOUND_SELECT&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3971"><code>** &lt;dd&gt;The maximum number of terms in a compound SELECT statement.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3972"><code>**</code></span>
<span class="codeline" id="line-3973"><code>** [[SQLITE_LIMIT_VDBE_OP]] ^(&lt;dt&gt;SQLITE_LIMIT_VDBE_OP&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3974"><code>** &lt;dd&gt;The maximum number of instructions in a virtual machine program</code></span>
<span class="codeline" id="line-3975"><code>** used to implement an SQL statement.  If [sqlite3_prepare_v2()] or</code></span>
<span class="codeline" id="line-3976"><code>** the equivalent tries to allocate space for more than this many opcodes</code></span>
<span class="codeline" id="line-3977"><code>** in a single prepared statement, an SQLITE_NOMEM error is returned.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3978"><code>**</code></span>
<span class="codeline" id="line-3979"><code>** [[SQLITE_LIMIT_FUNCTION_ARG]] ^(&lt;dt&gt;SQLITE_LIMIT_FUNCTION_ARG&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3980"><code>** &lt;dd&gt;The maximum number of arguments on a function.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3981"><code>**</code></span>
<span class="codeline" id="line-3982"><code>** [[SQLITE_LIMIT_ATTACHED]] ^(&lt;dt&gt;SQLITE_LIMIT_ATTACHED&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3983"><code>** &lt;dd&gt;The maximum number of [ATTACH | attached databases].)^&lt;/dd&gt;</code></span>
<span class="codeline" id="line-3984"><code>**</code></span>
<span class="codeline" id="line-3985"><code>** [[SQLITE_LIMIT_LIKE_PATTERN_LENGTH]]</code></span>
<span class="codeline" id="line-3986"><code>** ^(&lt;dt&gt;SQLITE_LIMIT_LIKE_PATTERN_LENGTH&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3987"><code>** &lt;dd&gt;The maximum length of the pattern argument to the [LIKE] or</code></span>
<span class="codeline" id="line-3988"><code>** [GLOB] operators.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3989"><code>**</code></span>
<span class="codeline" id="line-3990"><code>** [[SQLITE_LIMIT_VARIABLE_NUMBER]]</code></span>
<span class="codeline" id="line-3991"><code>** ^(&lt;dt&gt;SQLITE_LIMIT_VARIABLE_NUMBER&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3992"><code>** &lt;dd&gt;The maximum index number of any [parameter] in an SQL statement.)^</code></span>
<span class="codeline" id="line-3993"><code>**</code></span>
<span class="codeline" id="line-3994"><code>** [[SQLITE_LIMIT_TRIGGER_DEPTH]] ^(&lt;dt&gt;SQLITE_LIMIT_TRIGGER_DEPTH&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3995"><code>** &lt;dd&gt;The maximum depth of recursion for triggers.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-3996"><code>**</code></span>
<span class="codeline" id="line-3997"><code>** [[SQLITE_LIMIT_WORKER_THREADS]] ^(&lt;dt&gt;SQLITE_LIMIT_WORKER_THREADS&lt;/dt&gt;</code></span>
<span class="codeline" id="line-3998"><code>** &lt;dd&gt;The maximum number of auxiliary worker threads that a single</code></span>
<span class="codeline" id="line-3999"><code>** [prepared statement] may start.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-4000"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-4001"><code>*/</code></span>
<span class="codeline" id="line-4002"><code>#define SQLITE_LIMIT_LENGTH                    0</code></span>
<span class="codeline" id="line-4003"><code>#define SQLITE_LIMIT_SQL_LENGTH                1</code></span>
<span class="codeline" id="line-4004"><code>#define SQLITE_LIMIT_COLUMN                    2</code></span>
<span class="codeline" id="line-4005"><code>#define SQLITE_LIMIT_EXPR_DEPTH                3</code></span>
<span class="codeline" id="line-4006"><code>#define SQLITE_LIMIT_COMPOUND_SELECT           4</code></span>
<span class="codeline" id="line-4007"><code>#define SQLITE_LIMIT_VDBE_OP                   5</code></span>
<span class="codeline" id="line-4008"><code>#define SQLITE_LIMIT_FUNCTION_ARG              6</code></span>
<span class="codeline" id="line-4009"><code>#define SQLITE_LIMIT_ATTACHED                  7</code></span>
<span class="codeline" id="line-4010"><code>#define SQLITE_LIMIT_LIKE_PATTERN_LENGTH       8</code></span>
<span class="codeline" id="line-4011"><code>#define SQLITE_LIMIT_VARIABLE_NUMBER           9</code></span>
<span class="codeline" id="line-4012"><code>#define SQLITE_LIMIT_TRIGGER_DEPTH            10</code></span>
<span class="codeline" id="line-4013"><code>#define SQLITE_LIMIT_WORKER_THREADS           11</code></span>
<span class="codeline" id="line-4014"><code></code></span>
<span class="codeline" id="line-4015"><code>/*</code></span>
<span class="codeline" id="line-4016"><code>** CAPI3REF: Prepare Flags</code></span>
<span class="codeline" id="line-4017"><code>**</code></span>
<span class="codeline" id="line-4018"><code>** These constants define various flags that can be passed into</code></span>
<span class="codeline" id="line-4019"><code>** "prepFlags" parameter of the [sqlite3_prepare_v3()] and</code></span>
<span class="codeline" id="line-4020"><code>** [sqlite3_prepare16_v3()] interfaces.</code></span>
<span class="codeline" id="line-4021"><code>**</code></span>
<span class="codeline" id="line-4022"><code>** New flags may be added in future releases of SQLite.</code></span>
<span class="codeline" id="line-4023"><code>**</code></span>
<span class="codeline" id="line-4024"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-4025"><code>** [[SQLITE_PREPARE_PERSISTENT]] ^(&lt;dt&gt;SQLITE_PREPARE_PERSISTENT&lt;/dt&gt;</code></span>
<span class="codeline" id="line-4026"><code>** &lt;dd&gt;The SQLITE_PREPARE_PERSISTENT flag is a hint to the query planner</code></span>
<span class="codeline" id="line-4027"><code>** that the prepared statement will be retained for a long time and</code></span>
<span class="codeline" id="line-4028"><code>** probably reused many times.)^ ^Without this flag, [sqlite3_prepare_v3()]</code></span>
<span class="codeline" id="line-4029"><code>** and [sqlite3_prepare16_v3()] assume that the prepared statement will</code></span>
<span class="codeline" id="line-4030"><code>** be used just once or at most a few times and then destroyed using</code></span>
<span class="codeline" id="line-4031"><code>** [sqlite3_finalize()] relatively soon. The current implementation acts</code></span>
<span class="codeline" id="line-4032"><code>** on this hint by avoiding the use of [lookaside memory] so as not to</code></span>
<span class="codeline" id="line-4033"><code>** deplete the limited store of lookaside memory. Future versions of</code></span>
<span class="codeline" id="line-4034"><code>** SQLite may act on this hint differently.</code></span>
<span class="codeline" id="line-4035"><code>**</code></span>
<span class="codeline" id="line-4036"><code>** [[SQLITE_PREPARE_NORMALIZE]] &lt;dt&gt;SQLITE_PREPARE_NORMALIZE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-4037"><code>** &lt;dd&gt;The SQLITE_PREPARE_NORMALIZE flag is a no-op. This flag used</code></span>
<span class="codeline" id="line-4038"><code>** to be required for any prepared statement that wanted to use the</code></span>
<span class="codeline" id="line-4039"><code>** [sqlite3_normalized_sql()] interface.  However, the</code></span>
<span class="codeline" id="line-4040"><code>** [sqlite3_normalized_sql()] interface is now available to all</code></span>
<span class="codeline" id="line-4041"><code>** prepared statements, regardless of whether or not they use this</code></span>
<span class="codeline" id="line-4042"><code>** flag.</code></span>
<span class="codeline" id="line-4043"><code>**</code></span>
<span class="codeline" id="line-4044"><code>** [[SQLITE_PREPARE_NO_VTAB]] &lt;dt&gt;SQLITE_PREPARE_NO_VTAB&lt;/dt&gt;</code></span>
<span class="codeline" id="line-4045"><code>** &lt;dd&gt;The SQLITE_PREPARE_NO_VTAB flag causes the SQL compiler</code></span>
<span class="codeline" id="line-4046"><code>** to return an error (error code SQLITE_ERROR) if the statement uses</code></span>
<span class="codeline" id="line-4047"><code>** any virtual tables.</code></span>
<span class="codeline" id="line-4048"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-4049"><code>*/</code></span>
<span class="codeline" id="line-4050"><code>#define SQLITE_PREPARE_PERSISTENT              0x01</code></span>
<span class="codeline" id="line-4051"><code>#define SQLITE_PREPARE_NORMALIZE               0x02</code></span>
<span class="codeline" id="line-4052"><code>#define SQLITE_PREPARE_NO_VTAB                 0x04</code></span>
<span class="codeline" id="line-4053"><code></code></span>
<span class="codeline" id="line-4054"><code>/*</code></span>
<span class="codeline" id="line-4055"><code>** CAPI3REF: Compiling An SQL Statement</code></span>
<span class="codeline" id="line-4056"><code>** KEYWORDS: {SQL statement compiler}</code></span>
<span class="codeline" id="line-4057"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-4058"><code>** CONSTRUCTOR: sqlite3_stmt</code></span>
<span class="codeline" id="line-4059"><code>**</code></span>
<span class="codeline" id="line-4060"><code>** To execute an SQL statement, it must first be compiled into a byte-code</code></span>
<span class="codeline" id="line-4061"><code>** program using one of these routines.  Or, in other words, these routines</code></span>
<span class="codeline" id="line-4062"><code>** are constructors for the [prepared statement] object.</code></span>
<span class="codeline" id="line-4063"><code>**</code></span>
<span class="codeline" id="line-4064"><code>** The preferred routine to use is [sqlite3_prepare_v2()].  The</code></span>
<span class="codeline" id="line-4065"><code>** [sqlite3_prepare()] interface is legacy and should be avoided.</code></span>
<span class="codeline" id="line-4066"><code>** [sqlite3_prepare_v3()] has an extra "prepFlags" option that is used</code></span>
<span class="codeline" id="line-4067"><code>** for special purposes.</code></span>
<span class="codeline" id="line-4068"><code>**</code></span>
<span class="codeline" id="line-4069"><code>** The use of the UTF-8 interfaces is preferred, as SQLite currently</code></span>
<span class="codeline" id="line-4070"><code>** does all parsing using UTF-8.  The UTF-16 interfaces are provided</code></span>
<span class="codeline" id="line-4071"><code>** as a convenience.  The UTF-16 interfaces work by converting the</code></span>
<span class="codeline" id="line-4072"><code>** input text into UTF-8, then invoking the corresponding UTF-8 interface.</code></span>
<span class="codeline" id="line-4073"><code>**</code></span>
<span class="codeline" id="line-4074"><code>** The first argument, "db", is a [database connection] obtained from a</code></span>
<span class="codeline" id="line-4075"><code>** prior successful call to [sqlite3_open()], [sqlite3_open_v2()] or</code></span>
<span class="codeline" id="line-4076"><code>** [sqlite3_open16()].  The database connection must not have been closed.</code></span>
<span class="codeline" id="line-4077"><code>**</code></span>
<span class="codeline" id="line-4078"><code>** The second argument, "zSql", is the statement to be compiled, encoded</code></span>
<span class="codeline" id="line-4079"><code>** as either UTF-8 or UTF-16.  The sqlite3_prepare(), sqlite3_prepare_v2(),</code></span>
<span class="codeline" id="line-4080"><code>** and sqlite3_prepare_v3()</code></span>
<span class="codeline" id="line-4081"><code>** interfaces use UTF-8, and sqlite3_prepare16(), sqlite3_prepare16_v2(),</code></span>
<span class="codeline" id="line-4082"><code>** and sqlite3_prepare16_v3() use UTF-16.</code></span>
<span class="codeline" id="line-4083"><code>**</code></span>
<span class="codeline" id="line-4084"><code>** ^If the nByte argument is negative, then zSql is read up to the</code></span>
<span class="codeline" id="line-4085"><code>** first zero terminator. ^If nByte is positive, then it is the</code></span>
<span class="codeline" id="line-4086"><code>** number of bytes read from zSql.  ^If nByte is zero, then no prepared</code></span>
<span class="codeline" id="line-4087"><code>** statement is generated.</code></span>
<span class="codeline" id="line-4088"><code>** If the caller knows that the supplied string is nul-terminated, then</code></span>
<span class="codeline" id="line-4089"><code>** there is a small performance advantage to passing an nByte parameter that</code></span>
<span class="codeline" id="line-4090"><code>** is the number of bytes in the input string &lt;i&gt;including&lt;/i&gt;</code></span>
<span class="codeline" id="line-4091"><code>** the nul-terminator.</code></span>
<span class="codeline" id="line-4092"><code>**</code></span>
<span class="codeline" id="line-4093"><code>** ^If pzTail is not NULL then *pzTail is made to point to the first byte</code></span>
<span class="codeline" id="line-4094"><code>** past the end of the first SQL statement in zSql.  These routines only</code></span>
<span class="codeline" id="line-4095"><code>** compile the first statement in zSql, so *pzTail is left pointing to</code></span>
<span class="codeline" id="line-4096"><code>** what remains uncompiled.</code></span>
<span class="codeline" id="line-4097"><code>**</code></span>
<span class="codeline" id="line-4098"><code>** ^*ppStmt is left pointing to a compiled [prepared statement] that can be</code></span>
<span class="codeline" id="line-4099"><code>** executed using [sqlite3_step()].  ^If there is an error, *ppStmt is set</code></span>
<span class="codeline" id="line-4100"><code>** to NULL.  ^If the input text contains no SQL (if the input is an empty</code></span>
<span class="codeline" id="line-4101"><code>** string or a comment) then *ppStmt is set to NULL.</code></span>
<span class="codeline" id="line-4102"><code>** The calling procedure is responsible for deleting the compiled</code></span>
<span class="codeline" id="line-4103"><code>** SQL statement using [sqlite3_finalize()] after it has finished with it.</code></span>
<span class="codeline" id="line-4104"><code>** ppStmt may not be NULL.</code></span>
<span class="codeline" id="line-4105"><code>**</code></span>
<span class="codeline" id="line-4106"><code>** ^On success, the sqlite3_prepare() family of routines return [SQLITE_OK];</code></span>
<span class="codeline" id="line-4107"><code>** otherwise an [error code] is returned.</code></span>
<span class="codeline" id="line-4108"><code>**</code></span>
<span class="codeline" id="line-4109"><code>** The sqlite3_prepare_v2(), sqlite3_prepare_v3(), sqlite3_prepare16_v2(),</code></span>
<span class="codeline" id="line-4110"><code>** and sqlite3_prepare16_v3() interfaces are recommended for all new programs.</code></span>
<span class="codeline" id="line-4111"><code>** The older interfaces (sqlite3_prepare() and sqlite3_prepare16())</code></span>
<span class="codeline" id="line-4112"><code>** are retained for backwards compatibility, but their use is discouraged.</code></span>
<span class="codeline" id="line-4113"><code>** ^In the "vX" interfaces, the prepared statement</code></span>
<span class="codeline" id="line-4114"><code>** that is returned (the [sqlite3_stmt] object) contains a copy of the</code></span>
<span class="codeline" id="line-4115"><code>** original SQL text. This causes the [sqlite3_step()] interface to</code></span>
<span class="codeline" id="line-4116"><code>** behave differently in three ways:</code></span>
<span class="codeline" id="line-4117"><code>**</code></span>
<span class="codeline" id="line-4118"><code>** &lt;ol&gt;</code></span>
<span class="codeline" id="line-4119"><code>** &lt;li&gt;</code></span>
<span class="codeline" id="line-4120"><code>** ^If the database schema changes, instead of returning [SQLITE_SCHEMA] as it</code></span>
<span class="codeline" id="line-4121"><code>** always used to do, [sqlite3_step()] will automatically recompile the SQL</code></span>
<span class="codeline" id="line-4122"><code>** statement and try to run it again. As many as [SQLITE_MAX_SCHEMA_RETRY]</code></span>
<span class="codeline" id="line-4123"><code>** retries will occur before sqlite3_step() gives up and returns an error.</code></span>
<span class="codeline" id="line-4124"><code>** &lt;/li&gt;</code></span>
<span class="codeline" id="line-4125"><code>**</code></span>
<span class="codeline" id="line-4126"><code>** &lt;li&gt;</code></span>
<span class="codeline" id="line-4127"><code>** ^When an error occurs, [sqlite3_step()] will return one of the detailed</code></span>
<span class="codeline" id="line-4128"><code>** [error codes] or [extended error codes].  ^The legacy behavior was that</code></span>
<span class="codeline" id="line-4129"><code>** [sqlite3_step()] would only return a generic [SQLITE_ERROR] result code</code></span>
<span class="codeline" id="line-4130"><code>** and the application would have to make a second call to [sqlite3_reset()]</code></span>
<span class="codeline" id="line-4131"><code>** in order to find the underlying cause of the problem. With the "v2" prepare</code></span>
<span class="codeline" id="line-4132"><code>** interfaces, the underlying reason for the error is returned immediately.</code></span>
<span class="codeline" id="line-4133"><code>** &lt;/li&gt;</code></span>
<span class="codeline" id="line-4134"><code>**</code></span>
<span class="codeline" id="line-4135"><code>** &lt;li&gt;</code></span>
<span class="codeline" id="line-4136"><code>** ^If the specific value bound to a [parameter | host parameter] in the</code></span>
<span class="codeline" id="line-4137"><code>** WHERE clause might influence the choice of query plan for a statement,</code></span>
<span class="codeline" id="line-4138"><code>** then the statement will be automatically recompiled, as if there had been</code></span>
<span class="codeline" id="line-4139"><code>** a schema change, on the first [sqlite3_step()] call following any change</code></span>
<span class="codeline" id="line-4140"><code>** to the [sqlite3_bind_text | bindings] of that [parameter].</code></span>
<span class="codeline" id="line-4141"><code>** ^The specific value of a WHERE-clause [parameter] might influence the</code></span>
<span class="codeline" id="line-4142"><code>** choice of query plan if the parameter is the left-hand side of a [LIKE]</code></span>
<span class="codeline" id="line-4143"><code>** or [GLOB] operator or if the parameter is compared to an indexed column</code></span>
<span class="codeline" id="line-4144"><code>** and the [SQLITE_ENABLE_STAT4] compile-time option is enabled.</code></span>
<span class="codeline" id="line-4145"><code>** &lt;/li&gt;</code></span>
<span class="codeline" id="line-4146"><code>** &lt;/ol&gt;</code></span>
<span class="codeline" id="line-4147"><code>**</code></span>
<span class="codeline" id="line-4148"><code>** &lt;p&gt;^sqlite3_prepare_v3() differs from sqlite3_prepare_v2() only in having</code></span>
<span class="codeline" id="line-4149"><code>** the extra prepFlags parameter, which is a bit array consisting of zero or</code></span>
<span class="codeline" id="line-4150"><code>** more of the [SQLITE_PREPARE_PERSISTENT|SQLITE_PREPARE_*] flags.  ^The</code></span>
<span class="codeline" id="line-4151"><code>** sqlite3_prepare_v2() interface works exactly the same as</code></span>
<span class="codeline" id="line-4152"><code>** sqlite3_prepare_v3() with a zero prepFlags parameter.</code></span>
<span class="codeline" id="line-4153"><code>*/</code></span>
<span class="codeline" id="line-4154"><code>SQLITE_API int sqlite3_prepare(</code></span>
<span class="codeline" id="line-4155"><code>  sqlite3 *db,            /* Database handle */</code></span>
<span class="codeline" id="line-4156"><code>  const char *zSql,       /* SQL statement, UTF-8 encoded */</code></span>
<span class="codeline" id="line-4157"><code>  int nByte,              /* Maximum length of zSql in bytes. */</code></span>
<span class="codeline" id="line-4158"><code>  sqlite3_stmt **ppStmt,  /* OUT: Statement handle */</code></span>
<span class="codeline" id="line-4159"><code>  const char **pzTail     /* OUT: Pointer to unused portion of zSql */</code></span>
<span class="codeline" id="line-4160"><code>);</code></span>
<span class="codeline" id="line-4161"><code>SQLITE_API int sqlite3_prepare_v2(</code></span>
<span class="codeline" id="line-4162"><code>  sqlite3 *db,            /* Database handle */</code></span>
<span class="codeline" id="line-4163"><code>  const char *zSql,       /* SQL statement, UTF-8 encoded */</code></span>
<span class="codeline" id="line-4164"><code>  int nByte,              /* Maximum length of zSql in bytes. */</code></span>
<span class="codeline" id="line-4165"><code>  sqlite3_stmt **ppStmt,  /* OUT: Statement handle */</code></span>
<span class="codeline" id="line-4166"><code>  const char **pzTail     /* OUT: Pointer to unused portion of zSql */</code></span>
<span class="codeline" id="line-4167"><code>);</code></span>
<span class="codeline" id="line-4168"><code>SQLITE_API int sqlite3_prepare_v3(</code></span>
<span class="codeline" id="line-4169"><code>  sqlite3 *db,            /* Database handle */</code></span>
<span class="codeline" id="line-4170"><code>  const char *zSql,       /* SQL statement, UTF-8 encoded */</code></span>
<span class="codeline" id="line-4171"><code>  int nByte,              /* Maximum length of zSql in bytes. */</code></span>
<span class="codeline" id="line-4172"><code>  unsigned int prepFlags, /* Zero or more SQLITE_PREPARE_ flags */</code></span>
<span class="codeline" id="line-4173"><code>  sqlite3_stmt **ppStmt,  /* OUT: Statement handle */</code></span>
<span class="codeline" id="line-4174"><code>  const char **pzTail     /* OUT: Pointer to unused portion of zSql */</code></span>
<span class="codeline" id="line-4175"><code>);</code></span>
<span class="codeline" id="line-4176"><code>SQLITE_API int sqlite3_prepare16(</code></span>
<span class="codeline" id="line-4177"><code>  sqlite3 *db,            /* Database handle */</code></span>
<span class="codeline" id="line-4178"><code>  const void *zSql,       /* SQL statement, UTF-16 encoded */</code></span>
<span class="codeline" id="line-4179"><code>  int nByte,              /* Maximum length of zSql in bytes. */</code></span>
<span class="codeline" id="line-4180"><code>  sqlite3_stmt **ppStmt,  /* OUT: Statement handle */</code></span>
<span class="codeline" id="line-4181"><code>  const void **pzTail     /* OUT: Pointer to unused portion of zSql */</code></span>
<span class="codeline" id="line-4182"><code>);</code></span>
<span class="codeline" id="line-4183"><code>SQLITE_API int sqlite3_prepare16_v2(</code></span>
<span class="codeline" id="line-4184"><code>  sqlite3 *db,            /* Database handle */</code></span>
<span class="codeline" id="line-4185"><code>  const void *zSql,       /* SQL statement, UTF-16 encoded */</code></span>
<span class="codeline" id="line-4186"><code>  int nByte,              /* Maximum length of zSql in bytes. */</code></span>
<span class="codeline" id="line-4187"><code>  sqlite3_stmt **ppStmt,  /* OUT: Statement handle */</code></span>
<span class="codeline" id="line-4188"><code>  const void **pzTail     /* OUT: Pointer to unused portion of zSql */</code></span>
<span class="codeline" id="line-4189"><code>);</code></span>
<span class="codeline" id="line-4190"><code>SQLITE_API int sqlite3_prepare16_v3(</code></span>
<span class="codeline" id="line-4191"><code>  sqlite3 *db,            /* Database handle */</code></span>
<span class="codeline" id="line-4192"><code>  const void *zSql,       /* SQL statement, UTF-16 encoded */</code></span>
<span class="codeline" id="line-4193"><code>  int nByte,              /* Maximum length of zSql in bytes. */</code></span>
<span class="codeline" id="line-4194"><code>  unsigned int prepFlags, /* Zero or more SQLITE_PREPARE_ flags */</code></span>
<span class="codeline" id="line-4195"><code>  sqlite3_stmt **ppStmt,  /* OUT: Statement handle */</code></span>
<span class="codeline" id="line-4196"><code>  const void **pzTail     /* OUT: Pointer to unused portion of zSql */</code></span>
<span class="codeline" id="line-4197"><code>);</code></span>
<span class="codeline" id="line-4198"><code></code></span>
<span class="codeline" id="line-4199"><code>/*</code></span>
<span class="codeline" id="line-4200"><code>** CAPI3REF: Retrieving Statement SQL</code></span>
<span class="codeline" id="line-4201"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4202"><code>**</code></span>
<span class="codeline" id="line-4203"><code>** ^The sqlite3_sql(P) interface returns a pointer to a copy of the UTF-8</code></span>
<span class="codeline" id="line-4204"><code>** SQL text used to create [prepared statement] P if P was</code></span>
<span class="codeline" id="line-4205"><code>** created by [sqlite3_prepare_v2()], [sqlite3_prepare_v3()],</code></span>
<span class="codeline" id="line-4206"><code>** [sqlite3_prepare16_v2()], or [sqlite3_prepare16_v3()].</code></span>
<span class="codeline" id="line-4207"><code>** ^The sqlite3_expanded_sql(P) interface returns a pointer to a UTF-8</code></span>
<span class="codeline" id="line-4208"><code>** string containing the SQL text of prepared statement P with</code></span>
<span class="codeline" id="line-4209"><code>** [bound parameters] expanded.</code></span>
<span class="codeline" id="line-4210"><code>** ^The sqlite3_normalized_sql(P) interface returns a pointer to a UTF-8</code></span>
<span class="codeline" id="line-4211"><code>** string containing the normalized SQL text of prepared statement P.  The</code></span>
<span class="codeline" id="line-4212"><code>** semantics used to normalize a SQL statement are unspecified and subject</code></span>
<span class="codeline" id="line-4213"><code>** to change.  At a minimum, literal values will be replaced with suitable</code></span>
<span class="codeline" id="line-4214"><code>** placeholders.</code></span>
<span class="codeline" id="line-4215"><code>**</code></span>
<span class="codeline" id="line-4216"><code>** ^(For example, if a prepared statement is created using the SQL</code></span>
<span class="codeline" id="line-4217"><code>** text "SELECT $abc,:xyz" and if parameter $abc is bound to integer 2345</code></span>
<span class="codeline" id="line-4218"><code>** and parameter :xyz is unbound, then sqlite3_sql() will return</code></span>
<span class="codeline" id="line-4219"><code>** the original string, "SELECT $abc,:xyz" but sqlite3_expanded_sql()</code></span>
<span class="codeline" id="line-4220"><code>** will return "SELECT 2345,NULL".)^</code></span>
<span class="codeline" id="line-4221"><code>**</code></span>
<span class="codeline" id="line-4222"><code>** ^The sqlite3_expanded_sql() interface returns NULL if insufficient memory</code></span>
<span class="codeline" id="line-4223"><code>** is available to hold the result, or if the result would exceed the</code></span>
<span class="codeline" id="line-4224"><code>** the maximum string length determined by the [SQLITE_LIMIT_LENGTH].</code></span>
<span class="codeline" id="line-4225"><code>**</code></span>
<span class="codeline" id="line-4226"><code>** ^The [SQLITE_TRACE_SIZE_LIMIT] compile-time option limits the size of</code></span>
<span class="codeline" id="line-4227"><code>** bound parameter expansions.  ^The [SQLITE_OMIT_TRACE] compile-time</code></span>
<span class="codeline" id="line-4228"><code>** option causes sqlite3_expanded_sql() to always return NULL.</code></span>
<span class="codeline" id="line-4229"><code>**</code></span>
<span class="codeline" id="line-4230"><code>** ^The strings returned by sqlite3_sql(P) and sqlite3_normalized_sql(P)</code></span>
<span class="codeline" id="line-4231"><code>** are managed by SQLite and are automatically freed when the prepared</code></span>
<span class="codeline" id="line-4232"><code>** statement is finalized.</code></span>
<span class="codeline" id="line-4233"><code>** ^The string returned by sqlite3_expanded_sql(P), on the other hand,</code></span>
<span class="codeline" id="line-4234"><code>** is obtained from [sqlite3_malloc()] and must be freed by the application</code></span>
<span class="codeline" id="line-4235"><code>** by passing it to [sqlite3_free()].</code></span>
<span class="codeline" id="line-4236"><code>**</code></span>
<span class="codeline" id="line-4237"><code>** ^The sqlite3_normalized_sql() interface is only available if</code></span>
<span class="codeline" id="line-4238"><code>** the [SQLITE_ENABLE_NORMALIZE] compile-time option is defined.</code></span>
<span class="codeline" id="line-4239"><code>*/</code></span>
<span class="codeline" id="line-4240"><code>SQLITE_API const char *sqlite3_sql(sqlite3_stmt *pStmt);</code></span>
<span class="codeline" id="line-4241"><code>SQLITE_API char *sqlite3_expanded_sql(sqlite3_stmt *pStmt);</code></span>
<span class="codeline" id="line-4242"><code>#ifdef SQLITE_ENABLE_NORMALIZE</code></span>
<span class="codeline" id="line-4243"><code>SQLITE_API const char *sqlite3_normalized_sql(sqlite3_stmt *pStmt);</code></span>
<span class="codeline" id="line-4244"><code>#endif</code></span>
<span class="codeline" id="line-4245"><code></code></span>
<span class="codeline" id="line-4246"><code>/*</code></span>
<span class="codeline" id="line-4247"><code>** CAPI3REF: Determine If An SQL Statement Writes The Database</code></span>
<span class="codeline" id="line-4248"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4249"><code>**</code></span>
<span class="codeline" id="line-4250"><code>** ^The sqlite3_stmt_readonly(X) interface returns true (non-zero) if</code></span>
<span class="codeline" id="line-4251"><code>** and only if the [prepared statement] X makes no direct changes to</code></span>
<span class="codeline" id="line-4252"><code>** the content of the database file.</code></span>
<span class="codeline" id="line-4253"><code>**</code></span>
<span class="codeline" id="line-4254"><code>** Note that [application-defined SQL functions] or</code></span>
<span class="codeline" id="line-4255"><code>** [virtual tables] might change the database indirectly as a side effect.</code></span>
<span class="codeline" id="line-4256"><code>** ^(For example, if an application defines a function "eval()" that</code></span>
<span class="codeline" id="line-4257"><code>** calls [sqlite3_exec()], then the following SQL statement would</code></span>
<span class="codeline" id="line-4258"><code>** change the database file through side-effects:</code></span>
<span class="codeline" id="line-4259"><code>**</code></span>
<span class="codeline" id="line-4260"><code>** &lt;blockquote&gt;&lt;pre&gt;</code></span>
<span class="codeline" id="line-4261"><code>**    SELECT eval('DELETE FROM t1') FROM t2;</code></span>
<span class="codeline" id="line-4262"><code>** &lt;/pre&gt;&lt;/blockquote&gt;</code></span>
<span class="codeline" id="line-4263"><code>**</code></span>
<span class="codeline" id="line-4264"><code>** But because the [SELECT] statement does not change the database file</code></span>
<span class="codeline" id="line-4265"><code>** directly, sqlite3_stmt_readonly() would still return true.)^</code></span>
<span class="codeline" id="line-4266"><code>**</code></span>
<span class="codeline" id="line-4267"><code>** ^Transaction control statements such as [BEGIN], [COMMIT], [ROLLBACK],</code></span>
<span class="codeline" id="line-4268"><code>** [SAVEPOINT], and [RELEASE] cause sqlite3_stmt_readonly() to return true,</code></span>
<span class="codeline" id="line-4269"><code>** since the statements themselves do not actually modify the database but</code></span>
<span class="codeline" id="line-4270"><code>** rather they control the timing of when other statements modify the</code></span>
<span class="codeline" id="line-4271"><code>** database.  ^The [ATTACH] and [DETACH] statements also cause</code></span>
<span class="codeline" id="line-4272"><code>** sqlite3_stmt_readonly() to return true since, while those statements</code></span>
<span class="codeline" id="line-4273"><code>** change the configuration of a database connection, they do not make</code></span>
<span class="codeline" id="line-4274"><code>** changes to the content of the database files on disk.</code></span>
<span class="codeline" id="line-4275"><code>** ^The sqlite3_stmt_readonly() interface returns true for [BEGIN] since</code></span>
<span class="codeline" id="line-4276"><code>** [BEGIN] merely sets internal flags, but the [BEGIN|BEGIN IMMEDIATE] and</code></span>
<span class="codeline" id="line-4277"><code>** [BEGIN|BEGIN EXCLUSIVE] commands do touch the database and so</code></span>
<span class="codeline" id="line-4278"><code>** sqlite3_stmt_readonly() returns false for those commands.</code></span>
<span class="codeline" id="line-4279"><code>**</code></span>
<span class="codeline" id="line-4280"><code>** ^This routine returns false if there is any possibility that the</code></span>
<span class="codeline" id="line-4281"><code>** statement might change the database file.  ^A false return does</code></span>
<span class="codeline" id="line-4282"><code>** not guarantee that the statement will change the database file.</code></span>
<span class="codeline" id="line-4283"><code>** ^For example, an UPDATE statement might have a WHERE clause that</code></span>
<span class="codeline" id="line-4284"><code>** makes it a no-op, but the sqlite3_stmt_readonly() result would still</code></span>
<span class="codeline" id="line-4285"><code>** be false.  ^Similarly, a CREATE TABLE IF NOT EXISTS statement is a</code></span>
<span class="codeline" id="line-4286"><code>** read-only no-op if the table already exists, but</code></span>
<span class="codeline" id="line-4287"><code>** sqlite3_stmt_readonly() still returns false for such a statement.</code></span>
<span class="codeline" id="line-4288"><code>**</code></span>
<span class="codeline" id="line-4289"><code>** ^If prepared statement X is an [EXPLAIN] or [EXPLAIN QUERY PLAN]</code></span>
<span class="codeline" id="line-4290"><code>** statement, then sqlite3_stmt_readonly(X) returns the same value as</code></span>
<span class="codeline" id="line-4291"><code>** if the EXPLAIN or EXPLAIN QUERY PLAN prefix were omitted.</code></span>
<span class="codeline" id="line-4292"><code>*/</code></span>
<span class="codeline" id="line-4293"><code>SQLITE_API int sqlite3_stmt_readonly(sqlite3_stmt *pStmt);</code></span>
<span class="codeline" id="line-4294"><code></code></span>
<span class="codeline" id="line-4295"><code>/*</code></span>
<span class="codeline" id="line-4296"><code>** CAPI3REF: Query The EXPLAIN Setting For A Prepared Statement</code></span>
<span class="codeline" id="line-4297"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4298"><code>**</code></span>
<span class="codeline" id="line-4299"><code>** ^The sqlite3_stmt_isexplain(S) interface returns 1 if the</code></span>
<span class="codeline" id="line-4300"><code>** prepared statement S is an EXPLAIN statement, or 2 if the</code></span>
<span class="codeline" id="line-4301"><code>** statement S is an EXPLAIN QUERY PLAN.</code></span>
<span class="codeline" id="line-4302"><code>** ^The sqlite3_stmt_isexplain(S) interface returns 0 if S is</code></span>
<span class="codeline" id="line-4303"><code>** an ordinary statement or a NULL pointer.</code></span>
<span class="codeline" id="line-4304"><code>*/</code></span>
<span class="codeline" id="line-4305"><code>SQLITE_API int sqlite3_stmt_isexplain(sqlite3_stmt *pStmt);</code></span>
<span class="codeline" id="line-4306"><code></code></span>
<span class="codeline" id="line-4307"><code>/*</code></span>
<span class="codeline" id="line-4308"><code>** CAPI3REF: Determine If A Prepared Statement Has Been Reset</code></span>
<span class="codeline" id="line-4309"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4310"><code>**</code></span>
<span class="codeline" id="line-4311"><code>** ^The sqlite3_stmt_busy(S) interface returns true (non-zero) if the</code></span>
<span class="codeline" id="line-4312"><code>** [prepared statement] S has been stepped at least once using</code></span>
<span class="codeline" id="line-4313"><code>** [sqlite3_step(S)] but has neither run to completion (returned</code></span>
<span class="codeline" id="line-4314"><code>** [SQLITE_DONE] from [sqlite3_step(S)]) nor</code></span>
<span class="codeline" id="line-4315"><code>** been reset using [sqlite3_reset(S)].  ^The sqlite3_stmt_busy(S)</code></span>
<span class="codeline" id="line-4316"><code>** interface returns false if S is a NULL pointer.  If S is not a</code></span>
<span class="codeline" id="line-4317"><code>** NULL pointer and is not a pointer to a valid [prepared statement]</code></span>
<span class="codeline" id="line-4318"><code>** object, then the behavior is undefined and probably undesirable.</code></span>
<span class="codeline" id="line-4319"><code>**</code></span>
<span class="codeline" id="line-4320"><code>** This interface can be used in combination [sqlite3_next_stmt()]</code></span>
<span class="codeline" id="line-4321"><code>** to locate all prepared statements associated with a database</code></span>
<span class="codeline" id="line-4322"><code>** connection that are in need of being reset.  This can be used,</code></span>
<span class="codeline" id="line-4323"><code>** for example, in diagnostic routines to search for prepared</code></span>
<span class="codeline" id="line-4324"><code>** statements that are holding a transaction open.</code></span>
<span class="codeline" id="line-4325"><code>*/</code></span>
<span class="codeline" id="line-4326"><code>SQLITE_API int sqlite3_stmt_busy(sqlite3_stmt*);</code></span>
<span class="codeline" id="line-4327"><code></code></span>
<span class="codeline" id="line-4328"><code>/*</code></span>
<span class="codeline" id="line-4329"><code>** CAPI3REF: Dynamically Typed Value Object</code></span>
<span class="codeline" id="line-4330"><code>** KEYWORDS: {protected sqlite3_value} {unprotected sqlite3_value}</code></span>
<span class="codeline" id="line-4331"><code>**</code></span>
<span class="codeline" id="line-4332"><code>** SQLite uses the sqlite3_value object to represent all values</code></span>
<span class="codeline" id="line-4333"><code>** that can be stored in a database table. SQLite uses dynamic typing</code></span>
<span class="codeline" id="line-4334"><code>** for the values it stores.  ^Values stored in sqlite3_value objects</code></span>
<span class="codeline" id="line-4335"><code>** can be integers, floating point values, strings, BLOBs, or NULL.</code></span>
<span class="codeline" id="line-4336"><code>**</code></span>
<span class="codeline" id="line-4337"><code>** An sqlite3_value object may be either "protected" or "unprotected".</code></span>
<span class="codeline" id="line-4338"><code>** Some interfaces require a protected sqlite3_value.  Other interfaces</code></span>
<span class="codeline" id="line-4339"><code>** will accept either a protected or an unprotected sqlite3_value.</code></span>
<span class="codeline" id="line-4340"><code>** Every interface that accepts sqlite3_value arguments specifies</code></span>
<span class="codeline" id="line-4341"><code>** whether or not it requires a protected sqlite3_value.  The</code></span>
<span class="codeline" id="line-4342"><code>** [sqlite3_value_dup()] interface can be used to construct a new</code></span>
<span class="codeline" id="line-4343"><code>** protected sqlite3_value from an unprotected sqlite3_value.</code></span>
<span class="codeline" id="line-4344"><code>**</code></span>
<span class="codeline" id="line-4345"><code>** The terms "protected" and "unprotected" refer to whether or not</code></span>
<span class="codeline" id="line-4346"><code>** a mutex is held.  An internal mutex is held for a protected</code></span>
<span class="codeline" id="line-4347"><code>** sqlite3_value object but no mutex is held for an unprotected</code></span>
<span class="codeline" id="line-4348"><code>** sqlite3_value object.  If SQLite is compiled to be single-threaded</code></span>
<span class="codeline" id="line-4349"><code>** (with [SQLITE_THREADSAFE=0] and with [sqlite3_threadsafe()] returning 0)</code></span>
<span class="codeline" id="line-4350"><code>** or if SQLite is run in one of reduced mutex modes</code></span>
<span class="codeline" id="line-4351"><code>** [SQLITE_CONFIG_SINGLETHREAD] or [SQLITE_CONFIG_MULTITHREAD]</code></span>
<span class="codeline" id="line-4352"><code>** then there is no distinction between protected and unprotected</code></span>
<span class="codeline" id="line-4353"><code>** sqlite3_value objects and they can be used interchangeably.  However,</code></span>
<span class="codeline" id="line-4354"><code>** for maximum code portability it is recommended that applications</code></span>
<span class="codeline" id="line-4355"><code>** still make the distinction between protected and unprotected</code></span>
<span class="codeline" id="line-4356"><code>** sqlite3_value objects even when not strictly required.</code></span>
<span class="codeline" id="line-4357"><code>**</code></span>
<span class="codeline" id="line-4358"><code>** ^The sqlite3_value objects that are passed as parameters into the</code></span>
<span class="codeline" id="line-4359"><code>** implementation of [application-defined SQL functions] are protected.</code></span>
<span class="codeline" id="line-4360"><code>** ^The sqlite3_value objects returned by [sqlite3_vtab_rhs_value()]</code></span>
<span class="codeline" id="line-4361"><code>** are protected.</code></span>
<span class="codeline" id="line-4362"><code>** ^The sqlite3_value object returned by</code></span>
<span class="codeline" id="line-4363"><code>** [sqlite3_column_value()] is unprotected.</code></span>
<span class="codeline" id="line-4364"><code>** Unprotected sqlite3_value objects may only be used as arguments</code></span>
<span class="codeline" id="line-4365"><code>** to [sqlite3_result_value()], [sqlite3_bind_value()], and</code></span>
<span class="codeline" id="line-4366"><code>** [sqlite3_value_dup()].</code></span>
<span class="codeline" id="line-4367"><code>** The [sqlite3_value_blob | sqlite3_value_type()] family of</code></span>
<span class="codeline" id="line-4368"><code>** interfaces require protected sqlite3_value objects.</code></span>
<span class="codeline" id="line-4369"><code>*/</code></span>
<span class="codeline" id="line-4370"><code>typedef struct sqlite3_value sqlite3_value;</code></span>
<span class="codeline" id="line-4371"><code></code></span>
<span class="codeline" id="line-4372"><code>/*</code></span>
<span class="codeline" id="line-4373"><code>** CAPI3REF: SQL Function Context Object</code></span>
<span class="codeline" id="line-4374"><code>**</code></span>
<span class="codeline" id="line-4375"><code>** The context in which an SQL function executes is stored in an</code></span>
<span class="codeline" id="line-4376"><code>** sqlite3_context object.  ^A pointer to an sqlite3_context object</code></span>
<span class="codeline" id="line-4377"><code>** is always first parameter to [application-defined SQL functions].</code></span>
<span class="codeline" id="line-4378"><code>** The application-defined SQL function implementation will pass this</code></span>
<span class="codeline" id="line-4379"><code>** pointer through into calls to [sqlite3_result_int | sqlite3_result()],</code></span>
<span class="codeline" id="line-4380"><code>** [sqlite3_aggregate_context()], [sqlite3_user_data()],</code></span>
<span class="codeline" id="line-4381"><code>** [sqlite3_context_db_handle()], [sqlite3_get_auxdata()],</code></span>
<span class="codeline" id="line-4382"><code>** and/or [sqlite3_set_auxdata()].</code></span>
<span class="codeline" id="line-4383"><code>*/</code></span>
<span class="codeline" id="line-4384"><code>typedef struct sqlite3_context sqlite3_context;</code></span>
<span class="codeline" id="line-4385"><code></code></span>
<span class="codeline" id="line-4386"><code>/*</code></span>
<span class="codeline" id="line-4387"><code>** CAPI3REF: Binding Values To Prepared Statements</code></span>
<span class="codeline" id="line-4388"><code>** KEYWORDS: {host parameter} {host parameters} {host parameter name}</code></span>
<span class="codeline" id="line-4389"><code>** KEYWORDS: {SQL parameter} {SQL parameters} {parameter binding}</code></span>
<span class="codeline" id="line-4390"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4391"><code>**</code></span>
<span class="codeline" id="line-4392"><code>** ^(In the SQL statement text input to [sqlite3_prepare_v2()] and its variants,</code></span>
<span class="codeline" id="line-4393"><code>** literals may be replaced by a [parameter] that matches one of following</code></span>
<span class="codeline" id="line-4394"><code>** templates:</code></span>
<span class="codeline" id="line-4395"><code>**</code></span>
<span class="codeline" id="line-4396"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-4397"><code>** &lt;li&gt;  ?</code></span>
<span class="codeline" id="line-4398"><code>** &lt;li&gt;  ?NNN</code></span>
<span class="codeline" id="line-4399"><code>** &lt;li&gt;  :VVV</code></span>
<span class="codeline" id="line-4400"><code>** &lt;li&gt;  @VVV</code></span>
<span class="codeline" id="line-4401"><code>** &lt;li&gt;  $VVV</code></span>
<span class="codeline" id="line-4402"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-4403"><code>**</code></span>
<span class="codeline" id="line-4404"><code>** In the templates above, NNN represents an integer literal,</code></span>
<span class="codeline" id="line-4405"><code>** and VVV represents an alphanumeric identifier.)^  ^The values of these</code></span>
<span class="codeline" id="line-4406"><code>** parameters (also called "host parameter names" or "SQL parameters")</code></span>
<span class="codeline" id="line-4407"><code>** can be set using the sqlite3_bind_*() routines defined here.</code></span>
<span class="codeline" id="line-4408"><code>**</code></span>
<span class="codeline" id="line-4409"><code>** ^The first argument to the sqlite3_bind_*() routines is always</code></span>
<span class="codeline" id="line-4410"><code>** a pointer to the [sqlite3_stmt] object returned from</code></span>
<span class="codeline" id="line-4411"><code>** [sqlite3_prepare_v2()] or its variants.</code></span>
<span class="codeline" id="line-4412"><code>**</code></span>
<span class="codeline" id="line-4413"><code>** ^The second argument is the index of the SQL parameter to be set.</code></span>
<span class="codeline" id="line-4414"><code>** ^The leftmost SQL parameter has an index of 1.  ^When the same named</code></span>
<span class="codeline" id="line-4415"><code>** SQL parameter is used more than once, second and subsequent</code></span>
<span class="codeline" id="line-4416"><code>** occurrences have the same index as the first occurrence.</code></span>
<span class="codeline" id="line-4417"><code>** ^The index for named parameters can be looked up using the</code></span>
<span class="codeline" id="line-4418"><code>** [sqlite3_bind_parameter_index()] API if desired.  ^The index</code></span>
<span class="codeline" id="line-4419"><code>** for "?NNN" parameters is the value of NNN.</code></span>
<span class="codeline" id="line-4420"><code>** ^The NNN value must be between 1 and the [sqlite3_limit()]</code></span>
<span class="codeline" id="line-4421"><code>** parameter [SQLITE_LIMIT_VARIABLE_NUMBER] (default value: 32766).</code></span>
<span class="codeline" id="line-4422"><code>**</code></span>
<span class="codeline" id="line-4423"><code>** ^The third argument is the value to bind to the parameter.</code></span>
<span class="codeline" id="line-4424"><code>** ^If the third parameter to sqlite3_bind_text() or sqlite3_bind_text16()</code></span>
<span class="codeline" id="line-4425"><code>** or sqlite3_bind_blob() is a NULL pointer then the fourth parameter</code></span>
<span class="codeline" id="line-4426"><code>** is ignored and the end result is the same as sqlite3_bind_null().</code></span>
<span class="codeline" id="line-4427"><code>** ^If the third parameter to sqlite3_bind_text() is not NULL, then</code></span>
<span class="codeline" id="line-4428"><code>** it should be a pointer to well-formed UTF8 text.</code></span>
<span class="codeline" id="line-4429"><code>** ^If the third parameter to sqlite3_bind_text16() is not NULL, then</code></span>
<span class="codeline" id="line-4430"><code>** it should be a pointer to well-formed UTF16 text.</code></span>
<span class="codeline" id="line-4431"><code>** ^If the third parameter to sqlite3_bind_text64() is not NULL, then</code></span>
<span class="codeline" id="line-4432"><code>** it should be a pointer to a well-formed unicode string that is</code></span>
<span class="codeline" id="line-4433"><code>** either UTF8 if the sixth parameter is SQLITE_UTF8, or UTF16</code></span>
<span class="codeline" id="line-4434"><code>** otherwise.</code></span>
<span class="codeline" id="line-4435"><code>**</code></span>
<span class="codeline" id="line-4436"><code>** [[byte-order determination rules]] ^The byte-order of</code></span>
<span class="codeline" id="line-4437"><code>** UTF16 input text is determined by the byte-order mark (BOM, U+FEFF)</code></span>
<span class="codeline" id="line-4438"><code>** found in first character, which is removed, or in the absence of a BOM</code></span>
<span class="codeline" id="line-4439"><code>** the byte order is the native byte order of the host</code></span>
<span class="codeline" id="line-4440"><code>** machine for sqlite3_bind_text16() or the byte order specified in</code></span>
<span class="codeline" id="line-4441"><code>** the 6th parameter for sqlite3_bind_text64().)^</code></span>
<span class="codeline" id="line-4442"><code>** ^If UTF16 input text contains invalid unicode</code></span>
<span class="codeline" id="line-4443"><code>** characters, then SQLite might change those invalid characters</code></span>
<span class="codeline" id="line-4444"><code>** into the unicode replacement character: U+FFFD.</code></span>
<span class="codeline" id="line-4445"><code>**</code></span>
<span class="codeline" id="line-4446"><code>** ^(In those routines that have a fourth argument, its value is the</code></span>
<span class="codeline" id="line-4447"><code>** number of bytes in the parameter.  To be clear: the value is the</code></span>
<span class="codeline" id="line-4448"><code>** number of &lt;u&gt;bytes&lt;/u&gt; in the value, not the number of characters.)^</code></span>
<span class="codeline" id="line-4449"><code>** ^If the fourth parameter to sqlite3_bind_text() or sqlite3_bind_text16()</code></span>
<span class="codeline" id="line-4450"><code>** is negative, then the length of the string is</code></span>
<span class="codeline" id="line-4451"><code>** the number of bytes up to the first zero terminator.</code></span>
<span class="codeline" id="line-4452"><code>** If the fourth parameter to sqlite3_bind_blob() is negative, then</code></span>
<span class="codeline" id="line-4453"><code>** the behavior is undefined.</code></span>
<span class="codeline" id="line-4454"><code>** If a non-negative fourth parameter is provided to sqlite3_bind_text()</code></span>
<span class="codeline" id="line-4455"><code>** or sqlite3_bind_text16() or sqlite3_bind_text64() then</code></span>
<span class="codeline" id="line-4456"><code>** that parameter must be the byte offset</code></span>
<span class="codeline" id="line-4457"><code>** where the NUL terminator would occur assuming the string were NUL</code></span>
<span class="codeline" id="line-4458"><code>** terminated.  If any NUL characters occurs at byte offsets less than</code></span>
<span class="codeline" id="line-4459"><code>** the value of the fourth parameter then the resulting string value will</code></span>
<span class="codeline" id="line-4460"><code>** contain embedded NULs.  The result of expressions involving strings</code></span>
<span class="codeline" id="line-4461"><code>** with embedded NULs is undefined.</code></span>
<span class="codeline" id="line-4462"><code>**</code></span>
<span class="codeline" id="line-4463"><code>** ^The fifth argument to the BLOB and string binding interfaces controls</code></span>
<span class="codeline" id="line-4464"><code>** or indicates the lifetime of the object referenced by the third parameter.</code></span>
<span class="codeline" id="line-4465"><code>** These three options exist:</code></span>
<span class="codeline" id="line-4466"><code>** ^ (1) A destructor to dispose of the BLOB or string after SQLite has finished</code></span>
<span class="codeline" id="line-4467"><code>** with it may be passed. ^It is called to dispose of the BLOB or string even</code></span>
<span class="codeline" id="line-4468"><code>** if the call to the bind API fails, except the destructor is not called if</code></span>
<span class="codeline" id="line-4469"><code>** the third parameter is a NULL pointer or the fourth parameter is negative.</code></span>
<span class="codeline" id="line-4470"><code>** ^ (2) The special constant, [SQLITE_STATIC], may be passsed to indicate that</code></span>
<span class="codeline" id="line-4471"><code>** the application remains responsible for disposing of the object. ^In this</code></span>
<span class="codeline" id="line-4472"><code>** case, the object and the provided pointer to it must remain valid until</code></span>
<span class="codeline" id="line-4473"><code>** either the prepared statement is finalized or the same SQL parameter is</code></span>
<span class="codeline" id="line-4474"><code>** bound to something else, whichever occurs sooner.</code></span>
<span class="codeline" id="line-4475"><code>** ^ (3) The constant, [SQLITE_TRANSIENT], may be passed to indicate that the</code></span>
<span class="codeline" id="line-4476"><code>** object is to be copied prior to the return from sqlite3_bind_*(). ^The</code></span>
<span class="codeline" id="line-4477"><code>** object and pointer to it must remain valid until then. ^SQLite will then</code></span>
<span class="codeline" id="line-4478"><code>** manage the lifetime of its private copy.</code></span>
<span class="codeline" id="line-4479"><code>**</code></span>
<span class="codeline" id="line-4480"><code>** ^The sixth argument to sqlite3_bind_text64() must be one of</code></span>
<span class="codeline" id="line-4481"><code>** [SQLITE_UTF8], [SQLITE_UTF16], [SQLITE_UTF16BE], or [SQLITE_UTF16LE]</code></span>
<span class="codeline" id="line-4482"><code>** to specify the encoding of the text in the third parameter.  If</code></span>
<span class="codeline" id="line-4483"><code>** the sixth argument to sqlite3_bind_text64() is not one of the</code></span>
<span class="codeline" id="line-4484"><code>** allowed values shown above, or if the text encoding is different</code></span>
<span class="codeline" id="line-4485"><code>** from the encoding specified by the sixth parameter, then the behavior</code></span>
<span class="codeline" id="line-4486"><code>** is undefined.</code></span>
<span class="codeline" id="line-4487"><code>**</code></span>
<span class="codeline" id="line-4488"><code>** ^The sqlite3_bind_zeroblob() routine binds a BLOB of length N that</code></span>
<span class="codeline" id="line-4489"><code>** is filled with zeroes.  ^A zeroblob uses a fixed amount of memory</code></span>
<span class="codeline" id="line-4490"><code>** (just an integer to hold its size) while it is being processed.</code></span>
<span class="codeline" id="line-4491"><code>** Zeroblobs are intended to serve as placeholders for BLOBs whose</code></span>
<span class="codeline" id="line-4492"><code>** content is later written using</code></span>
<span class="codeline" id="line-4493"><code>** [sqlite3_blob_open | incremental BLOB I/O] routines.</code></span>
<span class="codeline" id="line-4494"><code>** ^A negative value for the zeroblob results in a zero-length BLOB.</code></span>
<span class="codeline" id="line-4495"><code>**</code></span>
<span class="codeline" id="line-4496"><code>** ^The sqlite3_bind_pointer(S,I,P,T,D) routine causes the I-th parameter in</code></span>
<span class="codeline" id="line-4497"><code>** [prepared statement] S to have an SQL value of NULL, but to also be</code></span>
<span class="codeline" id="line-4498"><code>** associated with the pointer P of type T.  ^D is either a NULL pointer or</code></span>
<span class="codeline" id="line-4499"><code>** a pointer to a destructor function for P. ^SQLite will invoke the</code></span>
<span class="codeline" id="line-4500"><code>** destructor D with a single argument of P when it is finished using</code></span>
<span class="codeline" id="line-4501"><code>** P.  The T parameter should be a static string, preferably a string</code></span>
<span class="codeline" id="line-4502"><code>** literal. The sqlite3_bind_pointer() routine is part of the</code></span>
<span class="codeline" id="line-4503"><code>** [pointer passing interface] added for SQLite 3.20.0.</code></span>
<span class="codeline" id="line-4504"><code>**</code></span>
<span class="codeline" id="line-4505"><code>** ^If any of the sqlite3_bind_*() routines are called with a NULL pointer</code></span>
<span class="codeline" id="line-4506"><code>** for the [prepared statement] or with a prepared statement for which</code></span>
<span class="codeline" id="line-4507"><code>** [sqlite3_step()] has been called more recently than [sqlite3_reset()],</code></span>
<span class="codeline" id="line-4508"><code>** then the call will return [SQLITE_MISUSE].  If any sqlite3_bind_()</code></span>
<span class="codeline" id="line-4509"><code>** routine is passed a [prepared statement] that has been finalized, the</code></span>
<span class="codeline" id="line-4510"><code>** result is undefined and probably harmful.</code></span>
<span class="codeline" id="line-4511"><code>**</code></span>
<span class="codeline" id="line-4512"><code>** ^Bindings are not cleared by the [sqlite3_reset()] routine.</code></span>
<span class="codeline" id="line-4513"><code>** ^Unbound parameters are interpreted as NULL.</code></span>
<span class="codeline" id="line-4514"><code>**</code></span>
<span class="codeline" id="line-4515"><code>** ^The sqlite3_bind_* routines return [SQLITE_OK] on success or an</code></span>
<span class="codeline" id="line-4516"><code>** [error code] if anything goes wrong.</code></span>
<span class="codeline" id="line-4517"><code>** ^[SQLITE_TOOBIG] might be returned if the size of a string or BLOB</code></span>
<span class="codeline" id="line-4518"><code>** exceeds limits imposed by [sqlite3_limit]([SQLITE_LIMIT_LENGTH]) or</code></span>
<span class="codeline" id="line-4519"><code>** [SQLITE_MAX_LENGTH].</code></span>
<span class="codeline" id="line-4520"><code>** ^[SQLITE_RANGE] is returned if the parameter</code></span>
<span class="codeline" id="line-4521"><code>** index is out of range.  ^[SQLITE_NOMEM] is returned if malloc() fails.</code></span>
<span class="codeline" id="line-4522"><code>**</code></span>
<span class="codeline" id="line-4523"><code>** See also: [sqlite3_bind_parameter_count()],</code></span>
<span class="codeline" id="line-4524"><code>** [sqlite3_bind_parameter_name()], and [sqlite3_bind_parameter_index()].</code></span>
<span class="codeline" id="line-4525"><code>*/</code></span>
<span class="codeline" id="line-4526"><code>SQLITE_API int sqlite3_bind_blob(sqlite3_stmt*, int, const void*, int n, void(*)(void*));</code></span>
<span class="codeline" id="line-4527"><code>SQLITE_API int sqlite3_bind_blob64(sqlite3_stmt*, int, const void*, sqlite3_uint64,</code></span>
<span class="codeline" id="line-4528"><code>                        void(*)(void*));</code></span>
<span class="codeline" id="line-4529"><code>SQLITE_API int sqlite3_bind_double(sqlite3_stmt*, int, double);</code></span>
<span class="codeline" id="line-4530"><code>SQLITE_API int sqlite3_bind_int(sqlite3_stmt*, int, int);</code></span>
<span class="codeline" id="line-4531"><code>SQLITE_API int sqlite3_bind_int64(sqlite3_stmt*, int, sqlite3_int64);</code></span>
<span class="codeline" id="line-4532"><code>SQLITE_API int sqlite3_bind_null(sqlite3_stmt*, int);</code></span>
<span class="codeline" id="line-4533"><code>SQLITE_API int sqlite3_bind_text(sqlite3_stmt*,int,const char*,int,void(*)(void*));</code></span>
<span class="codeline" id="line-4534"><code>SQLITE_API int sqlite3_bind_text16(sqlite3_stmt*, int, const void*, int, void(*)(void*));</code></span>
<span class="codeline" id="line-4535"><code>SQLITE_API int sqlite3_bind_text64(sqlite3_stmt*, int, const char*, sqlite3_uint64,</code></span>
<span class="codeline" id="line-4536"><code>                         void(*)(void*), unsigned char encoding);</code></span>
<span class="codeline" id="line-4537"><code>SQLITE_API int sqlite3_bind_value(sqlite3_stmt*, int, const sqlite3_value*);</code></span>
<span class="codeline" id="line-4538"><code>SQLITE_API int sqlite3_bind_pointer(sqlite3_stmt*, int, void*, const char*,void(*)(void*));</code></span>
<span class="codeline" id="line-4539"><code>SQLITE_API int sqlite3_bind_zeroblob(sqlite3_stmt*, int, int n);</code></span>
<span class="codeline" id="line-4540"><code>SQLITE_API int sqlite3_bind_zeroblob64(sqlite3_stmt*, int, sqlite3_uint64);</code></span>
<span class="codeline" id="line-4541"><code></code></span>
<span class="codeline" id="line-4542"><code>/*</code></span>
<span class="codeline" id="line-4543"><code>** CAPI3REF: Number Of SQL Parameters</code></span>
<span class="codeline" id="line-4544"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4545"><code>**</code></span>
<span class="codeline" id="line-4546"><code>** ^This routine can be used to find the number of [SQL parameters]</code></span>
<span class="codeline" id="line-4547"><code>** in a [prepared statement].  SQL parameters are tokens of the</code></span>
<span class="codeline" id="line-4548"><code>** form "?", "?NNN", ":AAA", "$AAA", or "@AAA" that serve as</code></span>
<span class="codeline" id="line-4549"><code>** placeholders for values that are [sqlite3_bind_blob | bound]</code></span>
<span class="codeline" id="line-4550"><code>** to the parameters at a later time.</code></span>
<span class="codeline" id="line-4551"><code>**</code></span>
<span class="codeline" id="line-4552"><code>** ^(This routine actually returns the index of the largest (rightmost)</code></span>
<span class="codeline" id="line-4553"><code>** parameter. For all forms except ?NNN, this will correspond to the</code></span>
<span class="codeline" id="line-4554"><code>** number of unique parameters.  If parameters of the ?NNN form are used,</code></span>
<span class="codeline" id="line-4555"><code>** there may be gaps in the list.)^</code></span>
<span class="codeline" id="line-4556"><code>**</code></span>
<span class="codeline" id="line-4557"><code>** See also: [sqlite3_bind_blob|sqlite3_bind()],</code></span>
<span class="codeline" id="line-4558"><code>** [sqlite3_bind_parameter_name()], and</code></span>
<span class="codeline" id="line-4559"><code>** [sqlite3_bind_parameter_index()].</code></span>
<span class="codeline" id="line-4560"><code>*/</code></span>
<span class="codeline" id="line-4561"><code>SQLITE_API int sqlite3_bind_parameter_count(sqlite3_stmt*);</code></span>
<span class="codeline" id="line-4562"><code></code></span>
<span class="codeline" id="line-4563"><code>/*</code></span>
<span class="codeline" id="line-4564"><code>** CAPI3REF: Name Of A Host Parameter</code></span>
<span class="codeline" id="line-4565"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4566"><code>**</code></span>
<span class="codeline" id="line-4567"><code>** ^The sqlite3_bind_parameter_name(P,N) interface returns</code></span>
<span class="codeline" id="line-4568"><code>** the name of the N-th [SQL parameter] in the [prepared statement] P.</code></span>
<span class="codeline" id="line-4569"><code>** ^(SQL parameters of the form "?NNN" or ":AAA" or "@AAA" or "$AAA"</code></span>
<span class="codeline" id="line-4570"><code>** have a name which is the string "?NNN" or ":AAA" or "@AAA" or "$AAA"</code></span>
<span class="codeline" id="line-4571"><code>** respectively.</code></span>
<span class="codeline" id="line-4572"><code>** In other words, the initial ":" or "$" or "@" or "?"</code></span>
<span class="codeline" id="line-4573"><code>** is included as part of the name.)^</code></span>
<span class="codeline" id="line-4574"><code>** ^Parameters of the form "?" without a following integer have no name</code></span>
<span class="codeline" id="line-4575"><code>** and are referred to as "nameless" or "anonymous parameters".</code></span>
<span class="codeline" id="line-4576"><code>**</code></span>
<span class="codeline" id="line-4577"><code>** ^The first host parameter has an index of 1, not 0.</code></span>
<span class="codeline" id="line-4578"><code>**</code></span>
<span class="codeline" id="line-4579"><code>** ^If the value N is out of range or if the N-th parameter is</code></span>
<span class="codeline" id="line-4580"><code>** nameless, then NULL is returned.  ^The returned string is</code></span>
<span class="codeline" id="line-4581"><code>** always in UTF-8 encoding even if the named parameter was</code></span>
<span class="codeline" id="line-4582"><code>** originally specified as UTF-16 in [sqlite3_prepare16()],</code></span>
<span class="codeline" id="line-4583"><code>** [sqlite3_prepare16_v2()], or [sqlite3_prepare16_v3()].</code></span>
<span class="codeline" id="line-4584"><code>**</code></span>
<span class="codeline" id="line-4585"><code>** See also: [sqlite3_bind_blob|sqlite3_bind()],</code></span>
<span class="codeline" id="line-4586"><code>** [sqlite3_bind_parameter_count()], and</code></span>
<span class="codeline" id="line-4587"><code>** [sqlite3_bind_parameter_index()].</code></span>
<span class="codeline" id="line-4588"><code>*/</code></span>
<span class="codeline" id="line-4589"><code>SQLITE_API const char *sqlite3_bind_parameter_name(sqlite3_stmt*, int);</code></span>
<span class="codeline" id="line-4590"><code></code></span>
<span class="codeline" id="line-4591"><code>/*</code></span>
<span class="codeline" id="line-4592"><code>** CAPI3REF: Index Of A Parameter With A Given Name</code></span>
<span class="codeline" id="line-4593"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4594"><code>**</code></span>
<span class="codeline" id="line-4595"><code>** ^Return the index of an SQL parameter given its name.  ^The</code></span>
<span class="codeline" id="line-4596"><code>** index value returned is suitable for use as the second</code></span>
<span class="codeline" id="line-4597"><code>** parameter to [sqlite3_bind_blob|sqlite3_bind()].  ^A zero</code></span>
<span class="codeline" id="line-4598"><code>** is returned if no matching parameter is found.  ^The parameter</code></span>
<span class="codeline" id="line-4599"><code>** name must be given in UTF-8 even if the original statement</code></span>
<span class="codeline" id="line-4600"><code>** was prepared from UTF-16 text using [sqlite3_prepare16_v2()] or</code></span>
<span class="codeline" id="line-4601"><code>** [sqlite3_prepare16_v3()].</code></span>
<span class="codeline" id="line-4602"><code>**</code></span>
<span class="codeline" id="line-4603"><code>** See also: [sqlite3_bind_blob|sqlite3_bind()],</code></span>
<span class="codeline" id="line-4604"><code>** [sqlite3_bind_parameter_count()], and</code></span>
<span class="codeline" id="line-4605"><code>** [sqlite3_bind_parameter_name()].</code></span>
<span class="codeline" id="line-4606"><code>*/</code></span>
<span class="codeline" id="line-4607"><code>SQLITE_API int sqlite3_bind_parameter_index(sqlite3_stmt*, const char *zName);</code></span>
<span class="codeline" id="line-4608"><code></code></span>
<span class="codeline" id="line-4609"><code>/*</code></span>
<span class="codeline" id="line-4610"><code>** CAPI3REF: Reset All Bindings On A Prepared Statement</code></span>
<span class="codeline" id="line-4611"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4612"><code>**</code></span>
<span class="codeline" id="line-4613"><code>** ^Contrary to the intuition of many, [sqlite3_reset()] does not reset</code></span>
<span class="codeline" id="line-4614"><code>** the [sqlite3_bind_blob | bindings] on a [prepared statement].</code></span>
<span class="codeline" id="line-4615"><code>** ^Use this routine to reset all host parameters to NULL.</code></span>
<span class="codeline" id="line-4616"><code>*/</code></span>
<span class="codeline" id="line-4617"><code>SQLITE_API int sqlite3_clear_bindings(sqlite3_stmt*);</code></span>
<span class="codeline" id="line-4618"><code></code></span>
<span class="codeline" id="line-4619"><code>/*</code></span>
<span class="codeline" id="line-4620"><code>** CAPI3REF: Number Of Columns In A Result Set</code></span>
<span class="codeline" id="line-4621"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4622"><code>**</code></span>
<span class="codeline" id="line-4623"><code>** ^Return the number of columns in the result set returned by the</code></span>
<span class="codeline" id="line-4624"><code>** [prepared statement]. ^If this routine returns 0, that means the</code></span>
<span class="codeline" id="line-4625"><code>** [prepared statement] returns no data (for example an [UPDATE]).</code></span>
<span class="codeline" id="line-4626"><code>** ^However, just because this routine returns a positive number does not</code></span>
<span class="codeline" id="line-4627"><code>** mean that one or more rows of data will be returned.  ^A SELECT statement</code></span>
<span class="codeline" id="line-4628"><code>** will always have a positive sqlite3_column_count() but depending on the</code></span>
<span class="codeline" id="line-4629"><code>** WHERE clause constraints and the table content, it might return no rows.</code></span>
<span class="codeline" id="line-4630"><code>**</code></span>
<span class="codeline" id="line-4631"><code>** See also: [sqlite3_data_count()]</code></span>
<span class="codeline" id="line-4632"><code>*/</code></span>
<span class="codeline" id="line-4633"><code>SQLITE_API int sqlite3_column_count(sqlite3_stmt *pStmt);</code></span>
<span class="codeline" id="line-4634"><code></code></span>
<span class="codeline" id="line-4635"><code>/*</code></span>
<span class="codeline" id="line-4636"><code>** CAPI3REF: Column Names In A Result Set</code></span>
<span class="codeline" id="line-4637"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4638"><code>**</code></span>
<span class="codeline" id="line-4639"><code>** ^These routines return the name assigned to a particular column</code></span>
<span class="codeline" id="line-4640"><code>** in the result set of a [SELECT] statement.  ^The sqlite3_column_name()</code></span>
<span class="codeline" id="line-4641"><code>** interface returns a pointer to a zero-terminated UTF-8 string</code></span>
<span class="codeline" id="line-4642"><code>** and sqlite3_column_name16() returns a pointer to a zero-terminated</code></span>
<span class="codeline" id="line-4643"><code>** UTF-16 string.  ^The first parameter is the [prepared statement]</code></span>
<span class="codeline" id="line-4644"><code>** that implements the [SELECT] statement. ^The second parameter is the</code></span>
<span class="codeline" id="line-4645"><code>** column number.  ^The leftmost column is number 0.</code></span>
<span class="codeline" id="line-4646"><code>**</code></span>
<span class="codeline" id="line-4647"><code>** ^The returned string pointer is valid until either the [prepared statement]</code></span>
<span class="codeline" id="line-4648"><code>** is destroyed by [sqlite3_finalize()] or until the statement is automatically</code></span>
<span class="codeline" id="line-4649"><code>** reprepared by the first call to [sqlite3_step()] for a particular run</code></span>
<span class="codeline" id="line-4650"><code>** or until the next call to</code></span>
<span class="codeline" id="line-4651"><code>** sqlite3_column_name() or sqlite3_column_name16() on the same column.</code></span>
<span class="codeline" id="line-4652"><code>**</code></span>
<span class="codeline" id="line-4653"><code>** ^If sqlite3_malloc() fails during the processing of either routine</code></span>
<span class="codeline" id="line-4654"><code>** (for example during a conversion from UTF-8 to UTF-16) then a</code></span>
<span class="codeline" id="line-4655"><code>** NULL pointer is returned.</code></span>
<span class="codeline" id="line-4656"><code>**</code></span>
<span class="codeline" id="line-4657"><code>** ^The name of a result column is the value of the "AS" clause for</code></span>
<span class="codeline" id="line-4658"><code>** that column, if there is an AS clause.  If there is no AS clause</code></span>
<span class="codeline" id="line-4659"><code>** then the name of the column is unspecified and may change from</code></span>
<span class="codeline" id="line-4660"><code>** one release of SQLite to the next.</code></span>
<span class="codeline" id="line-4661"><code>*/</code></span>
<span class="codeline" id="line-4662"><code>SQLITE_API const char *sqlite3_column_name(sqlite3_stmt*, int N);</code></span>
<span class="codeline" id="line-4663"><code>SQLITE_API const void *sqlite3_column_name16(sqlite3_stmt*, int N);</code></span>
<span class="codeline" id="line-4664"><code></code></span>
<span class="codeline" id="line-4665"><code>/*</code></span>
<span class="codeline" id="line-4666"><code>** CAPI3REF: Source Of Data In A Query Result</code></span>
<span class="codeline" id="line-4667"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4668"><code>**</code></span>
<span class="codeline" id="line-4669"><code>** ^These routines provide a means to determine the database, table, and</code></span>
<span class="codeline" id="line-4670"><code>** table column that is the origin of a particular result column in</code></span>
<span class="codeline" id="line-4671"><code>** [SELECT] statement.</code></span>
<span class="codeline" id="line-4672"><code>** ^The name of the database or table or column can be returned as</code></span>
<span class="codeline" id="line-4673"><code>** either a UTF-8 or UTF-16 string.  ^The _database_ routines return</code></span>
<span class="codeline" id="line-4674"><code>** the database name, the _table_ routines return the table name, and</code></span>
<span class="codeline" id="line-4675"><code>** the origin_ routines return the column name.</code></span>
<span class="codeline" id="line-4676"><code>** ^The returned string is valid until the [prepared statement] is destroyed</code></span>
<span class="codeline" id="line-4677"><code>** using [sqlite3_finalize()] or until the statement is automatically</code></span>
<span class="codeline" id="line-4678"><code>** reprepared by the first call to [sqlite3_step()] for a particular run</code></span>
<span class="codeline" id="line-4679"><code>** or until the same information is requested</code></span>
<span class="codeline" id="line-4680"><code>** again in a different encoding.</code></span>
<span class="codeline" id="line-4681"><code>**</code></span>
<span class="codeline" id="line-4682"><code>** ^The names returned are the original un-aliased names of the</code></span>
<span class="codeline" id="line-4683"><code>** database, table, and column.</code></span>
<span class="codeline" id="line-4684"><code>**</code></span>
<span class="codeline" id="line-4685"><code>** ^The first argument to these interfaces is a [prepared statement].</code></span>
<span class="codeline" id="line-4686"><code>** ^These functions return information about the Nth result column returned by</code></span>
<span class="codeline" id="line-4687"><code>** the statement, where N is the second function argument.</code></span>
<span class="codeline" id="line-4688"><code>** ^The left-most column is column 0 for these routines.</code></span>
<span class="codeline" id="line-4689"><code>**</code></span>
<span class="codeline" id="line-4690"><code>** ^If the Nth column returned by the statement is an expression or</code></span>
<span class="codeline" id="line-4691"><code>** subquery and is not a column value, then all of these functions return</code></span>
<span class="codeline" id="line-4692"><code>** NULL.  ^These routines might also return NULL if a memory allocation error</code></span>
<span class="codeline" id="line-4693"><code>** occurs.  ^Otherwise, they return the name of the attached database, table,</code></span>
<span class="codeline" id="line-4694"><code>** or column that query result column was extracted from.</code></span>
<span class="codeline" id="line-4695"><code>**</code></span>
<span class="codeline" id="line-4696"><code>** ^As with all other SQLite APIs, those whose names end with "16" return</code></span>
<span class="codeline" id="line-4697"><code>** UTF-16 encoded strings and the other functions return UTF-8.</code></span>
<span class="codeline" id="line-4698"><code>**</code></span>
<span class="codeline" id="line-4699"><code>** ^These APIs are only available if the library was compiled with the</code></span>
<span class="codeline" id="line-4700"><code>** [SQLITE_ENABLE_COLUMN_METADATA] C-preprocessor symbol.</code></span>
<span class="codeline" id="line-4701"><code>**</code></span>
<span class="codeline" id="line-4702"><code>** If two or more threads call one or more</code></span>
<span class="codeline" id="line-4703"><code>** [sqlite3_column_database_name | column metadata interfaces]</code></span>
<span class="codeline" id="line-4704"><code>** for the same [prepared statement] and result column</code></span>
<span class="codeline" id="line-4705"><code>** at the same time then the results are undefined.</code></span>
<span class="codeline" id="line-4706"><code>*/</code></span>
<span class="codeline" id="line-4707"><code>SQLITE_API const char *sqlite3_column_database_name(sqlite3_stmt*,int);</code></span>
<span class="codeline" id="line-4708"><code>SQLITE_API const void *sqlite3_column_database_name16(sqlite3_stmt*,int);</code></span>
<span class="codeline" id="line-4709"><code>SQLITE_API const char *sqlite3_column_table_name(sqlite3_stmt*,int);</code></span>
<span class="codeline" id="line-4710"><code>SQLITE_API const void *sqlite3_column_table_name16(sqlite3_stmt*,int);</code></span>
<span class="codeline" id="line-4711"><code>SQLITE_API const char *sqlite3_column_origin_name(sqlite3_stmt*,int);</code></span>
<span class="codeline" id="line-4712"><code>SQLITE_API const void *sqlite3_column_origin_name16(sqlite3_stmt*,int);</code></span>
<span class="codeline" id="line-4713"><code></code></span>
<span class="codeline" id="line-4714"><code>/*</code></span>
<span class="codeline" id="line-4715"><code>** CAPI3REF: Declared Datatype Of A Query Result</code></span>
<span class="codeline" id="line-4716"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4717"><code>**</code></span>
<span class="codeline" id="line-4718"><code>** ^(The first parameter is a [prepared statement].</code></span>
<span class="codeline" id="line-4719"><code>** If this statement is a [SELECT] statement and the Nth column of the</code></span>
<span class="codeline" id="line-4720"><code>** returned result set of that [SELECT] is a table column (not an</code></span>
<span class="codeline" id="line-4721"><code>** expression or subquery) then the declared type of the table</code></span>
<span class="codeline" id="line-4722"><code>** column is returned.)^  ^If the Nth column of the result set is an</code></span>
<span class="codeline" id="line-4723"><code>** expression or subquery, then a NULL pointer is returned.</code></span>
<span class="codeline" id="line-4724"><code>** ^The returned string is always UTF-8 encoded.</code></span>
<span class="codeline" id="line-4725"><code>**</code></span>
<span class="codeline" id="line-4726"><code>** ^(For example, given the database schema:</code></span>
<span class="codeline" id="line-4727"><code>**</code></span>
<span class="codeline" id="line-4728"><code>** CREATE TABLE t1(c1 VARIANT);</code></span>
<span class="codeline" id="line-4729"><code>**</code></span>
<span class="codeline" id="line-4730"><code>** and the following statement to be compiled:</code></span>
<span class="codeline" id="line-4731"><code>**</code></span>
<span class="codeline" id="line-4732"><code>** SELECT c1 + 1, c1 FROM t1;</code></span>
<span class="codeline" id="line-4733"><code>**</code></span>
<span class="codeline" id="line-4734"><code>** this routine would return the string "VARIANT" for the second result</code></span>
<span class="codeline" id="line-4735"><code>** column (i==1), and a NULL pointer for the first result column (i==0).)^</code></span>
<span class="codeline" id="line-4736"><code>**</code></span>
<span class="codeline" id="line-4737"><code>** ^SQLite uses dynamic run-time typing.  ^So just because a column</code></span>
<span class="codeline" id="line-4738"><code>** is declared to contain a particular type does not mean that the</code></span>
<span class="codeline" id="line-4739"><code>** data stored in that column is of the declared type.  SQLite is</code></span>
<span class="codeline" id="line-4740"><code>** strongly typed, but the typing is dynamic not static.  ^Type</code></span>
<span class="codeline" id="line-4741"><code>** is associated with individual values, not with the containers</code></span>
<span class="codeline" id="line-4742"><code>** used to hold those values.</code></span>
<span class="codeline" id="line-4743"><code>*/</code></span>
<span class="codeline" id="line-4744"><code>SQLITE_API const char *sqlite3_column_decltype(sqlite3_stmt*,int);</code></span>
<span class="codeline" id="line-4745"><code>SQLITE_API const void *sqlite3_column_decltype16(sqlite3_stmt*,int);</code></span>
<span class="codeline" id="line-4746"><code></code></span>
<span class="codeline" id="line-4747"><code>/*</code></span>
<span class="codeline" id="line-4748"><code>** CAPI3REF: Evaluate An SQL Statement</code></span>
<span class="codeline" id="line-4749"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4750"><code>**</code></span>
<span class="codeline" id="line-4751"><code>** After a [prepared statement] has been prepared using any of</code></span>
<span class="codeline" id="line-4752"><code>** [sqlite3_prepare_v2()], [sqlite3_prepare_v3()], [sqlite3_prepare16_v2()],</code></span>
<span class="codeline" id="line-4753"><code>** or [sqlite3_prepare16_v3()] or one of the legacy</code></span>
<span class="codeline" id="line-4754"><code>** interfaces [sqlite3_prepare()] or [sqlite3_prepare16()], this function</code></span>
<span class="codeline" id="line-4755"><code>** must be called one or more times to evaluate the statement.</code></span>
<span class="codeline" id="line-4756"><code>**</code></span>
<span class="codeline" id="line-4757"><code>** The details of the behavior of the sqlite3_step() interface depend</code></span>
<span class="codeline" id="line-4758"><code>** on whether the statement was prepared using the newer "vX" interfaces</code></span>
<span class="codeline" id="line-4759"><code>** [sqlite3_prepare_v3()], [sqlite3_prepare_v2()], [sqlite3_prepare16_v3()],</code></span>
<span class="codeline" id="line-4760"><code>** [sqlite3_prepare16_v2()] or the older legacy</code></span>
<span class="codeline" id="line-4761"><code>** interfaces [sqlite3_prepare()] and [sqlite3_prepare16()].  The use of the</code></span>
<span class="codeline" id="line-4762"><code>** new "vX" interface is recommended for new applications but the legacy</code></span>
<span class="codeline" id="line-4763"><code>** interface will continue to be supported.</code></span>
<span class="codeline" id="line-4764"><code>**</code></span>
<span class="codeline" id="line-4765"><code>** ^In the legacy interface, the return value will be either [SQLITE_BUSY],</code></span>
<span class="codeline" id="line-4766"><code>** [SQLITE_DONE], [SQLITE_ROW], [SQLITE_ERROR], or [SQLITE_MISUSE].</code></span>
<span class="codeline" id="line-4767"><code>** ^With the "v2" interface, any of the other [result codes] or</code></span>
<span class="codeline" id="line-4768"><code>** [extended result codes] might be returned as well.</code></span>
<span class="codeline" id="line-4769"><code>**</code></span>
<span class="codeline" id="line-4770"><code>** ^[SQLITE_BUSY] means that the database engine was unable to acquire the</code></span>
<span class="codeline" id="line-4771"><code>** database locks it needs to do its job.  ^If the statement is a [COMMIT]</code></span>
<span class="codeline" id="line-4772"><code>** or occurs outside of an explicit transaction, then you can retry the</code></span>
<span class="codeline" id="line-4773"><code>** statement.  If the statement is not a [COMMIT] and occurs within an</code></span>
<span class="codeline" id="line-4774"><code>** explicit transaction then you should rollback the transaction before</code></span>
<span class="codeline" id="line-4775"><code>** continuing.</code></span>
<span class="codeline" id="line-4776"><code>**</code></span>
<span class="codeline" id="line-4777"><code>** ^[SQLITE_DONE] means that the statement has finished executing</code></span>
<span class="codeline" id="line-4778"><code>** successfully.  sqlite3_step() should not be called again on this virtual</code></span>
<span class="codeline" id="line-4779"><code>** machine without first calling [sqlite3_reset()] to reset the virtual</code></span>
<span class="codeline" id="line-4780"><code>** machine back to its initial state.</code></span>
<span class="codeline" id="line-4781"><code>**</code></span>
<span class="codeline" id="line-4782"><code>** ^If the SQL statement being executed returns any data, then [SQLITE_ROW]</code></span>
<span class="codeline" id="line-4783"><code>** is returned each time a new row of data is ready for processing by the</code></span>
<span class="codeline" id="line-4784"><code>** caller. The values may be accessed using the [column access functions].</code></span>
<span class="codeline" id="line-4785"><code>** sqlite3_step() is called again to retrieve the next row of data.</code></span>
<span class="codeline" id="line-4786"><code>**</code></span>
<span class="codeline" id="line-4787"><code>** ^[SQLITE_ERROR] means that a run-time error (such as a constraint</code></span>
<span class="codeline" id="line-4788"><code>** violation) has occurred.  sqlite3_step() should not be called again on</code></span>
<span class="codeline" id="line-4789"><code>** the VM. More information may be found by calling [sqlite3_errmsg()].</code></span>
<span class="codeline" id="line-4790"><code>** ^With the legacy interface, a more specific error code (for example,</code></span>
<span class="codeline" id="line-4791"><code>** [SQLITE_INTERRUPT], [SQLITE_SCHEMA], [SQLITE_CORRUPT], and so forth)</code></span>
<span class="codeline" id="line-4792"><code>** can be obtained by calling [sqlite3_reset()] on the</code></span>
<span class="codeline" id="line-4793"><code>** [prepared statement].  ^In the "v2" interface,</code></span>
<span class="codeline" id="line-4794"><code>** the more specific error code is returned directly by sqlite3_step().</code></span>
<span class="codeline" id="line-4795"><code>**</code></span>
<span class="codeline" id="line-4796"><code>** [SQLITE_MISUSE] means that the this routine was called inappropriately.</code></span>
<span class="codeline" id="line-4797"><code>** Perhaps it was called on a [prepared statement] that has</code></span>
<span class="codeline" id="line-4798"><code>** already been [sqlite3_finalize | finalized] or on one that had</code></span>
<span class="codeline" id="line-4799"><code>** previously returned [SQLITE_ERROR] or [SQLITE_DONE].  Or it could</code></span>
<span class="codeline" id="line-4800"><code>** be the case that the same database connection is being used by two or</code></span>
<span class="codeline" id="line-4801"><code>** more threads at the same moment in time.</code></span>
<span class="codeline" id="line-4802"><code>**</code></span>
<span class="codeline" id="line-4803"><code>** For all versions of SQLite up to and including 3.6.23.1, a call to</code></span>
<span class="codeline" id="line-4804"><code>** [sqlite3_reset()] was required after sqlite3_step() returned anything</code></span>
<span class="codeline" id="line-4805"><code>** other than [SQLITE_ROW] before any subsequent invocation of</code></span>
<span class="codeline" id="line-4806"><code>** sqlite3_step().  Failure to reset the prepared statement using</code></span>
<span class="codeline" id="line-4807"><code>** [sqlite3_reset()] would result in an [SQLITE_MISUSE] return from</code></span>
<span class="codeline" id="line-4808"><code>** sqlite3_step().  But after [version 3.6.23.1] ([dateof:3.6.23.1],</code></span>
<span class="codeline" id="line-4809"><code>** sqlite3_step() began</code></span>
<span class="codeline" id="line-4810"><code>** calling [sqlite3_reset()] automatically in this circumstance rather</code></span>
<span class="codeline" id="line-4811"><code>** than returning [SQLITE_MISUSE].  This is not considered a compatibility</code></span>
<span class="codeline" id="line-4812"><code>** break because any application that ever receives an SQLITE_MISUSE error</code></span>
<span class="codeline" id="line-4813"><code>** is broken by definition.  The [SQLITE_OMIT_AUTORESET] compile-time option</code></span>
<span class="codeline" id="line-4814"><code>** can be used to restore the legacy behavior.</code></span>
<span class="codeline" id="line-4815"><code>**</code></span>
<span class="codeline" id="line-4816"><code>** &lt;b&gt;Goofy Interface Alert:&lt;/b&gt; In the legacy interface, the sqlite3_step()</code></span>
<span class="codeline" id="line-4817"><code>** API always returns a generic error code, [SQLITE_ERROR], following any</code></span>
<span class="codeline" id="line-4818"><code>** error other than [SQLITE_BUSY] and [SQLITE_MISUSE].  You must call</code></span>
<span class="codeline" id="line-4819"><code>** [sqlite3_reset()] or [sqlite3_finalize()] in order to find one of the</code></span>
<span class="codeline" id="line-4820"><code>** specific [error codes] that better describes the error.</code></span>
<span class="codeline" id="line-4821"><code>** We admit that this is a goofy design.  The problem has been fixed</code></span>
<span class="codeline" id="line-4822"><code>** with the "v2" interface.  If you prepare all of your SQL statements</code></span>
<span class="codeline" id="line-4823"><code>** using [sqlite3_prepare_v3()] or [sqlite3_prepare_v2()]</code></span>
<span class="codeline" id="line-4824"><code>** or [sqlite3_prepare16_v2()] or [sqlite3_prepare16_v3()] instead</code></span>
<span class="codeline" id="line-4825"><code>** of the legacy [sqlite3_prepare()] and [sqlite3_prepare16()] interfaces,</code></span>
<span class="codeline" id="line-4826"><code>** then the more specific [error codes] are returned directly</code></span>
<span class="codeline" id="line-4827"><code>** by sqlite3_step().  The use of the "vX" interfaces is recommended.</code></span>
<span class="codeline" id="line-4828"><code>*/</code></span>
<span class="codeline" id="line-4829"><code>SQLITE_API int sqlite3_step(sqlite3_stmt*);</code></span>
<span class="codeline" id="line-4830"><code></code></span>
<span class="codeline" id="line-4831"><code>/*</code></span>
<span class="codeline" id="line-4832"><code>** CAPI3REF: Number of columns in a result set</code></span>
<span class="codeline" id="line-4833"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4834"><code>**</code></span>
<span class="codeline" id="line-4835"><code>** ^The sqlite3_data_count(P) interface returns the number of columns in the</code></span>
<span class="codeline" id="line-4836"><code>** current row of the result set of [prepared statement] P.</code></span>
<span class="codeline" id="line-4837"><code>** ^If prepared statement P does not have results ready to return</code></span>
<span class="codeline" id="line-4838"><code>** (via calls to the [sqlite3_column_int | sqlite3_column()] family of</code></span>
<span class="codeline" id="line-4839"><code>** interfaces) then sqlite3_data_count(P) returns 0.</code></span>
<span class="codeline" id="line-4840"><code>** ^The sqlite3_data_count(P) routine also returns 0 if P is a NULL pointer.</code></span>
<span class="codeline" id="line-4841"><code>** ^The sqlite3_data_count(P) routine returns 0 if the previous call to</code></span>
<span class="codeline" id="line-4842"><code>** [sqlite3_step](P) returned [SQLITE_DONE].  ^The sqlite3_data_count(P)</code></span>
<span class="codeline" id="line-4843"><code>** will return non-zero if previous call to [sqlite3_step](P) returned</code></span>
<span class="codeline" id="line-4844"><code>** [SQLITE_ROW], except in the case of the [PRAGMA incremental_vacuum]</code></span>
<span class="codeline" id="line-4845"><code>** where it always returns zero since each step of that multi-step</code></span>
<span class="codeline" id="line-4846"><code>** pragma returns 0 columns of data.</code></span>
<span class="codeline" id="line-4847"><code>**</code></span>
<span class="codeline" id="line-4848"><code>** See also: [sqlite3_column_count()]</code></span>
<span class="codeline" id="line-4849"><code>*/</code></span>
<span class="codeline" id="line-4850"><code>SQLITE_API int sqlite3_data_count(sqlite3_stmt *pStmt);</code></span>
<span class="codeline" id="line-4851"><code></code></span>
<span class="codeline" id="line-4852"><code>/*</code></span>
<span class="codeline" id="line-4853"><code>** CAPI3REF: Fundamental Datatypes</code></span>
<span class="codeline" id="line-4854"><code>** KEYWORDS: SQLITE_TEXT</code></span>
<span class="codeline" id="line-4855"><code>**</code></span>
<span class="codeline" id="line-4856"><code>** ^(Every value in SQLite has one of five fundamental datatypes:</code></span>
<span class="codeline" id="line-4857"><code>**</code></span>
<span class="codeline" id="line-4858"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-4859"><code>** &lt;li&gt; 64-bit signed integer</code></span>
<span class="codeline" id="line-4860"><code>** &lt;li&gt; 64-bit IEEE floating point number</code></span>
<span class="codeline" id="line-4861"><code>** &lt;li&gt; string</code></span>
<span class="codeline" id="line-4862"><code>** &lt;li&gt; BLOB</code></span>
<span class="codeline" id="line-4863"><code>** &lt;li&gt; NULL</code></span>
<span class="codeline" id="line-4864"><code>** &lt;/ul&gt;)^</code></span>
<span class="codeline" id="line-4865"><code>**</code></span>
<span class="codeline" id="line-4866"><code>** These constants are codes for each of those types.</code></span>
<span class="codeline" id="line-4867"><code>**</code></span>
<span class="codeline" id="line-4868"><code>** Note that the SQLITE_TEXT constant was also used in SQLite version 2</code></span>
<span class="codeline" id="line-4869"><code>** for a completely different meaning.  Software that links against both</code></span>
<span class="codeline" id="line-4870"><code>** SQLite version 2 and SQLite version 3 should use SQLITE3_TEXT, not</code></span>
<span class="codeline" id="line-4871"><code>** SQLITE_TEXT.</code></span>
<span class="codeline" id="line-4872"><code>*/</code></span>
<span class="codeline" id="line-4873"><code>#define SQLITE_INTEGER  1</code></span>
<span class="codeline" id="line-4874"><code>#define SQLITE_FLOAT    2</code></span>
<span class="codeline" id="line-4875"><code>#define SQLITE_BLOB     4</code></span>
<span class="codeline" id="line-4876"><code>#define SQLITE_NULL     5</code></span>
<span class="codeline" id="line-4877"><code>#ifdef SQLITE_TEXT</code></span>
<span class="codeline" id="line-4878"><code># undef SQLITE_TEXT</code></span>
<span class="codeline" id="line-4879"><code>#else</code></span>
<span class="codeline" id="line-4880"><code># define SQLITE_TEXT     3</code></span>
<span class="codeline" id="line-4881"><code>#endif</code></span>
<span class="codeline" id="line-4882"><code>#define SQLITE3_TEXT     3</code></span>
<span class="codeline" id="line-4883"><code></code></span>
<span class="codeline" id="line-4884"><code>/*</code></span>
<span class="codeline" id="line-4885"><code>** CAPI3REF: Result Values From A Query</code></span>
<span class="codeline" id="line-4886"><code>** KEYWORDS: {column access functions}</code></span>
<span class="codeline" id="line-4887"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-4888"><code>**</code></span>
<span class="codeline" id="line-4889"><code>** &lt;b&gt;Summary:&lt;/b&gt;</code></span>
<span class="codeline" id="line-4890"><code>** &lt;blockquote&gt;&lt;table border=0 cellpadding=0 cellspacing=0&gt;</code></span>
<span class="codeline" id="line-4891"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_column_blob&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;BLOB result</code></span>
<span class="codeline" id="line-4892"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_column_double&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;REAL result</code></span>
<span class="codeline" id="line-4893"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_column_int&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;32-bit INTEGER result</code></span>
<span class="codeline" id="line-4894"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_column_int64&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;64-bit INTEGER result</code></span>
<span class="codeline" id="line-4895"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_column_text&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;UTF-8 TEXT result</code></span>
<span class="codeline" id="line-4896"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_column_text16&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;UTF-16 TEXT result</code></span>
<span class="codeline" id="line-4897"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_column_value&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;The result as an</code></span>
<span class="codeline" id="line-4898"><code>** [sqlite3_value|unprotected sqlite3_value] object.</code></span>
<span class="codeline" id="line-4899"><code>** &lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;td&gt;&amp;nbsp;&lt;td&gt;&amp;nbsp;</code></span>
<span class="codeline" id="line-4900"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_column_bytes&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;Size of a BLOB</code></span>
<span class="codeline" id="line-4901"><code>** or a UTF-8 TEXT result in bytes</code></span>
<span class="codeline" id="line-4902"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_column_bytes16&amp;nbsp;&amp;nbsp;&lt;/b&gt;</code></span>
<span class="codeline" id="line-4903"><code>** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;Size of UTF-16</code></span>
<span class="codeline" id="line-4904"><code>** TEXT in bytes</code></span>
<span class="codeline" id="line-4905"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_column_type&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;Default</code></span>
<span class="codeline" id="line-4906"><code>** datatype of the result</code></span>
<span class="codeline" id="line-4907"><code>** &lt;/table&gt;&lt;/blockquote&gt;</code></span>
<span class="codeline" id="line-4908"><code>**</code></span>
<span class="codeline" id="line-4909"><code>** &lt;b&gt;Details:&lt;/b&gt;</code></span>
<span class="codeline" id="line-4910"><code>**</code></span>
<span class="codeline" id="line-4911"><code>** ^These routines return information about a single column of the current</code></span>
<span class="codeline" id="line-4912"><code>** result row of a query.  ^In every case the first argument is a pointer</code></span>
<span class="codeline" id="line-4913"><code>** to the [prepared statement] that is being evaluated (the [sqlite3_stmt*]</code></span>
<span class="codeline" id="line-4914"><code>** that was returned from [sqlite3_prepare_v2()] or one of its variants)</code></span>
<span class="codeline" id="line-4915"><code>** and the second argument is the index of the column for which information</code></span>
<span class="codeline" id="line-4916"><code>** should be returned. ^The leftmost column of the result set has the index 0.</code></span>
<span class="codeline" id="line-4917"><code>** ^The number of columns in the result can be determined using</code></span>
<span class="codeline" id="line-4918"><code>** [sqlite3_column_count()].</code></span>
<span class="codeline" id="line-4919"><code>**</code></span>
<span class="codeline" id="line-4920"><code>** If the SQL statement does not currently point to a valid row, or if the</code></span>
<span class="codeline" id="line-4921"><code>** column index is out of range, the result is undefined.</code></span>
<span class="codeline" id="line-4922"><code>** These routines may only be called when the most recent call to</code></span>
<span class="codeline" id="line-4923"><code>** [sqlite3_step()] has returned [SQLITE_ROW] and neither</code></span>
<span class="codeline" id="line-4924"><code>** [sqlite3_reset()] nor [sqlite3_finalize()] have been called subsequently.</code></span>
<span class="codeline" id="line-4925"><code>** If any of these routines are called after [sqlite3_reset()] or</code></span>
<span class="codeline" id="line-4926"><code>** [sqlite3_finalize()] or after [sqlite3_step()] has returned</code></span>
<span class="codeline" id="line-4927"><code>** something other than [SQLITE_ROW], the results are undefined.</code></span>
<span class="codeline" id="line-4928"><code>** If [sqlite3_step()] or [sqlite3_reset()] or [sqlite3_finalize()]</code></span>
<span class="codeline" id="line-4929"><code>** are called from a different thread while any of these routines</code></span>
<span class="codeline" id="line-4930"><code>** are pending, then the results are undefined.</code></span>
<span class="codeline" id="line-4931"><code>**</code></span>
<span class="codeline" id="line-4932"><code>** The first six interfaces (_blob, _double, _int, _int64, _text, and _text16)</code></span>
<span class="codeline" id="line-4933"><code>** each return the value of a result column in a specific data format.  If</code></span>
<span class="codeline" id="line-4934"><code>** the result column is not initially in the requested format (for example,</code></span>
<span class="codeline" id="line-4935"><code>** if the query returns an integer but the sqlite3_column_text() interface</code></span>
<span class="codeline" id="line-4936"><code>** is used to extract the value) then an automatic type conversion is performed.</code></span>
<span class="codeline" id="line-4937"><code>**</code></span>
<span class="codeline" id="line-4938"><code>** ^The sqlite3_column_type() routine returns the</code></span>
<span class="codeline" id="line-4939"><code>** [SQLITE_INTEGER | datatype code] for the initial data type</code></span>
<span class="codeline" id="line-4940"><code>** of the result column.  ^The returned value is one of [SQLITE_INTEGER],</code></span>
<span class="codeline" id="line-4941"><code>** [SQLITE_FLOAT], [SQLITE_TEXT], [SQLITE_BLOB], or [SQLITE_NULL].</code></span>
<span class="codeline" id="line-4942"><code>** The return value of sqlite3_column_type() can be used to decide which</code></span>
<span class="codeline" id="line-4943"><code>** of the first six interface should be used to extract the column value.</code></span>
<span class="codeline" id="line-4944"><code>** The value returned by sqlite3_column_type() is only meaningful if no</code></span>
<span class="codeline" id="line-4945"><code>** automatic type conversions have occurred for the value in question.</code></span>
<span class="codeline" id="line-4946"><code>** After a type conversion, the result of calling sqlite3_column_type()</code></span>
<span class="codeline" id="line-4947"><code>** is undefined, though harmless.  Future</code></span>
<span class="codeline" id="line-4948"><code>** versions of SQLite may change the behavior of sqlite3_column_type()</code></span>
<span class="codeline" id="line-4949"><code>** following a type conversion.</code></span>
<span class="codeline" id="line-4950"><code>**</code></span>
<span class="codeline" id="line-4951"><code>** If the result is a BLOB or a TEXT string, then the sqlite3_column_bytes()</code></span>
<span class="codeline" id="line-4952"><code>** or sqlite3_column_bytes16() interfaces can be used to determine the size</code></span>
<span class="codeline" id="line-4953"><code>** of that BLOB or string.</code></span>
<span class="codeline" id="line-4954"><code>**</code></span>
<span class="codeline" id="line-4955"><code>** ^If the result is a BLOB or UTF-8 string then the sqlite3_column_bytes()</code></span>
<span class="codeline" id="line-4956"><code>** routine returns the number of bytes in that BLOB or string.</code></span>
<span class="codeline" id="line-4957"><code>** ^If the result is a UTF-16 string, then sqlite3_column_bytes() converts</code></span>
<span class="codeline" id="line-4958"><code>** the string to UTF-8 and then returns the number of bytes.</code></span>
<span class="codeline" id="line-4959"><code>** ^If the result is a numeric value then sqlite3_column_bytes() uses</code></span>
<span class="codeline" id="line-4960"><code>** [sqlite3_snprintf()] to convert that value to a UTF-8 string and returns</code></span>
<span class="codeline" id="line-4961"><code>** the number of bytes in that string.</code></span>
<span class="codeline" id="line-4962"><code>** ^If the result is NULL, then sqlite3_column_bytes() returns zero.</code></span>
<span class="codeline" id="line-4963"><code>**</code></span>
<span class="codeline" id="line-4964"><code>** ^If the result is a BLOB or UTF-16 string then the sqlite3_column_bytes16()</code></span>
<span class="codeline" id="line-4965"><code>** routine returns the number of bytes in that BLOB or string.</code></span>
<span class="codeline" id="line-4966"><code>** ^If the result is a UTF-8 string, then sqlite3_column_bytes16() converts</code></span>
<span class="codeline" id="line-4967"><code>** the string to UTF-16 and then returns the number of bytes.</code></span>
<span class="codeline" id="line-4968"><code>** ^If the result is a numeric value then sqlite3_column_bytes16() uses</code></span>
<span class="codeline" id="line-4969"><code>** [sqlite3_snprintf()] to convert that value to a UTF-16 string and returns</code></span>
<span class="codeline" id="line-4970"><code>** the number of bytes in that string.</code></span>
<span class="codeline" id="line-4971"><code>** ^If the result is NULL, then sqlite3_column_bytes16() returns zero.</code></span>
<span class="codeline" id="line-4972"><code>**</code></span>
<span class="codeline" id="line-4973"><code>** ^The values returned by [sqlite3_column_bytes()] and</code></span>
<span class="codeline" id="line-4974"><code>** [sqlite3_column_bytes16()] do not include the zero terminators at the end</code></span>
<span class="codeline" id="line-4975"><code>** of the string.  ^For clarity: the values returned by</code></span>
<span class="codeline" id="line-4976"><code>** [sqlite3_column_bytes()] and [sqlite3_column_bytes16()] are the number of</code></span>
<span class="codeline" id="line-4977"><code>** bytes in the string, not the number of characters.</code></span>
<span class="codeline" id="line-4978"><code>**</code></span>
<span class="codeline" id="line-4979"><code>** ^Strings returned by sqlite3_column_text() and sqlite3_column_text16(),</code></span>
<span class="codeline" id="line-4980"><code>** even empty strings, are always zero-terminated.  ^The return</code></span>
<span class="codeline" id="line-4981"><code>** value from sqlite3_column_blob() for a zero-length BLOB is a NULL pointer.</code></span>
<span class="codeline" id="line-4982"><code>**</code></span>
<span class="codeline" id="line-4983"><code>** ^Strings returned by sqlite3_column_text16() always have the endianness</code></span>
<span class="codeline" id="line-4984"><code>** which is native to the platform, regardless of the text encoding set</code></span>
<span class="codeline" id="line-4985"><code>** for the database.</code></span>
<span class="codeline" id="line-4986"><code>**</code></span>
<span class="codeline" id="line-4987"><code>** &lt;b&gt;Warning:&lt;/b&gt; ^The object returned by [sqlite3_column_value()] is an</code></span>
<span class="codeline" id="line-4988"><code>** [unprotected sqlite3_value] object.  In a multithreaded environment,</code></span>
<span class="codeline" id="line-4989"><code>** an unprotected sqlite3_value object may only be used safely with</code></span>
<span class="codeline" id="line-4990"><code>** [sqlite3_bind_value()] and [sqlite3_result_value()].</code></span>
<span class="codeline" id="line-4991"><code>** If the [unprotected sqlite3_value] object returned by</code></span>
<span class="codeline" id="line-4992"><code>** [sqlite3_column_value()] is used in any other way, including calls</code></span>
<span class="codeline" id="line-4993"><code>** to routines like [sqlite3_value_int()], [sqlite3_value_text()],</code></span>
<span class="codeline" id="line-4994"><code>** or [sqlite3_value_bytes()], the behavior is not threadsafe.</code></span>
<span class="codeline" id="line-4995"><code>** Hence, the sqlite3_column_value() interface</code></span>
<span class="codeline" id="line-4996"><code>** is normally only useful within the implementation of</code></span>
<span class="codeline" id="line-4997"><code>** [application-defined SQL functions] or [virtual tables], not within</code></span>
<span class="codeline" id="line-4998"><code>** top-level application code.</code></span>
<span class="codeline" id="line-4999"><code>**</code></span>
<span class="codeline" id="line-5000"><code>** These routines may attempt to convert the datatype of the result.</code></span>
<span class="codeline" id="line-5001"><code>** ^For example, if the internal representation is FLOAT and a text result</code></span>
<span class="codeline" id="line-5002"><code>** is requested, [sqlite3_snprintf()] is used internally to perform the</code></span>
<span class="codeline" id="line-5003"><code>** conversion automatically.  ^(The following table details the conversions</code></span>
<span class="codeline" id="line-5004"><code>** that are applied:</code></span>
<span class="codeline" id="line-5005"><code>**</code></span>
<span class="codeline" id="line-5006"><code>** &lt;blockquote&gt;</code></span>
<span class="codeline" id="line-5007"><code>** &lt;table border="1"&gt;</code></span>
<span class="codeline" id="line-5008"><code>** &lt;tr&gt;&lt;th&gt; Internal&lt;br&gt;Type &lt;th&gt; Requested&lt;br&gt;Type &lt;th&gt;  Conversion</code></span>
<span class="codeline" id="line-5009"><code>**</code></span>
<span class="codeline" id="line-5010"><code>** &lt;tr&gt;&lt;td&gt;  NULL    &lt;td&gt; INTEGER   &lt;td&gt; Result is 0</code></span>
<span class="codeline" id="line-5011"><code>** &lt;tr&gt;&lt;td&gt;  NULL    &lt;td&gt;  FLOAT    &lt;td&gt; Result is 0.0</code></span>
<span class="codeline" id="line-5012"><code>** &lt;tr&gt;&lt;td&gt;  NULL    &lt;td&gt;   TEXT    &lt;td&gt; Result is a NULL pointer</code></span>
<span class="codeline" id="line-5013"><code>** &lt;tr&gt;&lt;td&gt;  NULL    &lt;td&gt;   BLOB    &lt;td&gt; Result is a NULL pointer</code></span>
<span class="codeline" id="line-5014"><code>** &lt;tr&gt;&lt;td&gt; INTEGER  &lt;td&gt;  FLOAT    &lt;td&gt; Convert from integer to float</code></span>
<span class="codeline" id="line-5015"><code>** &lt;tr&gt;&lt;td&gt; INTEGER  &lt;td&gt;   TEXT    &lt;td&gt; ASCII rendering of the integer</code></span>
<span class="codeline" id="line-5016"><code>** &lt;tr&gt;&lt;td&gt; INTEGER  &lt;td&gt;   BLOB    &lt;td&gt; Same as INTEGER-&gt;TEXT</code></span>
<span class="codeline" id="line-5017"><code>** &lt;tr&gt;&lt;td&gt;  FLOAT   &lt;td&gt; INTEGER   &lt;td&gt; [CAST] to INTEGER</code></span>
<span class="codeline" id="line-5018"><code>** &lt;tr&gt;&lt;td&gt;  FLOAT   &lt;td&gt;   TEXT    &lt;td&gt; ASCII rendering of the float</code></span>
<span class="codeline" id="line-5019"><code>** &lt;tr&gt;&lt;td&gt;  FLOAT   &lt;td&gt;   BLOB    &lt;td&gt; [CAST] to BLOB</code></span>
<span class="codeline" id="line-5020"><code>** &lt;tr&gt;&lt;td&gt;  TEXT    &lt;td&gt; INTEGER   &lt;td&gt; [CAST] to INTEGER</code></span>
<span class="codeline" id="line-5021"><code>** &lt;tr&gt;&lt;td&gt;  TEXT    &lt;td&gt;  FLOAT    &lt;td&gt; [CAST] to REAL</code></span>
<span class="codeline" id="line-5022"><code>** &lt;tr&gt;&lt;td&gt;  TEXT    &lt;td&gt;   BLOB    &lt;td&gt; No change</code></span>
<span class="codeline" id="line-5023"><code>** &lt;tr&gt;&lt;td&gt;  BLOB    &lt;td&gt; INTEGER   &lt;td&gt; [CAST] to INTEGER</code></span>
<span class="codeline" id="line-5024"><code>** &lt;tr&gt;&lt;td&gt;  BLOB    &lt;td&gt;  FLOAT    &lt;td&gt; [CAST] to REAL</code></span>
<span class="codeline" id="line-5025"><code>** &lt;tr&gt;&lt;td&gt;  BLOB    &lt;td&gt;   TEXT    &lt;td&gt; [CAST] to TEXT, ensure zero terminator</code></span>
<span class="codeline" id="line-5026"><code>** &lt;/table&gt;</code></span>
<span class="codeline" id="line-5027"><code>** &lt;/blockquote&gt;)^</code></span>
<span class="codeline" id="line-5028"><code>**</code></span>
<span class="codeline" id="line-5029"><code>** Note that when type conversions occur, pointers returned by prior</code></span>
<span class="codeline" id="line-5030"><code>** calls to sqlite3_column_blob(), sqlite3_column_text(), and/or</code></span>
<span class="codeline" id="line-5031"><code>** sqlite3_column_text16() may be invalidated.</code></span>
<span class="codeline" id="line-5032"><code>** Type conversions and pointer invalidations might occur</code></span>
<span class="codeline" id="line-5033"><code>** in the following cases:</code></span>
<span class="codeline" id="line-5034"><code>**</code></span>
<span class="codeline" id="line-5035"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-5036"><code>** &lt;li&gt; The initial content is a BLOB and sqlite3_column_text() or</code></span>
<span class="codeline" id="line-5037"><code>**      sqlite3_column_text16() is called.  A zero-terminator might</code></span>
<span class="codeline" id="line-5038"><code>**      need to be added to the string.&lt;/li&gt;</code></span>
<span class="codeline" id="line-5039"><code>** &lt;li&gt; The initial content is UTF-8 text and sqlite3_column_bytes16() or</code></span>
<span class="codeline" id="line-5040"><code>**      sqlite3_column_text16() is called.  The content must be converted</code></span>
<span class="codeline" id="line-5041"><code>**      to UTF-16.&lt;/li&gt;</code></span>
<span class="codeline" id="line-5042"><code>** &lt;li&gt; The initial content is UTF-16 text and sqlite3_column_bytes() or</code></span>
<span class="codeline" id="line-5043"><code>**      sqlite3_column_text() is called.  The content must be converted</code></span>
<span class="codeline" id="line-5044"><code>**      to UTF-8.&lt;/li&gt;</code></span>
<span class="codeline" id="line-5045"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-5046"><code>**</code></span>
<span class="codeline" id="line-5047"><code>** ^Conversions between UTF-16be and UTF-16le are always done in place and do</code></span>
<span class="codeline" id="line-5048"><code>** not invalidate a prior pointer, though of course the content of the buffer</code></span>
<span class="codeline" id="line-5049"><code>** that the prior pointer references will have been modified.  Other kinds</code></span>
<span class="codeline" id="line-5050"><code>** of conversion are done in place when it is possible, but sometimes they</code></span>
<span class="codeline" id="line-5051"><code>** are not possible and in those cases prior pointers are invalidated.</code></span>
<span class="codeline" id="line-5052"><code>**</code></span>
<span class="codeline" id="line-5053"><code>** The safest policy is to invoke these routines</code></span>
<span class="codeline" id="line-5054"><code>** in one of the following ways:</code></span>
<span class="codeline" id="line-5055"><code>**</code></span>
<span class="codeline" id="line-5056"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-5057"><code>**  &lt;li&gt;sqlite3_column_text() followed by sqlite3_column_bytes()&lt;/li&gt;</code></span>
<span class="codeline" id="line-5058"><code>**  &lt;li&gt;sqlite3_column_blob() followed by sqlite3_column_bytes()&lt;/li&gt;</code></span>
<span class="codeline" id="line-5059"><code>**  &lt;li&gt;sqlite3_column_text16() followed by sqlite3_column_bytes16()&lt;/li&gt;</code></span>
<span class="codeline" id="line-5060"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-5061"><code>**</code></span>
<span class="codeline" id="line-5062"><code>** In other words, you should call sqlite3_column_text(),</code></span>
<span class="codeline" id="line-5063"><code>** sqlite3_column_blob(), or sqlite3_column_text16() first to force the result</code></span>
<span class="codeline" id="line-5064"><code>** into the desired format, then invoke sqlite3_column_bytes() or</code></span>
<span class="codeline" id="line-5065"><code>** sqlite3_column_bytes16() to find the size of the result.  Do not mix calls</code></span>
<span class="codeline" id="line-5066"><code>** to sqlite3_column_text() or sqlite3_column_blob() with calls to</code></span>
<span class="codeline" id="line-5067"><code>** sqlite3_column_bytes16(), and do not mix calls to sqlite3_column_text16()</code></span>
<span class="codeline" id="line-5068"><code>** with calls to sqlite3_column_bytes().</code></span>
<span class="codeline" id="line-5069"><code>**</code></span>
<span class="codeline" id="line-5070"><code>** ^The pointers returned are valid until a type conversion occurs as</code></span>
<span class="codeline" id="line-5071"><code>** described above, or until [sqlite3_step()] or [sqlite3_reset()] or</code></span>
<span class="codeline" id="line-5072"><code>** [sqlite3_finalize()] is called.  ^The memory space used to hold strings</code></span>
<span class="codeline" id="line-5073"><code>** and BLOBs is freed automatically.  Do not pass the pointers returned</code></span>
<span class="codeline" id="line-5074"><code>** from [sqlite3_column_blob()], [sqlite3_column_text()], etc. into</code></span>
<span class="codeline" id="line-5075"><code>** [sqlite3_free()].</code></span>
<span class="codeline" id="line-5076"><code>**</code></span>
<span class="codeline" id="line-5077"><code>** As long as the input parameters are correct, these routines will only</code></span>
<span class="codeline" id="line-5078"><code>** fail if an out-of-memory error occurs during a format conversion.</code></span>
<span class="codeline" id="line-5079"><code>** Only the following subset of interfaces are subject to out-of-memory</code></span>
<span class="codeline" id="line-5080"><code>** errors:</code></span>
<span class="codeline" id="line-5081"><code>**</code></span>
<span class="codeline" id="line-5082"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-5083"><code>** &lt;li&gt; sqlite3_column_blob()</code></span>
<span class="codeline" id="line-5084"><code>** &lt;li&gt; sqlite3_column_text()</code></span>
<span class="codeline" id="line-5085"><code>** &lt;li&gt; sqlite3_column_text16()</code></span>
<span class="codeline" id="line-5086"><code>** &lt;li&gt; sqlite3_column_bytes()</code></span>
<span class="codeline" id="line-5087"><code>** &lt;li&gt; sqlite3_column_bytes16()</code></span>
<span class="codeline" id="line-5088"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-5089"><code>**</code></span>
<span class="codeline" id="line-5090"><code>** If an out-of-memory error occurs, then the return value from these</code></span>
<span class="codeline" id="line-5091"><code>** routines is the same as if the column had contained an SQL NULL value.</code></span>
<span class="codeline" id="line-5092"><code>** Valid SQL NULL returns can be distinguished from out-of-memory errors</code></span>
<span class="codeline" id="line-5093"><code>** by invoking the [sqlite3_errcode()] immediately after the suspect</code></span>
<span class="codeline" id="line-5094"><code>** return value is obtained and before any</code></span>
<span class="codeline" id="line-5095"><code>** other SQLite interface is called on the same [database connection].</code></span>
<span class="codeline" id="line-5096"><code>*/</code></span>
<span class="codeline" id="line-5097"><code>SQLITE_API const void *sqlite3_column_blob(sqlite3_stmt*, int iCol);</code></span>
<span class="codeline" id="line-5098"><code>SQLITE_API double sqlite3_column_double(sqlite3_stmt*, int iCol);</code></span>
<span class="codeline" id="line-5099"><code>SQLITE_API int sqlite3_column_int(sqlite3_stmt*, int iCol);</code></span>
<span class="codeline" id="line-5100"><code>SQLITE_API sqlite3_int64 sqlite3_column_int64(sqlite3_stmt*, int iCol);</code></span>
<span class="codeline" id="line-5101"><code>SQLITE_API const unsigned char *sqlite3_column_text(sqlite3_stmt*, int iCol);</code></span>
<span class="codeline" id="line-5102"><code>SQLITE_API const void *sqlite3_column_text16(sqlite3_stmt*, int iCol);</code></span>
<span class="codeline" id="line-5103"><code>SQLITE_API sqlite3_value *sqlite3_column_value(sqlite3_stmt*, int iCol);</code></span>
<span class="codeline" id="line-5104"><code>SQLITE_API int sqlite3_column_bytes(sqlite3_stmt*, int iCol);</code></span>
<span class="codeline" id="line-5105"><code>SQLITE_API int sqlite3_column_bytes16(sqlite3_stmt*, int iCol);</code></span>
<span class="codeline" id="line-5106"><code>SQLITE_API int sqlite3_column_type(sqlite3_stmt*, int iCol);</code></span>
<span class="codeline" id="line-5107"><code></code></span>
<span class="codeline" id="line-5108"><code>/*</code></span>
<span class="codeline" id="line-5109"><code>** CAPI3REF: Destroy A Prepared Statement Object</code></span>
<span class="codeline" id="line-5110"><code>** DESTRUCTOR: sqlite3_stmt</code></span>
<span class="codeline" id="line-5111"><code>**</code></span>
<span class="codeline" id="line-5112"><code>** ^The sqlite3_finalize() function is called to delete a [prepared statement].</code></span>
<span class="codeline" id="line-5113"><code>** ^If the most recent evaluation of the statement encountered no errors</code></span>
<span class="codeline" id="line-5114"><code>** or if the statement is never been evaluated, then sqlite3_finalize() returns</code></span>
<span class="codeline" id="line-5115"><code>** SQLITE_OK.  ^If the most recent evaluation of statement S failed, then</code></span>
<span class="codeline" id="line-5116"><code>** sqlite3_finalize(S) returns the appropriate [error code] or</code></span>
<span class="codeline" id="line-5117"><code>** [extended error code].</code></span>
<span class="codeline" id="line-5118"><code>**</code></span>
<span class="codeline" id="line-5119"><code>** ^The sqlite3_finalize(S) routine can be called at any point during</code></span>
<span class="codeline" id="line-5120"><code>** the life cycle of [prepared statement] S:</code></span>
<span class="codeline" id="line-5121"><code>** before statement S is ever evaluated, after</code></span>
<span class="codeline" id="line-5122"><code>** one or more calls to [sqlite3_reset()], or after any call</code></span>
<span class="codeline" id="line-5123"><code>** to [sqlite3_step()] regardless of whether or not the statement has</code></span>
<span class="codeline" id="line-5124"><code>** completed execution.</code></span>
<span class="codeline" id="line-5125"><code>**</code></span>
<span class="codeline" id="line-5126"><code>** ^Invoking sqlite3_finalize() on a NULL pointer is a harmless no-op.</code></span>
<span class="codeline" id="line-5127"><code>**</code></span>
<span class="codeline" id="line-5128"><code>** The application must finalize every [prepared statement] in order to avoid</code></span>
<span class="codeline" id="line-5129"><code>** resource leaks.  It is a grievous error for the application to try to use</code></span>
<span class="codeline" id="line-5130"><code>** a prepared statement after it has been finalized.  Any use of a prepared</code></span>
<span class="codeline" id="line-5131"><code>** statement after it has been finalized can result in undefined and</code></span>
<span class="codeline" id="line-5132"><code>** undesirable behavior such as segfaults and heap corruption.</code></span>
<span class="codeline" id="line-5133"><code>*/</code></span>
<span class="codeline" id="line-5134"><code>SQLITE_API int sqlite3_finalize(sqlite3_stmt *pStmt);</code></span>
<span class="codeline" id="line-5135"><code></code></span>
<span class="codeline" id="line-5136"><code>/*</code></span>
<span class="codeline" id="line-5137"><code>** CAPI3REF: Reset A Prepared Statement Object</code></span>
<span class="codeline" id="line-5138"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-5139"><code>**</code></span>
<span class="codeline" id="line-5140"><code>** The sqlite3_reset() function is called to reset a [prepared statement]</code></span>
<span class="codeline" id="line-5141"><code>** object back to its initial state, ready to be re-executed.</code></span>
<span class="codeline" id="line-5142"><code>** ^Any SQL statement variables that had values bound to them using</code></span>
<span class="codeline" id="line-5143"><code>** the [sqlite3_bind_blob | sqlite3_bind_*() API] retain their values.</code></span>
<span class="codeline" id="line-5144"><code>** Use [sqlite3_clear_bindings()] to reset the bindings.</code></span>
<span class="codeline" id="line-5145"><code>**</code></span>
<span class="codeline" id="line-5146"><code>** ^The [sqlite3_reset(S)] interface resets the [prepared statement] S</code></span>
<span class="codeline" id="line-5147"><code>** back to the beginning of its program.</code></span>
<span class="codeline" id="line-5148"><code>**</code></span>
<span class="codeline" id="line-5149"><code>** ^If the most recent call to [sqlite3_step(S)] for the</code></span>
<span class="codeline" id="line-5150"><code>** [prepared statement] S returned [SQLITE_ROW] or [SQLITE_DONE],</code></span>
<span class="codeline" id="line-5151"><code>** or if [sqlite3_step(S)] has never before been called on S,</code></span>
<span class="codeline" id="line-5152"><code>** then [sqlite3_reset(S)] returns [SQLITE_OK].</code></span>
<span class="codeline" id="line-5153"><code>**</code></span>
<span class="codeline" id="line-5154"><code>** ^If the most recent call to [sqlite3_step(S)] for the</code></span>
<span class="codeline" id="line-5155"><code>** [prepared statement] S indicated an error, then</code></span>
<span class="codeline" id="line-5156"><code>** [sqlite3_reset(S)] returns an appropriate [error code].</code></span>
<span class="codeline" id="line-5157"><code>**</code></span>
<span class="codeline" id="line-5158"><code>** ^The [sqlite3_reset(S)] interface does not change the values</code></span>
<span class="codeline" id="line-5159"><code>** of any [sqlite3_bind_blob|bindings] on the [prepared statement] S.</code></span>
<span class="codeline" id="line-5160"><code>*/</code></span>
<span class="codeline" id="line-5161"><code>SQLITE_API int sqlite3_reset(sqlite3_stmt *pStmt);</code></span>
<span class="codeline" id="line-5162"><code></code></span>
<span class="codeline" id="line-5163"><code>/*</code></span>
<span class="codeline" id="line-5164"><code>** CAPI3REF: Create Or Redefine SQL Functions</code></span>
<span class="codeline" id="line-5165"><code>** KEYWORDS: {function creation routines}</code></span>
<span class="codeline" id="line-5166"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-5167"><code>**</code></span>
<span class="codeline" id="line-5168"><code>** ^These functions (collectively known as "function creation routines")</code></span>
<span class="codeline" id="line-5169"><code>** are used to add SQL functions or aggregates or to redefine the behavior</code></span>
<span class="codeline" id="line-5170"><code>** of existing SQL functions or aggregates. The only differences between</code></span>
<span class="codeline" id="line-5171"><code>** the three "sqlite3_create_function*" routines are the text encoding</code></span>
<span class="codeline" id="line-5172"><code>** expected for the second parameter (the name of the function being</code></span>
<span class="codeline" id="line-5173"><code>** created) and the presence or absence of a destructor callback for</code></span>
<span class="codeline" id="line-5174"><code>** the application data pointer. Function sqlite3_create_window_function()</code></span>
<span class="codeline" id="line-5175"><code>** is similar, but allows the user to supply the extra callback functions</code></span>
<span class="codeline" id="line-5176"><code>** needed by [aggregate window functions].</code></span>
<span class="codeline" id="line-5177"><code>**</code></span>
<span class="codeline" id="line-5178"><code>** ^The first parameter is the [database connection] to which the SQL</code></span>
<span class="codeline" id="line-5179"><code>** function is to be added.  ^If an application uses more than one database</code></span>
<span class="codeline" id="line-5180"><code>** connection then application-defined SQL functions must be added</code></span>
<span class="codeline" id="line-5181"><code>** to each database connection separately.</code></span>
<span class="codeline" id="line-5182"><code>**</code></span>
<span class="codeline" id="line-5183"><code>** ^The second parameter is the name of the SQL function to be created or</code></span>
<span class="codeline" id="line-5184"><code>** redefined.  ^The length of the name is limited to 255 bytes in a UTF-8</code></span>
<span class="codeline" id="line-5185"><code>** representation, exclusive of the zero-terminator.  ^Note that the name</code></span>
<span class="codeline" id="line-5186"><code>** length limit is in UTF-8 bytes, not characters nor UTF-16 bytes.</code></span>
<span class="codeline" id="line-5187"><code>** ^Any attempt to create a function with a longer name</code></span>
<span class="codeline" id="line-5188"><code>** will result in [SQLITE_MISUSE] being returned.</code></span>
<span class="codeline" id="line-5189"><code>**</code></span>
<span class="codeline" id="line-5190"><code>** ^The third parameter (nArg)</code></span>
<span class="codeline" id="line-5191"><code>** is the number of arguments that the SQL function or</code></span>
<span class="codeline" id="line-5192"><code>** aggregate takes. ^If this parameter is -1, then the SQL function or</code></span>
<span class="codeline" id="line-5193"><code>** aggregate may take any number of arguments between 0 and the limit</code></span>
<span class="codeline" id="line-5194"><code>** set by [sqlite3_limit]([SQLITE_LIMIT_FUNCTION_ARG]).  If the third</code></span>
<span class="codeline" id="line-5195"><code>** parameter is less than -1 or greater than 127 then the behavior is</code></span>
<span class="codeline" id="line-5196"><code>** undefined.</code></span>
<span class="codeline" id="line-5197"><code>**</code></span>
<span class="codeline" id="line-5198"><code>** ^The fourth parameter, eTextRep, specifies what</code></span>
<span class="codeline" id="line-5199"><code>** [SQLITE_UTF8 | text encoding] this SQL function prefers for</code></span>
<span class="codeline" id="line-5200"><code>** its parameters.  The application should set this parameter to</code></span>
<span class="codeline" id="line-5201"><code>** [SQLITE_UTF16LE] if the function implementation invokes</code></span>
<span class="codeline" id="line-5202"><code>** [sqlite3_value_text16le()] on an input, or [SQLITE_UTF16BE] if the</code></span>
<span class="codeline" id="line-5203"><code>** implementation invokes [sqlite3_value_text16be()] on an input, or</code></span>
<span class="codeline" id="line-5204"><code>** [SQLITE_UTF16] if [sqlite3_value_text16()] is used, or [SQLITE_UTF8]</code></span>
<span class="codeline" id="line-5205"><code>** otherwise.  ^The same SQL function may be registered multiple times using</code></span>
<span class="codeline" id="line-5206"><code>** different preferred text encodings, with different implementations for</code></span>
<span class="codeline" id="line-5207"><code>** each encoding.</code></span>
<span class="codeline" id="line-5208"><code>** ^When multiple implementations of the same function are available, SQLite</code></span>
<span class="codeline" id="line-5209"><code>** will pick the one that involves the least amount of data conversion.</code></span>
<span class="codeline" id="line-5210"><code>**</code></span>
<span class="codeline" id="line-5211"><code>** ^The fourth parameter may optionally be ORed with [SQLITE_DETERMINISTIC]</code></span>
<span class="codeline" id="line-5212"><code>** to signal that the function will always return the same result given</code></span>
<span class="codeline" id="line-5213"><code>** the same inputs within a single SQL statement.  Most SQL functions are</code></span>
<span class="codeline" id="line-5214"><code>** deterministic.  The built-in [random()] SQL function is an example of a</code></span>
<span class="codeline" id="line-5215"><code>** function that is not deterministic.  The SQLite query planner is able to</code></span>
<span class="codeline" id="line-5216"><code>** perform additional optimizations on deterministic functions, so use</code></span>
<span class="codeline" id="line-5217"><code>** of the [SQLITE_DETERMINISTIC] flag is recommended where possible.</code></span>
<span class="codeline" id="line-5218"><code>**</code></span>
<span class="codeline" id="line-5219"><code>** ^The fourth parameter may also optionally include the [SQLITE_DIRECTONLY]</code></span>
<span class="codeline" id="line-5220"><code>** flag, which if present prevents the function from being invoked from</code></span>
<span class="codeline" id="line-5221"><code>** within VIEWs, TRIGGERs, CHECK constraints, generated column expressions,</code></span>
<span class="codeline" id="line-5222"><code>** index expressions, or the WHERE clause of partial indexes.</code></span>
<span class="codeline" id="line-5223"><code>**</code></span>
<span class="codeline" id="line-5224"><code>** For best security, the [SQLITE_DIRECTONLY] flag is recommended for</code></span>
<span class="codeline" id="line-5225"><code>** all application-defined SQL functions that do not need to be</code></span>
<span class="codeline" id="line-5226"><code>** used inside of triggers, view, CHECK constraints, or other elements of</code></span>
<span class="codeline" id="line-5227"><code>** the database schema.  This flags is especially recommended for SQL</code></span>
<span class="codeline" id="line-5228"><code>** functions that have side effects or reveal internal application state.</code></span>
<span class="codeline" id="line-5229"><code>** Without this flag, an attacker might be able to modify the schema of</code></span>
<span class="codeline" id="line-5230"><code>** a database file to include invocations of the function with parameters</code></span>
<span class="codeline" id="line-5231"><code>** chosen by the attacker, which the application will then execute when</code></span>
<span class="codeline" id="line-5232"><code>** the database file is opened and read.</code></span>
<span class="codeline" id="line-5233"><code>**</code></span>
<span class="codeline" id="line-5234"><code>** ^(The fifth parameter is an arbitrary pointer.  The implementation of the</code></span>
<span class="codeline" id="line-5235"><code>** function can gain access to this pointer using [sqlite3_user_data()].)^</code></span>
<span class="codeline" id="line-5236"><code>**</code></span>
<span class="codeline" id="line-5237"><code>** ^The sixth, seventh and eighth parameters passed to the three</code></span>
<span class="codeline" id="line-5238"><code>** "sqlite3_create_function*" functions, xFunc, xStep and xFinal, are</code></span>
<span class="codeline" id="line-5239"><code>** pointers to C-language functions that implement the SQL function or</code></span>
<span class="codeline" id="line-5240"><code>** aggregate. ^A scalar SQL function requires an implementation of the xFunc</code></span>
<span class="codeline" id="line-5241"><code>** callback only; NULL pointers must be passed as the xStep and xFinal</code></span>
<span class="codeline" id="line-5242"><code>** parameters. ^An aggregate SQL function requires an implementation of xStep</code></span>
<span class="codeline" id="line-5243"><code>** and xFinal and NULL pointer must be passed for xFunc. ^To delete an existing</code></span>
<span class="codeline" id="line-5244"><code>** SQL function or aggregate, pass NULL pointers for all three function</code></span>
<span class="codeline" id="line-5245"><code>** callbacks.</code></span>
<span class="codeline" id="line-5246"><code>**</code></span>
<span class="codeline" id="line-5247"><code>** ^The sixth, seventh, eighth and ninth parameters (xStep, xFinal, xValue</code></span>
<span class="codeline" id="line-5248"><code>** and xInverse) passed to sqlite3_create_window_function are pointers to</code></span>
<span class="codeline" id="line-5249"><code>** C-language callbacks that implement the new function. xStep and xFinal</code></span>
<span class="codeline" id="line-5250"><code>** must both be non-NULL. xValue and xInverse may either both be NULL, in</code></span>
<span class="codeline" id="line-5251"><code>** which case a regular aggregate function is created, or must both be</code></span>
<span class="codeline" id="line-5252"><code>** non-NULL, in which case the new function may be used as either an aggregate</code></span>
<span class="codeline" id="line-5253"><code>** or aggregate window function. More details regarding the implementation</code></span>
<span class="codeline" id="line-5254"><code>** of aggregate window functions are</code></span>
<span class="codeline" id="line-5255"><code>** [user-defined window functions|available here].</code></span>
<span class="codeline" id="line-5256"><code>**</code></span>
<span class="codeline" id="line-5257"><code>** ^(If the final parameter to sqlite3_create_function_v2() or</code></span>
<span class="codeline" id="line-5258"><code>** sqlite3_create_window_function() is not NULL, then it is destructor for</code></span>
<span class="codeline" id="line-5259"><code>** the application data pointer. The destructor is invoked when the function</code></span>
<span class="codeline" id="line-5260"><code>** is deleted, either by being overloaded or when the database connection</code></span>
<span class="codeline" id="line-5261"><code>** closes.)^ ^The destructor is also invoked if the call to</code></span>
<span class="codeline" id="line-5262"><code>** sqlite3_create_function_v2() fails.  ^When the destructor callback is</code></span>
<span class="codeline" id="line-5263"><code>** invoked, it is passed a single argument which is a copy of the application</code></span>
<span class="codeline" id="line-5264"><code>** data pointer which was the fifth parameter to sqlite3_create_function_v2().</code></span>
<span class="codeline" id="line-5265"><code>**</code></span>
<span class="codeline" id="line-5266"><code>** ^It is permitted to register multiple implementations of the same</code></span>
<span class="codeline" id="line-5267"><code>** functions with the same name but with either differing numbers of</code></span>
<span class="codeline" id="line-5268"><code>** arguments or differing preferred text encodings.  ^SQLite will use</code></span>
<span class="codeline" id="line-5269"><code>** the implementation that most closely matches the way in which the</code></span>
<span class="codeline" id="line-5270"><code>** SQL function is used.  ^A function implementation with a non-negative</code></span>
<span class="codeline" id="line-5271"><code>** nArg parameter is a better match than a function implementation with</code></span>
<span class="codeline" id="line-5272"><code>** a negative nArg.  ^A function where the preferred text encoding</code></span>
<span class="codeline" id="line-5273"><code>** matches the database encoding is a better</code></span>
<span class="codeline" id="line-5274"><code>** match than a function where the encoding is different.</code></span>
<span class="codeline" id="line-5275"><code>** ^A function where the encoding difference is between UTF16le and UTF16be</code></span>
<span class="codeline" id="line-5276"><code>** is a closer match than a function where the encoding difference is</code></span>
<span class="codeline" id="line-5277"><code>** between UTF8 and UTF16.</code></span>
<span class="codeline" id="line-5278"><code>**</code></span>
<span class="codeline" id="line-5279"><code>** ^Built-in functions may be overloaded by new application-defined functions.</code></span>
<span class="codeline" id="line-5280"><code>**</code></span>
<span class="codeline" id="line-5281"><code>** ^An application-defined function is permitted to call other</code></span>
<span class="codeline" id="line-5282"><code>** SQLite interfaces.  However, such calls must not</code></span>
<span class="codeline" id="line-5283"><code>** close the database connection nor finalize or reset the prepared</code></span>
<span class="codeline" id="line-5284"><code>** statement in which the function is running.</code></span>
<span class="codeline" id="line-5285"><code>*/</code></span>
<span class="codeline" id="line-5286"><code>SQLITE_API int sqlite3_create_function(</code></span>
<span class="codeline" id="line-5287"><code>  sqlite3 *db,</code></span>
<span class="codeline" id="line-5288"><code>  const char *zFunctionName,</code></span>
<span class="codeline" id="line-5289"><code>  int nArg,</code></span>
<span class="codeline" id="line-5290"><code>  int eTextRep,</code></span>
<span class="codeline" id="line-5291"><code>  void *pApp,</code></span>
<span class="codeline" id="line-5292"><code>  void (*xFunc)(sqlite3_context*,int,sqlite3_value**),</code></span>
<span class="codeline" id="line-5293"><code>  void (*xStep)(sqlite3_context*,int,sqlite3_value**),</code></span>
<span class="codeline" id="line-5294"><code>  void (*xFinal)(sqlite3_context*)</code></span>
<span class="codeline" id="line-5295"><code>);</code></span>
<span class="codeline" id="line-5296"><code>SQLITE_API int sqlite3_create_function16(</code></span>
<span class="codeline" id="line-5297"><code>  sqlite3 *db,</code></span>
<span class="codeline" id="line-5298"><code>  const void *zFunctionName,</code></span>
<span class="codeline" id="line-5299"><code>  int nArg,</code></span>
<span class="codeline" id="line-5300"><code>  int eTextRep,</code></span>
<span class="codeline" id="line-5301"><code>  void *pApp,</code></span>
<span class="codeline" id="line-5302"><code>  void (*xFunc)(sqlite3_context*,int,sqlite3_value**),</code></span>
<span class="codeline" id="line-5303"><code>  void (*xStep)(sqlite3_context*,int,sqlite3_value**),</code></span>
<span class="codeline" id="line-5304"><code>  void (*xFinal)(sqlite3_context*)</code></span>
<span class="codeline" id="line-5305"><code>);</code></span>
<span class="codeline" id="line-5306"><code>SQLITE_API int sqlite3_create_function_v2(</code></span>
<span class="codeline" id="line-5307"><code>  sqlite3 *db,</code></span>
<span class="codeline" id="line-5308"><code>  const char *zFunctionName,</code></span>
<span class="codeline" id="line-5309"><code>  int nArg,</code></span>
<span class="codeline" id="line-5310"><code>  int eTextRep,</code></span>
<span class="codeline" id="line-5311"><code>  void *pApp,</code></span>
<span class="codeline" id="line-5312"><code>  void (*xFunc)(sqlite3_context*,int,sqlite3_value**),</code></span>
<span class="codeline" id="line-5313"><code>  void (*xStep)(sqlite3_context*,int,sqlite3_value**),</code></span>
<span class="codeline" id="line-5314"><code>  void (*xFinal)(sqlite3_context*),</code></span>
<span class="codeline" id="line-5315"><code>  void(*xDestroy)(void*)</code></span>
<span class="codeline" id="line-5316"><code>);</code></span>
<span class="codeline" id="line-5317"><code>SQLITE_API int sqlite3_create_window_function(</code></span>
<span class="codeline" id="line-5318"><code>  sqlite3 *db,</code></span>
<span class="codeline" id="line-5319"><code>  const char *zFunctionName,</code></span>
<span class="codeline" id="line-5320"><code>  int nArg,</code></span>
<span class="codeline" id="line-5321"><code>  int eTextRep,</code></span>
<span class="codeline" id="line-5322"><code>  void *pApp,</code></span>
<span class="codeline" id="line-5323"><code>  void (*xStep)(sqlite3_context*,int,sqlite3_value**),</code></span>
<span class="codeline" id="line-5324"><code>  void (*xFinal)(sqlite3_context*),</code></span>
<span class="codeline" id="line-5325"><code>  void (*xValue)(sqlite3_context*),</code></span>
<span class="codeline" id="line-5326"><code>  void (*xInverse)(sqlite3_context*,int,sqlite3_value**),</code></span>
<span class="codeline" id="line-5327"><code>  void(*xDestroy)(void*)</code></span>
<span class="codeline" id="line-5328"><code>);</code></span>
<span class="codeline" id="line-5329"><code></code></span>
<span class="codeline" id="line-5330"><code>/*</code></span>
<span class="codeline" id="line-5331"><code>** CAPI3REF: Text Encodings</code></span>
<span class="codeline" id="line-5332"><code>**</code></span>
<span class="codeline" id="line-5333"><code>** These constant define integer codes that represent the various</code></span>
<span class="codeline" id="line-5334"><code>** text encodings supported by SQLite.</code></span>
<span class="codeline" id="line-5335"><code>*/</code></span>
<span class="codeline" id="line-5336"><code>#define SQLITE_UTF8           1    /* IMP: R-37514-35566 */</code></span>
<span class="codeline" id="line-5337"><code>#define SQLITE_UTF16LE        2    /* IMP: R-03371-37637 */</code></span>
<span class="codeline" id="line-5338"><code>#define SQLITE_UTF16BE        3    /* IMP: R-51971-34154 */</code></span>
<span class="codeline" id="line-5339"><code>#define SQLITE_UTF16          4    /* Use native byte order */</code></span>
<span class="codeline" id="line-5340"><code>#define SQLITE_ANY            5    /* Deprecated */</code></span>
<span class="codeline" id="line-5341"><code>#define SQLITE_UTF16_ALIGNED  8    /* sqlite3_create_collation only */</code></span>
<span class="codeline" id="line-5342"><code></code></span>
<span class="codeline" id="line-5343"><code>/*</code></span>
<span class="codeline" id="line-5344"><code>** CAPI3REF: Function Flags</code></span>
<span class="codeline" id="line-5345"><code>**</code></span>
<span class="codeline" id="line-5346"><code>** These constants may be ORed together with the</code></span>
<span class="codeline" id="line-5347"><code>** [SQLITE_UTF8 | preferred text encoding] as the fourth argument</code></span>
<span class="codeline" id="line-5348"><code>** to [sqlite3_create_function()], [sqlite3_create_function16()], or</code></span>
<span class="codeline" id="line-5349"><code>** [sqlite3_create_function_v2()].</code></span>
<span class="codeline" id="line-5350"><code>**</code></span>
<span class="codeline" id="line-5351"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-5352"><code>** [[SQLITE_DETERMINISTIC]] &lt;dt&gt;SQLITE_DETERMINISTIC&lt;/dt&gt;&lt;dd&gt;</code></span>
<span class="codeline" id="line-5353"><code>** The SQLITE_DETERMINISTIC flag means that the new function always gives</code></span>
<span class="codeline" id="line-5354"><code>** the same output when the input parameters are the same.</code></span>
<span class="codeline" id="line-5355"><code>** The [abs|abs() function] is deterministic, for example, but</code></span>
<span class="codeline" id="line-5356"><code>** [randomblob|randomblob()] is not.  Functions must</code></span>
<span class="codeline" id="line-5357"><code>** be deterministic in order to be used in certain contexts such as</code></span>
<span class="codeline" id="line-5358"><code>** with the WHERE clause of [partial indexes] or in [generated columns].</code></span>
<span class="codeline" id="line-5359"><code>** SQLite might also optimize deterministic functions by factoring them</code></span>
<span class="codeline" id="line-5360"><code>** out of inner loops.</code></span>
<span class="codeline" id="line-5361"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-5362"><code>**</code></span>
<span class="codeline" id="line-5363"><code>** [[SQLITE_DIRECTONLY]] &lt;dt&gt;SQLITE_DIRECTONLY&lt;/dt&gt;&lt;dd&gt;</code></span>
<span class="codeline" id="line-5364"><code>** The SQLITE_DIRECTONLY flag means that the function may only be invoked</code></span>
<span class="codeline" id="line-5365"><code>** from top-level SQL, and cannot be used in VIEWs or TRIGGERs nor in</code></span>
<span class="codeline" id="line-5366"><code>** schema structures such as [CHECK constraints], [DEFAULT clauses],</code></span>
<span class="codeline" id="line-5367"><code>** [expression indexes], [partial indexes], or [generated columns].</code></span>
<span class="codeline" id="line-5368"><code>** The SQLITE_DIRECTONLY flags is a security feature which is recommended</code></span>
<span class="codeline" id="line-5369"><code>** for all [application-defined SQL functions], and especially for functions</code></span>
<span class="codeline" id="line-5370"><code>** that have side-effects or that could potentially leak sensitive</code></span>
<span class="codeline" id="line-5371"><code>** information.</code></span>
<span class="codeline" id="line-5372"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-5373"><code>**</code></span>
<span class="codeline" id="line-5374"><code>** [[SQLITE_INNOCUOUS]] &lt;dt&gt;SQLITE_INNOCUOUS&lt;/dt&gt;&lt;dd&gt;</code></span>
<span class="codeline" id="line-5375"><code>** The SQLITE_INNOCUOUS flag means that the function is unlikely</code></span>
<span class="codeline" id="line-5376"><code>** to cause problems even if misused.  An innocuous function should have</code></span>
<span class="codeline" id="line-5377"><code>** no side effects and should not depend on any values other than its</code></span>
<span class="codeline" id="line-5378"><code>** input parameters. The [abs|abs() function] is an example of an</code></span>
<span class="codeline" id="line-5379"><code>** innocuous function.</code></span>
<span class="codeline" id="line-5380"><code>** The [load_extension() SQL function] is not innocuous because of its</code></span>
<span class="codeline" id="line-5381"><code>** side effects.</code></span>
<span class="codeline" id="line-5382"><code>** &lt;p&gt; SQLITE_INNOCUOUS is similar to SQLITE_DETERMINISTIC, but is not</code></span>
<span class="codeline" id="line-5383"><code>** exactly the same.  The [random|random() function] is an example of a</code></span>
<span class="codeline" id="line-5384"><code>** function that is innocuous but not deterministic.</code></span>
<span class="codeline" id="line-5385"><code>** &lt;p&gt;Some heightened security settings</code></span>
<span class="codeline" id="line-5386"><code>** ([SQLITE_DBCONFIG_TRUSTED_SCHEMA] and [PRAGMA trusted_schema=OFF])</code></span>
<span class="codeline" id="line-5387"><code>** disable the use of SQL functions inside views and triggers and in</code></span>
<span class="codeline" id="line-5388"><code>** schema structures such as [CHECK constraints], [DEFAULT clauses],</code></span>
<span class="codeline" id="line-5389"><code>** [expression indexes], [partial indexes], and [generated columns] unless</code></span>
<span class="codeline" id="line-5390"><code>** the function is tagged with SQLITE_INNOCUOUS.  Most built-in functions</code></span>
<span class="codeline" id="line-5391"><code>** are innocuous.  Developers are advised to avoid using the</code></span>
<span class="codeline" id="line-5392"><code>** SQLITE_INNOCUOUS flag for application-defined functions unless the</code></span>
<span class="codeline" id="line-5393"><code>** function has been carefully audited and found to be free of potentially</code></span>
<span class="codeline" id="line-5394"><code>** security-adverse side-effects and information-leaks.</code></span>
<span class="codeline" id="line-5395"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-5396"><code>**</code></span>
<span class="codeline" id="line-5397"><code>** [[SQLITE_SUBTYPE]] &lt;dt&gt;SQLITE_SUBTYPE&lt;/dt&gt;&lt;dd&gt;</code></span>
<span class="codeline" id="line-5398"><code>** The SQLITE_SUBTYPE flag indicates to SQLite that a function may call</code></span>
<span class="codeline" id="line-5399"><code>** [sqlite3_value_subtype()] to inspect the sub-types of its arguments.</code></span>
<span class="codeline" id="line-5400"><code>** Specifying this flag makes no difference for scalar or aggregate user</code></span>
<span class="codeline" id="line-5401"><code>** functions. However, if it is not specified for a user-defined window</code></span>
<span class="codeline" id="line-5402"><code>** function, then any sub-types belonging to arguments passed to the window</code></span>
<span class="codeline" id="line-5403"><code>** function may be discarded before the window function is called (i.e.</code></span>
<span class="codeline" id="line-5404"><code>** sqlite3_value_subtype() will always return 0).</code></span>
<span class="codeline" id="line-5405"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-5406"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-5407"><code>*/</code></span>
<span class="codeline" id="line-5408"><code>#define SQLITE_DETERMINISTIC    0x000000800</code></span>
<span class="codeline" id="line-5409"><code>#define SQLITE_DIRECTONLY       0x000080000</code></span>
<span class="codeline" id="line-5410"><code>#define SQLITE_SUBTYPE          0x000100000</code></span>
<span class="codeline" id="line-5411"><code>#define SQLITE_INNOCUOUS        0x000200000</code></span>
<span class="codeline" id="line-5412"><code></code></span>
<span class="codeline" id="line-5413"><code>/*</code></span>
<span class="codeline" id="line-5414"><code>** CAPI3REF: Deprecated Functions</code></span>
<span class="codeline" id="line-5415"><code>** DEPRECATED</code></span>
<span class="codeline" id="line-5416"><code>**</code></span>
<span class="codeline" id="line-5417"><code>** These functions are [deprecated].  In order to maintain</code></span>
<span class="codeline" id="line-5418"><code>** backwards compatibility with older code, these functions continue</code></span>
<span class="codeline" id="line-5419"><code>** to be supported.  However, new applications should avoid</code></span>
<span class="codeline" id="line-5420"><code>** the use of these functions.  To encourage programmers to avoid</code></span>
<span class="codeline" id="line-5421"><code>** these functions, we will not explain what they do.</code></span>
<span class="codeline" id="line-5422"><code>*/</code></span>
<span class="codeline" id="line-5423"><code>#ifndef SQLITE_OMIT_DEPRECATED</code></span>
<span class="codeline" id="line-5424"><code>SQLITE_API SQLITE_DEPRECATED int sqlite3_aggregate_count(sqlite3_context*);</code></span>
<span class="codeline" id="line-5425"><code>SQLITE_API SQLITE_DEPRECATED int sqlite3_expired(sqlite3_stmt*);</code></span>
<span class="codeline" id="line-5426"><code>SQLITE_API SQLITE_DEPRECATED int sqlite3_transfer_bindings(sqlite3_stmt*, sqlite3_stmt*);</code></span>
<span class="codeline" id="line-5427"><code>SQLITE_API SQLITE_DEPRECATED int sqlite3_global_recover(void);</code></span>
<span class="codeline" id="line-5428"><code>SQLITE_API SQLITE_DEPRECATED void sqlite3_thread_cleanup(void);</code></span>
<span class="codeline" id="line-5429"><code>SQLITE_API SQLITE_DEPRECATED int sqlite3_memory_alarm(void(*)(void*,sqlite3_int64,int),</code></span>
<span class="codeline" id="line-5430"><code>                      void*,sqlite3_int64);</code></span>
<span class="codeline" id="line-5431"><code>#endif</code></span>
<span class="codeline" id="line-5432"><code></code></span>
<span class="codeline" id="line-5433"><code>/*</code></span>
<span class="codeline" id="line-5434"><code>** CAPI3REF: Obtaining SQL Values</code></span>
<span class="codeline" id="line-5435"><code>** METHOD: sqlite3_value</code></span>
<span class="codeline" id="line-5436"><code>**</code></span>
<span class="codeline" id="line-5437"><code>** &lt;b&gt;Summary:&lt;/b&gt;</code></span>
<span class="codeline" id="line-5438"><code>** &lt;blockquote&gt;&lt;table border=0 cellpadding=0 cellspacing=0&gt;</code></span>
<span class="codeline" id="line-5439"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_blob&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;BLOB value</code></span>
<span class="codeline" id="line-5440"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_double&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;REAL value</code></span>
<span class="codeline" id="line-5441"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_int&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;32-bit INTEGER value</code></span>
<span class="codeline" id="line-5442"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_int64&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;64-bit INTEGER value</code></span>
<span class="codeline" id="line-5443"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_pointer&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;Pointer value</code></span>
<span class="codeline" id="line-5444"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_text&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;UTF-8 TEXT value</code></span>
<span class="codeline" id="line-5445"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_text16&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;UTF-16 TEXT value in</code></span>
<span class="codeline" id="line-5446"><code>** the native byteorder</code></span>
<span class="codeline" id="line-5447"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_text16be&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;UTF-16be TEXT value</code></span>
<span class="codeline" id="line-5448"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_text16le&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;UTF-16le TEXT value</code></span>
<span class="codeline" id="line-5449"><code>** &lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;td&gt;&amp;nbsp;&lt;td&gt;&amp;nbsp;</code></span>
<span class="codeline" id="line-5450"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_bytes&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;Size of a BLOB</code></span>
<span class="codeline" id="line-5451"><code>** or a UTF-8 TEXT in bytes</code></span>
<span class="codeline" id="line-5452"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_bytes16&amp;nbsp;&amp;nbsp;&lt;/b&gt;</code></span>
<span class="codeline" id="line-5453"><code>** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;Size of UTF-16</code></span>
<span class="codeline" id="line-5454"><code>** TEXT in bytes</code></span>
<span class="codeline" id="line-5455"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_type&lt;/b&gt;&lt;td&gt;&amp;rarr;&lt;td&gt;Default</code></span>
<span class="codeline" id="line-5456"><code>** datatype of the value</code></span>
<span class="codeline" id="line-5457"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_numeric_type&amp;nbsp;&amp;nbsp;&lt;/b&gt;</code></span>
<span class="codeline" id="line-5458"><code>** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;Best numeric datatype of the value</code></span>
<span class="codeline" id="line-5459"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_nochange&amp;nbsp;&amp;nbsp;&lt;/b&gt;</code></span>
<span class="codeline" id="line-5460"><code>** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;True if the column is unchanged in an UPDATE</code></span>
<span class="codeline" id="line-5461"><code>** against a virtual table.</code></span>
<span class="codeline" id="line-5462"><code>** &lt;tr&gt;&lt;td&gt;&lt;b&gt;sqlite3_value_frombind&amp;nbsp;&amp;nbsp;&lt;/b&gt;</code></span>
<span class="codeline" id="line-5463"><code>** &lt;td&gt;&amp;rarr;&amp;nbsp;&amp;nbsp;&lt;td&gt;True if value originated from a [bound parameter]</code></span>
<span class="codeline" id="line-5464"><code>** &lt;/table&gt;&lt;/blockquote&gt;</code></span>
<span class="codeline" id="line-5465"><code>**</code></span>
<span class="codeline" id="line-5466"><code>** &lt;b&gt;Details:&lt;/b&gt;</code></span>
<span class="codeline" id="line-5467"><code>**</code></span>
<span class="codeline" id="line-5468"><code>** These routines extract type, size, and content information from</code></span>
<span class="codeline" id="line-5469"><code>** [protected sqlite3_value] objects.  Protected sqlite3_value objects</code></span>
<span class="codeline" id="line-5470"><code>** are used to pass parameter information into the functions that</code></span>
<span class="codeline" id="line-5471"><code>** implement [application-defined SQL functions] and [virtual tables].</code></span>
<span class="codeline" id="line-5472"><code>**</code></span>
<span class="codeline" id="line-5473"><code>** These routines work only with [protected sqlite3_value] objects.</code></span>
<span class="codeline" id="line-5474"><code>** Any attempt to use these routines on an [unprotected sqlite3_value]</code></span>
<span class="codeline" id="line-5475"><code>** is not threadsafe.</code></span>
<span class="codeline" id="line-5476"><code>**</code></span>
<span class="codeline" id="line-5477"><code>** ^These routines work just like the corresponding [column access functions]</code></span>
<span class="codeline" id="line-5478"><code>** except that these routines take a single [protected sqlite3_value] object</code></span>
<span class="codeline" id="line-5479"><code>** pointer instead of a [sqlite3_stmt*] pointer and an integer column number.</code></span>
<span class="codeline" id="line-5480"><code>**</code></span>
<span class="codeline" id="line-5481"><code>** ^The sqlite3_value_text16() interface extracts a UTF-16 string</code></span>
<span class="codeline" id="line-5482"><code>** in the native byte-order of the host machine.  ^The</code></span>
<span class="codeline" id="line-5483"><code>** sqlite3_value_text16be() and sqlite3_value_text16le() interfaces</code></span>
<span class="codeline" id="line-5484"><code>** extract UTF-16 strings as big-endian and little-endian respectively.</code></span>
<span class="codeline" id="line-5485"><code>**</code></span>
<span class="codeline" id="line-5486"><code>** ^If [sqlite3_value] object V was initialized</code></span>
<span class="codeline" id="line-5487"><code>** using [sqlite3_bind_pointer(S,I,P,X,D)] or [sqlite3_result_pointer(C,P,X,D)]</code></span>
<span class="codeline" id="line-5488"><code>** and if X and Y are strings that compare equal according to strcmp(X,Y),</code></span>
<span class="codeline" id="line-5489"><code>** then sqlite3_value_pointer(V,Y) will return the pointer P.  ^Otherwise,</code></span>
<span class="codeline" id="line-5490"><code>** sqlite3_value_pointer(V,Y) returns a NULL. The sqlite3_bind_pointer()</code></span>
<span class="codeline" id="line-5491"><code>** routine is part of the [pointer passing interface] added for SQLite 3.20.0.</code></span>
<span class="codeline" id="line-5492"><code>**</code></span>
<span class="codeline" id="line-5493"><code>** ^(The sqlite3_value_type(V) interface returns the</code></span>
<span class="codeline" id="line-5494"><code>** [SQLITE_INTEGER | datatype code] for the initial datatype of the</code></span>
<span class="codeline" id="line-5495"><code>** [sqlite3_value] object V. The returned value is one of [SQLITE_INTEGER],</code></span>
<span class="codeline" id="line-5496"><code>** [SQLITE_FLOAT], [SQLITE_TEXT], [SQLITE_BLOB], or [SQLITE_NULL].)^</code></span>
<span class="codeline" id="line-5497"><code>** Other interfaces might change the datatype for an sqlite3_value object.</code></span>
<span class="codeline" id="line-5498"><code>** For example, if the datatype is initially SQLITE_INTEGER and</code></span>
<span class="codeline" id="line-5499"><code>** sqlite3_value_text(V) is called to extract a text value for that</code></span>
<span class="codeline" id="line-5500"><code>** integer, then subsequent calls to sqlite3_value_type(V) might return</code></span>
<span class="codeline" id="line-5501"><code>** SQLITE_TEXT.  Whether or not a persistent internal datatype conversion</code></span>
<span class="codeline" id="line-5502"><code>** occurs is undefined and may change from one release of SQLite to the next.</code></span>
<span class="codeline" id="line-5503"><code>**</code></span>
<span class="codeline" id="line-5504"><code>** ^(The sqlite3_value_numeric_type() interface attempts to apply</code></span>
<span class="codeline" id="line-5505"><code>** numeric affinity to the value.  This means that an attempt is</code></span>
<span class="codeline" id="line-5506"><code>** made to convert the value to an integer or floating point.  If</code></span>
<span class="codeline" id="line-5507"><code>** such a conversion is possible without loss of information (in other</code></span>
<span class="codeline" id="line-5508"><code>** words, if the value is a string that looks like a number)</code></span>
<span class="codeline" id="line-5509"><code>** then the conversion is performed.  Otherwise no conversion occurs.</code></span>
<span class="codeline" id="line-5510"><code>** The [SQLITE_INTEGER | datatype] after conversion is returned.)^</code></span>
<span class="codeline" id="line-5511"><code>**</code></span>
<span class="codeline" id="line-5512"><code>** ^Within the [xUpdate] method of a [virtual table], the</code></span>
<span class="codeline" id="line-5513"><code>** sqlite3_value_nochange(X) interface returns true if and only if</code></span>
<span class="codeline" id="line-5514"><code>** the column corresponding to X is unchanged by the UPDATE operation</code></span>
<span class="codeline" id="line-5515"><code>** that the xUpdate method call was invoked to implement and if</code></span>
<span class="codeline" id="line-5516"><code>** and the prior [xColumn] method call that was invoked to extracted</code></span>
<span class="codeline" id="line-5517"><code>** the value for that column returned without setting a result (probably</code></span>
<span class="codeline" id="line-5518"><code>** because it queried [sqlite3_vtab_nochange()] and found that the column</code></span>
<span class="codeline" id="line-5519"><code>** was unchanging).  ^Within an [xUpdate] method, any value for which</code></span>
<span class="codeline" id="line-5520"><code>** sqlite3_value_nochange(X) is true will in all other respects appear</code></span>
<span class="codeline" id="line-5521"><code>** to be a NULL value.  If sqlite3_value_nochange(X) is invoked anywhere other</code></span>
<span class="codeline" id="line-5522"><code>** than within an [xUpdate] method call for an UPDATE statement, then</code></span>
<span class="codeline" id="line-5523"><code>** the return value is arbitrary and meaningless.</code></span>
<span class="codeline" id="line-5524"><code>**</code></span>
<span class="codeline" id="line-5525"><code>** ^The sqlite3_value_frombind(X) interface returns non-zero if the</code></span>
<span class="codeline" id="line-5526"><code>** value X originated from one of the [sqlite3_bind_int|sqlite3_bind()]</code></span>
<span class="codeline" id="line-5527"><code>** interfaces.  ^If X comes from an SQL literal value, or a table column,</code></span>
<span class="codeline" id="line-5528"><code>** or an expression, then sqlite3_value_frombind(X) returns zero.</code></span>
<span class="codeline" id="line-5529"><code>**</code></span>
<span class="codeline" id="line-5530"><code>** Please pay particular attention to the fact that the pointer returned</code></span>
<span class="codeline" id="line-5531"><code>** from [sqlite3_value_blob()], [sqlite3_value_text()], or</code></span>
<span class="codeline" id="line-5532"><code>** [sqlite3_value_text16()] can be invalidated by a subsequent call to</code></span>
<span class="codeline" id="line-5533"><code>** [sqlite3_value_bytes()], [sqlite3_value_bytes16()], [sqlite3_value_text()],</code></span>
<span class="codeline" id="line-5534"><code>** or [sqlite3_value_text16()].</code></span>
<span class="codeline" id="line-5535"><code>**</code></span>
<span class="codeline" id="line-5536"><code>** These routines must be called from the same thread as</code></span>
<span class="codeline" id="line-5537"><code>** the SQL function that supplied the [sqlite3_value*] parameters.</code></span>
<span class="codeline" id="line-5538"><code>**</code></span>
<span class="codeline" id="line-5539"><code>** As long as the input parameter is correct, these routines can only</code></span>
<span class="codeline" id="line-5540"><code>** fail if an out-of-memory error occurs during a format conversion.</code></span>
<span class="codeline" id="line-5541"><code>** Only the following subset of interfaces are subject to out-of-memory</code></span>
<span class="codeline" id="line-5542"><code>** errors:</code></span>
<span class="codeline" id="line-5543"><code>**</code></span>
<span class="codeline" id="line-5544"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-5545"><code>** &lt;li&gt; sqlite3_value_blob()</code></span>
<span class="codeline" id="line-5546"><code>** &lt;li&gt; sqlite3_value_text()</code></span>
<span class="codeline" id="line-5547"><code>** &lt;li&gt; sqlite3_value_text16()</code></span>
<span class="codeline" id="line-5548"><code>** &lt;li&gt; sqlite3_value_text16le()</code></span>
<span class="codeline" id="line-5549"><code>** &lt;li&gt; sqlite3_value_text16be()</code></span>
<span class="codeline" id="line-5550"><code>** &lt;li&gt; sqlite3_value_bytes()</code></span>
<span class="codeline" id="line-5551"><code>** &lt;li&gt; sqlite3_value_bytes16()</code></span>
<span class="codeline" id="line-5552"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-5553"><code>**</code></span>
<span class="codeline" id="line-5554"><code>** If an out-of-memory error occurs, then the return value from these</code></span>
<span class="codeline" id="line-5555"><code>** routines is the same as if the column had contained an SQL NULL value.</code></span>
<span class="codeline" id="line-5556"><code>** Valid SQL NULL returns can be distinguished from out-of-memory errors</code></span>
<span class="codeline" id="line-5557"><code>** by invoking the [sqlite3_errcode()] immediately after the suspect</code></span>
<span class="codeline" id="line-5558"><code>** return value is obtained and before any</code></span>
<span class="codeline" id="line-5559"><code>** other SQLite interface is called on the same [database connection].</code></span>
<span class="codeline" id="line-5560"><code>*/</code></span>
<span class="codeline" id="line-5561"><code>SQLITE_API const void *sqlite3_value_blob(sqlite3_value*);</code></span>
<span class="codeline" id="line-5562"><code>SQLITE_API double sqlite3_value_double(sqlite3_value*);</code></span>
<span class="codeline" id="line-5563"><code>SQLITE_API int sqlite3_value_int(sqlite3_value*);</code></span>
<span class="codeline" id="line-5564"><code>SQLITE_API sqlite3_int64 sqlite3_value_int64(sqlite3_value*);</code></span>
<span class="codeline" id="line-5565"><code>SQLITE_API void *sqlite3_value_pointer(sqlite3_value*, const char*);</code></span>
<span class="codeline" id="line-5566"><code>SQLITE_API const unsigned char *sqlite3_value_text(sqlite3_value*);</code></span>
<span class="codeline" id="line-5567"><code>SQLITE_API const void *sqlite3_value_text16(sqlite3_value*);</code></span>
<span class="codeline" id="line-5568"><code>SQLITE_API const void *sqlite3_value_text16le(sqlite3_value*);</code></span>
<span class="codeline" id="line-5569"><code>SQLITE_API const void *sqlite3_value_text16be(sqlite3_value*);</code></span>
<span class="codeline" id="line-5570"><code>SQLITE_API int sqlite3_value_bytes(sqlite3_value*);</code></span>
<span class="codeline" id="line-5571"><code>SQLITE_API int sqlite3_value_bytes16(sqlite3_value*);</code></span>
<span class="codeline" id="line-5572"><code>SQLITE_API int sqlite3_value_type(sqlite3_value*);</code></span>
<span class="codeline" id="line-5573"><code>SQLITE_API int sqlite3_value_numeric_type(sqlite3_value*);</code></span>
<span class="codeline" id="line-5574"><code>SQLITE_API int sqlite3_value_nochange(sqlite3_value*);</code></span>
<span class="codeline" id="line-5575"><code>SQLITE_API int sqlite3_value_frombind(sqlite3_value*);</code></span>
<span class="codeline" id="line-5576"><code></code></span>
<span class="codeline" id="line-5577"><code>/*</code></span>
<span class="codeline" id="line-5578"><code>** CAPI3REF: Finding The Subtype Of SQL Values</code></span>
<span class="codeline" id="line-5579"><code>** METHOD: sqlite3_value</code></span>
<span class="codeline" id="line-5580"><code>**</code></span>
<span class="codeline" id="line-5581"><code>** The sqlite3_value_subtype(V) function returns the subtype for</code></span>
<span class="codeline" id="line-5582"><code>** an [application-defined SQL function] argument V.  The subtype</code></span>
<span class="codeline" id="line-5583"><code>** information can be used to pass a limited amount of context from</code></span>
<span class="codeline" id="line-5584"><code>** one SQL function to another.  Use the [sqlite3_result_subtype()]</code></span>
<span class="codeline" id="line-5585"><code>** routine to set the subtype for the return value of an SQL function.</code></span>
<span class="codeline" id="line-5586"><code>*/</code></span>
<span class="codeline" id="line-5587"><code>SQLITE_API unsigned int sqlite3_value_subtype(sqlite3_value*);</code></span>
<span class="codeline" id="line-5588"><code></code></span>
<span class="codeline" id="line-5589"><code>/*</code></span>
<span class="codeline" id="line-5590"><code>** CAPI3REF: Copy And Free SQL Values</code></span>
<span class="codeline" id="line-5591"><code>** METHOD: sqlite3_value</code></span>
<span class="codeline" id="line-5592"><code>**</code></span>
<span class="codeline" id="line-5593"><code>** ^The sqlite3_value_dup(V) interface makes a copy of the [sqlite3_value]</code></span>
<span class="codeline" id="line-5594"><code>** object D and returns a pointer to that copy.  ^The [sqlite3_value] returned</code></span>
<span class="codeline" id="line-5595"><code>** is a [protected sqlite3_value] object even if the input is not.</code></span>
<span class="codeline" id="line-5596"><code>** ^The sqlite3_value_dup(V) interface returns NULL if V is NULL or if a</code></span>
<span class="codeline" id="line-5597"><code>** memory allocation fails. ^If V is a [pointer value], then the result</code></span>
<span class="codeline" id="line-5598"><code>** of sqlite3_value_dup(V) is a NULL value.</code></span>
<span class="codeline" id="line-5599"><code>**</code></span>
<span class="codeline" id="line-5600"><code>** ^The sqlite3_value_free(V) interface frees an [sqlite3_value] object</code></span>
<span class="codeline" id="line-5601"><code>** previously obtained from [sqlite3_value_dup()].  ^If V is a NULL pointer</code></span>
<span class="codeline" id="line-5602"><code>** then sqlite3_value_free(V) is a harmless no-op.</code></span>
<span class="codeline" id="line-5603"><code>*/</code></span>
<span class="codeline" id="line-5604"><code>SQLITE_API sqlite3_value *sqlite3_value_dup(const sqlite3_value*);</code></span>
<span class="codeline" id="line-5605"><code>SQLITE_API void sqlite3_value_free(sqlite3_value*);</code></span>
<span class="codeline" id="line-5606"><code></code></span>
<span class="codeline" id="line-5607"><code>/*</code></span>
<span class="codeline" id="line-5608"><code>** CAPI3REF: Obtain Aggregate Function Context</code></span>
<span class="codeline" id="line-5609"><code>** METHOD: sqlite3_context</code></span>
<span class="codeline" id="line-5610"><code>**</code></span>
<span class="codeline" id="line-5611"><code>** Implementations of aggregate SQL functions use this</code></span>
<span class="codeline" id="line-5612"><code>** routine to allocate memory for storing their state.</code></span>
<span class="codeline" id="line-5613"><code>**</code></span>
<span class="codeline" id="line-5614"><code>** ^The first time the sqlite3_aggregate_context(C,N) routine is called</code></span>
<span class="codeline" id="line-5615"><code>** for a particular aggregate function, SQLite allocates</code></span>
<span class="codeline" id="line-5616"><code>** N bytes of memory, zeroes out that memory, and returns a pointer</code></span>
<span class="codeline" id="line-5617"><code>** to the new memory. ^On second and subsequent calls to</code></span>
<span class="codeline" id="line-5618"><code>** sqlite3_aggregate_context() for the same aggregate function instance,</code></span>
<span class="codeline" id="line-5619"><code>** the same buffer is returned.  Sqlite3_aggregate_context() is normally</code></span>
<span class="codeline" id="line-5620"><code>** called once for each invocation of the xStep callback and then one</code></span>
<span class="codeline" id="line-5621"><code>** last time when the xFinal callback is invoked.  ^(When no rows match</code></span>
<span class="codeline" id="line-5622"><code>** an aggregate query, the xStep() callback of the aggregate function</code></span>
<span class="codeline" id="line-5623"><code>** implementation is never called and xFinal() is called exactly once.</code></span>
<span class="codeline" id="line-5624"><code>** In those cases, sqlite3_aggregate_context() might be called for the</code></span>
<span class="codeline" id="line-5625"><code>** first time from within xFinal().)^</code></span>
<span class="codeline" id="line-5626"><code>**</code></span>
<span class="codeline" id="line-5627"><code>** ^The sqlite3_aggregate_context(C,N) routine returns a NULL pointer</code></span>
<span class="codeline" id="line-5628"><code>** when first called if N is less than or equal to zero or if a memory</code></span>
<span class="codeline" id="line-5629"><code>** allocate error occurs.</code></span>
<span class="codeline" id="line-5630"><code>**</code></span>
<span class="codeline" id="line-5631"><code>** ^(The amount of space allocated by sqlite3_aggregate_context(C,N) is</code></span>
<span class="codeline" id="line-5632"><code>** determined by the N parameter on first successful call.  Changing the</code></span>
<span class="codeline" id="line-5633"><code>** value of N in any subsequent call to sqlite3_aggregate_context() within</code></span>
<span class="codeline" id="line-5634"><code>** the same aggregate function instance will not resize the memory</code></span>
<span class="codeline" id="line-5635"><code>** allocation.)^  Within the xFinal callback, it is customary to set</code></span>
<span class="codeline" id="line-5636"><code>** N=0 in calls to sqlite3_aggregate_context(C,N) so that no</code></span>
<span class="codeline" id="line-5637"><code>** pointless memory allocations occur.</code></span>
<span class="codeline" id="line-5638"><code>**</code></span>
<span class="codeline" id="line-5639"><code>** ^SQLite automatically frees the memory allocated by</code></span>
<span class="codeline" id="line-5640"><code>** sqlite3_aggregate_context() when the aggregate query concludes.</code></span>
<span class="codeline" id="line-5641"><code>**</code></span>
<span class="codeline" id="line-5642"><code>** The first parameter must be a copy of the</code></span>
<span class="codeline" id="line-5643"><code>** [sqlite3_context | SQL function context] that is the first parameter</code></span>
<span class="codeline" id="line-5644"><code>** to the xStep or xFinal callback routine that implements the aggregate</code></span>
<span class="codeline" id="line-5645"><code>** function.</code></span>
<span class="codeline" id="line-5646"><code>**</code></span>
<span class="codeline" id="line-5647"><code>** This routine must be called from the same thread in which</code></span>
<span class="codeline" id="line-5648"><code>** the aggregate SQL function is running.</code></span>
<span class="codeline" id="line-5649"><code>*/</code></span>
<span class="codeline" id="line-5650"><code>SQLITE_API void *sqlite3_aggregate_context(sqlite3_context*, int nBytes);</code></span>
<span class="codeline" id="line-5651"><code></code></span>
<span class="codeline" id="line-5652"><code>/*</code></span>
<span class="codeline" id="line-5653"><code>** CAPI3REF: User Data For Functions</code></span>
<span class="codeline" id="line-5654"><code>** METHOD: sqlite3_context</code></span>
<span class="codeline" id="line-5655"><code>**</code></span>
<span class="codeline" id="line-5656"><code>** ^The sqlite3_user_data() interface returns a copy of</code></span>
<span class="codeline" id="line-5657"><code>** the pointer that was the pUserData parameter (the 5th parameter)</code></span>
<span class="codeline" id="line-5658"><code>** of the [sqlite3_create_function()]</code></span>
<span class="codeline" id="line-5659"><code>** and [sqlite3_create_function16()] routines that originally</code></span>
<span class="codeline" id="line-5660"><code>** registered the application defined function.</code></span>
<span class="codeline" id="line-5661"><code>**</code></span>
<span class="codeline" id="line-5662"><code>** This routine must be called from the same thread in which</code></span>
<span class="codeline" id="line-5663"><code>** the application-defined function is running.</code></span>
<span class="codeline" id="line-5664"><code>*/</code></span>
<span class="codeline" id="line-5665"><code>SQLITE_API void *sqlite3_user_data(sqlite3_context*);</code></span>
<span class="codeline" id="line-5666"><code></code></span>
<span class="codeline" id="line-5667"><code>/*</code></span>
<span class="codeline" id="line-5668"><code>** CAPI3REF: Database Connection For Functions</code></span>
<span class="codeline" id="line-5669"><code>** METHOD: sqlite3_context</code></span>
<span class="codeline" id="line-5670"><code>**</code></span>
<span class="codeline" id="line-5671"><code>** ^The sqlite3_context_db_handle() interface returns a copy of</code></span>
<span class="codeline" id="line-5672"><code>** the pointer to the [database connection] (the 1st parameter)</code></span>
<span class="codeline" id="line-5673"><code>** of the [sqlite3_create_function()]</code></span>
<span class="codeline" id="line-5674"><code>** and [sqlite3_create_function16()] routines that originally</code></span>
<span class="codeline" id="line-5675"><code>** registered the application defined function.</code></span>
<span class="codeline" id="line-5676"><code>*/</code></span>
<span class="codeline" id="line-5677"><code>SQLITE_API sqlite3 *sqlite3_context_db_handle(sqlite3_context*);</code></span>
<span class="codeline" id="line-5678"><code></code></span>
<span class="codeline" id="line-5679"><code>/*</code></span>
<span class="codeline" id="line-5680"><code>** CAPI3REF: Function Auxiliary Data</code></span>
<span class="codeline" id="line-5681"><code>** METHOD: sqlite3_context</code></span>
<span class="codeline" id="line-5682"><code>**</code></span>
<span class="codeline" id="line-5683"><code>** These functions may be used by (non-aggregate) SQL functions to</code></span>
<span class="codeline" id="line-5684"><code>** associate metadata with argument values. If the same value is passed to</code></span>
<span class="codeline" id="line-5685"><code>** multiple invocations of the same SQL function during query execution, under</code></span>
<span class="codeline" id="line-5686"><code>** some circumstances the associated metadata may be preserved.  An example</code></span>
<span class="codeline" id="line-5687"><code>** of where this might be useful is in a regular-expression matching</code></span>
<span class="codeline" id="line-5688"><code>** function. The compiled version of the regular expression can be stored as</code></span>
<span class="codeline" id="line-5689"><code>** metadata associated with the pattern string.</code></span>
<span class="codeline" id="line-5690"><code>** Then as long as the pattern string remains the same,</code></span>
<span class="codeline" id="line-5691"><code>** the compiled regular expression can be reused on multiple</code></span>
<span class="codeline" id="line-5692"><code>** invocations of the same function.</code></span>
<span class="codeline" id="line-5693"><code>**</code></span>
<span class="codeline" id="line-5694"><code>** ^The sqlite3_get_auxdata(C,N) interface returns a pointer to the metadata</code></span>
<span class="codeline" id="line-5695"><code>** associated by the sqlite3_set_auxdata(C,N,P,X) function with the Nth argument</code></span>
<span class="codeline" id="line-5696"><code>** value to the application-defined function.  ^N is zero for the left-most</code></span>
<span class="codeline" id="line-5697"><code>** function argument.  ^If there is no metadata</code></span>
<span class="codeline" id="line-5698"><code>** associated with the function argument, the sqlite3_get_auxdata(C,N) interface</code></span>
<span class="codeline" id="line-5699"><code>** returns a NULL pointer.</code></span>
<span class="codeline" id="line-5700"><code>**</code></span>
<span class="codeline" id="line-5701"><code>** ^The sqlite3_set_auxdata(C,N,P,X) interface saves P as metadata for the N-th</code></span>
<span class="codeline" id="line-5702"><code>** argument of the application-defined function.  ^Subsequent</code></span>
<span class="codeline" id="line-5703"><code>** calls to sqlite3_get_auxdata(C,N) return P from the most recent</code></span>
<span class="codeline" id="line-5704"><code>** sqlite3_set_auxdata(C,N,P,X) call if the metadata is still valid or</code></span>
<span class="codeline" id="line-5705"><code>** NULL if the metadata has been discarded.</code></span>
<span class="codeline" id="line-5706"><code>** ^After each call to sqlite3_set_auxdata(C,N,P,X) where X is not NULL,</code></span>
<span class="codeline" id="line-5707"><code>** SQLite will invoke the destructor function X with parameter P exactly</code></span>
<span class="codeline" id="line-5708"><code>** once, when the metadata is discarded.</code></span>
<span class="codeline" id="line-5709"><code>** SQLite is free to discard the metadata at any time, including: &lt;ul&gt;</code></span>
<span class="codeline" id="line-5710"><code>** &lt;li&gt; ^(when the corresponding function parameter changes)^, or</code></span>
<span class="codeline" id="line-5711"><code>** &lt;li&gt; ^(when [sqlite3_reset()] or [sqlite3_finalize()] is called for the</code></span>
<span class="codeline" id="line-5712"><code>**      SQL statement)^, or</code></span>
<span class="codeline" id="line-5713"><code>** &lt;li&gt; ^(when sqlite3_set_auxdata() is invoked again on the same</code></span>
<span class="codeline" id="line-5714"><code>**       parameter)^, or</code></span>
<span class="codeline" id="line-5715"><code>** &lt;li&gt; ^(during the original sqlite3_set_auxdata() call when a memory</code></span>
<span class="codeline" id="line-5716"><code>**      allocation error occurs.)^ &lt;/ul&gt;</code></span>
<span class="codeline" id="line-5717"><code>**</code></span>
<span class="codeline" id="line-5718"><code>** Note the last bullet in particular.  The destructor X in</code></span>
<span class="codeline" id="line-5719"><code>** sqlite3_set_auxdata(C,N,P,X) might be called immediately, before the</code></span>
<span class="codeline" id="line-5720"><code>** sqlite3_set_auxdata() interface even returns.  Hence sqlite3_set_auxdata()</code></span>
<span class="codeline" id="line-5721"><code>** should be called near the end of the function implementation and the</code></span>
<span class="codeline" id="line-5722"><code>** function implementation should not make any use of P after</code></span>
<span class="codeline" id="line-5723"><code>** sqlite3_set_auxdata() has been called.</code></span>
<span class="codeline" id="line-5724"><code>**</code></span>
<span class="codeline" id="line-5725"><code>** ^(In practice, metadata is preserved between function calls for</code></span>
<span class="codeline" id="line-5726"><code>** function parameters that are compile-time constants, including literal</code></span>
<span class="codeline" id="line-5727"><code>** values and [parameters] and expressions composed from the same.)^</code></span>
<span class="codeline" id="line-5728"><code>**</code></span>
<span class="codeline" id="line-5729"><code>** The value of the N parameter to these interfaces should be non-negative.</code></span>
<span class="codeline" id="line-5730"><code>** Future enhancements may make use of negative N values to define new</code></span>
<span class="codeline" id="line-5731"><code>** kinds of function caching behavior.</code></span>
<span class="codeline" id="line-5732"><code>**</code></span>
<span class="codeline" id="line-5733"><code>** These routines must be called from the same thread in which</code></span>
<span class="codeline" id="line-5734"><code>** the SQL function is running.</code></span>
<span class="codeline" id="line-5735"><code>*/</code></span>
<span class="codeline" id="line-5736"><code>SQLITE_API void *sqlite3_get_auxdata(sqlite3_context*, int N);</code></span>
<span class="codeline" id="line-5737"><code>SQLITE_API void sqlite3_set_auxdata(sqlite3_context*, int N, void*, void (*)(void*));</code></span>
<span class="codeline" id="line-5738"><code></code></span>
<span class="codeline" id="line-5739"><code></code></span>
<span class="codeline" id="line-5740"><code>/*</code></span>
<span class="codeline" id="line-5741"><code>** CAPI3REF: Constants Defining Special Destructor Behavior</code></span>
<span class="codeline" id="line-5742"><code>**</code></span>
<span class="codeline" id="line-5743"><code>** These are special values for the destructor that is passed in as the</code></span>
<span class="codeline" id="line-5744"><code>** final argument to routines like [sqlite3_result_blob()].  ^If the destructor</code></span>
<span class="codeline" id="line-5745"><code>** argument is SQLITE_STATIC, it means that the content pointer is constant</code></span>
<span class="codeline" id="line-5746"><code>** and will never change.  It does not need to be destroyed.  ^The</code></span>
<span class="codeline" id="line-5747"><code>** SQLITE_TRANSIENT value means that the content will likely change in</code></span>
<span class="codeline" id="line-5748"><code>** the near future and that SQLite should make its own private copy of</code></span>
<span class="codeline" id="line-5749"><code>** the content before returning.</code></span>
<span class="codeline" id="line-5750"><code>**</code></span>
<span class="codeline" id="line-5751"><code>** The typedef is necessary to work around problems in certain</code></span>
<span class="codeline" id="line-5752"><code>** C++ compilers.</code></span>
<span class="codeline" id="line-5753"><code>*/</code></span>
<span class="codeline" id="line-5754"><code>typedef void (*sqlite3_destructor_type)(void*);</code></span>
<span class="codeline" id="line-5755"><code>#define SQLITE_STATIC      ((sqlite3_destructor_type)0)</code></span>
<span class="codeline" id="line-5756"><code>#define SQLITE_TRANSIENT   ((sqlite3_destructor_type)-1)</code></span>
<span class="codeline" id="line-5757"><code></code></span>
<span class="codeline" id="line-5758"><code>/*</code></span>
<span class="codeline" id="line-5759"><code>** CAPI3REF: Setting The Result Of An SQL Function</code></span>
<span class="codeline" id="line-5760"><code>** METHOD: sqlite3_context</code></span>
<span class="codeline" id="line-5761"><code>**</code></span>
<span class="codeline" id="line-5762"><code>** These routines are used by the xFunc or xFinal callbacks that</code></span>
<span class="codeline" id="line-5763"><code>** implement SQL functions and aggregates.  See</code></span>
<span class="codeline" id="line-5764"><code>** [sqlite3_create_function()] and [sqlite3_create_function16()]</code></span>
<span class="codeline" id="line-5765"><code>** for additional information.</code></span>
<span class="codeline" id="line-5766"><code>**</code></span>
<span class="codeline" id="line-5767"><code>** These functions work very much like the [parameter binding] family of</code></span>
<span class="codeline" id="line-5768"><code>** functions used to bind values to host parameters in prepared statements.</code></span>
<span class="codeline" id="line-5769"><code>** Refer to the [SQL parameter] documentation for additional information.</code></span>
<span class="codeline" id="line-5770"><code>**</code></span>
<span class="codeline" id="line-5771"><code>** ^The sqlite3_result_blob() interface sets the result from</code></span>
<span class="codeline" id="line-5772"><code>** an application-defined function to be the BLOB whose content is pointed</code></span>
<span class="codeline" id="line-5773"><code>** to by the second parameter and which is N bytes long where N is the</code></span>
<span class="codeline" id="line-5774"><code>** third parameter.</code></span>
<span class="codeline" id="line-5775"><code>**</code></span>
<span class="codeline" id="line-5776"><code>** ^The sqlite3_result_zeroblob(C,N) and sqlite3_result_zeroblob64(C,N)</code></span>
<span class="codeline" id="line-5777"><code>** interfaces set the result of the application-defined function to be</code></span>
<span class="codeline" id="line-5778"><code>** a BLOB containing all zero bytes and N bytes in size.</code></span>
<span class="codeline" id="line-5779"><code>**</code></span>
<span class="codeline" id="line-5780"><code>** ^The sqlite3_result_double() interface sets the result from</code></span>
<span class="codeline" id="line-5781"><code>** an application-defined function to be a floating point value specified</code></span>
<span class="codeline" id="line-5782"><code>** by its 2nd argument.</code></span>
<span class="codeline" id="line-5783"><code>**</code></span>
<span class="codeline" id="line-5784"><code>** ^The sqlite3_result_error() and sqlite3_result_error16() functions</code></span>
<span class="codeline" id="line-5785"><code>** cause the implemented SQL function to throw an exception.</code></span>
<span class="codeline" id="line-5786"><code>** ^SQLite uses the string pointed to by the</code></span>
<span class="codeline" id="line-5787"><code>** 2nd parameter of sqlite3_result_error() or sqlite3_result_error16()</code></span>
<span class="codeline" id="line-5788"><code>** as the text of an error message.  ^SQLite interprets the error</code></span>
<span class="codeline" id="line-5789"><code>** message string from sqlite3_result_error() as UTF-8. ^SQLite</code></span>
<span class="codeline" id="line-5790"><code>** interprets the string from sqlite3_result_error16() as UTF-16 using</code></span>
<span class="codeline" id="line-5791"><code>** the same [byte-order determination rules] as [sqlite3_bind_text16()].</code></span>
<span class="codeline" id="line-5792"><code>** ^If the third parameter to sqlite3_result_error()</code></span>
<span class="codeline" id="line-5793"><code>** or sqlite3_result_error16() is negative then SQLite takes as the error</code></span>
<span class="codeline" id="line-5794"><code>** message all text up through the first zero character.</code></span>
<span class="codeline" id="line-5795"><code>** ^If the third parameter to sqlite3_result_error() or</code></span>
<span class="codeline" id="line-5796"><code>** sqlite3_result_error16() is non-negative then SQLite takes that many</code></span>
<span class="codeline" id="line-5797"><code>** bytes (not characters) from the 2nd parameter as the error message.</code></span>
<span class="codeline" id="line-5798"><code>** ^The sqlite3_result_error() and sqlite3_result_error16()</code></span>
<span class="codeline" id="line-5799"><code>** routines make a private copy of the error message text before</code></span>
<span class="codeline" id="line-5800"><code>** they return.  Hence, the calling function can deallocate or</code></span>
<span class="codeline" id="line-5801"><code>** modify the text after they return without harm.</code></span>
<span class="codeline" id="line-5802"><code>** ^The sqlite3_result_error_code() function changes the error code</code></span>
<span class="codeline" id="line-5803"><code>** returned by SQLite as a result of an error in a function.  ^By default,</code></span>
<span class="codeline" id="line-5804"><code>** the error code is SQLITE_ERROR.  ^A subsequent call to sqlite3_result_error()</code></span>
<span class="codeline" id="line-5805"><code>** or sqlite3_result_error16() resets the error code to SQLITE_ERROR.</code></span>
<span class="codeline" id="line-5806"><code>**</code></span>
<span class="codeline" id="line-5807"><code>** ^The sqlite3_result_error_toobig() interface causes SQLite to throw an</code></span>
<span class="codeline" id="line-5808"><code>** error indicating that a string or BLOB is too long to represent.</code></span>
<span class="codeline" id="line-5809"><code>**</code></span>
<span class="codeline" id="line-5810"><code>** ^The sqlite3_result_error_nomem() interface causes SQLite to throw an</code></span>
<span class="codeline" id="line-5811"><code>** error indicating that a memory allocation failed.</code></span>
<span class="codeline" id="line-5812"><code>**</code></span>
<span class="codeline" id="line-5813"><code>** ^The sqlite3_result_int() interface sets the return value</code></span>
<span class="codeline" id="line-5814"><code>** of the application-defined function to be the 32-bit signed integer</code></span>
<span class="codeline" id="line-5815"><code>** value given in the 2nd argument.</code></span>
<span class="codeline" id="line-5816"><code>** ^The sqlite3_result_int64() interface sets the return value</code></span>
<span class="codeline" id="line-5817"><code>** of the application-defined function to be the 64-bit signed integer</code></span>
<span class="codeline" id="line-5818"><code>** value given in the 2nd argument.</code></span>
<span class="codeline" id="line-5819"><code>**</code></span>
<span class="codeline" id="line-5820"><code>** ^The sqlite3_result_null() interface sets the return value</code></span>
<span class="codeline" id="line-5821"><code>** of the application-defined function to be NULL.</code></span>
<span class="codeline" id="line-5822"><code>**</code></span>
<span class="codeline" id="line-5823"><code>** ^The sqlite3_result_text(), sqlite3_result_text16(),</code></span>
<span class="codeline" id="line-5824"><code>** sqlite3_result_text16le(), and sqlite3_result_text16be() interfaces</code></span>
<span class="codeline" id="line-5825"><code>** set the return value of the application-defined function to be</code></span>
<span class="codeline" id="line-5826"><code>** a text string which is represented as UTF-8, UTF-16 native byte order,</code></span>
<span class="codeline" id="line-5827"><code>** UTF-16 little endian, or UTF-16 big endian, respectively.</code></span>
<span class="codeline" id="line-5828"><code>** ^The sqlite3_result_text64() interface sets the return value of an</code></span>
<span class="codeline" id="line-5829"><code>** application-defined function to be a text string in an encoding</code></span>
<span class="codeline" id="line-5830"><code>** specified by the fifth (and last) parameter, which must be one</code></span>
<span class="codeline" id="line-5831"><code>** of [SQLITE_UTF8], [SQLITE_UTF16], [SQLITE_UTF16BE], or [SQLITE_UTF16LE].</code></span>
<span class="codeline" id="line-5832"><code>** ^SQLite takes the text result from the application from</code></span>
<span class="codeline" id="line-5833"><code>** the 2nd parameter of the sqlite3_result_text* interfaces.</code></span>
<span class="codeline" id="line-5834"><code>** ^If the 3rd parameter to the sqlite3_result_text* interfaces</code></span>
<span class="codeline" id="line-5835"><code>** is negative, then SQLite takes result text from the 2nd parameter</code></span>
<span class="codeline" id="line-5836"><code>** through the first zero character.</code></span>
<span class="codeline" id="line-5837"><code>** ^If the 3rd parameter to the sqlite3_result_text* interfaces</code></span>
<span class="codeline" id="line-5838"><code>** is non-negative, then as many bytes (not characters) of the text</code></span>
<span class="codeline" id="line-5839"><code>** pointed to by the 2nd parameter are taken as the application-defined</code></span>
<span class="codeline" id="line-5840"><code>** function result.  If the 3rd parameter is non-negative, then it</code></span>
<span class="codeline" id="line-5841"><code>** must be the byte offset into the string where the NUL terminator would</code></span>
<span class="codeline" id="line-5842"><code>** appear if the string where NUL terminated.  If any NUL characters occur</code></span>
<span class="codeline" id="line-5843"><code>** in the string at a byte offset that is less than the value of the 3rd</code></span>
<span class="codeline" id="line-5844"><code>** parameter, then the resulting string will contain embedded NULs and the</code></span>
<span class="codeline" id="line-5845"><code>** result of expressions operating on strings with embedded NULs is undefined.</code></span>
<span class="codeline" id="line-5846"><code>** ^If the 4th parameter to the sqlite3_result_text* interfaces</code></span>
<span class="codeline" id="line-5847"><code>** or sqlite3_result_blob is a non-NULL pointer, then SQLite calls that</code></span>
<span class="codeline" id="line-5848"><code>** function as the destructor on the text or BLOB result when it has</code></span>
<span class="codeline" id="line-5849"><code>** finished using that result.</code></span>
<span class="codeline" id="line-5850"><code>** ^If the 4th parameter to the sqlite3_result_text* interfaces or to</code></span>
<span class="codeline" id="line-5851"><code>** sqlite3_result_blob is the special constant SQLITE_STATIC, then SQLite</code></span>
<span class="codeline" id="line-5852"><code>** assumes that the text or BLOB result is in constant space and does not</code></span>
<span class="codeline" id="line-5853"><code>** copy the content of the parameter nor call a destructor on the content</code></span>
<span class="codeline" id="line-5854"><code>** when it has finished using that result.</code></span>
<span class="codeline" id="line-5855"><code>** ^If the 4th parameter to the sqlite3_result_text* interfaces</code></span>
<span class="codeline" id="line-5856"><code>** or sqlite3_result_blob is the special constant SQLITE_TRANSIENT</code></span>
<span class="codeline" id="line-5857"><code>** then SQLite makes a copy of the result into space obtained</code></span>
<span class="codeline" id="line-5858"><code>** from [sqlite3_malloc()] before it returns.</code></span>
<span class="codeline" id="line-5859"><code>**</code></span>
<span class="codeline" id="line-5860"><code>** ^For the sqlite3_result_text16(), sqlite3_result_text16le(), and</code></span>
<span class="codeline" id="line-5861"><code>** sqlite3_result_text16be() routines, and for sqlite3_result_text64()</code></span>
<span class="codeline" id="line-5862"><code>** when the encoding is not UTF8, if the input UTF16 begins with a</code></span>
<span class="codeline" id="line-5863"><code>** byte-order mark (BOM, U+FEFF) then the BOM is removed from the</code></span>
<span class="codeline" id="line-5864"><code>** string and the rest of the string is interpreted according to the</code></span>
<span class="codeline" id="line-5865"><code>** byte-order specified by the BOM.  ^The byte-order specified by</code></span>
<span class="codeline" id="line-5866"><code>** the BOM at the beginning of the text overrides the byte-order</code></span>
<span class="codeline" id="line-5867"><code>** specified by the interface procedure.  ^So, for example, if</code></span>
<span class="codeline" id="line-5868"><code>** sqlite3_result_text16le() is invoked with text that begins</code></span>
<span class="codeline" id="line-5869"><code>** with bytes 0xfe, 0xff (a big-endian byte-order mark) then the</code></span>
<span class="codeline" id="line-5870"><code>** first two bytes of input are skipped and the remaining input</code></span>
<span class="codeline" id="line-5871"><code>** is interpreted as UTF16BE text.</code></span>
<span class="codeline" id="line-5872"><code>**</code></span>
<span class="codeline" id="line-5873"><code>** ^For UTF16 input text to the sqlite3_result_text16(),</code></span>
<span class="codeline" id="line-5874"><code>** sqlite3_result_text16be(), sqlite3_result_text16le(), and</code></span>
<span class="codeline" id="line-5875"><code>** sqlite3_result_text64() routines, if the text contains invalid</code></span>
<span class="codeline" id="line-5876"><code>** UTF16 characters, the invalid characters might be converted</code></span>
<span class="codeline" id="line-5877"><code>** into the unicode replacement character, U+FFFD.</code></span>
<span class="codeline" id="line-5878"><code>**</code></span>
<span class="codeline" id="line-5879"><code>** ^The sqlite3_result_value() interface sets the result of</code></span>
<span class="codeline" id="line-5880"><code>** the application-defined function to be a copy of the</code></span>
<span class="codeline" id="line-5881"><code>** [unprotected sqlite3_value] object specified by the 2nd parameter.  ^The</code></span>
<span class="codeline" id="line-5882"><code>** sqlite3_result_value() interface makes a copy of the [sqlite3_value]</code></span>
<span class="codeline" id="line-5883"><code>** so that the [sqlite3_value] specified in the parameter may change or</code></span>
<span class="codeline" id="line-5884"><code>** be deallocated after sqlite3_result_value() returns without harm.</code></span>
<span class="codeline" id="line-5885"><code>** ^A [protected sqlite3_value] object may always be used where an</code></span>
<span class="codeline" id="line-5886"><code>** [unprotected sqlite3_value] object is required, so either</code></span>
<span class="codeline" id="line-5887"><code>** kind of [sqlite3_value] object can be used with this interface.</code></span>
<span class="codeline" id="line-5888"><code>**</code></span>
<span class="codeline" id="line-5889"><code>** ^The sqlite3_result_pointer(C,P,T,D) interface sets the result to an</code></span>
<span class="codeline" id="line-5890"><code>** SQL NULL value, just like [sqlite3_result_null(C)], except that it</code></span>
<span class="codeline" id="line-5891"><code>** also associates the host-language pointer P or type T with that</code></span>
<span class="codeline" id="line-5892"><code>** NULL value such that the pointer can be retrieved within an</code></span>
<span class="codeline" id="line-5893"><code>** [application-defined SQL function] using [sqlite3_value_pointer()].</code></span>
<span class="codeline" id="line-5894"><code>** ^If the D parameter is not NULL, then it is a pointer to a destructor</code></span>
<span class="codeline" id="line-5895"><code>** for the P parameter.  ^SQLite invokes D with P as its only argument</code></span>
<span class="codeline" id="line-5896"><code>** when SQLite is finished with P.  The T parameter should be a static</code></span>
<span class="codeline" id="line-5897"><code>** string and preferably a string literal. The sqlite3_result_pointer()</code></span>
<span class="codeline" id="line-5898"><code>** routine is part of the [pointer passing interface] added for SQLite 3.20.0.</code></span>
<span class="codeline" id="line-5899"><code>**</code></span>
<span class="codeline" id="line-5900"><code>** If these routines are called from within the different thread</code></span>
<span class="codeline" id="line-5901"><code>** than the one containing the application-defined function that received</code></span>
<span class="codeline" id="line-5902"><code>** the [sqlite3_context] pointer, the results are undefined.</code></span>
<span class="codeline" id="line-5903"><code>*/</code></span>
<span class="codeline" id="line-5904"><code>SQLITE_API void sqlite3_result_blob(sqlite3_context*, const void*, int, void(*)(void*));</code></span>
<span class="codeline" id="line-5905"><code>SQLITE_API void sqlite3_result_blob64(sqlite3_context*,const void*,</code></span>
<span class="codeline" id="line-5906"><code>                           sqlite3_uint64,void(*)(void*));</code></span>
<span class="codeline" id="line-5907"><code>SQLITE_API void sqlite3_result_double(sqlite3_context*, double);</code></span>
<span class="codeline" id="line-5908"><code>SQLITE_API void sqlite3_result_error(sqlite3_context*, const char*, int);</code></span>
<span class="codeline" id="line-5909"><code>SQLITE_API void sqlite3_result_error16(sqlite3_context*, const void*, int);</code></span>
<span class="codeline" id="line-5910"><code>SQLITE_API void sqlite3_result_error_toobig(sqlite3_context*);</code></span>
<span class="codeline" id="line-5911"><code>SQLITE_API void sqlite3_result_error_nomem(sqlite3_context*);</code></span>
<span class="codeline" id="line-5912"><code>SQLITE_API void sqlite3_result_error_code(sqlite3_context*, int);</code></span>
<span class="codeline" id="line-5913"><code>SQLITE_API void sqlite3_result_int(sqlite3_context*, int);</code></span>
<span class="codeline" id="line-5914"><code>SQLITE_API void sqlite3_result_int64(sqlite3_context*, sqlite3_int64);</code></span>
<span class="codeline" id="line-5915"><code>SQLITE_API void sqlite3_result_null(sqlite3_context*);</code></span>
<span class="codeline" id="line-5916"><code>SQLITE_API void sqlite3_result_text(sqlite3_context*, const char*, int, void(*)(void*));</code></span>
<span class="codeline" id="line-5917"><code>SQLITE_API void sqlite3_result_text64(sqlite3_context*, const char*,sqlite3_uint64,</code></span>
<span class="codeline" id="line-5918"><code>                           void(*)(void*), unsigned char encoding);</code></span>
<span class="codeline" id="line-5919"><code>SQLITE_API void sqlite3_result_text16(sqlite3_context*, const void*, int, void(*)(void*));</code></span>
<span class="codeline" id="line-5920"><code>SQLITE_API void sqlite3_result_text16le(sqlite3_context*, const void*, int,void(*)(void*));</code></span>
<span class="codeline" id="line-5921"><code>SQLITE_API void sqlite3_result_text16be(sqlite3_context*, const void*, int,void(*)(void*));</code></span>
<span class="codeline" id="line-5922"><code>SQLITE_API void sqlite3_result_value(sqlite3_context*, sqlite3_value*);</code></span>
<span class="codeline" id="line-5923"><code>SQLITE_API void sqlite3_result_pointer(sqlite3_context*, void*,const char*,void(*)(void*));</code></span>
<span class="codeline" id="line-5924"><code>SQLITE_API void sqlite3_result_zeroblob(sqlite3_context*, int n);</code></span>
<span class="codeline" id="line-5925"><code>SQLITE_API int sqlite3_result_zeroblob64(sqlite3_context*, sqlite3_uint64 n);</code></span>
<span class="codeline" id="line-5926"><code></code></span>
<span class="codeline" id="line-5927"><code></code></span>
<span class="codeline" id="line-5928"><code>/*</code></span>
<span class="codeline" id="line-5929"><code>** CAPI3REF: Setting The Subtype Of An SQL Function</code></span>
<span class="codeline" id="line-5930"><code>** METHOD: sqlite3_context</code></span>
<span class="codeline" id="line-5931"><code>**</code></span>
<span class="codeline" id="line-5932"><code>** The sqlite3_result_subtype(C,T) function causes the subtype of</code></span>
<span class="codeline" id="line-5933"><code>** the result from the [application-defined SQL function] with</code></span>
<span class="codeline" id="line-5934"><code>** [sqlite3_context] C to be the value T.  Only the lower 8 bits</code></span>
<span class="codeline" id="line-5935"><code>** of the subtype T are preserved in current versions of SQLite;</code></span>
<span class="codeline" id="line-5936"><code>** higher order bits are discarded.</code></span>
<span class="codeline" id="line-5937"><code>** The number of subtype bytes preserved by SQLite might increase</code></span>
<span class="codeline" id="line-5938"><code>** in future releases of SQLite.</code></span>
<span class="codeline" id="line-5939"><code>*/</code></span>
<span class="codeline" id="line-5940"><code>SQLITE_API void sqlite3_result_subtype(sqlite3_context*,unsigned int);</code></span>
<span class="codeline" id="line-5941"><code></code></span>
<span class="codeline" id="line-5942"><code>/*</code></span>
<span class="codeline" id="line-5943"><code>** CAPI3REF: Define New Collating Sequences</code></span>
<span class="codeline" id="line-5944"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-5945"><code>**</code></span>
<span class="codeline" id="line-5946"><code>** ^These functions add, remove, or modify a [collation] associated</code></span>
<span class="codeline" id="line-5947"><code>** with the [database connection] specified as the first argument.</code></span>
<span class="codeline" id="line-5948"><code>**</code></span>
<span class="codeline" id="line-5949"><code>** ^The name of the collation is a UTF-8 string</code></span>
<span class="codeline" id="line-5950"><code>** for sqlite3_create_collation() and sqlite3_create_collation_v2()</code></span>
<span class="codeline" id="line-5951"><code>** and a UTF-16 string in native byte order for sqlite3_create_collation16().</code></span>
<span class="codeline" id="line-5952"><code>** ^Collation names that compare equal according to [sqlite3_strnicmp()] are</code></span>
<span class="codeline" id="line-5953"><code>** considered to be the same name.</code></span>
<span class="codeline" id="line-5954"><code>**</code></span>
<span class="codeline" id="line-5955"><code>** ^(The third argument (eTextRep) must be one of the constants:</code></span>
<span class="codeline" id="line-5956"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-5957"><code>** &lt;li&gt; [SQLITE_UTF8],</code></span>
<span class="codeline" id="line-5958"><code>** &lt;li&gt; [SQLITE_UTF16LE],</code></span>
<span class="codeline" id="line-5959"><code>** &lt;li&gt; [SQLITE_UTF16BE],</code></span>
<span class="codeline" id="line-5960"><code>** &lt;li&gt; [SQLITE_UTF16], or</code></span>
<span class="codeline" id="line-5961"><code>** &lt;li&gt; [SQLITE_UTF16_ALIGNED].</code></span>
<span class="codeline" id="line-5962"><code>** &lt;/ul&gt;)^</code></span>
<span class="codeline" id="line-5963"><code>** ^The eTextRep argument determines the encoding of strings passed</code></span>
<span class="codeline" id="line-5964"><code>** to the collating function callback, xCompare.</code></span>
<span class="codeline" id="line-5965"><code>** ^The [SQLITE_UTF16] and [SQLITE_UTF16_ALIGNED] values for eTextRep</code></span>
<span class="codeline" id="line-5966"><code>** force strings to be UTF16 with native byte order.</code></span>
<span class="codeline" id="line-5967"><code>** ^The [SQLITE_UTF16_ALIGNED] value for eTextRep forces strings to begin</code></span>
<span class="codeline" id="line-5968"><code>** on an even byte address.</code></span>
<span class="codeline" id="line-5969"><code>**</code></span>
<span class="codeline" id="line-5970"><code>** ^The fourth argument, pArg, is an application data pointer that is passed</code></span>
<span class="codeline" id="line-5971"><code>** through as the first argument to the collating function callback.</code></span>
<span class="codeline" id="line-5972"><code>**</code></span>
<span class="codeline" id="line-5973"><code>** ^The fifth argument, xCompare, is a pointer to the collating function.</code></span>
<span class="codeline" id="line-5974"><code>** ^Multiple collating functions can be registered using the same name but</code></span>
<span class="codeline" id="line-5975"><code>** with different eTextRep parameters and SQLite will use whichever</code></span>
<span class="codeline" id="line-5976"><code>** function requires the least amount of data transformation.</code></span>
<span class="codeline" id="line-5977"><code>** ^If the xCompare argument is NULL then the collating function is</code></span>
<span class="codeline" id="line-5978"><code>** deleted.  ^When all collating functions having the same name are deleted,</code></span>
<span class="codeline" id="line-5979"><code>** that collation is no longer usable.</code></span>
<span class="codeline" id="line-5980"><code>**</code></span>
<span class="codeline" id="line-5981"><code>** ^The collating function callback is invoked with a copy of the pArg</code></span>
<span class="codeline" id="line-5982"><code>** application data pointer and with two strings in the encoding specified</code></span>
<span class="codeline" id="line-5983"><code>** by the eTextRep argument.  The two integer parameters to the collating</code></span>
<span class="codeline" id="line-5984"><code>** function callback are the length of the two strings, in bytes. The collating</code></span>
<span class="codeline" id="line-5985"><code>** function must return an integer that is negative, zero, or positive</code></span>
<span class="codeline" id="line-5986"><code>** if the first string is less than, equal to, or greater than the second,</code></span>
<span class="codeline" id="line-5987"><code>** respectively.  A collating function must always return the same answer</code></span>
<span class="codeline" id="line-5988"><code>** given the same inputs.  If two or more collating functions are registered</code></span>
<span class="codeline" id="line-5989"><code>** to the same collation name (using different eTextRep values) then all</code></span>
<span class="codeline" id="line-5990"><code>** must give an equivalent answer when invoked with equivalent strings.</code></span>
<span class="codeline" id="line-5991"><code>** The collating function must obey the following properties for all</code></span>
<span class="codeline" id="line-5992"><code>** strings A, B, and C:</code></span>
<span class="codeline" id="line-5993"><code>**</code></span>
<span class="codeline" id="line-5994"><code>** &lt;ol&gt;</code></span>
<span class="codeline" id="line-5995"><code>** &lt;li&gt; If A==B then B==A.</code></span>
<span class="codeline" id="line-5996"><code>** &lt;li&gt; If A==B and B==C then A==C.</code></span>
<span class="codeline" id="line-5997"><code>** &lt;li&gt; If A&amp;lt;B THEN B&amp;gt;A.</code></span>
<span class="codeline" id="line-5998"><code>** &lt;li&gt; If A&amp;lt;B and B&amp;lt;C then A&amp;lt;C.</code></span>
<span class="codeline" id="line-5999"><code>** &lt;/ol&gt;</code></span>
<span class="codeline" id="line-6000"><code>**</code></span>
<span class="codeline" id="line-6001"><code>** If a collating function fails any of the above constraints and that</code></span>
<span class="codeline" id="line-6002"><code>** collating function is registered and used, then the behavior of SQLite</code></span>
<span class="codeline" id="line-6003"><code>** is undefined.</code></span>
<span class="codeline" id="line-6004"><code>**</code></span>
<span class="codeline" id="line-6005"><code>** ^The sqlite3_create_collation_v2() works like sqlite3_create_collation()</code></span>
<span class="codeline" id="line-6006"><code>** with the addition that the xDestroy callback is invoked on pArg when</code></span>
<span class="codeline" id="line-6007"><code>** the collating function is deleted.</code></span>
<span class="codeline" id="line-6008"><code>** ^Collating functions are deleted when they are overridden by later</code></span>
<span class="codeline" id="line-6009"><code>** calls to the collation creation functions or when the</code></span>
<span class="codeline" id="line-6010"><code>** [database connection] is closed using [sqlite3_close()].</code></span>
<span class="codeline" id="line-6011"><code>**</code></span>
<span class="codeline" id="line-6012"><code>** ^The xDestroy callback is &lt;u&gt;not&lt;/u&gt; called if the</code></span>
<span class="codeline" id="line-6013"><code>** sqlite3_create_collation_v2() function fails.  Applications that invoke</code></span>
<span class="codeline" id="line-6014"><code>** sqlite3_create_collation_v2() with a non-NULL xDestroy argument should</code></span>
<span class="codeline" id="line-6015"><code>** check the return code and dispose of the application data pointer</code></span>
<span class="codeline" id="line-6016"><code>** themselves rather than expecting SQLite to deal with it for them.</code></span>
<span class="codeline" id="line-6017"><code>** This is different from every other SQLite interface.  The inconsistency</code></span>
<span class="codeline" id="line-6018"><code>** is unfortunate but cannot be changed without breaking backwards</code></span>
<span class="codeline" id="line-6019"><code>** compatibility.</code></span>
<span class="codeline" id="line-6020"><code>**</code></span>
<span class="codeline" id="line-6021"><code>** See also:  [sqlite3_collation_needed()] and [sqlite3_collation_needed16()].</code></span>
<span class="codeline" id="line-6022"><code>*/</code></span>
<span class="codeline" id="line-6023"><code>SQLITE_API int sqlite3_create_collation(</code></span>
<span class="codeline" id="line-6024"><code>  sqlite3*,</code></span>
<span class="codeline" id="line-6025"><code>  const char *zName,</code></span>
<span class="codeline" id="line-6026"><code>  int eTextRep,</code></span>
<span class="codeline" id="line-6027"><code>  void *pArg,</code></span>
<span class="codeline" id="line-6028"><code>  int(*xCompare)(void*,int,const void*,int,const void*)</code></span>
<span class="codeline" id="line-6029"><code>);</code></span>
<span class="codeline" id="line-6030"><code>SQLITE_API int sqlite3_create_collation_v2(</code></span>
<span class="codeline" id="line-6031"><code>  sqlite3*,</code></span>
<span class="codeline" id="line-6032"><code>  const char *zName,</code></span>
<span class="codeline" id="line-6033"><code>  int eTextRep,</code></span>
<span class="codeline" id="line-6034"><code>  void *pArg,</code></span>
<span class="codeline" id="line-6035"><code>  int(*xCompare)(void*,int,const void*,int,const void*),</code></span>
<span class="codeline" id="line-6036"><code>  void(*xDestroy)(void*)</code></span>
<span class="codeline" id="line-6037"><code>);</code></span>
<span class="codeline" id="line-6038"><code>SQLITE_API int sqlite3_create_collation16(</code></span>
<span class="codeline" id="line-6039"><code>  sqlite3*,</code></span>
<span class="codeline" id="line-6040"><code>  const void *zName,</code></span>
<span class="codeline" id="line-6041"><code>  int eTextRep,</code></span>
<span class="codeline" id="line-6042"><code>  void *pArg,</code></span>
<span class="codeline" id="line-6043"><code>  int(*xCompare)(void*,int,const void*,int,const void*)</code></span>
<span class="codeline" id="line-6044"><code>);</code></span>
<span class="codeline" id="line-6045"><code></code></span>
<span class="codeline" id="line-6046"><code>/*</code></span>
<span class="codeline" id="line-6047"><code>** CAPI3REF: Collation Needed Callbacks</code></span>
<span class="codeline" id="line-6048"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6049"><code>**</code></span>
<span class="codeline" id="line-6050"><code>** ^To avoid having to register all collation sequences before a database</code></span>
<span class="codeline" id="line-6051"><code>** can be used, a single callback function may be registered with the</code></span>
<span class="codeline" id="line-6052"><code>** [database connection] to be invoked whenever an undefined collation</code></span>
<span class="codeline" id="line-6053"><code>** sequence is required.</code></span>
<span class="codeline" id="line-6054"><code>**</code></span>
<span class="codeline" id="line-6055"><code>** ^If the function is registered using the sqlite3_collation_needed() API,</code></span>
<span class="codeline" id="line-6056"><code>** then it is passed the names of undefined collation sequences as strings</code></span>
<span class="codeline" id="line-6057"><code>** encoded in UTF-8. ^If sqlite3_collation_needed16() is used,</code></span>
<span class="codeline" id="line-6058"><code>** the names are passed as UTF-16 in machine native byte order.</code></span>
<span class="codeline" id="line-6059"><code>** ^A call to either function replaces the existing collation-needed callback.</code></span>
<span class="codeline" id="line-6060"><code>**</code></span>
<span class="codeline" id="line-6061"><code>** ^(When the callback is invoked, the first argument passed is a copy</code></span>
<span class="codeline" id="line-6062"><code>** of the second argument to sqlite3_collation_needed() or</code></span>
<span class="codeline" id="line-6063"><code>** sqlite3_collation_needed16().  The second argument is the database</code></span>
<span class="codeline" id="line-6064"><code>** connection.  The third argument is one of [SQLITE_UTF8], [SQLITE_UTF16BE],</code></span>
<span class="codeline" id="line-6065"><code>** or [SQLITE_UTF16LE], indicating the most desirable form of the collation</code></span>
<span class="codeline" id="line-6066"><code>** sequence function required.  The fourth parameter is the name of the</code></span>
<span class="codeline" id="line-6067"><code>** required collation sequence.)^</code></span>
<span class="codeline" id="line-6068"><code>**</code></span>
<span class="codeline" id="line-6069"><code>** The callback function should register the desired collation using</code></span>
<span class="codeline" id="line-6070"><code>** [sqlite3_create_collation()], [sqlite3_create_collation16()], or</code></span>
<span class="codeline" id="line-6071"><code>** [sqlite3_create_collation_v2()].</code></span>
<span class="codeline" id="line-6072"><code>*/</code></span>
<span class="codeline" id="line-6073"><code>SQLITE_API int sqlite3_collation_needed(</code></span>
<span class="codeline" id="line-6074"><code>  sqlite3*,</code></span>
<span class="codeline" id="line-6075"><code>  void*,</code></span>
<span class="codeline" id="line-6076"><code>  void(*)(void*,sqlite3*,int eTextRep,const char*)</code></span>
<span class="codeline" id="line-6077"><code>);</code></span>
<span class="codeline" id="line-6078"><code>SQLITE_API int sqlite3_collation_needed16(</code></span>
<span class="codeline" id="line-6079"><code>  sqlite3*,</code></span>
<span class="codeline" id="line-6080"><code>  void*,</code></span>
<span class="codeline" id="line-6081"><code>  void(*)(void*,sqlite3*,int eTextRep,const void*)</code></span>
<span class="codeline" id="line-6082"><code>);</code></span>
<span class="codeline" id="line-6083"><code></code></span>
<span class="codeline" id="line-6084"><code>#ifdef SQLITE_ENABLE_CEROD</code></span>
<span class="codeline" id="line-6085"><code>/*</code></span>
<span class="codeline" id="line-6086"><code>** Specify the activation key for a CEROD database.  Unless</code></span>
<span class="codeline" id="line-6087"><code>** activated, none of the CEROD routines will work.</code></span>
<span class="codeline" id="line-6088"><code>*/</code></span>
<span class="codeline" id="line-6089"><code>SQLITE_API void sqlite3_activate_cerod(</code></span>
<span class="codeline" id="line-6090"><code>  const char *zPassPhrase        /* Activation phrase */</code></span>
<span class="codeline" id="line-6091"><code>);</code></span>
<span class="codeline" id="line-6092"><code>#endif</code></span>
<span class="codeline" id="line-6093"><code></code></span>
<span class="codeline" id="line-6094"><code>/*</code></span>
<span class="codeline" id="line-6095"><code>** CAPI3REF: Suspend Execution For A Short Time</code></span>
<span class="codeline" id="line-6096"><code>**</code></span>
<span class="codeline" id="line-6097"><code>** The sqlite3_sleep() function causes the current thread to suspend execution</code></span>
<span class="codeline" id="line-6098"><code>** for at least a number of milliseconds specified in its parameter.</code></span>
<span class="codeline" id="line-6099"><code>**</code></span>
<span class="codeline" id="line-6100"><code>** If the operating system does not support sleep requests with</code></span>
<span class="codeline" id="line-6101"><code>** millisecond time resolution, then the time will be rounded up to</code></span>
<span class="codeline" id="line-6102"><code>** the nearest second. The number of milliseconds of sleep actually</code></span>
<span class="codeline" id="line-6103"><code>** requested from the operating system is returned.</code></span>
<span class="codeline" id="line-6104"><code>**</code></span>
<span class="codeline" id="line-6105"><code>** ^SQLite implements this interface by calling the xSleep()</code></span>
<span class="codeline" id="line-6106"><code>** method of the default [sqlite3_vfs] object.  If the xSleep() method</code></span>
<span class="codeline" id="line-6107"><code>** of the default VFS is not implemented correctly, or not implemented at</code></span>
<span class="codeline" id="line-6108"><code>** all, then the behavior of sqlite3_sleep() may deviate from the description</code></span>
<span class="codeline" id="line-6109"><code>** in the previous paragraphs.</code></span>
<span class="codeline" id="line-6110"><code>*/</code></span>
<span class="codeline" id="line-6111"><code>SQLITE_API int sqlite3_sleep(int);</code></span>
<span class="codeline" id="line-6112"><code></code></span>
<span class="codeline" id="line-6113"><code>/*</code></span>
<span class="codeline" id="line-6114"><code>** CAPI3REF: Name Of The Folder Holding Temporary Files</code></span>
<span class="codeline" id="line-6115"><code>**</code></span>
<span class="codeline" id="line-6116"><code>** ^(If this global variable is made to point to a string which is</code></span>
<span class="codeline" id="line-6117"><code>** the name of a folder (a.k.a. directory), then all temporary files</code></span>
<span class="codeline" id="line-6118"><code>** created by SQLite when using a built-in [sqlite3_vfs | VFS]</code></span>
<span class="codeline" id="line-6119"><code>** will be placed in that directory.)^  ^If this variable</code></span>
<span class="codeline" id="line-6120"><code>** is a NULL pointer, then SQLite performs a search for an appropriate</code></span>
<span class="codeline" id="line-6121"><code>** temporary file directory.</code></span>
<span class="codeline" id="line-6122"><code>**</code></span>
<span class="codeline" id="line-6123"><code>** Applications are strongly discouraged from using this global variable.</code></span>
<span class="codeline" id="line-6124"><code>** It is required to set a temporary folder on Windows Runtime (WinRT).</code></span>
<span class="codeline" id="line-6125"><code>** But for all other platforms, it is highly recommended that applications</code></span>
<span class="codeline" id="line-6126"><code>** neither read nor write this variable.  This global variable is a relic</code></span>
<span class="codeline" id="line-6127"><code>** that exists for backwards compatibility of legacy applications and should</code></span>
<span class="codeline" id="line-6128"><code>** be avoided in new projects.</code></span>
<span class="codeline" id="line-6129"><code>**</code></span>
<span class="codeline" id="line-6130"><code>** It is not safe to read or modify this variable in more than one</code></span>
<span class="codeline" id="line-6131"><code>** thread at a time.  It is not safe to read or modify this variable</code></span>
<span class="codeline" id="line-6132"><code>** if a [database connection] is being used at the same time in a separate</code></span>
<span class="codeline" id="line-6133"><code>** thread.</code></span>
<span class="codeline" id="line-6134"><code>** It is intended that this variable be set once</code></span>
<span class="codeline" id="line-6135"><code>** as part of process initialization and before any SQLite interface</code></span>
<span class="codeline" id="line-6136"><code>** routines have been called and that this variable remain unchanged</code></span>
<span class="codeline" id="line-6137"><code>** thereafter.</code></span>
<span class="codeline" id="line-6138"><code>**</code></span>
<span class="codeline" id="line-6139"><code>** ^The [temp_store_directory pragma] may modify this variable and cause</code></span>
<span class="codeline" id="line-6140"><code>** it to point to memory obtained from [sqlite3_malloc].  ^Furthermore,</code></span>
<span class="codeline" id="line-6141"><code>** the [temp_store_directory pragma] always assumes that any string</code></span>
<span class="codeline" id="line-6142"><code>** that this variable points to is held in memory obtained from</code></span>
<span class="codeline" id="line-6143"><code>** [sqlite3_malloc] and the pragma may attempt to free that memory</code></span>
<span class="codeline" id="line-6144"><code>** using [sqlite3_free].</code></span>
<span class="codeline" id="line-6145"><code>** Hence, if this variable is modified directly, either it should be</code></span>
<span class="codeline" id="line-6146"><code>** made NULL or made to point to memory obtained from [sqlite3_malloc]</code></span>
<span class="codeline" id="line-6147"><code>** or else the use of the [temp_store_directory pragma] should be avoided.</code></span>
<span class="codeline" id="line-6148"><code>** Except when requested by the [temp_store_directory pragma], SQLite</code></span>
<span class="codeline" id="line-6149"><code>** does not free the memory that sqlite3_temp_directory points to.  If</code></span>
<span class="codeline" id="line-6150"><code>** the application wants that memory to be freed, it must do</code></span>
<span class="codeline" id="line-6151"><code>** so itself, taking care to only do so after all [database connection]</code></span>
<span class="codeline" id="line-6152"><code>** objects have been destroyed.</code></span>
<span class="codeline" id="line-6153"><code>**</code></span>
<span class="codeline" id="line-6154"><code>** &lt;b&gt;Note to Windows Runtime users:&lt;/b&gt;  The temporary directory must be set</code></span>
<span class="codeline" id="line-6155"><code>** prior to calling [sqlite3_open] or [sqlite3_open_v2].  Otherwise, various</code></span>
<span class="codeline" id="line-6156"><code>** features that require the use of temporary files may fail.  Here is an</code></span>
<span class="codeline" id="line-6157"><code>** example of how to do this using C++ with the Windows Runtime:</code></span>
<span class="codeline" id="line-6158"><code>**</code></span>
<span class="codeline" id="line-6159"><code>** &lt;blockquote&gt;&lt;pre&gt;</code></span>
<span class="codeline" id="line-6160"><code>** LPCWSTR zPath = Windows::Storage::ApplicationData::Current-&gt;</code></span>
<span class="codeline" id="line-6161"><code>** &amp;nbsp;     TemporaryFolder-&gt;Path-&gt;Data();</code></span>
<span class="codeline" id="line-6162"><code>** char zPathBuf&amp;#91;MAX_PATH + 1&amp;#93;;</code></span>
<span class="codeline" id="line-6163"><code>** memset(zPathBuf, 0, sizeof(zPathBuf));</code></span>
<span class="codeline" id="line-6164"><code>** WideCharToMultiByte(CP_UTF8, 0, zPath, -1, zPathBuf, sizeof(zPathBuf),</code></span>
<span class="codeline" id="line-6165"><code>** &amp;nbsp;     NULL, NULL);</code></span>
<span class="codeline" id="line-6166"><code>** sqlite3_temp_directory = sqlite3_mprintf("%s", zPathBuf);</code></span>
<span class="codeline" id="line-6167"><code>** &lt;/pre&gt;&lt;/blockquote&gt;</code></span>
<span class="codeline" id="line-6168"><code>*/</code></span>
<span class="codeline" id="line-6169"><code>SQLITE_API SQLITE_EXTERN char *sqlite3_temp_directory;</code></span>
<span class="codeline" id="line-6170"><code></code></span>
<span class="codeline" id="line-6171"><code>/*</code></span>
<span class="codeline" id="line-6172"><code>** CAPI3REF: Name Of The Folder Holding Database Files</code></span>
<span class="codeline" id="line-6173"><code>**</code></span>
<span class="codeline" id="line-6174"><code>** ^(If this global variable is made to point to a string which is</code></span>
<span class="codeline" id="line-6175"><code>** the name of a folder (a.k.a. directory), then all database files</code></span>
<span class="codeline" id="line-6176"><code>** specified with a relative pathname and created or accessed by</code></span>
<span class="codeline" id="line-6177"><code>** SQLite when using a built-in windows [sqlite3_vfs | VFS] will be assumed</code></span>
<span class="codeline" id="line-6178"><code>** to be relative to that directory.)^ ^If this variable is a NULL</code></span>
<span class="codeline" id="line-6179"><code>** pointer, then SQLite assumes that all database files specified</code></span>
<span class="codeline" id="line-6180"><code>** with a relative pathname are relative to the current directory</code></span>
<span class="codeline" id="line-6181"><code>** for the process.  Only the windows VFS makes use of this global</code></span>
<span class="codeline" id="line-6182"><code>** variable; it is ignored by the unix VFS.</code></span>
<span class="codeline" id="line-6183"><code>**</code></span>
<span class="codeline" id="line-6184"><code>** Changing the value of this variable while a database connection is</code></span>
<span class="codeline" id="line-6185"><code>** open can result in a corrupt database.</code></span>
<span class="codeline" id="line-6186"><code>**</code></span>
<span class="codeline" id="line-6187"><code>** It is not safe to read or modify this variable in more than one</code></span>
<span class="codeline" id="line-6188"><code>** thread at a time.  It is not safe to read or modify this variable</code></span>
<span class="codeline" id="line-6189"><code>** if a [database connection] is being used at the same time in a separate</code></span>
<span class="codeline" id="line-6190"><code>** thread.</code></span>
<span class="codeline" id="line-6191"><code>** It is intended that this variable be set once</code></span>
<span class="codeline" id="line-6192"><code>** as part of process initialization and before any SQLite interface</code></span>
<span class="codeline" id="line-6193"><code>** routines have been called and that this variable remain unchanged</code></span>
<span class="codeline" id="line-6194"><code>** thereafter.</code></span>
<span class="codeline" id="line-6195"><code>**</code></span>
<span class="codeline" id="line-6196"><code>** ^The [data_store_directory pragma] may modify this variable and cause</code></span>
<span class="codeline" id="line-6197"><code>** it to point to memory obtained from [sqlite3_malloc].  ^Furthermore,</code></span>
<span class="codeline" id="line-6198"><code>** the [data_store_directory pragma] always assumes that any string</code></span>
<span class="codeline" id="line-6199"><code>** that this variable points to is held in memory obtained from</code></span>
<span class="codeline" id="line-6200"><code>** [sqlite3_malloc] and the pragma may attempt to free that memory</code></span>
<span class="codeline" id="line-6201"><code>** using [sqlite3_free].</code></span>
<span class="codeline" id="line-6202"><code>** Hence, if this variable is modified directly, either it should be</code></span>
<span class="codeline" id="line-6203"><code>** made NULL or made to point to memory obtained from [sqlite3_malloc]</code></span>
<span class="codeline" id="line-6204"><code>** or else the use of the [data_store_directory pragma] should be avoided.</code></span>
<span class="codeline" id="line-6205"><code>*/</code></span>
<span class="codeline" id="line-6206"><code>SQLITE_API SQLITE_EXTERN char *sqlite3_data_directory;</code></span>
<span class="codeline" id="line-6207"><code></code></span>
<span class="codeline" id="line-6208"><code>/*</code></span>
<span class="codeline" id="line-6209"><code>** CAPI3REF: Win32 Specific Interface</code></span>
<span class="codeline" id="line-6210"><code>**</code></span>
<span class="codeline" id="line-6211"><code>** These interfaces are available only on Windows.  The</code></span>
<span class="codeline" id="line-6212"><code>** [sqlite3_win32_set_directory] interface is used to set the value associated</code></span>
<span class="codeline" id="line-6213"><code>** with the [sqlite3_temp_directory] or [sqlite3_data_directory] variable, to</code></span>
<span class="codeline" id="line-6214"><code>** zValue, depending on the value of the type parameter.  The zValue parameter</code></span>
<span class="codeline" id="line-6215"><code>** should be NULL to cause the previous value to be freed via [sqlite3_free];</code></span>
<span class="codeline" id="line-6216"><code>** a non-NULL value will be copied into memory obtained from [sqlite3_malloc]</code></span>
<span class="codeline" id="line-6217"><code>** prior to being used.  The [sqlite3_win32_set_directory] interface returns</code></span>
<span class="codeline" id="line-6218"><code>** [SQLITE_OK] to indicate success, [SQLITE_ERROR] if the type is unsupported,</code></span>
<span class="codeline" id="line-6219"><code>** or [SQLITE_NOMEM] if memory could not be allocated.  The value of the</code></span>
<span class="codeline" id="line-6220"><code>** [sqlite3_data_directory] variable is intended to act as a replacement for</code></span>
<span class="codeline" id="line-6221"><code>** the current directory on the sub-platforms of Win32 where that concept is</code></span>
<span class="codeline" id="line-6222"><code>** not present, e.g. WinRT and UWP.  The [sqlite3_win32_set_directory8] and</code></span>
<span class="codeline" id="line-6223"><code>** [sqlite3_win32_set_directory16] interfaces behave exactly the same as the</code></span>
<span class="codeline" id="line-6224"><code>** sqlite3_win32_set_directory interface except the string parameter must be</code></span>
<span class="codeline" id="line-6225"><code>** UTF-8 or UTF-16, respectively.</code></span>
<span class="codeline" id="line-6226"><code>*/</code></span>
<span class="codeline" id="line-6227"><code>SQLITE_API int sqlite3_win32_set_directory(</code></span>
<span class="codeline" id="line-6228"><code>  unsigned long type, /* Identifier for directory being set or reset */</code></span>
<span class="codeline" id="line-6229"><code>  void *zValue        /* New value for directory being set or reset */</code></span>
<span class="codeline" id="line-6230"><code>);</code></span>
<span class="codeline" id="line-6231"><code>SQLITE_API int sqlite3_win32_set_directory8(unsigned long type, const char *zValue);</code></span>
<span class="codeline" id="line-6232"><code>SQLITE_API int sqlite3_win32_set_directory16(unsigned long type, const void *zValue);</code></span>
<span class="codeline" id="line-6233"><code></code></span>
<span class="codeline" id="line-6234"><code>/*</code></span>
<span class="codeline" id="line-6235"><code>** CAPI3REF: Win32 Directory Types</code></span>
<span class="codeline" id="line-6236"><code>**</code></span>
<span class="codeline" id="line-6237"><code>** These macros are only available on Windows.  They define the allowed values</code></span>
<span class="codeline" id="line-6238"><code>** for the type argument to the [sqlite3_win32_set_directory] interface.</code></span>
<span class="codeline" id="line-6239"><code>*/</code></span>
<span class="codeline" id="line-6240"><code>#define SQLITE_WIN32_DATA_DIRECTORY_TYPE  1</code></span>
<span class="codeline" id="line-6241"><code>#define SQLITE_WIN32_TEMP_DIRECTORY_TYPE  2</code></span>
<span class="codeline" id="line-6242"><code></code></span>
<span class="codeline" id="line-6243"><code>/*</code></span>
<span class="codeline" id="line-6244"><code>** CAPI3REF: Test For Auto-Commit Mode</code></span>
<span class="codeline" id="line-6245"><code>** KEYWORDS: {autocommit mode}</code></span>
<span class="codeline" id="line-6246"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6247"><code>**</code></span>
<span class="codeline" id="line-6248"><code>** ^The sqlite3_get_autocommit() interface returns non-zero or</code></span>
<span class="codeline" id="line-6249"><code>** zero if the given database connection is or is not in autocommit mode,</code></span>
<span class="codeline" id="line-6250"><code>** respectively.  ^Autocommit mode is on by default.</code></span>
<span class="codeline" id="line-6251"><code>** ^Autocommit mode is disabled by a [BEGIN] statement.</code></span>
<span class="codeline" id="line-6252"><code>** ^Autocommit mode is re-enabled by a [COMMIT] or [ROLLBACK].</code></span>
<span class="codeline" id="line-6253"><code>**</code></span>
<span class="codeline" id="line-6254"><code>** If certain kinds of errors occur on a statement within a multi-statement</code></span>
<span class="codeline" id="line-6255"><code>** transaction (errors including [SQLITE_FULL], [SQLITE_IOERR],</code></span>
<span class="codeline" id="line-6256"><code>** [SQLITE_NOMEM], [SQLITE_BUSY], and [SQLITE_INTERRUPT]) then the</code></span>
<span class="codeline" id="line-6257"><code>** transaction might be rolled back automatically.  The only way to</code></span>
<span class="codeline" id="line-6258"><code>** find out whether SQLite automatically rolled back the transaction after</code></span>
<span class="codeline" id="line-6259"><code>** an error is to use this function.</code></span>
<span class="codeline" id="line-6260"><code>**</code></span>
<span class="codeline" id="line-6261"><code>** If another thread changes the autocommit status of the database</code></span>
<span class="codeline" id="line-6262"><code>** connection while this routine is running, then the return value</code></span>
<span class="codeline" id="line-6263"><code>** is undefined.</code></span>
<span class="codeline" id="line-6264"><code>*/</code></span>
<span class="codeline" id="line-6265"><code>SQLITE_API int sqlite3_get_autocommit(sqlite3*);</code></span>
<span class="codeline" id="line-6266"><code></code></span>
<span class="codeline" id="line-6267"><code>/*</code></span>
<span class="codeline" id="line-6268"><code>** CAPI3REF: Find The Database Handle Of A Prepared Statement</code></span>
<span class="codeline" id="line-6269"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-6270"><code>**</code></span>
<span class="codeline" id="line-6271"><code>** ^The sqlite3_db_handle interface returns the [database connection] handle</code></span>
<span class="codeline" id="line-6272"><code>** to which a [prepared statement] belongs.  ^The [database connection]</code></span>
<span class="codeline" id="line-6273"><code>** returned by sqlite3_db_handle is the same [database connection]</code></span>
<span class="codeline" id="line-6274"><code>** that was the first argument</code></span>
<span class="codeline" id="line-6275"><code>** to the [sqlite3_prepare_v2()] call (or its variants) that was used to</code></span>
<span class="codeline" id="line-6276"><code>** create the statement in the first place.</code></span>
<span class="codeline" id="line-6277"><code>*/</code></span>
<span class="codeline" id="line-6278"><code>SQLITE_API sqlite3 *sqlite3_db_handle(sqlite3_stmt*);</code></span>
<span class="codeline" id="line-6279"><code></code></span>
<span class="codeline" id="line-6280"><code>/*</code></span>
<span class="codeline" id="line-6281"><code>** CAPI3REF: Return The Schema Name For A Database Connection</code></span>
<span class="codeline" id="line-6282"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6283"><code>**</code></span>
<span class="codeline" id="line-6284"><code>** ^The sqlite3_db_name(D,N) interface returns a pointer to the schema name</code></span>
<span class="codeline" id="line-6285"><code>** for the N-th database on database connection D, or a NULL pointer of N is</code></span>
<span class="codeline" id="line-6286"><code>** out of range.  An N value of 0 means the main database file.  An N of 1 is</code></span>
<span class="codeline" id="line-6287"><code>** the "temp" schema.  Larger values of N correspond to various ATTACH-ed</code></span>
<span class="codeline" id="line-6288"><code>** databases.</code></span>
<span class="codeline" id="line-6289"><code>**</code></span>
<span class="codeline" id="line-6290"><code>** Space to hold the string that is returned by sqlite3_db_name() is managed</code></span>
<span class="codeline" id="line-6291"><code>** by SQLite itself.  The string might be deallocated by any operation that</code></span>
<span class="codeline" id="line-6292"><code>** changes the schema, including [ATTACH] or [DETACH] or calls to</code></span>
<span class="codeline" id="line-6293"><code>** [sqlite3_serialize()] or [sqlite3_deserialize()], even operations that</code></span>
<span class="codeline" id="line-6294"><code>** occur on a different thread.  Applications that need to</code></span>
<span class="codeline" id="line-6295"><code>** remember the string long-term should make their own copy.  Applications that</code></span>
<span class="codeline" id="line-6296"><code>** are accessing the same database connection simultaneously on multiple</code></span>
<span class="codeline" id="line-6297"><code>** threads should mutex-protect calls to this API and should make their own</code></span>
<span class="codeline" id="line-6298"><code>** private copy of the result prior to releasing the mutex.</code></span>
<span class="codeline" id="line-6299"><code>*/</code></span>
<span class="codeline" id="line-6300"><code>SQLITE_API const char *sqlite3_db_name(sqlite3 *db, int N);</code></span>
<span class="codeline" id="line-6301"><code></code></span>
<span class="codeline" id="line-6302"><code>/*</code></span>
<span class="codeline" id="line-6303"><code>** CAPI3REF: Return The Filename For A Database Connection</code></span>
<span class="codeline" id="line-6304"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6305"><code>**</code></span>
<span class="codeline" id="line-6306"><code>** ^The sqlite3_db_filename(D,N) interface returns a pointer to the filename</code></span>
<span class="codeline" id="line-6307"><code>** associated with database N of connection D.</code></span>
<span class="codeline" id="line-6308"><code>** ^If there is no attached database N on the database</code></span>
<span class="codeline" id="line-6309"><code>** connection D, or if database N is a temporary or in-memory database, then</code></span>
<span class="codeline" id="line-6310"><code>** this function will return either a NULL pointer or an empty string.</code></span>
<span class="codeline" id="line-6311"><code>**</code></span>
<span class="codeline" id="line-6312"><code>** ^The string value returned by this routine is owned and managed by</code></span>
<span class="codeline" id="line-6313"><code>** the database connection.  ^The value will be valid until the database N</code></span>
<span class="codeline" id="line-6314"><code>** is [DETACH]-ed or until the database connection closes.</code></span>
<span class="codeline" id="line-6315"><code>**</code></span>
<span class="codeline" id="line-6316"><code>** ^The filename returned by this function is the output of the</code></span>
<span class="codeline" id="line-6317"><code>** xFullPathname method of the [VFS].  ^In other words, the filename</code></span>
<span class="codeline" id="line-6318"><code>** will be an absolute pathname, even if the filename used</code></span>
<span class="codeline" id="line-6319"><code>** to open the database originally was a URI or relative pathname.</code></span>
<span class="codeline" id="line-6320"><code>**</code></span>
<span class="codeline" id="line-6321"><code>** If the filename pointer returned by this routine is not NULL, then it</code></span>
<span class="codeline" id="line-6322"><code>** can be used as the filename input parameter to these routines:</code></span>
<span class="codeline" id="line-6323"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-6324"><code>** &lt;li&gt; [sqlite3_uri_parameter()]</code></span>
<span class="codeline" id="line-6325"><code>** &lt;li&gt; [sqlite3_uri_boolean()]</code></span>
<span class="codeline" id="line-6326"><code>** &lt;li&gt; [sqlite3_uri_int64()]</code></span>
<span class="codeline" id="line-6327"><code>** &lt;li&gt; [sqlite3_filename_database()]</code></span>
<span class="codeline" id="line-6328"><code>** &lt;li&gt; [sqlite3_filename_journal()]</code></span>
<span class="codeline" id="line-6329"><code>** &lt;li&gt; [sqlite3_filename_wal()]</code></span>
<span class="codeline" id="line-6330"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-6331"><code>*/</code></span>
<span class="codeline" id="line-6332"><code>SQLITE_API const char *sqlite3_db_filename(sqlite3 *db, const char *zDbName);</code></span>
<span class="codeline" id="line-6333"><code></code></span>
<span class="codeline" id="line-6334"><code>/*</code></span>
<span class="codeline" id="line-6335"><code>** CAPI3REF: Determine if a database is read-only</code></span>
<span class="codeline" id="line-6336"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6337"><code>**</code></span>
<span class="codeline" id="line-6338"><code>** ^The sqlite3_db_readonly(D,N) interface returns 1 if the database N</code></span>
<span class="codeline" id="line-6339"><code>** of connection D is read-only, 0 if it is read/write, or -1 if N is not</code></span>
<span class="codeline" id="line-6340"><code>** the name of a database on connection D.</code></span>
<span class="codeline" id="line-6341"><code>*/</code></span>
<span class="codeline" id="line-6342"><code>SQLITE_API int sqlite3_db_readonly(sqlite3 *db, const char *zDbName);</code></span>
<span class="codeline" id="line-6343"><code></code></span>
<span class="codeline" id="line-6344"><code>/*</code></span>
<span class="codeline" id="line-6345"><code>** CAPI3REF: Determine the transaction state of a database</code></span>
<span class="codeline" id="line-6346"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6347"><code>**</code></span>
<span class="codeline" id="line-6348"><code>** ^The sqlite3_txn_state(D,S) interface returns the current</code></span>
<span class="codeline" id="line-6349"><code>** [transaction state] of schema S in database connection D.  ^If S is NULL,</code></span>
<span class="codeline" id="line-6350"><code>** then the highest transaction state of any schema on database connection D</code></span>
<span class="codeline" id="line-6351"><code>** is returned.  Transaction states are (in order of lowest to highest):</code></span>
<span class="codeline" id="line-6352"><code>** &lt;ol&gt;</code></span>
<span class="codeline" id="line-6353"><code>** &lt;li value="0"&gt; SQLITE_TXN_NONE</code></span>
<span class="codeline" id="line-6354"><code>** &lt;li value="1"&gt; SQLITE_TXN_READ</code></span>
<span class="codeline" id="line-6355"><code>** &lt;li value="2"&gt; SQLITE_TXN_WRITE</code></span>
<span class="codeline" id="line-6356"><code>** &lt;/ol&gt;</code></span>
<span class="codeline" id="line-6357"><code>** ^If the S argument to sqlite3_txn_state(D,S) is not the name of</code></span>
<span class="codeline" id="line-6358"><code>** a valid schema, then -1 is returned.</code></span>
<span class="codeline" id="line-6359"><code>*/</code></span>
<span class="codeline" id="line-6360"><code>SQLITE_API int sqlite3_txn_state(sqlite3*,const char *zSchema);</code></span>
<span class="codeline" id="line-6361"><code></code></span>
<span class="codeline" id="line-6362"><code>/*</code></span>
<span class="codeline" id="line-6363"><code>** CAPI3REF: Allowed return values from [sqlite3_txn_state()]</code></span>
<span class="codeline" id="line-6364"><code>** KEYWORDS: {transaction state}</code></span>
<span class="codeline" id="line-6365"><code>**</code></span>
<span class="codeline" id="line-6366"><code>** These constants define the current transaction state of a database file.</code></span>
<span class="codeline" id="line-6367"><code>** ^The [sqlite3_txn_state(D,S)] interface returns one of these</code></span>
<span class="codeline" id="line-6368"><code>** constants in order to describe the transaction state of schema S</code></span>
<span class="codeline" id="line-6369"><code>** in [database connection] D.</code></span>
<span class="codeline" id="line-6370"><code>**</code></span>
<span class="codeline" id="line-6371"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-6372"><code>** [[SQLITE_TXN_NONE]] &lt;dt&gt;SQLITE_TXN_NONE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-6373"><code>** &lt;dd&gt;The SQLITE_TXN_NONE state means that no transaction is currently</code></span>
<span class="codeline" id="line-6374"><code>** pending.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-6375"><code>**</code></span>
<span class="codeline" id="line-6376"><code>** [[SQLITE_TXN_READ]] &lt;dt&gt;SQLITE_TXN_READ&lt;/dt&gt;</code></span>
<span class="codeline" id="line-6377"><code>** &lt;dd&gt;The SQLITE_TXN_READ state means that the database is currently</code></span>
<span class="codeline" id="line-6378"><code>** in a read transaction.  Content has been read from the database file</code></span>
<span class="codeline" id="line-6379"><code>** but nothing in the database file has changed.  The transaction state</code></span>
<span class="codeline" id="line-6380"><code>** will advanced to SQLITE_TXN_WRITE if any changes occur and there are</code></span>
<span class="codeline" id="line-6381"><code>** no other conflicting concurrent write transactions.  The transaction</code></span>
<span class="codeline" id="line-6382"><code>** state will revert to SQLITE_TXN_NONE following a [ROLLBACK] or</code></span>
<span class="codeline" id="line-6383"><code>** [COMMIT].&lt;/dd&gt;</code></span>
<span class="codeline" id="line-6384"><code>**</code></span>
<span class="codeline" id="line-6385"><code>** [[SQLITE_TXN_WRITE]] &lt;dt&gt;SQLITE_TXN_WRITE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-6386"><code>** &lt;dd&gt;The SQLITE_TXN_WRITE state means that the database is currently</code></span>
<span class="codeline" id="line-6387"><code>** in a write transaction.  Content has been written to the database file</code></span>
<span class="codeline" id="line-6388"><code>** but has not yet committed.  The transaction state will change to</code></span>
<span class="codeline" id="line-6389"><code>** to SQLITE_TXN_NONE at the next [ROLLBACK] or [COMMIT].&lt;/dd&gt;</code></span>
<span class="codeline" id="line-6390"><code>*/</code></span>
<span class="codeline" id="line-6391"><code>#define SQLITE_TXN_NONE  0</code></span>
<span class="codeline" id="line-6392"><code>#define SQLITE_TXN_READ  1</code></span>
<span class="codeline" id="line-6393"><code>#define SQLITE_TXN_WRITE 2</code></span>
<span class="codeline" id="line-6394"><code></code></span>
<span class="codeline" id="line-6395"><code>/*</code></span>
<span class="codeline" id="line-6396"><code>** CAPI3REF: Find the next prepared statement</code></span>
<span class="codeline" id="line-6397"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6398"><code>**</code></span>
<span class="codeline" id="line-6399"><code>** ^This interface returns a pointer to the next [prepared statement] after</code></span>
<span class="codeline" id="line-6400"><code>** pStmt associated with the [database connection] pDb.  ^If pStmt is NULL</code></span>
<span class="codeline" id="line-6401"><code>** then this interface returns a pointer to the first prepared statement</code></span>
<span class="codeline" id="line-6402"><code>** associated with the database connection pDb.  ^If no prepared statement</code></span>
<span class="codeline" id="line-6403"><code>** satisfies the conditions of this routine, it returns NULL.</code></span>
<span class="codeline" id="line-6404"><code>**</code></span>
<span class="codeline" id="line-6405"><code>** The [database connection] pointer D in a call to</code></span>
<span class="codeline" id="line-6406"><code>** [sqlite3_next_stmt(D,S)] must refer to an open database</code></span>
<span class="codeline" id="line-6407"><code>** connection and in particular must not be a NULL pointer.</code></span>
<span class="codeline" id="line-6408"><code>*/</code></span>
<span class="codeline" id="line-6409"><code>SQLITE_API sqlite3_stmt *sqlite3_next_stmt(sqlite3 *pDb, sqlite3_stmt *pStmt);</code></span>
<span class="codeline" id="line-6410"><code></code></span>
<span class="codeline" id="line-6411"><code>/*</code></span>
<span class="codeline" id="line-6412"><code>** CAPI3REF: Commit And Rollback Notification Callbacks</code></span>
<span class="codeline" id="line-6413"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6414"><code>**</code></span>
<span class="codeline" id="line-6415"><code>** ^The sqlite3_commit_hook() interface registers a callback</code></span>
<span class="codeline" id="line-6416"><code>** function to be invoked whenever a transaction is [COMMIT | committed].</code></span>
<span class="codeline" id="line-6417"><code>** ^Any callback set by a previous call to sqlite3_commit_hook()</code></span>
<span class="codeline" id="line-6418"><code>** for the same database connection is overridden.</code></span>
<span class="codeline" id="line-6419"><code>** ^The sqlite3_rollback_hook() interface registers a callback</code></span>
<span class="codeline" id="line-6420"><code>** function to be invoked whenever a transaction is [ROLLBACK | rolled back].</code></span>
<span class="codeline" id="line-6421"><code>** ^Any callback set by a previous call to sqlite3_rollback_hook()</code></span>
<span class="codeline" id="line-6422"><code>** for the same database connection is overridden.</code></span>
<span class="codeline" id="line-6423"><code>** ^The pArg argument is passed through to the callback.</code></span>
<span class="codeline" id="line-6424"><code>** ^If the callback on a commit hook function returns non-zero,</code></span>
<span class="codeline" id="line-6425"><code>** then the commit is converted into a rollback.</code></span>
<span class="codeline" id="line-6426"><code>**</code></span>
<span class="codeline" id="line-6427"><code>** ^The sqlite3_commit_hook(D,C,P) and sqlite3_rollback_hook(D,C,P) functions</code></span>
<span class="codeline" id="line-6428"><code>** return the P argument from the previous call of the same function</code></span>
<span class="codeline" id="line-6429"><code>** on the same [database connection] D, or NULL for</code></span>
<span class="codeline" id="line-6430"><code>** the first call for each function on D.</code></span>
<span class="codeline" id="line-6431"><code>**</code></span>
<span class="codeline" id="line-6432"><code>** The commit and rollback hook callbacks are not reentrant.</code></span>
<span class="codeline" id="line-6433"><code>** The callback implementation must not do anything that will modify</code></span>
<span class="codeline" id="line-6434"><code>** the database connection that invoked the callback.  Any actions</code></span>
<span class="codeline" id="line-6435"><code>** to modify the database connection must be deferred until after the</code></span>
<span class="codeline" id="line-6436"><code>** completion of the [sqlite3_step()] call that triggered the commit</code></span>
<span class="codeline" id="line-6437"><code>** or rollback hook in the first place.</code></span>
<span class="codeline" id="line-6438"><code>** Note that running any other SQL statements, including SELECT statements,</code></span>
<span class="codeline" id="line-6439"><code>** or merely calling [sqlite3_prepare_v2()] and [sqlite3_step()] will modify</code></span>
<span class="codeline" id="line-6440"><code>** the database connections for the meaning of "modify" in this paragraph.</code></span>
<span class="codeline" id="line-6441"><code>**</code></span>
<span class="codeline" id="line-6442"><code>** ^Registering a NULL function disables the callback.</code></span>
<span class="codeline" id="line-6443"><code>**</code></span>
<span class="codeline" id="line-6444"><code>** ^When the commit hook callback routine returns zero, the [COMMIT]</code></span>
<span class="codeline" id="line-6445"><code>** operation is allowed to continue normally.  ^If the commit hook</code></span>
<span class="codeline" id="line-6446"><code>** returns non-zero, then the [COMMIT] is converted into a [ROLLBACK].</code></span>
<span class="codeline" id="line-6447"><code>** ^The rollback hook is invoked on a rollback that results from a commit</code></span>
<span class="codeline" id="line-6448"><code>** hook returning non-zero, just as it would be with any other rollback.</code></span>
<span class="codeline" id="line-6449"><code>**</code></span>
<span class="codeline" id="line-6450"><code>** ^For the purposes of this API, a transaction is said to have been</code></span>
<span class="codeline" id="line-6451"><code>** rolled back if an explicit "ROLLBACK" statement is executed, or</code></span>
<span class="codeline" id="line-6452"><code>** an error or constraint causes an implicit rollback to occur.</code></span>
<span class="codeline" id="line-6453"><code>** ^The rollback callback is not invoked if a transaction is</code></span>
<span class="codeline" id="line-6454"><code>** automatically rolled back because the database connection is closed.</code></span>
<span class="codeline" id="line-6455"><code>**</code></span>
<span class="codeline" id="line-6456"><code>** See also the [sqlite3_update_hook()] interface.</code></span>
<span class="codeline" id="line-6457"><code>*/</code></span>
<span class="codeline" id="line-6458"><code>SQLITE_API void *sqlite3_commit_hook(sqlite3*, int(*)(void*), void*);</code></span>
<span class="codeline" id="line-6459"><code>SQLITE_API void *sqlite3_rollback_hook(sqlite3*, void(*)(void *), void*);</code></span>
<span class="codeline" id="line-6460"><code></code></span>
<span class="codeline" id="line-6461"><code>/*</code></span>
<span class="codeline" id="line-6462"><code>** CAPI3REF: Autovacuum Compaction Amount Callback</code></span>
<span class="codeline" id="line-6463"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6464"><code>**</code></span>
<span class="codeline" id="line-6465"><code>** ^The sqlite3_autovacuum_pages(D,C,P,X) interface registers a callback</code></span>
<span class="codeline" id="line-6466"><code>** function C that is invoked prior to each autovacuum of the database</code></span>
<span class="codeline" id="line-6467"><code>** file.  ^The callback is passed a copy of the generic data pointer (P),</code></span>
<span class="codeline" id="line-6468"><code>** the schema-name of the attached database that is being autovacuumed,</code></span>
<span class="codeline" id="line-6469"><code>** the the size of the database file in pages, the number of free pages,</code></span>
<span class="codeline" id="line-6470"><code>** and the number of bytes per page, respectively.  The callback should</code></span>
<span class="codeline" id="line-6471"><code>** return the number of free pages that should be removed by the</code></span>
<span class="codeline" id="line-6472"><code>** autovacuum.  ^If the callback returns zero, then no autovacuum happens.</code></span>
<span class="codeline" id="line-6473"><code>** ^If the value returned is greater than or equal to the number of</code></span>
<span class="codeline" id="line-6474"><code>** free pages, then a complete autovacuum happens.</code></span>
<span class="codeline" id="line-6475"><code>**</code></span>
<span class="codeline" id="line-6476"><code>** &lt;p&gt;^If there are multiple ATTACH-ed database files that are being</code></span>
<span class="codeline" id="line-6477"><code>** modified as part of a transaction commit, then the autovacuum pages</code></span>
<span class="codeline" id="line-6478"><code>** callback is invoked separately for each file.</code></span>
<span class="codeline" id="line-6479"><code>**</code></span>
<span class="codeline" id="line-6480"><code>** &lt;p&gt;&lt;b&gt;The callback is not reentrant.&lt;/b&gt; The callback function should</code></span>
<span class="codeline" id="line-6481"><code>** not attempt to invoke any other SQLite interface.  If it does, bad</code></span>
<span class="codeline" id="line-6482"><code>** things may happen, including segmentation faults and corrupt database</code></span>
<span class="codeline" id="line-6483"><code>** files.  The callback function should be a simple function that</code></span>
<span class="codeline" id="line-6484"><code>** does some arithmetic on its input parameters and returns a result.</code></span>
<span class="codeline" id="line-6485"><code>**</code></span>
<span class="codeline" id="line-6486"><code>** ^The X parameter to sqlite3_autovacuum_pages(D,C,P,X) is an optional</code></span>
<span class="codeline" id="line-6487"><code>** destructor for the P parameter.  ^If X is not NULL, then X(P) is</code></span>
<span class="codeline" id="line-6488"><code>** invoked whenever the database connection closes or when the callback</code></span>
<span class="codeline" id="line-6489"><code>** is overwritten by another invocation of sqlite3_autovacuum_pages().</code></span>
<span class="codeline" id="line-6490"><code>**</code></span>
<span class="codeline" id="line-6491"><code>** &lt;p&gt;^There is only one autovacuum pages callback per database connection.</code></span>
<span class="codeline" id="line-6492"><code>** ^Each call to the sqlite3_autovacuum_pages() interface overrides all</code></span>
<span class="codeline" id="line-6493"><code>** previous invocations for that database connection.  ^If the callback</code></span>
<span class="codeline" id="line-6494"><code>** argument (C) to sqlite3_autovacuum_pages(D,C,P,X) is a NULL pointer,</code></span>
<span class="codeline" id="line-6495"><code>** then the autovacuum steps callback is cancelled.  The return value</code></span>
<span class="codeline" id="line-6496"><code>** from sqlite3_autovacuum_pages() is normally SQLITE_OK, but might</code></span>
<span class="codeline" id="line-6497"><code>** be some other error code if something goes wrong.  The current</code></span>
<span class="codeline" id="line-6498"><code>** implementation will only return SQLITE_OK or SQLITE_MISUSE, but other</code></span>
<span class="codeline" id="line-6499"><code>** return codes might be added in future releases.</code></span>
<span class="codeline" id="line-6500"><code>**</code></span>
<span class="codeline" id="line-6501"><code>** &lt;p&gt;If no autovacuum pages callback is specified (the usual case) or</code></span>
<span class="codeline" id="line-6502"><code>** a NULL pointer is provided for the callback,</code></span>
<span class="codeline" id="line-6503"><code>** then the default behavior is to vacuum all free pages.  So, in other</code></span>
<span class="codeline" id="line-6504"><code>** words, the default behavior is the same as if the callback function</code></span>
<span class="codeline" id="line-6505"><code>** were something like this:</code></span>
<span class="codeline" id="line-6506"><code>**</code></span>
<span class="codeline" id="line-6507"><code>** &lt;blockquote&gt;&lt;pre&gt;</code></span>
<span class="codeline" id="line-6508"><code>** &amp;nbsp;   unsigned int demonstration_autovac_pages_callback(</code></span>
<span class="codeline" id="line-6509"><code>** &amp;nbsp;     void *pClientData,</code></span>
<span class="codeline" id="line-6510"><code>** &amp;nbsp;     const char *zSchema,</code></span>
<span class="codeline" id="line-6511"><code>** &amp;nbsp;     unsigned int nDbPage,</code></span>
<span class="codeline" id="line-6512"><code>** &amp;nbsp;     unsigned int nFreePage,</code></span>
<span class="codeline" id="line-6513"><code>** &amp;nbsp;     unsigned int nBytePerPage</code></span>
<span class="codeline" id="line-6514"><code>** &amp;nbsp;   ){</code></span>
<span class="codeline" id="line-6515"><code>** &amp;nbsp;     return nFreePage;</code></span>
<span class="codeline" id="line-6516"><code>** &amp;nbsp;   }</code></span>
<span class="codeline" id="line-6517"><code>** &lt;/pre&gt;&lt;/blockquote&gt;</code></span>
<span class="codeline" id="line-6518"><code>*/</code></span>
<span class="codeline" id="line-6519"><code>SQLITE_API int sqlite3_autovacuum_pages(</code></span>
<span class="codeline" id="line-6520"><code>  sqlite3 *db,</code></span>
<span class="codeline" id="line-6521"><code>  unsigned int(*)(void*,const char*,unsigned int,unsigned int,unsigned int),</code></span>
<span class="codeline" id="line-6522"><code>  void*,</code></span>
<span class="codeline" id="line-6523"><code>  void(*)(void*)</code></span>
<span class="codeline" id="line-6524"><code>);</code></span>
<span class="codeline" id="line-6525"><code></code></span>
<span class="codeline" id="line-6526"><code></code></span>
<span class="codeline" id="line-6527"><code>/*</code></span>
<span class="codeline" id="line-6528"><code>** CAPI3REF: Data Change Notification Callbacks</code></span>
<span class="codeline" id="line-6529"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6530"><code>**</code></span>
<span class="codeline" id="line-6531"><code>** ^The sqlite3_update_hook() interface registers a callback function</code></span>
<span class="codeline" id="line-6532"><code>** with the [database connection] identified by the first argument</code></span>
<span class="codeline" id="line-6533"><code>** to be invoked whenever a row is updated, inserted or deleted in</code></span>
<span class="codeline" id="line-6534"><code>** a [rowid table].</code></span>
<span class="codeline" id="line-6535"><code>** ^Any callback set by a previous call to this function</code></span>
<span class="codeline" id="line-6536"><code>** for the same database connection is overridden.</code></span>
<span class="codeline" id="line-6537"><code>**</code></span>
<span class="codeline" id="line-6538"><code>** ^The second argument is a pointer to the function to invoke when a</code></span>
<span class="codeline" id="line-6539"><code>** row is updated, inserted or deleted in a rowid table.</code></span>
<span class="codeline" id="line-6540"><code>** ^The first argument to the callback is a copy of the third argument</code></span>
<span class="codeline" id="line-6541"><code>** to sqlite3_update_hook().</code></span>
<span class="codeline" id="line-6542"><code>** ^The second callback argument is one of [SQLITE_INSERT], [SQLITE_DELETE],</code></span>
<span class="codeline" id="line-6543"><code>** or [SQLITE_UPDATE], depending on the operation that caused the callback</code></span>
<span class="codeline" id="line-6544"><code>** to be invoked.</code></span>
<span class="codeline" id="line-6545"><code>** ^The third and fourth arguments to the callback contain pointers to the</code></span>
<span class="codeline" id="line-6546"><code>** database and table name containing the affected row.</code></span>
<span class="codeline" id="line-6547"><code>** ^The final callback parameter is the [rowid] of the row.</code></span>
<span class="codeline" id="line-6548"><code>** ^In the case of an update, this is the [rowid] after the update takes place.</code></span>
<span class="codeline" id="line-6549"><code>**</code></span>
<span class="codeline" id="line-6550"><code>** ^(The update hook is not invoked when internal system tables are</code></span>
<span class="codeline" id="line-6551"><code>** modified (i.e. sqlite_sequence).)^</code></span>
<span class="codeline" id="line-6552"><code>** ^The update hook is not invoked when [WITHOUT ROWID] tables are modified.</code></span>
<span class="codeline" id="line-6553"><code>**</code></span>
<span class="codeline" id="line-6554"><code>** ^In the current implementation, the update hook</code></span>
<span class="codeline" id="line-6555"><code>** is not invoked when conflicting rows are deleted because of an</code></span>
<span class="codeline" id="line-6556"><code>** [ON CONFLICT | ON CONFLICT REPLACE] clause.  ^Nor is the update hook</code></span>
<span class="codeline" id="line-6557"><code>** invoked when rows are deleted using the [truncate optimization].</code></span>
<span class="codeline" id="line-6558"><code>** The exceptions defined in this paragraph might change in a future</code></span>
<span class="codeline" id="line-6559"><code>** release of SQLite.</code></span>
<span class="codeline" id="line-6560"><code>**</code></span>
<span class="codeline" id="line-6561"><code>** The update hook implementation must not do anything that will modify</code></span>
<span class="codeline" id="line-6562"><code>** the database connection that invoked the update hook.  Any actions</code></span>
<span class="codeline" id="line-6563"><code>** to modify the database connection must be deferred until after the</code></span>
<span class="codeline" id="line-6564"><code>** completion of the [sqlite3_step()] call that triggered the update hook.</code></span>
<span class="codeline" id="line-6565"><code>** Note that [sqlite3_prepare_v2()] and [sqlite3_step()] both modify their</code></span>
<span class="codeline" id="line-6566"><code>** database connections for the meaning of "modify" in this paragraph.</code></span>
<span class="codeline" id="line-6567"><code>**</code></span>
<span class="codeline" id="line-6568"><code>** ^The sqlite3_update_hook(D,C,P) function</code></span>
<span class="codeline" id="line-6569"><code>** returns the P argument from the previous call</code></span>
<span class="codeline" id="line-6570"><code>** on the same [database connection] D, or NULL for</code></span>
<span class="codeline" id="line-6571"><code>** the first call on D.</code></span>
<span class="codeline" id="line-6572"><code>**</code></span>
<span class="codeline" id="line-6573"><code>** See also the [sqlite3_commit_hook()], [sqlite3_rollback_hook()],</code></span>
<span class="codeline" id="line-6574"><code>** and [sqlite3_preupdate_hook()] interfaces.</code></span>
<span class="codeline" id="line-6575"><code>*/</code></span>
<span class="codeline" id="line-6576"><code>SQLITE_API void *sqlite3_update_hook(</code></span>
<span class="codeline" id="line-6577"><code>  sqlite3*,</code></span>
<span class="codeline" id="line-6578"><code>  void(*)(void *,int ,char const *,char const *,sqlite3_int64),</code></span>
<span class="codeline" id="line-6579"><code>  void*</code></span>
<span class="codeline" id="line-6580"><code>);</code></span>
<span class="codeline" id="line-6581"><code></code></span>
<span class="codeline" id="line-6582"><code>/*</code></span>
<span class="codeline" id="line-6583"><code>** CAPI3REF: Enable Or Disable Shared Pager Cache</code></span>
<span class="codeline" id="line-6584"><code>**</code></span>
<span class="codeline" id="line-6585"><code>** ^(This routine enables or disables the sharing of the database cache</code></span>
<span class="codeline" id="line-6586"><code>** and schema data structures between [database connection | connections]</code></span>
<span class="codeline" id="line-6587"><code>** to the same database. Sharing is enabled if the argument is true</code></span>
<span class="codeline" id="line-6588"><code>** and disabled if the argument is false.)^</code></span>
<span class="codeline" id="line-6589"><code>**</code></span>
<span class="codeline" id="line-6590"><code>** ^Cache sharing is enabled and disabled for an entire process.</code></span>
<span class="codeline" id="line-6591"><code>** This is a change as of SQLite [version 3.5.0] ([dateof:3.5.0]).</code></span>
<span class="codeline" id="line-6592"><code>** In prior versions of SQLite,</code></span>
<span class="codeline" id="line-6593"><code>** sharing was enabled or disabled for each thread separately.</code></span>
<span class="codeline" id="line-6594"><code>**</code></span>
<span class="codeline" id="line-6595"><code>** ^(The cache sharing mode set by this interface effects all subsequent</code></span>
<span class="codeline" id="line-6596"><code>** calls to [sqlite3_open()], [sqlite3_open_v2()], and [sqlite3_open16()].</code></span>
<span class="codeline" id="line-6597"><code>** Existing database connections continue to use the sharing mode</code></span>
<span class="codeline" id="line-6598"><code>** that was in effect at the time they were opened.)^</code></span>
<span class="codeline" id="line-6599"><code>**</code></span>
<span class="codeline" id="line-6600"><code>** ^(This routine returns [SQLITE_OK] if shared cache was enabled or disabled</code></span>
<span class="codeline" id="line-6601"><code>** successfully.  An [error code] is returned otherwise.)^</code></span>
<span class="codeline" id="line-6602"><code>**</code></span>
<span class="codeline" id="line-6603"><code>** ^Shared cache is disabled by default. It is recommended that it stay</code></span>
<span class="codeline" id="line-6604"><code>** that way.  In other words, do not use this routine.  This interface</code></span>
<span class="codeline" id="line-6605"><code>** continues to be provided for historical compatibility, but its use is</code></span>
<span class="codeline" id="line-6606"><code>** discouraged.  Any use of shared cache is discouraged.  If shared cache</code></span>
<span class="codeline" id="line-6607"><code>** must be used, it is recommended that shared cache only be enabled for</code></span>
<span class="codeline" id="line-6608"><code>** individual database connections using the [sqlite3_open_v2()] interface</code></span>
<span class="codeline" id="line-6609"><code>** with the [SQLITE_OPEN_SHAREDCACHE] flag.</code></span>
<span class="codeline" id="line-6610"><code>**</code></span>
<span class="codeline" id="line-6611"><code>** Note: This method is disabled on MacOS X 10.7 and iOS version 5.0</code></span>
<span class="codeline" id="line-6612"><code>** and will always return SQLITE_MISUSE. On those systems,</code></span>
<span class="codeline" id="line-6613"><code>** shared cache mode should be enabled per-database connection via</code></span>
<span class="codeline" id="line-6614"><code>** [sqlite3_open_v2()] with [SQLITE_OPEN_SHAREDCACHE].</code></span>
<span class="codeline" id="line-6615"><code>**</code></span>
<span class="codeline" id="line-6616"><code>** This interface is threadsafe on processors where writing a</code></span>
<span class="codeline" id="line-6617"><code>** 32-bit integer is atomic.</code></span>
<span class="codeline" id="line-6618"><code>**</code></span>
<span class="codeline" id="line-6619"><code>** See Also:  [SQLite Shared-Cache Mode]</code></span>
<span class="codeline" id="line-6620"><code>*/</code></span>
<span class="codeline" id="line-6621"><code>SQLITE_API int sqlite3_enable_shared_cache(int);</code></span>
<span class="codeline" id="line-6622"><code></code></span>
<span class="codeline" id="line-6623"><code>/*</code></span>
<span class="codeline" id="line-6624"><code>** CAPI3REF: Attempt To Free Heap Memory</code></span>
<span class="codeline" id="line-6625"><code>**</code></span>
<span class="codeline" id="line-6626"><code>** ^The sqlite3_release_memory() interface attempts to free N bytes</code></span>
<span class="codeline" id="line-6627"><code>** of heap memory by deallocating non-essential memory allocations</code></span>
<span class="codeline" id="line-6628"><code>** held by the database library.   Memory used to cache database</code></span>
<span class="codeline" id="line-6629"><code>** pages to improve performance is an example of non-essential memory.</code></span>
<span class="codeline" id="line-6630"><code>** ^sqlite3_release_memory() returns the number of bytes actually freed,</code></span>
<span class="codeline" id="line-6631"><code>** which might be more or less than the amount requested.</code></span>
<span class="codeline" id="line-6632"><code>** ^The sqlite3_release_memory() routine is a no-op returning zero</code></span>
<span class="codeline" id="line-6633"><code>** if SQLite is not compiled with [SQLITE_ENABLE_MEMORY_MANAGEMENT].</code></span>
<span class="codeline" id="line-6634"><code>**</code></span>
<span class="codeline" id="line-6635"><code>** See also: [sqlite3_db_release_memory()]</code></span>
<span class="codeline" id="line-6636"><code>*/</code></span>
<span class="codeline" id="line-6637"><code>SQLITE_API int sqlite3_release_memory(int);</code></span>
<span class="codeline" id="line-6638"><code></code></span>
<span class="codeline" id="line-6639"><code>/*</code></span>
<span class="codeline" id="line-6640"><code>** CAPI3REF: Free Memory Used By A Database Connection</code></span>
<span class="codeline" id="line-6641"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6642"><code>**</code></span>
<span class="codeline" id="line-6643"><code>** ^The sqlite3_db_release_memory(D) interface attempts to free as much heap</code></span>
<span class="codeline" id="line-6644"><code>** memory as possible from database connection D. Unlike the</code></span>
<span class="codeline" id="line-6645"><code>** [sqlite3_release_memory()] interface, this interface is in effect even</code></span>
<span class="codeline" id="line-6646"><code>** when the [SQLITE_ENABLE_MEMORY_MANAGEMENT] compile-time option is</code></span>
<span class="codeline" id="line-6647"><code>** omitted.</code></span>
<span class="codeline" id="line-6648"><code>**</code></span>
<span class="codeline" id="line-6649"><code>** See also: [sqlite3_release_memory()]</code></span>
<span class="codeline" id="line-6650"><code>*/</code></span>
<span class="codeline" id="line-6651"><code>SQLITE_API int sqlite3_db_release_memory(sqlite3*);</code></span>
<span class="codeline" id="line-6652"><code></code></span>
<span class="codeline" id="line-6653"><code>/*</code></span>
<span class="codeline" id="line-6654"><code>** CAPI3REF: Impose A Limit On Heap Size</code></span>
<span class="codeline" id="line-6655"><code>**</code></span>
<span class="codeline" id="line-6656"><code>** These interfaces impose limits on the amount of heap memory that will be</code></span>
<span class="codeline" id="line-6657"><code>** by all database connections within a single process.</code></span>
<span class="codeline" id="line-6658"><code>**</code></span>
<span class="codeline" id="line-6659"><code>** ^The sqlite3_soft_heap_limit64() interface sets and/or queries the</code></span>
<span class="codeline" id="line-6660"><code>** soft limit on the amount of heap memory that may be allocated by SQLite.</code></span>
<span class="codeline" id="line-6661"><code>** ^SQLite strives to keep heap memory utilization below the soft heap</code></span>
<span class="codeline" id="line-6662"><code>** limit by reducing the number of pages held in the page cache</code></span>
<span class="codeline" id="line-6663"><code>** as heap memory usages approaches the limit.</code></span>
<span class="codeline" id="line-6664"><code>** ^The soft heap limit is "soft" because even though SQLite strives to stay</code></span>
<span class="codeline" id="line-6665"><code>** below the limit, it will exceed the limit rather than generate</code></span>
<span class="codeline" id="line-6666"><code>** an [SQLITE_NOMEM] error.  In other words, the soft heap limit</code></span>
<span class="codeline" id="line-6667"><code>** is advisory only.</code></span>
<span class="codeline" id="line-6668"><code>**</code></span>
<span class="codeline" id="line-6669"><code>** ^The sqlite3_hard_heap_limit64(N) interface sets a hard upper bound of</code></span>
<span class="codeline" id="line-6670"><code>** N bytes on the amount of memory that will be allocated.  ^The</code></span>
<span class="codeline" id="line-6671"><code>** sqlite3_hard_heap_limit64(N) interface is similar to</code></span>
<span class="codeline" id="line-6672"><code>** sqlite3_soft_heap_limit64(N) except that memory allocations will fail</code></span>
<span class="codeline" id="line-6673"><code>** when the hard heap limit is reached.</code></span>
<span class="codeline" id="line-6674"><code>**</code></span>
<span class="codeline" id="line-6675"><code>** ^The return value from both sqlite3_soft_heap_limit64() and</code></span>
<span class="codeline" id="line-6676"><code>** sqlite3_hard_heap_limit64() is the size of</code></span>
<span class="codeline" id="line-6677"><code>** the heap limit prior to the call, or negative in the case of an</code></span>
<span class="codeline" id="line-6678"><code>** error.  ^If the argument N is negative</code></span>
<span class="codeline" id="line-6679"><code>** then no change is made to the heap limit.  Hence, the current</code></span>
<span class="codeline" id="line-6680"><code>** size of heap limits can be determined by invoking</code></span>
<span class="codeline" id="line-6681"><code>** sqlite3_soft_heap_limit64(-1) or sqlite3_hard_heap_limit(-1).</code></span>
<span class="codeline" id="line-6682"><code>**</code></span>
<span class="codeline" id="line-6683"><code>** ^Setting the heap limits to zero disables the heap limiter mechanism.</code></span>
<span class="codeline" id="line-6684"><code>**</code></span>
<span class="codeline" id="line-6685"><code>** ^The soft heap limit may not be greater than the hard heap limit.</code></span>
<span class="codeline" id="line-6686"><code>** ^If the hard heap limit is enabled and if sqlite3_soft_heap_limit(N)</code></span>
<span class="codeline" id="line-6687"><code>** is invoked with a value of N that is greater than the hard heap limit,</code></span>
<span class="codeline" id="line-6688"><code>** the the soft heap limit is set to the value of the hard heap limit.</code></span>
<span class="codeline" id="line-6689"><code>** ^The soft heap limit is automatically enabled whenever the hard heap</code></span>
<span class="codeline" id="line-6690"><code>** limit is enabled. ^When sqlite3_hard_heap_limit64(N) is invoked and</code></span>
<span class="codeline" id="line-6691"><code>** the soft heap limit is outside the range of 1..N, then the soft heap</code></span>
<span class="codeline" id="line-6692"><code>** limit is set to N.  ^Invoking sqlite3_soft_heap_limit64(0) when the</code></span>
<span class="codeline" id="line-6693"><code>** hard heap limit is enabled makes the soft heap limit equal to the</code></span>
<span class="codeline" id="line-6694"><code>** hard heap limit.</code></span>
<span class="codeline" id="line-6695"><code>**</code></span>
<span class="codeline" id="line-6696"><code>** The memory allocation limits can also be adjusted using</code></span>
<span class="codeline" id="line-6697"><code>** [PRAGMA soft_heap_limit] and [PRAGMA hard_heap_limit].</code></span>
<span class="codeline" id="line-6698"><code>**</code></span>
<span class="codeline" id="line-6699"><code>** ^(The heap limits are not enforced in the current implementation</code></span>
<span class="codeline" id="line-6700"><code>** if one or more of following conditions are true:</code></span>
<span class="codeline" id="line-6701"><code>**</code></span>
<span class="codeline" id="line-6702"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-6703"><code>** &lt;li&gt; The limit value is set to zero.</code></span>
<span class="codeline" id="line-6704"><code>** &lt;li&gt; Memory accounting is disabled using a combination of the</code></span>
<span class="codeline" id="line-6705"><code>**      [sqlite3_config]([SQLITE_CONFIG_MEMSTATUS],...) start-time option and</code></span>
<span class="codeline" id="line-6706"><code>**      the [SQLITE_DEFAULT_MEMSTATUS] compile-time option.</code></span>
<span class="codeline" id="line-6707"><code>** &lt;li&gt; An alternative page cache implementation is specified using</code></span>
<span class="codeline" id="line-6708"><code>**      [sqlite3_config]([SQLITE_CONFIG_PCACHE2],...).</code></span>
<span class="codeline" id="line-6709"><code>** &lt;li&gt; The page cache allocates from its own memory pool supplied</code></span>
<span class="codeline" id="line-6710"><code>**      by [sqlite3_config]([SQLITE_CONFIG_PAGECACHE],...) rather than</code></span>
<span class="codeline" id="line-6711"><code>**      from the heap.</code></span>
<span class="codeline" id="line-6712"><code>** &lt;/ul&gt;)^</code></span>
<span class="codeline" id="line-6713"><code>**</code></span>
<span class="codeline" id="line-6714"><code>** The circumstances under which SQLite will enforce the heap limits may</code></span>
<span class="codeline" id="line-6715"><code>** changes in future releases of SQLite.</code></span>
<span class="codeline" id="line-6716"><code>*/</code></span>
<span class="codeline" id="line-6717"><code>SQLITE_API sqlite3_int64 sqlite3_soft_heap_limit64(sqlite3_int64 N);</code></span>
<span class="codeline" id="line-6718"><code>SQLITE_API sqlite3_int64 sqlite3_hard_heap_limit64(sqlite3_int64 N);</code></span>
<span class="codeline" id="line-6719"><code></code></span>
<span class="codeline" id="line-6720"><code>/*</code></span>
<span class="codeline" id="line-6721"><code>** CAPI3REF: Deprecated Soft Heap Limit Interface</code></span>
<span class="codeline" id="line-6722"><code>** DEPRECATED</code></span>
<span class="codeline" id="line-6723"><code>**</code></span>
<span class="codeline" id="line-6724"><code>** This is a deprecated version of the [sqlite3_soft_heap_limit64()]</code></span>
<span class="codeline" id="line-6725"><code>** interface.  This routine is provided for historical compatibility</code></span>
<span class="codeline" id="line-6726"><code>** only.  All new applications should use the</code></span>
<span class="codeline" id="line-6727"><code>** [sqlite3_soft_heap_limit64()] interface rather than this one.</code></span>
<span class="codeline" id="line-6728"><code>*/</code></span>
<span class="codeline" id="line-6729"><code>SQLITE_API SQLITE_DEPRECATED void sqlite3_soft_heap_limit(int N);</code></span>
<span class="codeline" id="line-6730"><code></code></span>
<span class="codeline" id="line-6731"><code></code></span>
<span class="codeline" id="line-6732"><code>/*</code></span>
<span class="codeline" id="line-6733"><code>** CAPI3REF: Extract Metadata About A Column Of A Table</code></span>
<span class="codeline" id="line-6734"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6735"><code>**</code></span>
<span class="codeline" id="line-6736"><code>** ^(The sqlite3_table_column_metadata(X,D,T,C,....) routine returns</code></span>
<span class="codeline" id="line-6737"><code>** information about column C of table T in database D</code></span>
<span class="codeline" id="line-6738"><code>** on [database connection] X.)^  ^The sqlite3_table_column_metadata()</code></span>
<span class="codeline" id="line-6739"><code>** interface returns SQLITE_OK and fills in the non-NULL pointers in</code></span>
<span class="codeline" id="line-6740"><code>** the final five arguments with appropriate values if the specified</code></span>
<span class="codeline" id="line-6741"><code>** column exists.  ^The sqlite3_table_column_metadata() interface returns</code></span>
<span class="codeline" id="line-6742"><code>** SQLITE_ERROR if the specified column does not exist.</code></span>
<span class="codeline" id="line-6743"><code>** ^If the column-name parameter to sqlite3_table_column_metadata() is a</code></span>
<span class="codeline" id="line-6744"><code>** NULL pointer, then this routine simply checks for the existence of the</code></span>
<span class="codeline" id="line-6745"><code>** table and returns SQLITE_OK if the table exists and SQLITE_ERROR if it</code></span>
<span class="codeline" id="line-6746"><code>** does not.  If the table name parameter T in a call to</code></span>
<span class="codeline" id="line-6747"><code>** sqlite3_table_column_metadata(X,D,T,C,...) is NULL then the result is</code></span>
<span class="codeline" id="line-6748"><code>** undefined behavior.</code></span>
<span class="codeline" id="line-6749"><code>**</code></span>
<span class="codeline" id="line-6750"><code>** ^The column is identified by the second, third and fourth parameters to</code></span>
<span class="codeline" id="line-6751"><code>** this function. ^(The second parameter is either the name of the database</code></span>
<span class="codeline" id="line-6752"><code>** (i.e. "main", "temp", or an attached database) containing the specified</code></span>
<span class="codeline" id="line-6753"><code>** table or NULL.)^ ^If it is NULL, then all attached databases are searched</code></span>
<span class="codeline" id="line-6754"><code>** for the table using the same algorithm used by the database engine to</code></span>
<span class="codeline" id="line-6755"><code>** resolve unqualified table references.</code></span>
<span class="codeline" id="line-6756"><code>**</code></span>
<span class="codeline" id="line-6757"><code>** ^The third and fourth parameters to this function are the table and column</code></span>
<span class="codeline" id="line-6758"><code>** name of the desired column, respectively.</code></span>
<span class="codeline" id="line-6759"><code>**</code></span>
<span class="codeline" id="line-6760"><code>** ^Metadata is returned by writing to the memory locations passed as the 5th</code></span>
<span class="codeline" id="line-6761"><code>** and subsequent parameters to this function. ^Any of these arguments may be</code></span>
<span class="codeline" id="line-6762"><code>** NULL, in which case the corresponding element of metadata is omitted.</code></span>
<span class="codeline" id="line-6763"><code>**</code></span>
<span class="codeline" id="line-6764"><code>** ^(&lt;blockquote&gt;</code></span>
<span class="codeline" id="line-6765"><code>** &lt;table border="1"&gt;</code></span>
<span class="codeline" id="line-6766"><code>** &lt;tr&gt;&lt;th&gt; Parameter &lt;th&gt; Output&lt;br&gt;Type &lt;th&gt;  Description</code></span>
<span class="codeline" id="line-6767"><code>**</code></span>
<span class="codeline" id="line-6768"><code>** &lt;tr&gt;&lt;td&gt; 5th &lt;td&gt; const char* &lt;td&gt; Data type</code></span>
<span class="codeline" id="line-6769"><code>** &lt;tr&gt;&lt;td&gt; 6th &lt;td&gt; const char* &lt;td&gt; Name of default collation sequence</code></span>
<span class="codeline" id="line-6770"><code>** &lt;tr&gt;&lt;td&gt; 7th &lt;td&gt; int         &lt;td&gt; True if column has a NOT NULL constraint</code></span>
<span class="codeline" id="line-6771"><code>** &lt;tr&gt;&lt;td&gt; 8th &lt;td&gt; int         &lt;td&gt; True if column is part of the PRIMARY KEY</code></span>
<span class="codeline" id="line-6772"><code>** &lt;tr&gt;&lt;td&gt; 9th &lt;td&gt; int         &lt;td&gt; True if column is [AUTOINCREMENT]</code></span>
<span class="codeline" id="line-6773"><code>** &lt;/table&gt;</code></span>
<span class="codeline" id="line-6774"><code>** &lt;/blockquote&gt;)^</code></span>
<span class="codeline" id="line-6775"><code>**</code></span>
<span class="codeline" id="line-6776"><code>** ^The memory pointed to by the character pointers returned for the</code></span>
<span class="codeline" id="line-6777"><code>** declaration type and collation sequence is valid until the next</code></span>
<span class="codeline" id="line-6778"><code>** call to any SQLite API function.</code></span>
<span class="codeline" id="line-6779"><code>**</code></span>
<span class="codeline" id="line-6780"><code>** ^If the specified table is actually a view, an [error code] is returned.</code></span>
<span class="codeline" id="line-6781"><code>**</code></span>
<span class="codeline" id="line-6782"><code>** ^If the specified column is "rowid", "oid" or "_rowid_" and the table</code></span>
<span class="codeline" id="line-6783"><code>** is not a [WITHOUT ROWID] table and an</code></span>
<span class="codeline" id="line-6784"><code>** [INTEGER PRIMARY KEY] column has been explicitly declared, then the output</code></span>
<span class="codeline" id="line-6785"><code>** parameters are set for the explicitly declared column. ^(If there is no</code></span>
<span class="codeline" id="line-6786"><code>** [INTEGER PRIMARY KEY] column, then the outputs</code></span>
<span class="codeline" id="line-6787"><code>** for the [rowid] are set as follows:</code></span>
<span class="codeline" id="line-6788"><code>**</code></span>
<span class="codeline" id="line-6789"><code>** &lt;pre&gt;</code></span>
<span class="codeline" id="line-6790"><code>**     data type: "INTEGER"</code></span>
<span class="codeline" id="line-6791"><code>**     collation sequence: "BINARY"</code></span>
<span class="codeline" id="line-6792"><code>**     not null: 0</code></span>
<span class="codeline" id="line-6793"><code>**     primary key: 1</code></span>
<span class="codeline" id="line-6794"><code>**     auto increment: 0</code></span>
<span class="codeline" id="line-6795"><code>** &lt;/pre&gt;)^</code></span>
<span class="codeline" id="line-6796"><code>**</code></span>
<span class="codeline" id="line-6797"><code>** ^This function causes all database schemas to be read from disk and</code></span>
<span class="codeline" id="line-6798"><code>** parsed, if that has not already been done, and returns an error if</code></span>
<span class="codeline" id="line-6799"><code>** any errors are encountered while loading the schema.</code></span>
<span class="codeline" id="line-6800"><code>*/</code></span>
<span class="codeline" id="line-6801"><code>SQLITE_API int sqlite3_table_column_metadata(</code></span>
<span class="codeline" id="line-6802"><code>  sqlite3 *db,                /* Connection handle */</code></span>
<span class="codeline" id="line-6803"><code>  const char *zDbName,        /* Database name or NULL */</code></span>
<span class="codeline" id="line-6804"><code>  const char *zTableName,     /* Table name */</code></span>
<span class="codeline" id="line-6805"><code>  const char *zColumnName,    /* Column name */</code></span>
<span class="codeline" id="line-6806"><code>  char const **pzDataType,    /* OUTPUT: Declared data type */</code></span>
<span class="codeline" id="line-6807"><code>  char const **pzCollSeq,     /* OUTPUT: Collation sequence name */</code></span>
<span class="codeline" id="line-6808"><code>  int *pNotNull,              /* OUTPUT: True if NOT NULL constraint exists */</code></span>
<span class="codeline" id="line-6809"><code>  int *pPrimaryKey,           /* OUTPUT: True if column part of PK */</code></span>
<span class="codeline" id="line-6810"><code>  int *pAutoinc               /* OUTPUT: True if column is auto-increment */</code></span>
<span class="codeline" id="line-6811"><code>);</code></span>
<span class="codeline" id="line-6812"><code></code></span>
<span class="codeline" id="line-6813"><code>/*</code></span>
<span class="codeline" id="line-6814"><code>** CAPI3REF: Load An Extension</code></span>
<span class="codeline" id="line-6815"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6816"><code>**</code></span>
<span class="codeline" id="line-6817"><code>** ^This interface loads an SQLite extension library from the named file.</code></span>
<span class="codeline" id="line-6818"><code>**</code></span>
<span class="codeline" id="line-6819"><code>** ^The sqlite3_load_extension() interface attempts to load an</code></span>
<span class="codeline" id="line-6820"><code>** [SQLite extension] library contained in the file zFile.  If</code></span>
<span class="codeline" id="line-6821"><code>** the file cannot be loaded directly, attempts are made to load</code></span>
<span class="codeline" id="line-6822"><code>** with various operating-system specific extensions added.</code></span>
<span class="codeline" id="line-6823"><code>** So for example, if "samplelib" cannot be loaded, then names like</code></span>
<span class="codeline" id="line-6824"><code>** "samplelib.so" or "samplelib.dylib" or "samplelib.dll" might</code></span>
<span class="codeline" id="line-6825"><code>** be tried also.</code></span>
<span class="codeline" id="line-6826"><code>**</code></span>
<span class="codeline" id="line-6827"><code>** ^The entry point is zProc.</code></span>
<span class="codeline" id="line-6828"><code>** ^(zProc may be 0, in which case SQLite will try to come up with an</code></span>
<span class="codeline" id="line-6829"><code>** entry point name on its own.  It first tries "sqlite3_extension_init".</code></span>
<span class="codeline" id="line-6830"><code>** If that does not work, it constructs a name "sqlite3_X_init" where the</code></span>
<span class="codeline" id="line-6831"><code>** X is consists of the lower-case equivalent of all ASCII alphabetic</code></span>
<span class="codeline" id="line-6832"><code>** characters in the filename from the last "/" to the first following</code></span>
<span class="codeline" id="line-6833"><code>** "." and omitting any initial "lib".)^</code></span>
<span class="codeline" id="line-6834"><code>** ^The sqlite3_load_extension() interface returns</code></span>
<span class="codeline" id="line-6835"><code>** [SQLITE_OK] on success and [SQLITE_ERROR] if something goes wrong.</code></span>
<span class="codeline" id="line-6836"><code>** ^If an error occurs and pzErrMsg is not 0, then the</code></span>
<span class="codeline" id="line-6837"><code>** [sqlite3_load_extension()] interface shall attempt to</code></span>
<span class="codeline" id="line-6838"><code>** fill *pzErrMsg with error message text stored in memory</code></span>
<span class="codeline" id="line-6839"><code>** obtained from [sqlite3_malloc()]. The calling function</code></span>
<span class="codeline" id="line-6840"><code>** should free this memory by calling [sqlite3_free()].</code></span>
<span class="codeline" id="line-6841"><code>**</code></span>
<span class="codeline" id="line-6842"><code>** ^Extension loading must be enabled using</code></span>
<span class="codeline" id="line-6843"><code>** [sqlite3_enable_load_extension()] or</code></span>
<span class="codeline" id="line-6844"><code>** [sqlite3_db_config](db,[SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION],1,NULL)</code></span>
<span class="codeline" id="line-6845"><code>** prior to calling this API,</code></span>
<span class="codeline" id="line-6846"><code>** otherwise an error will be returned.</code></span>
<span class="codeline" id="line-6847"><code>**</code></span>
<span class="codeline" id="line-6848"><code>** &lt;b&gt;Security warning:&lt;/b&gt; It is recommended that the</code></span>
<span class="codeline" id="line-6849"><code>** [SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION] method be used to enable only this</code></span>
<span class="codeline" id="line-6850"><code>** interface.  The use of the [sqlite3_enable_load_extension()] interface</code></span>
<span class="codeline" id="line-6851"><code>** should be avoided.  This will keep the SQL function [load_extension()]</code></span>
<span class="codeline" id="line-6852"><code>** disabled and prevent SQL injections from giving attackers</code></span>
<span class="codeline" id="line-6853"><code>** access to extension loading capabilities.</code></span>
<span class="codeline" id="line-6854"><code>**</code></span>
<span class="codeline" id="line-6855"><code>** See also the [load_extension() SQL function].</code></span>
<span class="codeline" id="line-6856"><code>*/</code></span>
<span class="codeline" id="line-6857"><code>SQLITE_API int sqlite3_load_extension(</code></span>
<span class="codeline" id="line-6858"><code>  sqlite3 *db,          /* Load the extension into this database connection */</code></span>
<span class="codeline" id="line-6859"><code>  const char *zFile,    /* Name of the shared library containing extension */</code></span>
<span class="codeline" id="line-6860"><code>  const char *zProc,    /* Entry point.  Derived from zFile if 0 */</code></span>
<span class="codeline" id="line-6861"><code>  char **pzErrMsg       /* Put error message here if not 0 */</code></span>
<span class="codeline" id="line-6862"><code>);</code></span>
<span class="codeline" id="line-6863"><code></code></span>
<span class="codeline" id="line-6864"><code>/*</code></span>
<span class="codeline" id="line-6865"><code>** CAPI3REF: Enable Or Disable Extension Loading</code></span>
<span class="codeline" id="line-6866"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-6867"><code>**</code></span>
<span class="codeline" id="line-6868"><code>** ^So as not to open security holes in older applications that are</code></span>
<span class="codeline" id="line-6869"><code>** unprepared to deal with [extension loading], and as a means of disabling</code></span>
<span class="codeline" id="line-6870"><code>** [extension loading] while evaluating user-entered SQL, the following API</code></span>
<span class="codeline" id="line-6871"><code>** is provided to turn the [sqlite3_load_extension()] mechanism on and off.</code></span>
<span class="codeline" id="line-6872"><code>**</code></span>
<span class="codeline" id="line-6873"><code>** ^Extension loading is off by default.</code></span>
<span class="codeline" id="line-6874"><code>** ^Call the sqlite3_enable_load_extension() routine with onoff==1</code></span>
<span class="codeline" id="line-6875"><code>** to turn extension loading on and call it with onoff==0 to turn</code></span>
<span class="codeline" id="line-6876"><code>** it back off again.</code></span>
<span class="codeline" id="line-6877"><code>**</code></span>
<span class="codeline" id="line-6878"><code>** ^This interface enables or disables both the C-API</code></span>
<span class="codeline" id="line-6879"><code>** [sqlite3_load_extension()] and the SQL function [load_extension()].</code></span>
<span class="codeline" id="line-6880"><code>** ^(Use [sqlite3_db_config](db,[SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION],..)</code></span>
<span class="codeline" id="line-6881"><code>** to enable or disable only the C-API.)^</code></span>
<span class="codeline" id="line-6882"><code>**</code></span>
<span class="codeline" id="line-6883"><code>** &lt;b&gt;Security warning:&lt;/b&gt; It is recommended that extension loading</code></span>
<span class="codeline" id="line-6884"><code>** be enabled using the [SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION] method</code></span>
<span class="codeline" id="line-6885"><code>** rather than this interface, so the [load_extension()] SQL function</code></span>
<span class="codeline" id="line-6886"><code>** remains disabled. This will prevent SQL injections from giving attackers</code></span>
<span class="codeline" id="line-6887"><code>** access to extension loading capabilities.</code></span>
<span class="codeline" id="line-6888"><code>*/</code></span>
<span class="codeline" id="line-6889"><code>SQLITE_API int sqlite3_enable_load_extension(sqlite3 *db, int onoff);</code></span>
<span class="codeline" id="line-6890"><code></code></span>
<span class="codeline" id="line-6891"><code>/*</code></span>
<span class="codeline" id="line-6892"><code>** CAPI3REF: Automatically Load Statically Linked Extensions</code></span>
<span class="codeline" id="line-6893"><code>**</code></span>
<span class="codeline" id="line-6894"><code>** ^This interface causes the xEntryPoint() function to be invoked for</code></span>
<span class="codeline" id="line-6895"><code>** each new [database connection] that is created.  The idea here is that</code></span>
<span class="codeline" id="line-6896"><code>** xEntryPoint() is the entry point for a statically linked [SQLite extension]</code></span>
<span class="codeline" id="line-6897"><code>** that is to be automatically loaded into all new database connections.</code></span>
<span class="codeline" id="line-6898"><code>**</code></span>
<span class="codeline" id="line-6899"><code>** ^(Even though the function prototype shows that xEntryPoint() takes</code></span>
<span class="codeline" id="line-6900"><code>** no arguments and returns void, SQLite invokes xEntryPoint() with three</code></span>
<span class="codeline" id="line-6901"><code>** arguments and expects an integer result as if the signature of the</code></span>
<span class="codeline" id="line-6902"><code>** entry point where as follows:</code></span>
<span class="codeline" id="line-6903"><code>**</code></span>
<span class="codeline" id="line-6904"><code>** &lt;blockquote&gt;&lt;pre&gt;</code></span>
<span class="codeline" id="line-6905"><code>** &amp;nbsp;  int xEntryPoint(</code></span>
<span class="codeline" id="line-6906"><code>** &amp;nbsp;    sqlite3 *db,</code></span>
<span class="codeline" id="line-6907"><code>** &amp;nbsp;    const char **pzErrMsg,</code></span>
<span class="codeline" id="line-6908"><code>** &amp;nbsp;    const struct sqlite3_api_routines *pThunk</code></span>
<span class="codeline" id="line-6909"><code>** &amp;nbsp;  );</code></span>
<span class="codeline" id="line-6910"><code>** &lt;/pre&gt;&lt;/blockquote&gt;)^</code></span>
<span class="codeline" id="line-6911"><code>**</code></span>
<span class="codeline" id="line-6912"><code>** If the xEntryPoint routine encounters an error, it should make *pzErrMsg</code></span>
<span class="codeline" id="line-6913"><code>** point to an appropriate error message (obtained from [sqlite3_mprintf()])</code></span>
<span class="codeline" id="line-6914"><code>** and return an appropriate [error code].  ^SQLite ensures that *pzErrMsg</code></span>
<span class="codeline" id="line-6915"><code>** is NULL before calling the xEntryPoint().  ^SQLite will invoke</code></span>
<span class="codeline" id="line-6916"><code>** [sqlite3_free()] on *pzErrMsg after xEntryPoint() returns.  ^If any</code></span>
<span class="codeline" id="line-6917"><code>** xEntryPoint() returns an error, the [sqlite3_open()], [sqlite3_open16()],</code></span>
<span class="codeline" id="line-6918"><code>** or [sqlite3_open_v2()] call that provoked the xEntryPoint() will fail.</code></span>
<span class="codeline" id="line-6919"><code>**</code></span>
<span class="codeline" id="line-6920"><code>** ^Calling sqlite3_auto_extension(X) with an entry point X that is already</code></span>
<span class="codeline" id="line-6921"><code>** on the list of automatic extensions is a harmless no-op. ^No entry point</code></span>
<span class="codeline" id="line-6922"><code>** will be called more than once for each database connection that is opened.</code></span>
<span class="codeline" id="line-6923"><code>**</code></span>
<span class="codeline" id="line-6924"><code>** See also: [sqlite3_reset_auto_extension()]</code></span>
<span class="codeline" id="line-6925"><code>** and [sqlite3_cancel_auto_extension()]</code></span>
<span class="codeline" id="line-6926"><code>*/</code></span>
<span class="codeline" id="line-6927"><code>SQLITE_API int sqlite3_auto_extension(void(*xEntryPoint)(void));</code></span>
<span class="codeline" id="line-6928"><code></code></span>
<span class="codeline" id="line-6929"><code>/*</code></span>
<span class="codeline" id="line-6930"><code>** CAPI3REF: Cancel Automatic Extension Loading</code></span>
<span class="codeline" id="line-6931"><code>**</code></span>
<span class="codeline" id="line-6932"><code>** ^The [sqlite3_cancel_auto_extension(X)] interface unregisters the</code></span>
<span class="codeline" id="line-6933"><code>** initialization routine X that was registered using a prior call to</code></span>
<span class="codeline" id="line-6934"><code>** [sqlite3_auto_extension(X)].  ^The [sqlite3_cancel_auto_extension(X)]</code></span>
<span class="codeline" id="line-6935"><code>** routine returns 1 if initialization routine X was successfully</code></span>
<span class="codeline" id="line-6936"><code>** unregistered and it returns 0 if X was not on the list of initialization</code></span>
<span class="codeline" id="line-6937"><code>** routines.</code></span>
<span class="codeline" id="line-6938"><code>*/</code></span>
<span class="codeline" id="line-6939"><code>SQLITE_API int sqlite3_cancel_auto_extension(void(*xEntryPoint)(void));</code></span>
<span class="codeline" id="line-6940"><code></code></span>
<span class="codeline" id="line-6941"><code>/*</code></span>
<span class="codeline" id="line-6942"><code>** CAPI3REF: Reset Automatic Extension Loading</code></span>
<span class="codeline" id="line-6943"><code>**</code></span>
<span class="codeline" id="line-6944"><code>** ^This interface disables all automatic extensions previously</code></span>
<span class="codeline" id="line-6945"><code>** registered using [sqlite3_auto_extension()].</code></span>
<span class="codeline" id="line-6946"><code>*/</code></span>
<span class="codeline" id="line-6947"><code>SQLITE_API void sqlite3_reset_auto_extension(void);</code></span>
<span class="codeline" id="line-6948"><code></code></span>
<span class="codeline" id="line-6949"><code>/*</code></span>
<span class="codeline" id="line-6950"><code>** The interface to the virtual-table mechanism is currently considered</code></span>
<span class="codeline" id="line-6951"><code>** to be experimental.  The interface might change in incompatible ways.</code></span>
<span class="codeline" id="line-6952"><code>** If this is a problem for you, do not use the interface at this time.</code></span>
<span class="codeline" id="line-6953"><code>**</code></span>
<span class="codeline" id="line-6954"><code>** When the virtual-table mechanism stabilizes, we will declare the</code></span>
<span class="codeline" id="line-6955"><code>** interface fixed, support it indefinitely, and remove this comment.</code></span>
<span class="codeline" id="line-6956"><code>*/</code></span>
<span class="codeline" id="line-6957"><code></code></span>
<span class="codeline" id="line-6958"><code>/*</code></span>
<span class="codeline" id="line-6959"><code>** Structures used by the virtual table interface</code></span>
<span class="codeline" id="line-6960"><code>*/</code></span>
<span class="codeline" id="line-6961"><code>typedef struct sqlite3_vtab sqlite3_vtab;</code></span>
<span class="codeline" id="line-6962"><code>typedef struct sqlite3_index_info sqlite3_index_info;</code></span>
<span class="codeline" id="line-6963"><code>typedef struct sqlite3_vtab_cursor sqlite3_vtab_cursor;</code></span>
<span class="codeline" id="line-6964"><code>typedef struct sqlite3_module sqlite3_module;</code></span>
<span class="codeline" id="line-6965"><code></code></span>
<span class="codeline" id="line-6966"><code>/*</code></span>
<span class="codeline" id="line-6967"><code>** CAPI3REF: Virtual Table Object</code></span>
<span class="codeline" id="line-6968"><code>** KEYWORDS: sqlite3_module {virtual table module}</code></span>
<span class="codeline" id="line-6969"><code>**</code></span>
<span class="codeline" id="line-6970"><code>** This structure, sometimes called a "virtual table module",</code></span>
<span class="codeline" id="line-6971"><code>** defines the implementation of a [virtual table].</code></span>
<span class="codeline" id="line-6972"><code>** This structure consists mostly of methods for the module.</code></span>
<span class="codeline" id="line-6973"><code>**</code></span>
<span class="codeline" id="line-6974"><code>** ^A virtual table module is created by filling in a persistent</code></span>
<span class="codeline" id="line-6975"><code>** instance of this structure and passing a pointer to that instance</code></span>
<span class="codeline" id="line-6976"><code>** to [sqlite3_create_module()] or [sqlite3_create_module_v2()].</code></span>
<span class="codeline" id="line-6977"><code>** ^The registration remains valid until it is replaced by a different</code></span>
<span class="codeline" id="line-6978"><code>** module or until the [database connection] closes.  The content</code></span>
<span class="codeline" id="line-6979"><code>** of this structure must not change while it is registered with</code></span>
<span class="codeline" id="line-6980"><code>** any database connection.</code></span>
<span class="codeline" id="line-6981"><code>*/</code></span>
<span class="codeline" id="line-6982"><code>struct sqlite3_module {</code></span>
<span class="codeline" id="line-6983"><code>  int iVersion;</code></span>
<span class="codeline" id="line-6984"><code>  int (*xCreate)(sqlite3*, void *pAux,</code></span>
<span class="codeline" id="line-6985"><code>               int argc, const char *const*argv,</code></span>
<span class="codeline" id="line-6986"><code>               sqlite3_vtab **ppVTab, char**);</code></span>
<span class="codeline" id="line-6987"><code>  int (*xConnect)(sqlite3*, void *pAux,</code></span>
<span class="codeline" id="line-6988"><code>               int argc, const char *const*argv,</code></span>
<span class="codeline" id="line-6989"><code>               sqlite3_vtab **ppVTab, char**);</code></span>
<span class="codeline" id="line-6990"><code>  int (*xBestIndex)(sqlite3_vtab *pVTab, sqlite3_index_info*);</code></span>
<span class="codeline" id="line-6991"><code>  int (*xDisconnect)(sqlite3_vtab *pVTab);</code></span>
<span class="codeline" id="line-6992"><code>  int (*xDestroy)(sqlite3_vtab *pVTab);</code></span>
<span class="codeline" id="line-6993"><code>  int (*xOpen)(sqlite3_vtab *pVTab, sqlite3_vtab_cursor **ppCursor);</code></span>
<span class="codeline" id="line-6994"><code>  int (*xClose)(sqlite3_vtab_cursor*);</code></span>
<span class="codeline" id="line-6995"><code>  int (*xFilter)(sqlite3_vtab_cursor*, int idxNum, const char *idxStr,</code></span>
<span class="codeline" id="line-6996"><code>                int argc, sqlite3_value **argv);</code></span>
<span class="codeline" id="line-6997"><code>  int (*xNext)(sqlite3_vtab_cursor*);</code></span>
<span class="codeline" id="line-6998"><code>  int (*xEof)(sqlite3_vtab_cursor*);</code></span>
<span class="codeline" id="line-6999"><code>  int (*xColumn)(sqlite3_vtab_cursor*, sqlite3_context*, int);</code></span>
<span class="codeline" id="line-7000"><code>  int (*xRowid)(sqlite3_vtab_cursor*, sqlite3_int64 *pRowid);</code></span>
<span class="codeline" id="line-7001"><code>  int (*xUpdate)(sqlite3_vtab *, int, sqlite3_value **, sqlite3_int64 *);</code></span>
<span class="codeline" id="line-7002"><code>  int (*xBegin)(sqlite3_vtab *pVTab);</code></span>
<span class="codeline" id="line-7003"><code>  int (*xSync)(sqlite3_vtab *pVTab);</code></span>
<span class="codeline" id="line-7004"><code>  int (*xCommit)(sqlite3_vtab *pVTab);</code></span>
<span class="codeline" id="line-7005"><code>  int (*xRollback)(sqlite3_vtab *pVTab);</code></span>
<span class="codeline" id="line-7006"><code>  int (*xFindFunction)(sqlite3_vtab *pVtab, int nArg, const char *zName,</code></span>
<span class="codeline" id="line-7007"><code>                       void (**pxFunc)(sqlite3_context*,int,sqlite3_value**),</code></span>
<span class="codeline" id="line-7008"><code>                       void **ppArg);</code></span>
<span class="codeline" id="line-7009"><code>  int (*xRename)(sqlite3_vtab *pVtab, const char *zNew);</code></span>
<span class="codeline" id="line-7010"><code>  /* The methods above are in version 1 of the sqlite_module object. Those</code></span>
<span class="codeline" id="line-7011"><code>  ** below are for version 2 and greater. */</code></span>
<span class="codeline" id="line-7012"><code>  int (*xSavepoint)(sqlite3_vtab *pVTab, int);</code></span>
<span class="codeline" id="line-7013"><code>  int (*xRelease)(sqlite3_vtab *pVTab, int);</code></span>
<span class="codeline" id="line-7014"><code>  int (*xRollbackTo)(sqlite3_vtab *pVTab, int);</code></span>
<span class="codeline" id="line-7015"><code>  /* The methods above are in versions 1 and 2 of the sqlite_module object.</code></span>
<span class="codeline" id="line-7016"><code>  ** Those below are for version 3 and greater. */</code></span>
<span class="codeline" id="line-7017"><code>  int (*xShadowName)(const char*);</code></span>
<span class="codeline" id="line-7018"><code>};</code></span>
<span class="codeline" id="line-7019"><code></code></span>
<span class="codeline" id="line-7020"><code>/*</code></span>
<span class="codeline" id="line-7021"><code>** CAPI3REF: Virtual Table Indexing Information</code></span>
<span class="codeline" id="line-7022"><code>** KEYWORDS: sqlite3_index_info</code></span>
<span class="codeline" id="line-7023"><code>**</code></span>
<span class="codeline" id="line-7024"><code>** The sqlite3_index_info structure and its substructures is used as part</code></span>
<span class="codeline" id="line-7025"><code>** of the [virtual table] interface to</code></span>
<span class="codeline" id="line-7026"><code>** pass information into and receive the reply from the [xBestIndex]</code></span>
<span class="codeline" id="line-7027"><code>** method of a [virtual table module].  The fields under **Inputs** are the</code></span>
<span class="codeline" id="line-7028"><code>** inputs to xBestIndex and are read-only.  xBestIndex inserts its</code></span>
<span class="codeline" id="line-7029"><code>** results into the **Outputs** fields.</code></span>
<span class="codeline" id="line-7030"><code>**</code></span>
<span class="codeline" id="line-7031"><code>** ^(The aConstraint[] array records WHERE clause constraints of the form:</code></span>
<span class="codeline" id="line-7032"><code>**</code></span>
<span class="codeline" id="line-7033"><code>** &lt;blockquote&gt;column OP expr&lt;/blockquote&gt;</code></span>
<span class="codeline" id="line-7034"><code>**</code></span>
<span class="codeline" id="line-7035"><code>** where OP is =, &amp;lt;, &amp;lt;=, &amp;gt;, or &amp;gt;=.)^  ^(The particular operator is</code></span>
<span class="codeline" id="line-7036"><code>** stored in aConstraint[].op using one of the</code></span>
<span class="codeline" id="line-7037"><code>** [SQLITE_INDEX_CONSTRAINT_EQ | SQLITE_INDEX_CONSTRAINT_ values].)^</code></span>
<span class="codeline" id="line-7038"><code>** ^(The index of the column is stored in</code></span>
<span class="codeline" id="line-7039"><code>** aConstraint[].iColumn.)^  ^(aConstraint[].usable is TRUE if the</code></span>
<span class="codeline" id="line-7040"><code>** expr on the right-hand side can be evaluated (and thus the constraint</code></span>
<span class="codeline" id="line-7041"><code>** is usable) and false if it cannot.)^</code></span>
<span class="codeline" id="line-7042"><code>**</code></span>
<span class="codeline" id="line-7043"><code>** ^The optimizer automatically inverts terms of the form "expr OP column"</code></span>
<span class="codeline" id="line-7044"><code>** and makes other simplifications to the WHERE clause in an attempt to</code></span>
<span class="codeline" id="line-7045"><code>** get as many WHERE clause terms into the form shown above as possible.</code></span>
<span class="codeline" id="line-7046"><code>** ^The aConstraint[] array only reports WHERE clause terms that are</code></span>
<span class="codeline" id="line-7047"><code>** relevant to the particular virtual table being queried.</code></span>
<span class="codeline" id="line-7048"><code>**</code></span>
<span class="codeline" id="line-7049"><code>** ^Information about the ORDER BY clause is stored in aOrderBy[].</code></span>
<span class="codeline" id="line-7050"><code>** ^Each term of aOrderBy records a column of the ORDER BY clause.</code></span>
<span class="codeline" id="line-7051"><code>**</code></span>
<span class="codeline" id="line-7052"><code>** The colUsed field indicates which columns of the virtual table may be</code></span>
<span class="codeline" id="line-7053"><code>** required by the current scan. Virtual table columns are numbered from</code></span>
<span class="codeline" id="line-7054"><code>** zero in the order in which they appear within the CREATE TABLE statement</code></span>
<span class="codeline" id="line-7055"><code>** passed to sqlite3_declare_vtab(). For the first 63 columns (columns 0-62),</code></span>
<span class="codeline" id="line-7056"><code>** the corresponding bit is set within the colUsed mask if the column may be</code></span>
<span class="codeline" id="line-7057"><code>** required by SQLite. If the table has at least 64 columns and any column</code></span>
<span class="codeline" id="line-7058"><code>** to the right of the first 63 is required, then bit 63 of colUsed is also</code></span>
<span class="codeline" id="line-7059"><code>** set. In other words, column iCol may be required if the expression</code></span>
<span class="codeline" id="line-7060"><code>** (colUsed &amp; ((sqlite3_uint64)1 &lt;&lt; (iCol&gt;=63 ? 63 : iCol))) evaluates to</code></span>
<span class="codeline" id="line-7061"><code>** non-zero.</code></span>
<span class="codeline" id="line-7062"><code>**</code></span>
<span class="codeline" id="line-7063"><code>** The [xBestIndex] method must fill aConstraintUsage[] with information</code></span>
<span class="codeline" id="line-7064"><code>** about what parameters to pass to xFilter.  ^If argvIndex&gt;0 then</code></span>
<span class="codeline" id="line-7065"><code>** the right-hand side of the corresponding aConstraint[] is evaluated</code></span>
<span class="codeline" id="line-7066"><code>** and becomes the argvIndex-th entry in argv.  ^(If aConstraintUsage[].omit</code></span>
<span class="codeline" id="line-7067"><code>** is true, then the constraint is assumed to be fully handled by the</code></span>
<span class="codeline" id="line-7068"><code>** virtual table and might not be checked again by the byte code.)^ ^(The</code></span>
<span class="codeline" id="line-7069"><code>** aConstraintUsage[].omit flag is an optimization hint. When the omit flag</code></span>
<span class="codeline" id="line-7070"><code>** is left in its default setting of false, the constraint will always be</code></span>
<span class="codeline" id="line-7071"><code>** checked separately in byte code.  If the omit flag is change to true, then</code></span>
<span class="codeline" id="line-7072"><code>** the constraint may or may not be checked in byte code.  In other words,</code></span>
<span class="codeline" id="line-7073"><code>** when the omit flag is true there is no guarantee that the constraint will</code></span>
<span class="codeline" id="line-7074"><code>** not be checked again using byte code.)^</code></span>
<span class="codeline" id="line-7075"><code>**</code></span>
<span class="codeline" id="line-7076"><code>** ^The idxNum and idxPtr values are recorded and passed into the</code></span>
<span class="codeline" id="line-7077"><code>** [xFilter] method.</code></span>
<span class="codeline" id="line-7078"><code>** ^[sqlite3_free()] is used to free idxPtr if and only if</code></span>
<span class="codeline" id="line-7079"><code>** needToFreeIdxPtr is true.</code></span>
<span class="codeline" id="line-7080"><code>**</code></span>
<span class="codeline" id="line-7081"><code>** ^The orderByConsumed means that output from [xFilter]/[xNext] will occur in</code></span>
<span class="codeline" id="line-7082"><code>** the correct order to satisfy the ORDER BY clause so that no separate</code></span>
<span class="codeline" id="line-7083"><code>** sorting step is required.</code></span>
<span class="codeline" id="line-7084"><code>**</code></span>
<span class="codeline" id="line-7085"><code>** ^The estimatedCost value is an estimate of the cost of a particular</code></span>
<span class="codeline" id="line-7086"><code>** strategy. A cost of N indicates that the cost of the strategy is similar</code></span>
<span class="codeline" id="line-7087"><code>** to a linear scan of an SQLite table with N rows. A cost of log(N)</code></span>
<span class="codeline" id="line-7088"><code>** indicates that the expense of the operation is similar to that of a</code></span>
<span class="codeline" id="line-7089"><code>** binary search on a unique indexed field of an SQLite table with N rows.</code></span>
<span class="codeline" id="line-7090"><code>**</code></span>
<span class="codeline" id="line-7091"><code>** ^The estimatedRows value is an estimate of the number of rows that</code></span>
<span class="codeline" id="line-7092"><code>** will be returned by the strategy.</code></span>
<span class="codeline" id="line-7093"><code>**</code></span>
<span class="codeline" id="line-7094"><code>** The xBestIndex method may optionally populate the idxFlags field with a</code></span>
<span class="codeline" id="line-7095"><code>** mask of SQLITE_INDEX_SCAN_* flags. Currently there is only one such flag -</code></span>
<span class="codeline" id="line-7096"><code>** SQLITE_INDEX_SCAN_UNIQUE. If the xBestIndex method sets this flag, SQLite</code></span>
<span class="codeline" id="line-7097"><code>** assumes that the strategy may visit at most one row.</code></span>
<span class="codeline" id="line-7098"><code>**</code></span>
<span class="codeline" id="line-7099"><code>** Additionally, if xBestIndex sets the SQLITE_INDEX_SCAN_UNIQUE flag, then</code></span>
<span class="codeline" id="line-7100"><code>** SQLite also assumes that if a call to the xUpdate() method is made as</code></span>
<span class="codeline" id="line-7101"><code>** part of the same statement to delete or update a virtual table row and the</code></span>
<span class="codeline" id="line-7102"><code>** implementation returns SQLITE_CONSTRAINT, then there is no need to rollback</code></span>
<span class="codeline" id="line-7103"><code>** any database changes. In other words, if the xUpdate() returns</code></span>
<span class="codeline" id="line-7104"><code>** SQLITE_CONSTRAINT, the database contents must be exactly as they were</code></span>
<span class="codeline" id="line-7105"><code>** before xUpdate was called. By contrast, if SQLITE_INDEX_SCAN_UNIQUE is not</code></span>
<span class="codeline" id="line-7106"><code>** set and xUpdate returns SQLITE_CONSTRAINT, any database changes made by</code></span>
<span class="codeline" id="line-7107"><code>** the xUpdate method are automatically rolled back by SQLite.</code></span>
<span class="codeline" id="line-7108"><code>**</code></span>
<span class="codeline" id="line-7109"><code>** IMPORTANT: The estimatedRows field was added to the sqlite3_index_info</code></span>
<span class="codeline" id="line-7110"><code>** structure for SQLite [version 3.8.2] ([dateof:3.8.2]).</code></span>
<span class="codeline" id="line-7111"><code>** If a virtual table extension is</code></span>
<span class="codeline" id="line-7112"><code>** used with an SQLite version earlier than 3.8.2, the results of attempting</code></span>
<span class="codeline" id="line-7113"><code>** to read or write the estimatedRows field are undefined (but are likely</code></span>
<span class="codeline" id="line-7114"><code>** to include crashing the application). The estimatedRows field should</code></span>
<span class="codeline" id="line-7115"><code>** therefore only be used if [sqlite3_libversion_number()] returns a</code></span>
<span class="codeline" id="line-7116"><code>** value greater than or equal to 3008002. Similarly, the idxFlags field</code></span>
<span class="codeline" id="line-7117"><code>** was added for [version 3.9.0] ([dateof:3.9.0]).</code></span>
<span class="codeline" id="line-7118"><code>** It may therefore only be used if</code></span>
<span class="codeline" id="line-7119"><code>** sqlite3_libversion_number() returns a value greater than or equal to</code></span>
<span class="codeline" id="line-7120"><code>** 3009000.</code></span>
<span class="codeline" id="line-7121"><code>*/</code></span>
<span class="codeline" id="line-7122"><code>struct sqlite3_index_info {</code></span>
<span class="codeline" id="line-7123"><code>  /* Inputs */</code></span>
<span class="codeline" id="line-7124"><code>  int nConstraint;           /* Number of entries in aConstraint */</code></span>
<span class="codeline" id="line-7125"><code>  struct sqlite3_index_constraint {</code></span>
<span class="codeline" id="line-7126"><code>     int iColumn;              /* Column constrained.  -1 for ROWID */</code></span>
<span class="codeline" id="line-7127"><code>     unsigned char op;         /* Constraint operator */</code></span>
<span class="codeline" id="line-7128"><code>     unsigned char usable;     /* True if this constraint is usable */</code></span>
<span class="codeline" id="line-7129"><code>     int iTermOffset;          /* Used internally - xBestIndex should ignore */</code></span>
<span class="codeline" id="line-7130"><code>  } *aConstraint;            /* Table of WHERE clause constraints */</code></span>
<span class="codeline" id="line-7131"><code>  int nOrderBy;              /* Number of terms in the ORDER BY clause */</code></span>
<span class="codeline" id="line-7132"><code>  struct sqlite3_index_orderby {</code></span>
<span class="codeline" id="line-7133"><code>     int iColumn;              /* Column number */</code></span>
<span class="codeline" id="line-7134"><code>     unsigned char desc;       /* True for DESC.  False for ASC. */</code></span>
<span class="codeline" id="line-7135"><code>  } *aOrderBy;               /* The ORDER BY clause */</code></span>
<span class="codeline" id="line-7136"><code>  /* Outputs */</code></span>
<span class="codeline" id="line-7137"><code>  struct sqlite3_index_constraint_usage {</code></span>
<span class="codeline" id="line-7138"><code>    int argvIndex;           /* if &gt;0, constraint is part of argv to xFilter */</code></span>
<span class="codeline" id="line-7139"><code>    unsigned char omit;      /* Do not code a test for this constraint */</code></span>
<span class="codeline" id="line-7140"><code>  } *aConstraintUsage;</code></span>
<span class="codeline" id="line-7141"><code>  int idxNum;                /* Number used to identify the index */</code></span>
<span class="codeline" id="line-7142"><code>  char *idxStr;              /* String, possibly obtained from sqlite3_malloc */</code></span>
<span class="codeline" id="line-7143"><code>  int needToFreeIdxStr;      /* Free idxStr using sqlite3_free() if true */</code></span>
<span class="codeline" id="line-7144"><code>  int orderByConsumed;       /* True if output is already ordered */</code></span>
<span class="codeline" id="line-7145"><code>  double estimatedCost;           /* Estimated cost of using this index */</code></span>
<span class="codeline" id="line-7146"><code>  /* Fields below are only available in SQLite 3.8.2 and later */</code></span>
<span class="codeline" id="line-7147"><code>  sqlite3_int64 estimatedRows;    /* Estimated number of rows returned */</code></span>
<span class="codeline" id="line-7148"><code>  /* Fields below are only available in SQLite 3.9.0 and later */</code></span>
<span class="codeline" id="line-7149"><code>  int idxFlags;              /* Mask of SQLITE_INDEX_SCAN_* flags */</code></span>
<span class="codeline" id="line-7150"><code>  /* Fields below are only available in SQLite 3.10.0 and later */</code></span>
<span class="codeline" id="line-7151"><code>  sqlite3_uint64 colUsed;    /* Input: Mask of columns used by statement */</code></span>
<span class="codeline" id="line-7152"><code>};</code></span>
<span class="codeline" id="line-7153"><code></code></span>
<span class="codeline" id="line-7154"><code>/*</code></span>
<span class="codeline" id="line-7155"><code>** CAPI3REF: Virtual Table Scan Flags</code></span>
<span class="codeline" id="line-7156"><code>**</code></span>
<span class="codeline" id="line-7157"><code>** Virtual table implementations are allowed to set the</code></span>
<span class="codeline" id="line-7158"><code>** [sqlite3_index_info].idxFlags field to some combination of</code></span>
<span class="codeline" id="line-7159"><code>** these bits.</code></span>
<span class="codeline" id="line-7160"><code>*/</code></span>
<span class="codeline" id="line-7161"><code>#define SQLITE_INDEX_SCAN_UNIQUE      1     /* Scan visits at most 1 row */</code></span>
<span class="codeline" id="line-7162"><code></code></span>
<span class="codeline" id="line-7163"><code>/*</code></span>
<span class="codeline" id="line-7164"><code>** CAPI3REF: Virtual Table Constraint Operator Codes</code></span>
<span class="codeline" id="line-7165"><code>**</code></span>
<span class="codeline" id="line-7166"><code>** These macros define the allowed values for the</code></span>
<span class="codeline" id="line-7167"><code>** [sqlite3_index_info].aConstraint[].op field.  Each value represents</code></span>
<span class="codeline" id="line-7168"><code>** an operator that is part of a constraint term in the WHERE clause of</code></span>
<span class="codeline" id="line-7169"><code>** a query that uses a [virtual table].</code></span>
<span class="codeline" id="line-7170"><code>**</code></span>
<span class="codeline" id="line-7171"><code>** ^The left-hand operand of the operator is given by the corresponding</code></span>
<span class="codeline" id="line-7172"><code>** aConstraint[].iColumn field.  ^An iColumn of -1 indicates the left-hand</code></span>
<span class="codeline" id="line-7173"><code>** operand is the rowid.</code></span>
<span class="codeline" id="line-7174"><code>** The SQLITE_INDEX_CONSTRAINT_LIMIT and SQLITE_INDEX_CONSTRAINT_OFFSET</code></span>
<span class="codeline" id="line-7175"><code>** operators have no left-hand operand, and so for those operators the</code></span>
<span class="codeline" id="line-7176"><code>** corresponding aConstraint[].iColumn is meaningless and should not be</code></span>
<span class="codeline" id="line-7177"><code>** used.</code></span>
<span class="codeline" id="line-7178"><code>**</code></span>
<span class="codeline" id="line-7179"><code>** All operator values from SQLITE_INDEX_CONSTRAINT_FUNCTION through</code></span>
<span class="codeline" id="line-7180"><code>** value 255 are reserved to represent functions that are overloaded</code></span>
<span class="codeline" id="line-7181"><code>** by the [xFindFunction|xFindFunction method] of the virtual table</code></span>
<span class="codeline" id="line-7182"><code>** implementation.</code></span>
<span class="codeline" id="line-7183"><code>**</code></span>
<span class="codeline" id="line-7184"><code>** The right-hand operands for each constraint might be accessible using</code></span>
<span class="codeline" id="line-7185"><code>** the [sqlite3_vtab_rhs_value()] interface.  Usually the right-hand</code></span>
<span class="codeline" id="line-7186"><code>** operand is only available if it appears as a single constant literal</code></span>
<span class="codeline" id="line-7187"><code>** in the input SQL.  If the right-hand operand is another column or an</code></span>
<span class="codeline" id="line-7188"><code>** expression (even a constant expression) or a parameter, then the</code></span>
<span class="codeline" id="line-7189"><code>** sqlite3_vtab_rhs_value() probably will not be able to extract it.</code></span>
<span class="codeline" id="line-7190"><code>** ^The SQLITE_INDEX_CONSTRAINT_ISNULL and</code></span>
<span class="codeline" id="line-7191"><code>** SQLITE_INDEX_CONSTRAINT_ISNOTNULL operators have no right-hand operand</code></span>
<span class="codeline" id="line-7192"><code>** and hence calls to sqlite3_vtab_rhs_value() for those operators will</code></span>
<span class="codeline" id="line-7193"><code>** always return SQLITE_NOTFOUND.</code></span>
<span class="codeline" id="line-7194"><code>**</code></span>
<span class="codeline" id="line-7195"><code>** The collating sequence to be used for comparison can be found using</code></span>
<span class="codeline" id="line-7196"><code>** the [sqlite3_vtab_collation()] interface.  For most real-world virtual</code></span>
<span class="codeline" id="line-7197"><code>** tables, the collating sequence of constraints does not matter (for example</code></span>
<span class="codeline" id="line-7198"><code>** because the constraints are numeric) and so the sqlite3_vtab_collation()</code></span>
<span class="codeline" id="line-7199"><code>** interface is no commonly needed.</code></span>
<span class="codeline" id="line-7200"><code>*/</code></span>
<span class="codeline" id="line-7201"><code>#define SQLITE_INDEX_CONSTRAINT_EQ          2</code></span>
<span class="codeline" id="line-7202"><code>#define SQLITE_INDEX_CONSTRAINT_GT          4</code></span>
<span class="codeline" id="line-7203"><code>#define SQLITE_INDEX_CONSTRAINT_LE          8</code></span>
<span class="codeline" id="line-7204"><code>#define SQLITE_INDEX_CONSTRAINT_LT         16</code></span>
<span class="codeline" id="line-7205"><code>#define SQLITE_INDEX_CONSTRAINT_GE         32</code></span>
<span class="codeline" id="line-7206"><code>#define SQLITE_INDEX_CONSTRAINT_MATCH      64</code></span>
<span class="codeline" id="line-7207"><code>#define SQLITE_INDEX_CONSTRAINT_LIKE       65</code></span>
<span class="codeline" id="line-7208"><code>#define SQLITE_INDEX_CONSTRAINT_GLOB       66</code></span>
<span class="codeline" id="line-7209"><code>#define SQLITE_INDEX_CONSTRAINT_REGEXP     67</code></span>
<span class="codeline" id="line-7210"><code>#define SQLITE_INDEX_CONSTRAINT_NE         68</code></span>
<span class="codeline" id="line-7211"><code>#define SQLITE_INDEX_CONSTRAINT_ISNOT      69</code></span>
<span class="codeline" id="line-7212"><code>#define SQLITE_INDEX_CONSTRAINT_ISNOTNULL  70</code></span>
<span class="codeline" id="line-7213"><code>#define SQLITE_INDEX_CONSTRAINT_ISNULL     71</code></span>
<span class="codeline" id="line-7214"><code>#define SQLITE_INDEX_CONSTRAINT_IS         72</code></span>
<span class="codeline" id="line-7215"><code>#define SQLITE_INDEX_CONSTRAINT_LIMIT      73</code></span>
<span class="codeline" id="line-7216"><code>#define SQLITE_INDEX_CONSTRAINT_OFFSET     74</code></span>
<span class="codeline" id="line-7217"><code>#define SQLITE_INDEX_CONSTRAINT_FUNCTION  150</code></span>
<span class="codeline" id="line-7218"><code></code></span>
<span class="codeline" id="line-7219"><code>/*</code></span>
<span class="codeline" id="line-7220"><code>** CAPI3REF: Register A Virtual Table Implementation</code></span>
<span class="codeline" id="line-7221"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-7222"><code>**</code></span>
<span class="codeline" id="line-7223"><code>** ^These routines are used to register a new [virtual table module] name.</code></span>
<span class="codeline" id="line-7224"><code>** ^Module names must be registered before</code></span>
<span class="codeline" id="line-7225"><code>** creating a new [virtual table] using the module and before using a</code></span>
<span class="codeline" id="line-7226"><code>** preexisting [virtual table] for the module.</code></span>
<span class="codeline" id="line-7227"><code>**</code></span>
<span class="codeline" id="line-7228"><code>** ^The module name is registered on the [database connection] specified</code></span>
<span class="codeline" id="line-7229"><code>** by the first parameter.  ^The name of the module is given by the</code></span>
<span class="codeline" id="line-7230"><code>** second parameter.  ^The third parameter is a pointer to</code></span>
<span class="codeline" id="line-7231"><code>** the implementation of the [virtual table module].   ^The fourth</code></span>
<span class="codeline" id="line-7232"><code>** parameter is an arbitrary client data pointer that is passed through</code></span>
<span class="codeline" id="line-7233"><code>** into the [xCreate] and [xConnect] methods of the virtual table module</code></span>
<span class="codeline" id="line-7234"><code>** when a new virtual table is be being created or reinitialized.</code></span>
<span class="codeline" id="line-7235"><code>**</code></span>
<span class="codeline" id="line-7236"><code>** ^The sqlite3_create_module_v2() interface has a fifth parameter which</code></span>
<span class="codeline" id="line-7237"><code>** is a pointer to a destructor for the pClientData.  ^SQLite will</code></span>
<span class="codeline" id="line-7238"><code>** invoke the destructor function (if it is not NULL) when SQLite</code></span>
<span class="codeline" id="line-7239"><code>** no longer needs the pClientData pointer.  ^The destructor will also</code></span>
<span class="codeline" id="line-7240"><code>** be invoked if the call to sqlite3_create_module_v2() fails.</code></span>
<span class="codeline" id="line-7241"><code>** ^The sqlite3_create_module()</code></span>
<span class="codeline" id="line-7242"><code>** interface is equivalent to sqlite3_create_module_v2() with a NULL</code></span>
<span class="codeline" id="line-7243"><code>** destructor.</code></span>
<span class="codeline" id="line-7244"><code>**</code></span>
<span class="codeline" id="line-7245"><code>** ^If the third parameter (the pointer to the sqlite3_module object) is</code></span>
<span class="codeline" id="line-7246"><code>** NULL then no new module is created and any existing modules with the</code></span>
<span class="codeline" id="line-7247"><code>** same name are dropped.</code></span>
<span class="codeline" id="line-7248"><code>**</code></span>
<span class="codeline" id="line-7249"><code>** See also: [sqlite3_drop_modules()]</code></span>
<span class="codeline" id="line-7250"><code>*/</code></span>
<span class="codeline" id="line-7251"><code>SQLITE_API int sqlite3_create_module(</code></span>
<span class="codeline" id="line-7252"><code>  sqlite3 *db,               /* SQLite connection to register module with */</code></span>
<span class="codeline" id="line-7253"><code>  const char *zName,         /* Name of the module */</code></span>
<span class="codeline" id="line-7254"><code>  const sqlite3_module *p,   /* Methods for the module */</code></span>
<span class="codeline" id="line-7255"><code>  void *pClientData          /* Client data for xCreate/xConnect */</code></span>
<span class="codeline" id="line-7256"><code>);</code></span>
<span class="codeline" id="line-7257"><code>SQLITE_API int sqlite3_create_module_v2(</code></span>
<span class="codeline" id="line-7258"><code>  sqlite3 *db,               /* SQLite connection to register module with */</code></span>
<span class="codeline" id="line-7259"><code>  const char *zName,         /* Name of the module */</code></span>
<span class="codeline" id="line-7260"><code>  const sqlite3_module *p,   /* Methods for the module */</code></span>
<span class="codeline" id="line-7261"><code>  void *pClientData,         /* Client data for xCreate/xConnect */</code></span>
<span class="codeline" id="line-7262"><code>  void(*xDestroy)(void*)     /* Module destructor function */</code></span>
<span class="codeline" id="line-7263"><code>);</code></span>
<span class="codeline" id="line-7264"><code></code></span>
<span class="codeline" id="line-7265"><code>/*</code></span>
<span class="codeline" id="line-7266"><code>** CAPI3REF: Remove Unnecessary Virtual Table Implementations</code></span>
<span class="codeline" id="line-7267"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-7268"><code>**</code></span>
<span class="codeline" id="line-7269"><code>** ^The sqlite3_drop_modules(D,L) interface removes all virtual</code></span>
<span class="codeline" id="line-7270"><code>** table modules from database connection D except those named on list L.</code></span>
<span class="codeline" id="line-7271"><code>** The L parameter must be either NULL or a pointer to an array of pointers</code></span>
<span class="codeline" id="line-7272"><code>** to strings where the array is terminated by a single NULL pointer.</code></span>
<span class="codeline" id="line-7273"><code>** ^If the L parameter is NULL, then all virtual table modules are removed.</code></span>
<span class="codeline" id="line-7274"><code>**</code></span>
<span class="codeline" id="line-7275"><code>** See also: [sqlite3_create_module()]</code></span>
<span class="codeline" id="line-7276"><code>*/</code></span>
<span class="codeline" id="line-7277"><code>SQLITE_API int sqlite3_drop_modules(</code></span>
<span class="codeline" id="line-7278"><code>  sqlite3 *db,                /* Remove modules from this connection */</code></span>
<span class="codeline" id="line-7279"><code>  const char **azKeep         /* Except, do not remove the ones named here */</code></span>
<span class="codeline" id="line-7280"><code>);</code></span>
<span class="codeline" id="line-7281"><code></code></span>
<span class="codeline" id="line-7282"><code>/*</code></span>
<span class="codeline" id="line-7283"><code>** CAPI3REF: Virtual Table Instance Object</code></span>
<span class="codeline" id="line-7284"><code>** KEYWORDS: sqlite3_vtab</code></span>
<span class="codeline" id="line-7285"><code>**</code></span>
<span class="codeline" id="line-7286"><code>** Every [virtual table module] implementation uses a subclass</code></span>
<span class="codeline" id="line-7287"><code>** of this object to describe a particular instance</code></span>
<span class="codeline" id="line-7288"><code>** of the [virtual table].  Each subclass will</code></span>
<span class="codeline" id="line-7289"><code>** be tailored to the specific needs of the module implementation.</code></span>
<span class="codeline" id="line-7290"><code>** The purpose of this superclass is to define certain fields that are</code></span>
<span class="codeline" id="line-7291"><code>** common to all module implementations.</code></span>
<span class="codeline" id="line-7292"><code>**</code></span>
<span class="codeline" id="line-7293"><code>** ^Virtual tables methods can set an error message by assigning a</code></span>
<span class="codeline" id="line-7294"><code>** string obtained from [sqlite3_mprintf()] to zErrMsg.  The method should</code></span>
<span class="codeline" id="line-7295"><code>** take care that any prior string is freed by a call to [sqlite3_free()]</code></span>
<span class="codeline" id="line-7296"><code>** prior to assigning a new string to zErrMsg.  ^After the error message</code></span>
<span class="codeline" id="line-7297"><code>** is delivered up to the client application, the string will be automatically</code></span>
<span class="codeline" id="line-7298"><code>** freed by sqlite3_free() and the zErrMsg field will be zeroed.</code></span>
<span class="codeline" id="line-7299"><code>*/</code></span>
<span class="codeline" id="line-7300"><code>struct sqlite3_vtab {</code></span>
<span class="codeline" id="line-7301"><code>  const sqlite3_module *pModule;  /* The module for this virtual table */</code></span>
<span class="codeline" id="line-7302"><code>  int nRef;                       /* Number of open cursors */</code></span>
<span class="codeline" id="line-7303"><code>  char *zErrMsg;                  /* Error message from sqlite3_mprintf() */</code></span>
<span class="codeline" id="line-7304"><code>  /* Virtual table implementations will typically add additional fields */</code></span>
<span class="codeline" id="line-7305"><code>};</code></span>
<span class="codeline" id="line-7306"><code></code></span>
<span class="codeline" id="line-7307"><code>/*</code></span>
<span class="codeline" id="line-7308"><code>** CAPI3REF: Virtual Table Cursor Object</code></span>
<span class="codeline" id="line-7309"><code>** KEYWORDS: sqlite3_vtab_cursor {virtual table cursor}</code></span>
<span class="codeline" id="line-7310"><code>**</code></span>
<span class="codeline" id="line-7311"><code>** Every [virtual table module] implementation uses a subclass of the</code></span>
<span class="codeline" id="line-7312"><code>** following structure to describe cursors that point into the</code></span>
<span class="codeline" id="line-7313"><code>** [virtual table] and are used</code></span>
<span class="codeline" id="line-7314"><code>** to loop through the virtual table.  Cursors are created using the</code></span>
<span class="codeline" id="line-7315"><code>** [sqlite3_module.xOpen | xOpen] method of the module and are destroyed</code></span>
<span class="codeline" id="line-7316"><code>** by the [sqlite3_module.xClose | xClose] method.  Cursors are used</code></span>
<span class="codeline" id="line-7317"><code>** by the [xFilter], [xNext], [xEof], [xColumn], and [xRowid] methods</code></span>
<span class="codeline" id="line-7318"><code>** of the module.  Each module implementation will define</code></span>
<span class="codeline" id="line-7319"><code>** the content of a cursor structure to suit its own needs.</code></span>
<span class="codeline" id="line-7320"><code>**</code></span>
<span class="codeline" id="line-7321"><code>** This superclass exists in order to define fields of the cursor that</code></span>
<span class="codeline" id="line-7322"><code>** are common to all implementations.</code></span>
<span class="codeline" id="line-7323"><code>*/</code></span>
<span class="codeline" id="line-7324"><code>struct sqlite3_vtab_cursor {</code></span>
<span class="codeline" id="line-7325"><code>  sqlite3_vtab *pVtab;      /* Virtual table of this cursor */</code></span>
<span class="codeline" id="line-7326"><code>  /* Virtual table implementations will typically add additional fields */</code></span>
<span class="codeline" id="line-7327"><code>};</code></span>
<span class="codeline" id="line-7328"><code></code></span>
<span class="codeline" id="line-7329"><code>/*</code></span>
<span class="codeline" id="line-7330"><code>** CAPI3REF: Declare The Schema Of A Virtual Table</code></span>
<span class="codeline" id="line-7331"><code>**</code></span>
<span class="codeline" id="line-7332"><code>** ^The [xCreate] and [xConnect] methods of a</code></span>
<span class="codeline" id="line-7333"><code>** [virtual table module] call this interface</code></span>
<span class="codeline" id="line-7334"><code>** to declare the format (the names and datatypes of the columns) of</code></span>
<span class="codeline" id="line-7335"><code>** the virtual tables they implement.</code></span>
<span class="codeline" id="line-7336"><code>*/</code></span>
<span class="codeline" id="line-7337"><code>SQLITE_API int sqlite3_declare_vtab(sqlite3*, const char *zSQL);</code></span>
<span class="codeline" id="line-7338"><code></code></span>
<span class="codeline" id="line-7339"><code>/*</code></span>
<span class="codeline" id="line-7340"><code>** CAPI3REF: Overload A Function For A Virtual Table</code></span>
<span class="codeline" id="line-7341"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-7342"><code>**</code></span>
<span class="codeline" id="line-7343"><code>** ^(Virtual tables can provide alternative implementations of functions</code></span>
<span class="codeline" id="line-7344"><code>** using the [xFindFunction] method of the [virtual table module].</code></span>
<span class="codeline" id="line-7345"><code>** But global versions of those functions</code></span>
<span class="codeline" id="line-7346"><code>** must exist in order to be overloaded.)^</code></span>
<span class="codeline" id="line-7347"><code>**</code></span>
<span class="codeline" id="line-7348"><code>** ^(This API makes sure a global version of a function with a particular</code></span>
<span class="codeline" id="line-7349"><code>** name and number of parameters exists.  If no such function exists</code></span>
<span class="codeline" id="line-7350"><code>** before this API is called, a new function is created.)^  ^The implementation</code></span>
<span class="codeline" id="line-7351"><code>** of the new function always causes an exception to be thrown.  So</code></span>
<span class="codeline" id="line-7352"><code>** the new function is not good for anything by itself.  Its only</code></span>
<span class="codeline" id="line-7353"><code>** purpose is to be a placeholder function that can be overloaded</code></span>
<span class="codeline" id="line-7354"><code>** by a [virtual table].</code></span>
<span class="codeline" id="line-7355"><code>*/</code></span>
<span class="codeline" id="line-7356"><code>SQLITE_API int sqlite3_overload_function(sqlite3*, const char *zFuncName, int nArg);</code></span>
<span class="codeline" id="line-7357"><code></code></span>
<span class="codeline" id="line-7358"><code>/*</code></span>
<span class="codeline" id="line-7359"><code>** The interface to the virtual-table mechanism defined above (back up</code></span>
<span class="codeline" id="line-7360"><code>** to a comment remarkably similar to this one) is currently considered</code></span>
<span class="codeline" id="line-7361"><code>** to be experimental.  The interface might change in incompatible ways.</code></span>
<span class="codeline" id="line-7362"><code>** If this is a problem for you, do not use the interface at this time.</code></span>
<span class="codeline" id="line-7363"><code>**</code></span>
<span class="codeline" id="line-7364"><code>** When the virtual-table mechanism stabilizes, we will declare the</code></span>
<span class="codeline" id="line-7365"><code>** interface fixed, support it indefinitely, and remove this comment.</code></span>
<span class="codeline" id="line-7366"><code>*/</code></span>
<span class="codeline" id="line-7367"><code></code></span>
<span class="codeline" id="line-7368"><code>/*</code></span>
<span class="codeline" id="line-7369"><code>** CAPI3REF: A Handle To An Open BLOB</code></span>
<span class="codeline" id="line-7370"><code>** KEYWORDS: {BLOB handle} {BLOB handles}</code></span>
<span class="codeline" id="line-7371"><code>**</code></span>
<span class="codeline" id="line-7372"><code>** An instance of this object represents an open BLOB on which</code></span>
<span class="codeline" id="line-7373"><code>** [sqlite3_blob_open | incremental BLOB I/O] can be performed.</code></span>
<span class="codeline" id="line-7374"><code>** ^Objects of this type are created by [sqlite3_blob_open()]</code></span>
<span class="codeline" id="line-7375"><code>** and destroyed by [sqlite3_blob_close()].</code></span>
<span class="codeline" id="line-7376"><code>** ^The [sqlite3_blob_read()] and [sqlite3_blob_write()] interfaces</code></span>
<span class="codeline" id="line-7377"><code>** can be used to read or write small subsections of the BLOB.</code></span>
<span class="codeline" id="line-7378"><code>** ^The [sqlite3_blob_bytes()] interface returns the size of the BLOB in bytes.</code></span>
<span class="codeline" id="line-7379"><code>*/</code></span>
<span class="codeline" id="line-7380"><code>typedef struct sqlite3_blob sqlite3_blob;</code></span>
<span class="codeline" id="line-7381"><code></code></span>
<span class="codeline" id="line-7382"><code>/*</code></span>
<span class="codeline" id="line-7383"><code>** CAPI3REF: Open A BLOB For Incremental I/O</code></span>
<span class="codeline" id="line-7384"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-7385"><code>** CONSTRUCTOR: sqlite3_blob</code></span>
<span class="codeline" id="line-7386"><code>**</code></span>
<span class="codeline" id="line-7387"><code>** ^(This interfaces opens a [BLOB handle | handle] to the BLOB located</code></span>
<span class="codeline" id="line-7388"><code>** in row iRow, column zColumn, table zTable in database zDb;</code></span>
<span class="codeline" id="line-7389"><code>** in other words, the same BLOB that would be selected by:</code></span>
<span class="codeline" id="line-7390"><code>**</code></span>
<span class="codeline" id="line-7391"><code>** &lt;pre&gt;</code></span>
<span class="codeline" id="line-7392"><code>**     SELECT zColumn FROM zDb.zTable WHERE [rowid] = iRow;</code></span>
<span class="codeline" id="line-7393"><code>** &lt;/pre&gt;)^</code></span>
<span class="codeline" id="line-7394"><code>**</code></span>
<span class="codeline" id="line-7395"><code>** ^(Parameter zDb is not the filename that contains the database, but</code></span>
<span class="codeline" id="line-7396"><code>** rather the symbolic name of the database. For attached databases, this is</code></span>
<span class="codeline" id="line-7397"><code>** the name that appears after the AS keyword in the [ATTACH] statement.</code></span>
<span class="codeline" id="line-7398"><code>** For the main database file, the database name is "main". For TEMP</code></span>
<span class="codeline" id="line-7399"><code>** tables, the database name is "temp".)^</code></span>
<span class="codeline" id="line-7400"><code>**</code></span>
<span class="codeline" id="line-7401"><code>** ^If the flags parameter is non-zero, then the BLOB is opened for read</code></span>
<span class="codeline" id="line-7402"><code>** and write access. ^If the flags parameter is zero, the BLOB is opened for</code></span>
<span class="codeline" id="line-7403"><code>** read-only access.</code></span>
<span class="codeline" id="line-7404"><code>**</code></span>
<span class="codeline" id="line-7405"><code>** ^(On success, [SQLITE_OK] is returned and the new [BLOB handle] is stored</code></span>
<span class="codeline" id="line-7406"><code>** in *ppBlob. Otherwise an [error code] is returned and, unless the error</code></span>
<span class="codeline" id="line-7407"><code>** code is SQLITE_MISUSE, *ppBlob is set to NULL.)^ ^This means that, provided</code></span>
<span class="codeline" id="line-7408"><code>** the API is not misused, it is always safe to call [sqlite3_blob_close()]</code></span>
<span class="codeline" id="line-7409"><code>** on *ppBlob after this function it returns.</code></span>
<span class="codeline" id="line-7410"><code>**</code></span>
<span class="codeline" id="line-7411"><code>** This function fails with SQLITE_ERROR if any of the following are true:</code></span>
<span class="codeline" id="line-7412"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-7413"><code>**   &lt;li&gt; ^(Database zDb does not exist)^,</code></span>
<span class="codeline" id="line-7414"><code>**   &lt;li&gt; ^(Table zTable does not exist within database zDb)^,</code></span>
<span class="codeline" id="line-7415"><code>**   &lt;li&gt; ^(Table zTable is a WITHOUT ROWID table)^,</code></span>
<span class="codeline" id="line-7416"><code>**   &lt;li&gt; ^(Column zColumn does not exist)^,</code></span>
<span class="codeline" id="line-7417"><code>**   &lt;li&gt; ^(Row iRow is not present in the table)^,</code></span>
<span class="codeline" id="line-7418"><code>**   &lt;li&gt; ^(The specified column of row iRow contains a value that is not</code></span>
<span class="codeline" id="line-7419"><code>**         a TEXT or BLOB value)^,</code></span>
<span class="codeline" id="line-7420"><code>**   &lt;li&gt; ^(Column zColumn is part of an index, PRIMARY KEY or UNIQUE</code></span>
<span class="codeline" id="line-7421"><code>**         constraint and the blob is being opened for read/write access)^,</code></span>
<span class="codeline" id="line-7422"><code>**   &lt;li&gt; ^([foreign key constraints | Foreign key constraints] are enabled,</code></span>
<span class="codeline" id="line-7423"><code>**         column zColumn is part of a [child key] definition and the blob is</code></span>
<span class="codeline" id="line-7424"><code>**         being opened for read/write access)^.</code></span>
<span class="codeline" id="line-7425"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-7426"><code>**</code></span>
<span class="codeline" id="line-7427"><code>** ^Unless it returns SQLITE_MISUSE, this function sets the</code></span>
<span class="codeline" id="line-7428"><code>** [database connection] error code and message accessible via</code></span>
<span class="codeline" id="line-7429"><code>** [sqlite3_errcode()] and [sqlite3_errmsg()] and related functions.</code></span>
<span class="codeline" id="line-7430"><code>**</code></span>
<span class="codeline" id="line-7431"><code>** A BLOB referenced by sqlite3_blob_open() may be read using the</code></span>
<span class="codeline" id="line-7432"><code>** [sqlite3_blob_read()] interface and modified by using</code></span>
<span class="codeline" id="line-7433"><code>** [sqlite3_blob_write()].  The [BLOB handle] can be moved to a</code></span>
<span class="codeline" id="line-7434"><code>** different row of the same table using the [sqlite3_blob_reopen()]</code></span>
<span class="codeline" id="line-7435"><code>** interface.  However, the column, table, or database of a [BLOB handle]</code></span>
<span class="codeline" id="line-7436"><code>** cannot be changed after the [BLOB handle] is opened.</code></span>
<span class="codeline" id="line-7437"><code>**</code></span>
<span class="codeline" id="line-7438"><code>** ^(If the row that a BLOB handle points to is modified by an</code></span>
<span class="codeline" id="line-7439"><code>** [UPDATE], [DELETE], or by [ON CONFLICT] side-effects</code></span>
<span class="codeline" id="line-7440"><code>** then the BLOB handle is marked as "expired".</code></span>
<span class="codeline" id="line-7441"><code>** This is true if any column of the row is changed, even a column</code></span>
<span class="codeline" id="line-7442"><code>** other than the one the BLOB handle is open on.)^</code></span>
<span class="codeline" id="line-7443"><code>** ^Calls to [sqlite3_blob_read()] and [sqlite3_blob_write()] for</code></span>
<span class="codeline" id="line-7444"><code>** an expired BLOB handle fail with a return code of [SQLITE_ABORT].</code></span>
<span class="codeline" id="line-7445"><code>** ^(Changes written into a BLOB prior to the BLOB expiring are not</code></span>
<span class="codeline" id="line-7446"><code>** rolled back by the expiration of the BLOB.  Such changes will eventually</code></span>
<span class="codeline" id="line-7447"><code>** commit if the transaction continues to completion.)^</code></span>
<span class="codeline" id="line-7448"><code>**</code></span>
<span class="codeline" id="line-7449"><code>** ^Use the [sqlite3_blob_bytes()] interface to determine the size of</code></span>
<span class="codeline" id="line-7450"><code>** the opened blob.  ^The size of a blob may not be changed by this</code></span>
<span class="codeline" id="line-7451"><code>** interface.  Use the [UPDATE] SQL command to change the size of a</code></span>
<span class="codeline" id="line-7452"><code>** blob.</code></span>
<span class="codeline" id="line-7453"><code>**</code></span>
<span class="codeline" id="line-7454"><code>** ^The [sqlite3_bind_zeroblob()] and [sqlite3_result_zeroblob()] interfaces</code></span>
<span class="codeline" id="line-7455"><code>** and the built-in [zeroblob] SQL function may be used to create a</code></span>
<span class="codeline" id="line-7456"><code>** zero-filled blob to read or write using the incremental-blob interface.</code></span>
<span class="codeline" id="line-7457"><code>**</code></span>
<span class="codeline" id="line-7458"><code>** To avoid a resource leak, every open [BLOB handle] should eventually</code></span>
<span class="codeline" id="line-7459"><code>** be released by a call to [sqlite3_blob_close()].</code></span>
<span class="codeline" id="line-7460"><code>**</code></span>
<span class="codeline" id="line-7461"><code>** See also: [sqlite3_blob_close()],</code></span>
<span class="codeline" id="line-7462"><code>** [sqlite3_blob_reopen()], [sqlite3_blob_read()],</code></span>
<span class="codeline" id="line-7463"><code>** [sqlite3_blob_bytes()], [sqlite3_blob_write()].</code></span>
<span class="codeline" id="line-7464"><code>*/</code></span>
<span class="codeline" id="line-7465"><code>SQLITE_API int sqlite3_blob_open(</code></span>
<span class="codeline" id="line-7466"><code>  sqlite3*,</code></span>
<span class="codeline" id="line-7467"><code>  const char *zDb,</code></span>
<span class="codeline" id="line-7468"><code>  const char *zTable,</code></span>
<span class="codeline" id="line-7469"><code>  const char *zColumn,</code></span>
<span class="codeline" id="line-7470"><code>  sqlite3_int64 iRow,</code></span>
<span class="codeline" id="line-7471"><code>  int flags,</code></span>
<span class="codeline" id="line-7472"><code>  sqlite3_blob **ppBlob</code></span>
<span class="codeline" id="line-7473"><code>);</code></span>
<span class="codeline" id="line-7474"><code></code></span>
<span class="codeline" id="line-7475"><code>/*</code></span>
<span class="codeline" id="line-7476"><code>** CAPI3REF: Move a BLOB Handle to a New Row</code></span>
<span class="codeline" id="line-7477"><code>** METHOD: sqlite3_blob</code></span>
<span class="codeline" id="line-7478"><code>**</code></span>
<span class="codeline" id="line-7479"><code>** ^This function is used to move an existing [BLOB handle] so that it points</code></span>
<span class="codeline" id="line-7480"><code>** to a different row of the same database table. ^The new row is identified</code></span>
<span class="codeline" id="line-7481"><code>** by the rowid value passed as the second argument. Only the row can be</code></span>
<span class="codeline" id="line-7482"><code>** changed. ^The database, table and column on which the blob handle is open</code></span>
<span class="codeline" id="line-7483"><code>** remain the same. Moving an existing [BLOB handle] to a new row is</code></span>
<span class="codeline" id="line-7484"><code>** faster than closing the existing handle and opening a new one.</code></span>
<span class="codeline" id="line-7485"><code>**</code></span>
<span class="codeline" id="line-7486"><code>** ^(The new row must meet the same criteria as for [sqlite3_blob_open()] -</code></span>
<span class="codeline" id="line-7487"><code>** it must exist and there must be either a blob or text value stored in</code></span>
<span class="codeline" id="line-7488"><code>** the nominated column.)^ ^If the new row is not present in the table, or if</code></span>
<span class="codeline" id="line-7489"><code>** it does not contain a blob or text value, or if another error occurs, an</code></span>
<span class="codeline" id="line-7490"><code>** SQLite error code is returned and the blob handle is considered aborted.</code></span>
<span class="codeline" id="line-7491"><code>** ^All subsequent calls to [sqlite3_blob_read()], [sqlite3_blob_write()] or</code></span>
<span class="codeline" id="line-7492"><code>** [sqlite3_blob_reopen()] on an aborted blob handle immediately return</code></span>
<span class="codeline" id="line-7493"><code>** SQLITE_ABORT. ^Calling [sqlite3_blob_bytes()] on an aborted blob handle</code></span>
<span class="codeline" id="line-7494"><code>** always returns zero.</code></span>
<span class="codeline" id="line-7495"><code>**</code></span>
<span class="codeline" id="line-7496"><code>** ^This function sets the database handle error code and message.</code></span>
<span class="codeline" id="line-7497"><code>*/</code></span>
<span class="codeline" id="line-7498"><code>SQLITE_API int sqlite3_blob_reopen(sqlite3_blob *, sqlite3_int64);</code></span>
<span class="codeline" id="line-7499"><code></code></span>
<span class="codeline" id="line-7500"><code>/*</code></span>
<span class="codeline" id="line-7501"><code>** CAPI3REF: Close A BLOB Handle</code></span>
<span class="codeline" id="line-7502"><code>** DESTRUCTOR: sqlite3_blob</code></span>
<span class="codeline" id="line-7503"><code>**</code></span>
<span class="codeline" id="line-7504"><code>** ^This function closes an open [BLOB handle]. ^(The BLOB handle is closed</code></span>
<span class="codeline" id="line-7505"><code>** unconditionally.  Even if this routine returns an error code, the</code></span>
<span class="codeline" id="line-7506"><code>** handle is still closed.)^</code></span>
<span class="codeline" id="line-7507"><code>**</code></span>
<span class="codeline" id="line-7508"><code>** ^If the blob handle being closed was opened for read-write access, and if</code></span>
<span class="codeline" id="line-7509"><code>** the database is in auto-commit mode and there are no other open read-write</code></span>
<span class="codeline" id="line-7510"><code>** blob handles or active write statements, the current transaction is</code></span>
<span class="codeline" id="line-7511"><code>** committed. ^If an error occurs while committing the transaction, an error</code></span>
<span class="codeline" id="line-7512"><code>** code is returned and the transaction rolled back.</code></span>
<span class="codeline" id="line-7513"><code>**</code></span>
<span class="codeline" id="line-7514"><code>** Calling this function with an argument that is not a NULL pointer or an</code></span>
<span class="codeline" id="line-7515"><code>** open blob handle results in undefined behaviour. ^Calling this routine</code></span>
<span class="codeline" id="line-7516"><code>** with a null pointer (such as would be returned by a failed call to</code></span>
<span class="codeline" id="line-7517"><code>** [sqlite3_blob_open()]) is a harmless no-op. ^Otherwise, if this function</code></span>
<span class="codeline" id="line-7518"><code>** is passed a valid open blob handle, the values returned by the</code></span>
<span class="codeline" id="line-7519"><code>** sqlite3_errcode() and sqlite3_errmsg() functions are set before returning.</code></span>
<span class="codeline" id="line-7520"><code>*/</code></span>
<span class="codeline" id="line-7521"><code>SQLITE_API int sqlite3_blob_close(sqlite3_blob *);</code></span>
<span class="codeline" id="line-7522"><code></code></span>
<span class="codeline" id="line-7523"><code>/*</code></span>
<span class="codeline" id="line-7524"><code>** CAPI3REF: Return The Size Of An Open BLOB</code></span>
<span class="codeline" id="line-7525"><code>** METHOD: sqlite3_blob</code></span>
<span class="codeline" id="line-7526"><code>**</code></span>
<span class="codeline" id="line-7527"><code>** ^Returns the size in bytes of the BLOB accessible via the</code></span>
<span class="codeline" id="line-7528"><code>** successfully opened [BLOB handle] in its only argument.  ^The</code></span>
<span class="codeline" id="line-7529"><code>** incremental blob I/O routines can only read or overwriting existing</code></span>
<span class="codeline" id="line-7530"><code>** blob content; they cannot change the size of a blob.</code></span>
<span class="codeline" id="line-7531"><code>**</code></span>
<span class="codeline" id="line-7532"><code>** This routine only works on a [BLOB handle] which has been created</code></span>
<span class="codeline" id="line-7533"><code>** by a prior successful call to [sqlite3_blob_open()] and which has not</code></span>
<span class="codeline" id="line-7534"><code>** been closed by [sqlite3_blob_close()].  Passing any other pointer in</code></span>
<span class="codeline" id="line-7535"><code>** to this routine results in undefined and probably undesirable behavior.</code></span>
<span class="codeline" id="line-7536"><code>*/</code></span>
<span class="codeline" id="line-7537"><code>SQLITE_API int sqlite3_blob_bytes(sqlite3_blob *);</code></span>
<span class="codeline" id="line-7538"><code></code></span>
<span class="codeline" id="line-7539"><code>/*</code></span>
<span class="codeline" id="line-7540"><code>** CAPI3REF: Read Data From A BLOB Incrementally</code></span>
<span class="codeline" id="line-7541"><code>** METHOD: sqlite3_blob</code></span>
<span class="codeline" id="line-7542"><code>**</code></span>
<span class="codeline" id="line-7543"><code>** ^(This function is used to read data from an open [BLOB handle] into a</code></span>
<span class="codeline" id="line-7544"><code>** caller-supplied buffer. N bytes of data are copied into buffer Z</code></span>
<span class="codeline" id="line-7545"><code>** from the open BLOB, starting at offset iOffset.)^</code></span>
<span class="codeline" id="line-7546"><code>**</code></span>
<span class="codeline" id="line-7547"><code>** ^If offset iOffset is less than N bytes from the end of the BLOB,</code></span>
<span class="codeline" id="line-7548"><code>** [SQLITE_ERROR] is returned and no data is read.  ^If N or iOffset is</code></span>
<span class="codeline" id="line-7549"><code>** less than zero, [SQLITE_ERROR] is returned and no data is read.</code></span>
<span class="codeline" id="line-7550"><code>** ^The size of the blob (and hence the maximum value of N+iOffset)</code></span>
<span class="codeline" id="line-7551"><code>** can be determined using the [sqlite3_blob_bytes()] interface.</code></span>
<span class="codeline" id="line-7552"><code>**</code></span>
<span class="codeline" id="line-7553"><code>** ^An attempt to read from an expired [BLOB handle] fails with an</code></span>
<span class="codeline" id="line-7554"><code>** error code of [SQLITE_ABORT].</code></span>
<span class="codeline" id="line-7555"><code>**</code></span>
<span class="codeline" id="line-7556"><code>** ^(On success, sqlite3_blob_read() returns SQLITE_OK.</code></span>
<span class="codeline" id="line-7557"><code>** Otherwise, an [error code] or an [extended error code] is returned.)^</code></span>
<span class="codeline" id="line-7558"><code>**</code></span>
<span class="codeline" id="line-7559"><code>** This routine only works on a [BLOB handle] which has been created</code></span>
<span class="codeline" id="line-7560"><code>** by a prior successful call to [sqlite3_blob_open()] and which has not</code></span>
<span class="codeline" id="line-7561"><code>** been closed by [sqlite3_blob_close()].  Passing any other pointer in</code></span>
<span class="codeline" id="line-7562"><code>** to this routine results in undefined and probably undesirable behavior.</code></span>
<span class="codeline" id="line-7563"><code>**</code></span>
<span class="codeline" id="line-7564"><code>** See also: [sqlite3_blob_write()].</code></span>
<span class="codeline" id="line-7565"><code>*/</code></span>
<span class="codeline" id="line-7566"><code>SQLITE_API int sqlite3_blob_read(sqlite3_blob *, void *Z, int N, int iOffset);</code></span>
<span class="codeline" id="line-7567"><code></code></span>
<span class="codeline" id="line-7568"><code>/*</code></span>
<span class="codeline" id="line-7569"><code>** CAPI3REF: Write Data Into A BLOB Incrementally</code></span>
<span class="codeline" id="line-7570"><code>** METHOD: sqlite3_blob</code></span>
<span class="codeline" id="line-7571"><code>**</code></span>
<span class="codeline" id="line-7572"><code>** ^(This function is used to write data into an open [BLOB handle] from a</code></span>
<span class="codeline" id="line-7573"><code>** caller-supplied buffer. N bytes of data are copied from the buffer Z</code></span>
<span class="codeline" id="line-7574"><code>** into the open BLOB, starting at offset iOffset.)^</code></span>
<span class="codeline" id="line-7575"><code>**</code></span>
<span class="codeline" id="line-7576"><code>** ^(On success, sqlite3_blob_write() returns SQLITE_OK.</code></span>
<span class="codeline" id="line-7577"><code>** Otherwise, an  [error code] or an [extended error code] is returned.)^</code></span>
<span class="codeline" id="line-7578"><code>** ^Unless SQLITE_MISUSE is returned, this function sets the</code></span>
<span class="codeline" id="line-7579"><code>** [database connection] error code and message accessible via</code></span>
<span class="codeline" id="line-7580"><code>** [sqlite3_errcode()] and [sqlite3_errmsg()] and related functions.</code></span>
<span class="codeline" id="line-7581"><code>**</code></span>
<span class="codeline" id="line-7582"><code>** ^If the [BLOB handle] passed as the first argument was not opened for</code></span>
<span class="codeline" id="line-7583"><code>** writing (the flags parameter to [sqlite3_blob_open()] was zero),</code></span>
<span class="codeline" id="line-7584"><code>** this function returns [SQLITE_READONLY].</code></span>
<span class="codeline" id="line-7585"><code>**</code></span>
<span class="codeline" id="line-7586"><code>** This function may only modify the contents of the BLOB; it is</code></span>
<span class="codeline" id="line-7587"><code>** not possible to increase the size of a BLOB using this API.</code></span>
<span class="codeline" id="line-7588"><code>** ^If offset iOffset is less than N bytes from the end of the BLOB,</code></span>
<span class="codeline" id="line-7589"><code>** [SQLITE_ERROR] is returned and no data is written. The size of the</code></span>
<span class="codeline" id="line-7590"><code>** BLOB (and hence the maximum value of N+iOffset) can be determined</code></span>
<span class="codeline" id="line-7591"><code>** using the [sqlite3_blob_bytes()] interface. ^If N or iOffset are less</code></span>
<span class="codeline" id="line-7592"><code>** than zero [SQLITE_ERROR] is returned and no data is written.</code></span>
<span class="codeline" id="line-7593"><code>**</code></span>
<span class="codeline" id="line-7594"><code>** ^An attempt to write to an expired [BLOB handle] fails with an</code></span>
<span class="codeline" id="line-7595"><code>** error code of [SQLITE_ABORT].  ^Writes to the BLOB that occurred</code></span>
<span class="codeline" id="line-7596"><code>** before the [BLOB handle] expired are not rolled back by the</code></span>
<span class="codeline" id="line-7597"><code>** expiration of the handle, though of course those changes might</code></span>
<span class="codeline" id="line-7598"><code>** have been overwritten by the statement that expired the BLOB handle</code></span>
<span class="codeline" id="line-7599"><code>** or by other independent statements.</code></span>
<span class="codeline" id="line-7600"><code>**</code></span>
<span class="codeline" id="line-7601"><code>** This routine only works on a [BLOB handle] which has been created</code></span>
<span class="codeline" id="line-7602"><code>** by a prior successful call to [sqlite3_blob_open()] and which has not</code></span>
<span class="codeline" id="line-7603"><code>** been closed by [sqlite3_blob_close()].  Passing any other pointer in</code></span>
<span class="codeline" id="line-7604"><code>** to this routine results in undefined and probably undesirable behavior.</code></span>
<span class="codeline" id="line-7605"><code>**</code></span>
<span class="codeline" id="line-7606"><code>** See also: [sqlite3_blob_read()].</code></span>
<span class="codeline" id="line-7607"><code>*/</code></span>
<span class="codeline" id="line-7608"><code>SQLITE_API int sqlite3_blob_write(sqlite3_blob *, const void *z, int n, int iOffset);</code></span>
<span class="codeline" id="line-7609"><code></code></span>
<span class="codeline" id="line-7610"><code>/*</code></span>
<span class="codeline" id="line-7611"><code>** CAPI3REF: Virtual File System Objects</code></span>
<span class="codeline" id="line-7612"><code>**</code></span>
<span class="codeline" id="line-7613"><code>** A virtual filesystem (VFS) is an [sqlite3_vfs] object</code></span>
<span class="codeline" id="line-7614"><code>** that SQLite uses to interact</code></span>
<span class="codeline" id="line-7615"><code>** with the underlying operating system.  Most SQLite builds come with a</code></span>
<span class="codeline" id="line-7616"><code>** single default VFS that is appropriate for the host computer.</code></span>
<span class="codeline" id="line-7617"><code>** New VFSes can be registered and existing VFSes can be unregistered.</code></span>
<span class="codeline" id="line-7618"><code>** The following interfaces are provided.</code></span>
<span class="codeline" id="line-7619"><code>**</code></span>
<span class="codeline" id="line-7620"><code>** ^The sqlite3_vfs_find() interface returns a pointer to a VFS given its name.</code></span>
<span class="codeline" id="line-7621"><code>** ^Names are case sensitive.</code></span>
<span class="codeline" id="line-7622"><code>** ^Names are zero-terminated UTF-8 strings.</code></span>
<span class="codeline" id="line-7623"><code>** ^If there is no match, a NULL pointer is returned.</code></span>
<span class="codeline" id="line-7624"><code>** ^If zVfsName is NULL then the default VFS is returned.</code></span>
<span class="codeline" id="line-7625"><code>**</code></span>
<span class="codeline" id="line-7626"><code>** ^New VFSes are registered with sqlite3_vfs_register().</code></span>
<span class="codeline" id="line-7627"><code>** ^Each new VFS becomes the default VFS if the makeDflt flag is set.</code></span>
<span class="codeline" id="line-7628"><code>** ^The same VFS can be registered multiple times without injury.</code></span>
<span class="codeline" id="line-7629"><code>** ^To make an existing VFS into the default VFS, register it again</code></span>
<span class="codeline" id="line-7630"><code>** with the makeDflt flag set.  If two different VFSes with the</code></span>
<span class="codeline" id="line-7631"><code>** same name are registered, the behavior is undefined.  If a</code></span>
<span class="codeline" id="line-7632"><code>** VFS is registered with a name that is NULL or an empty string,</code></span>
<span class="codeline" id="line-7633"><code>** then the behavior is undefined.</code></span>
<span class="codeline" id="line-7634"><code>**</code></span>
<span class="codeline" id="line-7635"><code>** ^Unregister a VFS with the sqlite3_vfs_unregister() interface.</code></span>
<span class="codeline" id="line-7636"><code>** ^(If the default VFS is unregistered, another VFS is chosen as</code></span>
<span class="codeline" id="line-7637"><code>** the default.  The choice for the new VFS is arbitrary.)^</code></span>
<span class="codeline" id="line-7638"><code>*/</code></span>
<span class="codeline" id="line-7639"><code>SQLITE_API sqlite3_vfs *sqlite3_vfs_find(const char *zVfsName);</code></span>
<span class="codeline" id="line-7640"><code>SQLITE_API int sqlite3_vfs_register(sqlite3_vfs*, int makeDflt);</code></span>
<span class="codeline" id="line-7641"><code>SQLITE_API int sqlite3_vfs_unregister(sqlite3_vfs*);</code></span>
<span class="codeline" id="line-7642"><code></code></span>
<span class="codeline" id="line-7643"><code>/*</code></span>
<span class="codeline" id="line-7644"><code>** CAPI3REF: Mutexes</code></span>
<span class="codeline" id="line-7645"><code>**</code></span>
<span class="codeline" id="line-7646"><code>** The SQLite core uses these routines for thread</code></span>
<span class="codeline" id="line-7647"><code>** synchronization. Though they are intended for internal</code></span>
<span class="codeline" id="line-7648"><code>** use by SQLite, code that links against SQLite is</code></span>
<span class="codeline" id="line-7649"><code>** permitted to use any of these routines.</code></span>
<span class="codeline" id="line-7650"><code>**</code></span>
<span class="codeline" id="line-7651"><code>** The SQLite source code contains multiple implementations</code></span>
<span class="codeline" id="line-7652"><code>** of these mutex routines.  An appropriate implementation</code></span>
<span class="codeline" id="line-7653"><code>** is selected automatically at compile-time.  The following</code></span>
<span class="codeline" id="line-7654"><code>** implementations are available in the SQLite core:</code></span>
<span class="codeline" id="line-7655"><code>**</code></span>
<span class="codeline" id="line-7656"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-7657"><code>** &lt;li&gt;   SQLITE_MUTEX_PTHREADS</code></span>
<span class="codeline" id="line-7658"><code>** &lt;li&gt;   SQLITE_MUTEX_W32</code></span>
<span class="codeline" id="line-7659"><code>** &lt;li&gt;   SQLITE_MUTEX_NOOP</code></span>
<span class="codeline" id="line-7660"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-7661"><code>**</code></span>
<span class="codeline" id="line-7662"><code>** The SQLITE_MUTEX_NOOP implementation is a set of routines</code></span>
<span class="codeline" id="line-7663"><code>** that does no real locking and is appropriate for use in</code></span>
<span class="codeline" id="line-7664"><code>** a single-threaded application.  The SQLITE_MUTEX_PTHREADS and</code></span>
<span class="codeline" id="line-7665"><code>** SQLITE_MUTEX_W32 implementations are appropriate for use on Unix</code></span>
<span class="codeline" id="line-7666"><code>** and Windows.</code></span>
<span class="codeline" id="line-7667"><code>**</code></span>
<span class="codeline" id="line-7668"><code>** If SQLite is compiled with the SQLITE_MUTEX_APPDEF preprocessor</code></span>
<span class="codeline" id="line-7669"><code>** macro defined (with "-DSQLITE_MUTEX_APPDEF=1"), then no mutex</code></span>
<span class="codeline" id="line-7670"><code>** implementation is included with the library. In this case the</code></span>
<span class="codeline" id="line-7671"><code>** application must supply a custom mutex implementation using the</code></span>
<span class="codeline" id="line-7672"><code>** [SQLITE_CONFIG_MUTEX] option of the sqlite3_config() function</code></span>
<span class="codeline" id="line-7673"><code>** before calling sqlite3_initialize() or any other public sqlite3_</code></span>
<span class="codeline" id="line-7674"><code>** function that calls sqlite3_initialize().</code></span>
<span class="codeline" id="line-7675"><code>**</code></span>
<span class="codeline" id="line-7676"><code>** ^The sqlite3_mutex_alloc() routine allocates a new</code></span>
<span class="codeline" id="line-7677"><code>** mutex and returns a pointer to it. ^The sqlite3_mutex_alloc()</code></span>
<span class="codeline" id="line-7678"><code>** routine returns NULL if it is unable to allocate the requested</code></span>
<span class="codeline" id="line-7679"><code>** mutex.  The argument to sqlite3_mutex_alloc() must one of these</code></span>
<span class="codeline" id="line-7680"><code>** integer constants:</code></span>
<span class="codeline" id="line-7681"><code>**</code></span>
<span class="codeline" id="line-7682"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-7683"><code>** &lt;li&gt;  SQLITE_MUTEX_FAST</code></span>
<span class="codeline" id="line-7684"><code>** &lt;li&gt;  SQLITE_MUTEX_RECURSIVE</code></span>
<span class="codeline" id="line-7685"><code>** &lt;li&gt;  SQLITE_MUTEX_STATIC_MAIN</code></span>
<span class="codeline" id="line-7686"><code>** &lt;li&gt;  SQLITE_MUTEX_STATIC_MEM</code></span>
<span class="codeline" id="line-7687"><code>** &lt;li&gt;  SQLITE_MUTEX_STATIC_OPEN</code></span>
<span class="codeline" id="line-7688"><code>** &lt;li&gt;  SQLITE_MUTEX_STATIC_PRNG</code></span>
<span class="codeline" id="line-7689"><code>** &lt;li&gt;  SQLITE_MUTEX_STATIC_LRU</code></span>
<span class="codeline" id="line-7690"><code>** &lt;li&gt;  SQLITE_MUTEX_STATIC_PMEM</code></span>
<span class="codeline" id="line-7691"><code>** &lt;li&gt;  SQLITE_MUTEX_STATIC_APP1</code></span>
<span class="codeline" id="line-7692"><code>** &lt;li&gt;  SQLITE_MUTEX_STATIC_APP2</code></span>
<span class="codeline" id="line-7693"><code>** &lt;li&gt;  SQLITE_MUTEX_STATIC_APP3</code></span>
<span class="codeline" id="line-7694"><code>** &lt;li&gt;  SQLITE_MUTEX_STATIC_VFS1</code></span>
<span class="codeline" id="line-7695"><code>** &lt;li&gt;  SQLITE_MUTEX_STATIC_VFS2</code></span>
<span class="codeline" id="line-7696"><code>** &lt;li&gt;  SQLITE_MUTEX_STATIC_VFS3</code></span>
<span class="codeline" id="line-7697"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-7698"><code>**</code></span>
<span class="codeline" id="line-7699"><code>** ^The first two constants (SQLITE_MUTEX_FAST and SQLITE_MUTEX_RECURSIVE)</code></span>
<span class="codeline" id="line-7700"><code>** cause sqlite3_mutex_alloc() to create</code></span>
<span class="codeline" id="line-7701"><code>** a new mutex.  ^The new mutex is recursive when SQLITE_MUTEX_RECURSIVE</code></span>
<span class="codeline" id="line-7702"><code>** is used but not necessarily so when SQLITE_MUTEX_FAST is used.</code></span>
<span class="codeline" id="line-7703"><code>** The mutex implementation does not need to make a distinction</code></span>
<span class="codeline" id="line-7704"><code>** between SQLITE_MUTEX_RECURSIVE and SQLITE_MUTEX_FAST if it does</code></span>
<span class="codeline" id="line-7705"><code>** not want to.  SQLite will only request a recursive mutex in</code></span>
<span class="codeline" id="line-7706"><code>** cases where it really needs one.  If a faster non-recursive mutex</code></span>
<span class="codeline" id="line-7707"><code>** implementation is available on the host platform, the mutex subsystem</code></span>
<span class="codeline" id="line-7708"><code>** might return such a mutex in response to SQLITE_MUTEX_FAST.</code></span>
<span class="codeline" id="line-7709"><code>**</code></span>
<span class="codeline" id="line-7710"><code>** ^The other allowed parameters to sqlite3_mutex_alloc() (anything other</code></span>
<span class="codeline" id="line-7711"><code>** than SQLITE_MUTEX_FAST and SQLITE_MUTEX_RECURSIVE) each return</code></span>
<span class="codeline" id="line-7712"><code>** a pointer to a static preexisting mutex.  ^Nine static mutexes are</code></span>
<span class="codeline" id="line-7713"><code>** used by the current version of SQLite.  Future versions of SQLite</code></span>
<span class="codeline" id="line-7714"><code>** may add additional static mutexes.  Static mutexes are for internal</code></span>
<span class="codeline" id="line-7715"><code>** use by SQLite only.  Applications that use SQLite mutexes should</code></span>
<span class="codeline" id="line-7716"><code>** use only the dynamic mutexes returned by SQLITE_MUTEX_FAST or</code></span>
<span class="codeline" id="line-7717"><code>** SQLITE_MUTEX_RECURSIVE.</code></span>
<span class="codeline" id="line-7718"><code>**</code></span>
<span class="codeline" id="line-7719"><code>** ^Note that if one of the dynamic mutex parameters (SQLITE_MUTEX_FAST</code></span>
<span class="codeline" id="line-7720"><code>** or SQLITE_MUTEX_RECURSIVE) is used then sqlite3_mutex_alloc()</code></span>
<span class="codeline" id="line-7721"><code>** returns a different mutex on every call.  ^For the static</code></span>
<span class="codeline" id="line-7722"><code>** mutex types, the same mutex is returned on every call that has</code></span>
<span class="codeline" id="line-7723"><code>** the same type number.</code></span>
<span class="codeline" id="line-7724"><code>**</code></span>
<span class="codeline" id="line-7725"><code>** ^The sqlite3_mutex_free() routine deallocates a previously</code></span>
<span class="codeline" id="line-7726"><code>** allocated dynamic mutex.  Attempting to deallocate a static</code></span>
<span class="codeline" id="line-7727"><code>** mutex results in undefined behavior.</code></span>
<span class="codeline" id="line-7728"><code>**</code></span>
<span class="codeline" id="line-7729"><code>** ^The sqlite3_mutex_enter() and sqlite3_mutex_try() routines attempt</code></span>
<span class="codeline" id="line-7730"><code>** to enter a mutex.  ^If another thread is already within the mutex,</code></span>
<span class="codeline" id="line-7731"><code>** sqlite3_mutex_enter() will block and sqlite3_mutex_try() will return</code></span>
<span class="codeline" id="line-7732"><code>** SQLITE_BUSY.  ^The sqlite3_mutex_try() interface returns [SQLITE_OK]</code></span>
<span class="codeline" id="line-7733"><code>** upon successful entry.  ^(Mutexes created using</code></span>
<span class="codeline" id="line-7734"><code>** SQLITE_MUTEX_RECURSIVE can be entered multiple times by the same thread.</code></span>
<span class="codeline" id="line-7735"><code>** In such cases, the</code></span>
<span class="codeline" id="line-7736"><code>** mutex must be exited an equal number of times before another thread</code></span>
<span class="codeline" id="line-7737"><code>** can enter.)^  If the same thread tries to enter any mutex other</code></span>
<span class="codeline" id="line-7738"><code>** than an SQLITE_MUTEX_RECURSIVE more than once, the behavior is undefined.</code></span>
<span class="codeline" id="line-7739"><code>**</code></span>
<span class="codeline" id="line-7740"><code>** ^(Some systems (for example, Windows 95) do not support the operation</code></span>
<span class="codeline" id="line-7741"><code>** implemented by sqlite3_mutex_try().  On those systems, sqlite3_mutex_try()</code></span>
<span class="codeline" id="line-7742"><code>** will always return SQLITE_BUSY. The SQLite core only ever uses</code></span>
<span class="codeline" id="line-7743"><code>** sqlite3_mutex_try() as an optimization so this is acceptable</code></span>
<span class="codeline" id="line-7744"><code>** behavior.)^</code></span>
<span class="codeline" id="line-7745"><code>**</code></span>
<span class="codeline" id="line-7746"><code>** ^The sqlite3_mutex_leave() routine exits a mutex that was</code></span>
<span class="codeline" id="line-7747"><code>** previously entered by the same thread.   The behavior</code></span>
<span class="codeline" id="line-7748"><code>** is undefined if the mutex is not currently entered by the</code></span>
<span class="codeline" id="line-7749"><code>** calling thread or is not currently allocated.</code></span>
<span class="codeline" id="line-7750"><code>**</code></span>
<span class="codeline" id="line-7751"><code>** ^If the argument to sqlite3_mutex_enter(), sqlite3_mutex_try(), or</code></span>
<span class="codeline" id="line-7752"><code>** sqlite3_mutex_leave() is a NULL pointer, then all three routines</code></span>
<span class="codeline" id="line-7753"><code>** behave as no-ops.</code></span>
<span class="codeline" id="line-7754"><code>**</code></span>
<span class="codeline" id="line-7755"><code>** See also: [sqlite3_mutex_held()] and [sqlite3_mutex_notheld()].</code></span>
<span class="codeline" id="line-7756"><code>*/</code></span>
<span class="codeline" id="line-7757"><code>SQLITE_API sqlite3_mutex *sqlite3_mutex_alloc(int);</code></span>
<span class="codeline" id="line-7758"><code>SQLITE_API void sqlite3_mutex_free(sqlite3_mutex*);</code></span>
<span class="codeline" id="line-7759"><code>SQLITE_API void sqlite3_mutex_enter(sqlite3_mutex*);</code></span>
<span class="codeline" id="line-7760"><code>SQLITE_API int sqlite3_mutex_try(sqlite3_mutex*);</code></span>
<span class="codeline" id="line-7761"><code>SQLITE_API void sqlite3_mutex_leave(sqlite3_mutex*);</code></span>
<span class="codeline" id="line-7762"><code></code></span>
<span class="codeline" id="line-7763"><code>/*</code></span>
<span class="codeline" id="line-7764"><code>** CAPI3REF: Mutex Methods Object</code></span>
<span class="codeline" id="line-7765"><code>**</code></span>
<span class="codeline" id="line-7766"><code>** An instance of this structure defines the low-level routines</code></span>
<span class="codeline" id="line-7767"><code>** used to allocate and use mutexes.</code></span>
<span class="codeline" id="line-7768"><code>**</code></span>
<span class="codeline" id="line-7769"><code>** Usually, the default mutex implementations provided by SQLite are</code></span>
<span class="codeline" id="line-7770"><code>** sufficient, however the application has the option of substituting a custom</code></span>
<span class="codeline" id="line-7771"><code>** implementation for specialized deployments or systems for which SQLite</code></span>
<span class="codeline" id="line-7772"><code>** does not provide a suitable implementation. In this case, the application</code></span>
<span class="codeline" id="line-7773"><code>** creates and populates an instance of this structure to pass</code></span>
<span class="codeline" id="line-7774"><code>** to sqlite3_config() along with the [SQLITE_CONFIG_MUTEX] option.</code></span>
<span class="codeline" id="line-7775"><code>** Additionally, an instance of this structure can be used as an</code></span>
<span class="codeline" id="line-7776"><code>** output variable when querying the system for the current mutex</code></span>
<span class="codeline" id="line-7777"><code>** implementation, using the [SQLITE_CONFIG_GETMUTEX] option.</code></span>
<span class="codeline" id="line-7778"><code>**</code></span>
<span class="codeline" id="line-7779"><code>** ^The xMutexInit method defined by this structure is invoked as</code></span>
<span class="codeline" id="line-7780"><code>** part of system initialization by the sqlite3_initialize() function.</code></span>
<span class="codeline" id="line-7781"><code>** ^The xMutexInit routine is called by SQLite exactly once for each</code></span>
<span class="codeline" id="line-7782"><code>** effective call to [sqlite3_initialize()].</code></span>
<span class="codeline" id="line-7783"><code>**</code></span>
<span class="codeline" id="line-7784"><code>** ^The xMutexEnd method defined by this structure is invoked as</code></span>
<span class="codeline" id="line-7785"><code>** part of system shutdown by the sqlite3_shutdown() function. The</code></span>
<span class="codeline" id="line-7786"><code>** implementation of this method is expected to release all outstanding</code></span>
<span class="codeline" id="line-7787"><code>** resources obtained by the mutex methods implementation, especially</code></span>
<span class="codeline" id="line-7788"><code>** those obtained by the xMutexInit method.  ^The xMutexEnd()</code></span>
<span class="codeline" id="line-7789"><code>** interface is invoked exactly once for each call to [sqlite3_shutdown()].</code></span>
<span class="codeline" id="line-7790"><code>**</code></span>
<span class="codeline" id="line-7791"><code>** ^(The remaining seven methods defined by this structure (xMutexAlloc,</code></span>
<span class="codeline" id="line-7792"><code>** xMutexFree, xMutexEnter, xMutexTry, xMutexLeave, xMutexHeld and</code></span>
<span class="codeline" id="line-7793"><code>** xMutexNotheld) implement the following interfaces (respectively):</code></span>
<span class="codeline" id="line-7794"><code>**</code></span>
<span class="codeline" id="line-7795"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-7796"><code>**   &lt;li&gt;  [sqlite3_mutex_alloc()] &lt;/li&gt;</code></span>
<span class="codeline" id="line-7797"><code>**   &lt;li&gt;  [sqlite3_mutex_free()] &lt;/li&gt;</code></span>
<span class="codeline" id="line-7798"><code>**   &lt;li&gt;  [sqlite3_mutex_enter()] &lt;/li&gt;</code></span>
<span class="codeline" id="line-7799"><code>**   &lt;li&gt;  [sqlite3_mutex_try()] &lt;/li&gt;</code></span>
<span class="codeline" id="line-7800"><code>**   &lt;li&gt;  [sqlite3_mutex_leave()] &lt;/li&gt;</code></span>
<span class="codeline" id="line-7801"><code>**   &lt;li&gt;  [sqlite3_mutex_held()] &lt;/li&gt;</code></span>
<span class="codeline" id="line-7802"><code>**   &lt;li&gt;  [sqlite3_mutex_notheld()] &lt;/li&gt;</code></span>
<span class="codeline" id="line-7803"><code>** &lt;/ul&gt;)^</code></span>
<span class="codeline" id="line-7804"><code>**</code></span>
<span class="codeline" id="line-7805"><code>** The only difference is that the public sqlite3_XXX functions enumerated</code></span>
<span class="codeline" id="line-7806"><code>** above silently ignore any invocations that pass a NULL pointer instead</code></span>
<span class="codeline" id="line-7807"><code>** of a valid mutex handle. The implementations of the methods defined</code></span>
<span class="codeline" id="line-7808"><code>** by this structure are not required to handle this case. The results</code></span>
<span class="codeline" id="line-7809"><code>** of passing a NULL pointer instead of a valid mutex handle are undefined</code></span>
<span class="codeline" id="line-7810"><code>** (i.e. it is acceptable to provide an implementation that segfaults if</code></span>
<span class="codeline" id="line-7811"><code>** it is passed a NULL pointer).</code></span>
<span class="codeline" id="line-7812"><code>**</code></span>
<span class="codeline" id="line-7813"><code>** The xMutexInit() method must be threadsafe.  It must be harmless to</code></span>
<span class="codeline" id="line-7814"><code>** invoke xMutexInit() multiple times within the same process and without</code></span>
<span class="codeline" id="line-7815"><code>** intervening calls to xMutexEnd().  Second and subsequent calls to</code></span>
<span class="codeline" id="line-7816"><code>** xMutexInit() must be no-ops.</code></span>
<span class="codeline" id="line-7817"><code>**</code></span>
<span class="codeline" id="line-7818"><code>** xMutexInit() must not use SQLite memory allocation ([sqlite3_malloc()]</code></span>
<span class="codeline" id="line-7819"><code>** and its associates).  Similarly, xMutexAlloc() must not use SQLite memory</code></span>
<span class="codeline" id="line-7820"><code>** allocation for a static mutex.  ^However xMutexAlloc() may use SQLite</code></span>
<span class="codeline" id="line-7821"><code>** memory allocation for a fast or recursive mutex.</code></span>
<span class="codeline" id="line-7822"><code>**</code></span>
<span class="codeline" id="line-7823"><code>** ^SQLite will invoke the xMutexEnd() method when [sqlite3_shutdown()] is</code></span>
<span class="codeline" id="line-7824"><code>** called, but only if the prior call to xMutexInit returned SQLITE_OK.</code></span>
<span class="codeline" id="line-7825"><code>** If xMutexInit fails in any way, it is expected to clean up after itself</code></span>
<span class="codeline" id="line-7826"><code>** prior to returning.</code></span>
<span class="codeline" id="line-7827"><code>*/</code></span>
<span class="codeline" id="line-7828"><code>typedef struct sqlite3_mutex_methods sqlite3_mutex_methods;</code></span>
<span class="codeline" id="line-7829"><code>struct sqlite3_mutex_methods {</code></span>
<span class="codeline" id="line-7830"><code>  int (*xMutexInit)(void);</code></span>
<span class="codeline" id="line-7831"><code>  int (*xMutexEnd)(void);</code></span>
<span class="codeline" id="line-7832"><code>  sqlite3_mutex *(*xMutexAlloc)(int);</code></span>
<span class="codeline" id="line-7833"><code>  void (*xMutexFree)(sqlite3_mutex *);</code></span>
<span class="codeline" id="line-7834"><code>  void (*xMutexEnter)(sqlite3_mutex *);</code></span>
<span class="codeline" id="line-7835"><code>  int (*xMutexTry)(sqlite3_mutex *);</code></span>
<span class="codeline" id="line-7836"><code>  void (*xMutexLeave)(sqlite3_mutex *);</code></span>
<span class="codeline" id="line-7837"><code>  int (*xMutexHeld)(sqlite3_mutex *);</code></span>
<span class="codeline" id="line-7838"><code>  int (*xMutexNotheld)(sqlite3_mutex *);</code></span>
<span class="codeline" id="line-7839"><code>};</code></span>
<span class="codeline" id="line-7840"><code></code></span>
<span class="codeline" id="line-7841"><code>/*</code></span>
<span class="codeline" id="line-7842"><code>** CAPI3REF: Mutex Verification Routines</code></span>
<span class="codeline" id="line-7843"><code>**</code></span>
<span class="codeline" id="line-7844"><code>** The sqlite3_mutex_held() and sqlite3_mutex_notheld() routines</code></span>
<span class="codeline" id="line-7845"><code>** are intended for use inside assert() statements.  The SQLite core</code></span>
<span class="codeline" id="line-7846"><code>** never uses these routines except inside an assert() and applications</code></span>
<span class="codeline" id="line-7847"><code>** are advised to follow the lead of the core.  The SQLite core only</code></span>
<span class="codeline" id="line-7848"><code>** provides implementations for these routines when it is compiled</code></span>
<span class="codeline" id="line-7849"><code>** with the SQLITE_DEBUG flag.  External mutex implementations</code></span>
<span class="codeline" id="line-7850"><code>** are only required to provide these routines if SQLITE_DEBUG is</code></span>
<span class="codeline" id="line-7851"><code>** defined and if NDEBUG is not defined.</code></span>
<span class="codeline" id="line-7852"><code>**</code></span>
<span class="codeline" id="line-7853"><code>** These routines should return true if the mutex in their argument</code></span>
<span class="codeline" id="line-7854"><code>** is held or not held, respectively, by the calling thread.</code></span>
<span class="codeline" id="line-7855"><code>**</code></span>
<span class="codeline" id="line-7856"><code>** The implementation is not required to provide versions of these</code></span>
<span class="codeline" id="line-7857"><code>** routines that actually work. If the implementation does not provide working</code></span>
<span class="codeline" id="line-7858"><code>** versions of these routines, it should at least provide stubs that always</code></span>
<span class="codeline" id="line-7859"><code>** return true so that one does not get spurious assertion failures.</code></span>
<span class="codeline" id="line-7860"><code>**</code></span>
<span class="codeline" id="line-7861"><code>** If the argument to sqlite3_mutex_held() is a NULL pointer then</code></span>
<span class="codeline" id="line-7862"><code>** the routine should return 1.   This seems counter-intuitive since</code></span>
<span class="codeline" id="line-7863"><code>** clearly the mutex cannot be held if it does not exist.  But</code></span>
<span class="codeline" id="line-7864"><code>** the reason the mutex does not exist is because the build is not</code></span>
<span class="codeline" id="line-7865"><code>** using mutexes.  And we do not want the assert() containing the</code></span>
<span class="codeline" id="line-7866"><code>** call to sqlite3_mutex_held() to fail, so a non-zero return is</code></span>
<span class="codeline" id="line-7867"><code>** the appropriate thing to do.  The sqlite3_mutex_notheld()</code></span>
<span class="codeline" id="line-7868"><code>** interface should also return 1 when given a NULL pointer.</code></span>
<span class="codeline" id="line-7869"><code>*/</code></span>
<span class="codeline" id="line-7870"><code>#ifndef NDEBUG</code></span>
<span class="codeline" id="line-7871"><code>SQLITE_API int sqlite3_mutex_held(sqlite3_mutex*);</code></span>
<span class="codeline" id="line-7872"><code>SQLITE_API int sqlite3_mutex_notheld(sqlite3_mutex*);</code></span>
<span class="codeline" id="line-7873"><code>#endif</code></span>
<span class="codeline" id="line-7874"><code></code></span>
<span class="codeline" id="line-7875"><code>/*</code></span>
<span class="codeline" id="line-7876"><code>** CAPI3REF: Mutex Types</code></span>
<span class="codeline" id="line-7877"><code>**</code></span>
<span class="codeline" id="line-7878"><code>** The [sqlite3_mutex_alloc()] interface takes a single argument</code></span>
<span class="codeline" id="line-7879"><code>** which is one of these integer constants.</code></span>
<span class="codeline" id="line-7880"><code>**</code></span>
<span class="codeline" id="line-7881"><code>** The set of static mutexes may change from one SQLite release to the</code></span>
<span class="codeline" id="line-7882"><code>** next.  Applications that override the built-in mutex logic must be</code></span>
<span class="codeline" id="line-7883"><code>** prepared to accommodate additional static mutexes.</code></span>
<span class="codeline" id="line-7884"><code>*/</code></span>
<span class="codeline" id="line-7885"><code>#define SQLITE_MUTEX_FAST             0</code></span>
<span class="codeline" id="line-7886"><code>#define SQLITE_MUTEX_RECURSIVE        1</code></span>
<span class="codeline" id="line-7887"><code>#define SQLITE_MUTEX_STATIC_MAIN      2</code></span>
<span class="codeline" id="line-7888"><code>#define SQLITE_MUTEX_STATIC_MEM       3  /* sqlite3_malloc() */</code></span>
<span class="codeline" id="line-7889"><code>#define SQLITE_MUTEX_STATIC_MEM2      4  /* NOT USED */</code></span>
<span class="codeline" id="line-7890"><code>#define SQLITE_MUTEX_STATIC_OPEN      4  /* sqlite3BtreeOpen() */</code></span>
<span class="codeline" id="line-7891"><code>#define SQLITE_MUTEX_STATIC_PRNG      5  /* sqlite3_randomness() */</code></span>
<span class="codeline" id="line-7892"><code>#define SQLITE_MUTEX_STATIC_LRU       6  /* lru page list */</code></span>
<span class="codeline" id="line-7893"><code>#define SQLITE_MUTEX_STATIC_LRU2      7  /* NOT USED */</code></span>
<span class="codeline" id="line-7894"><code>#define SQLITE_MUTEX_STATIC_PMEM      7  /* sqlite3PageMalloc() */</code></span>
<span class="codeline" id="line-7895"><code>#define SQLITE_MUTEX_STATIC_APP1      8  /* For use by application */</code></span>
<span class="codeline" id="line-7896"><code>#define SQLITE_MUTEX_STATIC_APP2      9  /* For use by application */</code></span>
<span class="codeline" id="line-7897"><code>#define SQLITE_MUTEX_STATIC_APP3     10  /* For use by application */</code></span>
<span class="codeline" id="line-7898"><code>#define SQLITE_MUTEX_STATIC_VFS1     11  /* For use by built-in VFS */</code></span>
<span class="codeline" id="line-7899"><code>#define SQLITE_MUTEX_STATIC_VFS2     12  /* For use by extension VFS */</code></span>
<span class="codeline" id="line-7900"><code>#define SQLITE_MUTEX_STATIC_VFS3     13  /* For use by application VFS */</code></span>
<span class="codeline" id="line-7901"><code></code></span>
<span class="codeline" id="line-7902"><code>/* Legacy compatibility: */</code></span>
<span class="codeline" id="line-7903"><code>#define SQLITE_MUTEX_STATIC_MASTER    2</code></span>
<span class="codeline" id="line-7904"><code></code></span>
<span class="codeline" id="line-7905"><code></code></span>
<span class="codeline" id="line-7906"><code>/*</code></span>
<span class="codeline" id="line-7907"><code>** CAPI3REF: Retrieve the mutex for a database connection</code></span>
<span class="codeline" id="line-7908"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-7909"><code>**</code></span>
<span class="codeline" id="line-7910"><code>** ^This interface returns a pointer the [sqlite3_mutex] object that</code></span>
<span class="codeline" id="line-7911"><code>** serializes access to the [database connection] given in the argument</code></span>
<span class="codeline" id="line-7912"><code>** when the [threading mode] is Serialized.</code></span>
<span class="codeline" id="line-7913"><code>** ^If the [threading mode] is Single-thread or Multi-thread then this</code></span>
<span class="codeline" id="line-7914"><code>** routine returns a NULL pointer.</code></span>
<span class="codeline" id="line-7915"><code>*/</code></span>
<span class="codeline" id="line-7916"><code>SQLITE_API sqlite3_mutex *sqlite3_db_mutex(sqlite3*);</code></span>
<span class="codeline" id="line-7917"><code></code></span>
<span class="codeline" id="line-7918"><code>/*</code></span>
<span class="codeline" id="line-7919"><code>** CAPI3REF: Low-Level Control Of Database Files</code></span>
<span class="codeline" id="line-7920"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-7921"><code>** KEYWORDS: {file control}</code></span>
<span class="codeline" id="line-7922"><code>**</code></span>
<span class="codeline" id="line-7923"><code>** ^The [sqlite3_file_control()] interface makes a direct call to the</code></span>
<span class="codeline" id="line-7924"><code>** xFileControl method for the [sqlite3_io_methods] object associated</code></span>
<span class="codeline" id="line-7925"><code>** with a particular database identified by the second argument. ^The</code></span>
<span class="codeline" id="line-7926"><code>** name of the database is "main" for the main database or "temp" for the</code></span>
<span class="codeline" id="line-7927"><code>** TEMP database, or the name that appears after the AS keyword for</code></span>
<span class="codeline" id="line-7928"><code>** databases that are added using the [ATTACH] SQL command.</code></span>
<span class="codeline" id="line-7929"><code>** ^A NULL pointer can be used in place of "main" to refer to the</code></span>
<span class="codeline" id="line-7930"><code>** main database file.</code></span>
<span class="codeline" id="line-7931"><code>** ^The third and fourth parameters to this routine</code></span>
<span class="codeline" id="line-7932"><code>** are passed directly through to the second and third parameters of</code></span>
<span class="codeline" id="line-7933"><code>** the xFileControl method.  ^The return value of the xFileControl</code></span>
<span class="codeline" id="line-7934"><code>** method becomes the return value of this routine.</code></span>
<span class="codeline" id="line-7935"><code>**</code></span>
<span class="codeline" id="line-7936"><code>** A few opcodes for [sqlite3_file_control()] are handled directly</code></span>
<span class="codeline" id="line-7937"><code>** by the SQLite core and never invoke the</code></span>
<span class="codeline" id="line-7938"><code>** sqlite3_io_methods.xFileControl method.</code></span>
<span class="codeline" id="line-7939"><code>** ^The [SQLITE_FCNTL_FILE_POINTER] value for the op parameter causes</code></span>
<span class="codeline" id="line-7940"><code>** a pointer to the underlying [sqlite3_file] object to be written into</code></span>
<span class="codeline" id="line-7941"><code>** the space pointed to by the 4th parameter.  The</code></span>
<span class="codeline" id="line-7942"><code>** [SQLITE_FCNTL_JOURNAL_POINTER] works similarly except that it returns</code></span>
<span class="codeline" id="line-7943"><code>** the [sqlite3_file] object associated with the journal file instead of</code></span>
<span class="codeline" id="line-7944"><code>** the main database.  The [SQLITE_FCNTL_VFS_POINTER] opcode returns</code></span>
<span class="codeline" id="line-7945"><code>** a pointer to the underlying [sqlite3_vfs] object for the file.</code></span>
<span class="codeline" id="line-7946"><code>** The [SQLITE_FCNTL_DATA_VERSION] returns the data version counter</code></span>
<span class="codeline" id="line-7947"><code>** from the pager.</code></span>
<span class="codeline" id="line-7948"><code>**</code></span>
<span class="codeline" id="line-7949"><code>** ^If the second parameter (zDbName) does not match the name of any</code></span>
<span class="codeline" id="line-7950"><code>** open database file, then SQLITE_ERROR is returned.  ^This error</code></span>
<span class="codeline" id="line-7951"><code>** code is not remembered and will not be recalled by [sqlite3_errcode()]</code></span>
<span class="codeline" id="line-7952"><code>** or [sqlite3_errmsg()].  The underlying xFileControl method might</code></span>
<span class="codeline" id="line-7953"><code>** also return SQLITE_ERROR.  There is no way to distinguish between</code></span>
<span class="codeline" id="line-7954"><code>** an incorrect zDbName and an SQLITE_ERROR return from the underlying</code></span>
<span class="codeline" id="line-7955"><code>** xFileControl method.</code></span>
<span class="codeline" id="line-7956"><code>**</code></span>
<span class="codeline" id="line-7957"><code>** See also: [file control opcodes]</code></span>
<span class="codeline" id="line-7958"><code>*/</code></span>
<span class="codeline" id="line-7959"><code>SQLITE_API int sqlite3_file_control(sqlite3*, const char *zDbName, int op, void*);</code></span>
<span class="codeline" id="line-7960"><code></code></span>
<span class="codeline" id="line-7961"><code>/*</code></span>
<span class="codeline" id="line-7962"><code>** CAPI3REF: Testing Interface</code></span>
<span class="codeline" id="line-7963"><code>**</code></span>
<span class="codeline" id="line-7964"><code>** ^The sqlite3_test_control() interface is used to read out internal</code></span>
<span class="codeline" id="line-7965"><code>** state of SQLite and to inject faults into SQLite for testing</code></span>
<span class="codeline" id="line-7966"><code>** purposes.  ^The first parameter is an operation code that determines</code></span>
<span class="codeline" id="line-7967"><code>** the number, meaning, and operation of all subsequent parameters.</code></span>
<span class="codeline" id="line-7968"><code>**</code></span>
<span class="codeline" id="line-7969"><code>** This interface is not for use by applications.  It exists solely</code></span>
<span class="codeline" id="line-7970"><code>** for verifying the correct operation of the SQLite library.  Depending</code></span>
<span class="codeline" id="line-7971"><code>** on how the SQLite library is compiled, this interface might not exist.</code></span>
<span class="codeline" id="line-7972"><code>**</code></span>
<span class="codeline" id="line-7973"><code>** The details of the operation codes, their meanings, the parameters</code></span>
<span class="codeline" id="line-7974"><code>** they take, and what they do are all subject to change without notice.</code></span>
<span class="codeline" id="line-7975"><code>** Unlike most of the SQLite API, this function is not guaranteed to</code></span>
<span class="codeline" id="line-7976"><code>** operate consistently from one release to the next.</code></span>
<span class="codeline" id="line-7977"><code>*/</code></span>
<span class="codeline" id="line-7978"><code>SQLITE_API int sqlite3_test_control(int op, ...);</code></span>
<span class="codeline" id="line-7979"><code></code></span>
<span class="codeline" id="line-7980"><code>/*</code></span>
<span class="codeline" id="line-7981"><code>** CAPI3REF: Testing Interface Operation Codes</code></span>
<span class="codeline" id="line-7982"><code>**</code></span>
<span class="codeline" id="line-7983"><code>** These constants are the valid operation code parameters used</code></span>
<span class="codeline" id="line-7984"><code>** as the first argument to [sqlite3_test_control()].</code></span>
<span class="codeline" id="line-7985"><code>**</code></span>
<span class="codeline" id="line-7986"><code>** These parameters and their meanings are subject to change</code></span>
<span class="codeline" id="line-7987"><code>** without notice.  These values are for testing purposes only.</code></span>
<span class="codeline" id="line-7988"><code>** Applications should not use any of these parameters or the</code></span>
<span class="codeline" id="line-7989"><code>** [sqlite3_test_control()] interface.</code></span>
<span class="codeline" id="line-7990"><code>*/</code></span>
<span class="codeline" id="line-7991"><code>#define SQLITE_TESTCTRL_FIRST                    5</code></span>
<span class="codeline" id="line-7992"><code>#define SQLITE_TESTCTRL_PRNG_SAVE                5</code></span>
<span class="codeline" id="line-7993"><code>#define SQLITE_TESTCTRL_PRNG_RESTORE             6</code></span>
<span class="codeline" id="line-7994"><code>#define SQLITE_TESTCTRL_PRNG_RESET               7  /* NOT USED */</code></span>
<span class="codeline" id="line-7995"><code>#define SQLITE_TESTCTRL_BITVEC_TEST              8</code></span>
<span class="codeline" id="line-7996"><code>#define SQLITE_TESTCTRL_FAULT_INSTALL            9</code></span>
<span class="codeline" id="line-7997"><code>#define SQLITE_TESTCTRL_BENIGN_MALLOC_HOOKS     10</code></span>
<span class="codeline" id="line-7998"><code>#define SQLITE_TESTCTRL_PENDING_BYTE            11</code></span>
<span class="codeline" id="line-7999"><code>#define SQLITE_TESTCTRL_ASSERT                  12</code></span>
<span class="codeline" id="line-8000"><code>#define SQLITE_TESTCTRL_ALWAYS                  13</code></span>
<span class="codeline" id="line-8001"><code>#define SQLITE_TESTCTRL_RESERVE                 14  /* NOT USED */</code></span>
<span class="codeline" id="line-8002"><code>#define SQLITE_TESTCTRL_OPTIMIZATIONS           15</code></span>
<span class="codeline" id="line-8003"><code>#define SQLITE_TESTCTRL_ISKEYWORD               16  /* NOT USED */</code></span>
<span class="codeline" id="line-8004"><code>#define SQLITE_TESTCTRL_SCRATCHMALLOC           17  /* NOT USED */</code></span>
<span class="codeline" id="line-8005"><code>#define SQLITE_TESTCTRL_INTERNAL_FUNCTIONS      17</code></span>
<span class="codeline" id="line-8006"><code>#define SQLITE_TESTCTRL_LOCALTIME_FAULT         18</code></span>
<span class="codeline" id="line-8007"><code>#define SQLITE_TESTCTRL_EXPLAIN_STMT            19  /* NOT USED */</code></span>
<span class="codeline" id="line-8008"><code>#define SQLITE_TESTCTRL_ONCE_RESET_THRESHOLD    19</code></span>
<span class="codeline" id="line-8009"><code>#define SQLITE_TESTCTRL_NEVER_CORRUPT           20</code></span>
<span class="codeline" id="line-8010"><code>#define SQLITE_TESTCTRL_VDBE_COVERAGE           21</code></span>
<span class="codeline" id="line-8011"><code>#define SQLITE_TESTCTRL_BYTEORDER               22</code></span>
<span class="codeline" id="line-8012"><code>#define SQLITE_TESTCTRL_ISINIT                  23</code></span>
<span class="codeline" id="line-8013"><code>#define SQLITE_TESTCTRL_SORTER_MMAP             24</code></span>
<span class="codeline" id="line-8014"><code>#define SQLITE_TESTCTRL_IMPOSTER                25</code></span>
<span class="codeline" id="line-8015"><code>#define SQLITE_TESTCTRL_PARSER_COVERAGE         26</code></span>
<span class="codeline" id="line-8016"><code>#define SQLITE_TESTCTRL_RESULT_INTREAL          27</code></span>
<span class="codeline" id="line-8017"><code>#define SQLITE_TESTCTRL_PRNG_SEED               28</code></span>
<span class="codeline" id="line-8018"><code>#define SQLITE_TESTCTRL_EXTRA_SCHEMA_CHECKS     29</code></span>
<span class="codeline" id="line-8019"><code>#define SQLITE_TESTCTRL_SEEK_COUNT              30</code></span>
<span class="codeline" id="line-8020"><code>#define SQLITE_TESTCTRL_TRACEFLAGS              31</code></span>
<span class="codeline" id="line-8021"><code>#define SQLITE_TESTCTRL_TUNE                    32</code></span>
<span class="codeline" id="line-8022"><code>#define SQLITE_TESTCTRL_LOGEST                  33</code></span>
<span class="codeline" id="line-8023"><code>#define SQLITE_TESTCTRL_LAST                    33  /* Largest TESTCTRL */</code></span>
<span class="codeline" id="line-8024"><code></code></span>
<span class="codeline" id="line-8025"><code>/*</code></span>
<span class="codeline" id="line-8026"><code>** CAPI3REF: SQL Keyword Checking</code></span>
<span class="codeline" id="line-8027"><code>**</code></span>
<span class="codeline" id="line-8028"><code>** These routines provide access to the set of SQL language keywords</code></span>
<span class="codeline" id="line-8029"><code>** recognized by SQLite.  Applications can uses these routines to determine</code></span>
<span class="codeline" id="line-8030"><code>** whether or not a specific identifier needs to be escaped (for example,</code></span>
<span class="codeline" id="line-8031"><code>** by enclosing in double-quotes) so as not to confuse the parser.</code></span>
<span class="codeline" id="line-8032"><code>**</code></span>
<span class="codeline" id="line-8033"><code>** The sqlite3_keyword_count() interface returns the number of distinct</code></span>
<span class="codeline" id="line-8034"><code>** keywords understood by SQLite.</code></span>
<span class="codeline" id="line-8035"><code>**</code></span>
<span class="codeline" id="line-8036"><code>** The sqlite3_keyword_name(N,Z,L) interface finds the N-th keyword and</code></span>
<span class="codeline" id="line-8037"><code>** makes *Z point to that keyword expressed as UTF8 and writes the number</code></span>
<span class="codeline" id="line-8038"><code>** of bytes in the keyword into *L.  The string that *Z points to is not</code></span>
<span class="codeline" id="line-8039"><code>** zero-terminated.  The sqlite3_keyword_name(N,Z,L) routine returns</code></span>
<span class="codeline" id="line-8040"><code>** SQLITE_OK if N is within bounds and SQLITE_ERROR if not. If either Z</code></span>
<span class="codeline" id="line-8041"><code>** or L are NULL or invalid pointers then calls to</code></span>
<span class="codeline" id="line-8042"><code>** sqlite3_keyword_name(N,Z,L) result in undefined behavior.</code></span>
<span class="codeline" id="line-8043"><code>**</code></span>
<span class="codeline" id="line-8044"><code>** The sqlite3_keyword_check(Z,L) interface checks to see whether or not</code></span>
<span class="codeline" id="line-8045"><code>** the L-byte UTF8 identifier that Z points to is a keyword, returning non-zero</code></span>
<span class="codeline" id="line-8046"><code>** if it is and zero if not.</code></span>
<span class="codeline" id="line-8047"><code>**</code></span>
<span class="codeline" id="line-8048"><code>** The parser used by SQLite is forgiving.  It is often possible to use</code></span>
<span class="codeline" id="line-8049"><code>** a keyword as an identifier as long as such use does not result in a</code></span>
<span class="codeline" id="line-8050"><code>** parsing ambiguity.  For example, the statement</code></span>
<span class="codeline" id="line-8051"><code>** "CREATE TABLE BEGIN(REPLACE,PRAGMA,END);" is accepted by SQLite, and</code></span>
<span class="codeline" id="line-8052"><code>** creates a new table named "BEGIN" with three columns named</code></span>
<span class="codeline" id="line-8053"><code>** "REPLACE", "PRAGMA", and "END".  Nevertheless, best practice is to avoid</code></span>
<span class="codeline" id="line-8054"><code>** using keywords as identifiers.  Common techniques used to avoid keyword</code></span>
<span class="codeline" id="line-8055"><code>** name collisions include:</code></span>
<span class="codeline" id="line-8056"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-8057"><code>** &lt;li&gt; Put all identifier names inside double-quotes.  This is the official</code></span>
<span class="codeline" id="line-8058"><code>**      SQL way to escape identifier names.</code></span>
<span class="codeline" id="line-8059"><code>** &lt;li&gt; Put identifier names inside &amp;#91;...&amp;#93;.  This is not standard SQL,</code></span>
<span class="codeline" id="line-8060"><code>**      but it is what SQL Server does and so lots of programmers use this</code></span>
<span class="codeline" id="line-8061"><code>**      technique.</code></span>
<span class="codeline" id="line-8062"><code>** &lt;li&gt; Begin every identifier with the letter "Z" as no SQL keywords start</code></span>
<span class="codeline" id="line-8063"><code>**      with "Z".</code></span>
<span class="codeline" id="line-8064"><code>** &lt;li&gt; Include a digit somewhere in every identifier name.</code></span>
<span class="codeline" id="line-8065"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-8066"><code>**</code></span>
<span class="codeline" id="line-8067"><code>** Note that the number of keywords understood by SQLite can depend on</code></span>
<span class="codeline" id="line-8068"><code>** compile-time options.  For example, "VACUUM" is not a keyword if</code></span>
<span class="codeline" id="line-8069"><code>** SQLite is compiled with the [-DSQLITE_OMIT_VACUUM] option.  Also,</code></span>
<span class="codeline" id="line-8070"><code>** new keywords may be added to future releases of SQLite.</code></span>
<span class="codeline" id="line-8071"><code>*/</code></span>
<span class="codeline" id="line-8072"><code>SQLITE_API int sqlite3_keyword_count(void);</code></span>
<span class="codeline" id="line-8073"><code>SQLITE_API int sqlite3_keyword_name(int,const char**,int*);</code></span>
<span class="codeline" id="line-8074"><code>SQLITE_API int sqlite3_keyword_check(const char*,int);</code></span>
<span class="codeline" id="line-8075"><code></code></span>
<span class="codeline" id="line-8076"><code>/*</code></span>
<span class="codeline" id="line-8077"><code>** CAPI3REF: Dynamic String Object</code></span>
<span class="codeline" id="line-8078"><code>** KEYWORDS: {dynamic string}</code></span>
<span class="codeline" id="line-8079"><code>**</code></span>
<span class="codeline" id="line-8080"><code>** An instance of the sqlite3_str object contains a dynamically-sized</code></span>
<span class="codeline" id="line-8081"><code>** string under construction.</code></span>
<span class="codeline" id="line-8082"><code>**</code></span>
<span class="codeline" id="line-8083"><code>** The lifecycle of an sqlite3_str object is as follows:</code></span>
<span class="codeline" id="line-8084"><code>** &lt;ol&gt;</code></span>
<span class="codeline" id="line-8085"><code>** &lt;li&gt; ^The sqlite3_str object is created using [sqlite3_str_new()].</code></span>
<span class="codeline" id="line-8086"><code>** &lt;li&gt; ^Text is appended to the sqlite3_str object using various</code></span>
<span class="codeline" id="line-8087"><code>** methods, such as [sqlite3_str_appendf()].</code></span>
<span class="codeline" id="line-8088"><code>** &lt;li&gt; ^The sqlite3_str object is destroyed and the string it created</code></span>
<span class="codeline" id="line-8089"><code>** is returned using the [sqlite3_str_finish()] interface.</code></span>
<span class="codeline" id="line-8090"><code>** &lt;/ol&gt;</code></span>
<span class="codeline" id="line-8091"><code>*/</code></span>
<span class="codeline" id="line-8092"><code>typedef struct sqlite3_str sqlite3_str;</code></span>
<span class="codeline" id="line-8093"><code></code></span>
<span class="codeline" id="line-8094"><code>/*</code></span>
<span class="codeline" id="line-8095"><code>** CAPI3REF: Create A New Dynamic String Object</code></span>
<span class="codeline" id="line-8096"><code>** CONSTRUCTOR: sqlite3_str</code></span>
<span class="codeline" id="line-8097"><code>**</code></span>
<span class="codeline" id="line-8098"><code>** ^The [sqlite3_str_new(D)] interface allocates and initializes</code></span>
<span class="codeline" id="line-8099"><code>** a new [sqlite3_str] object.  To avoid memory leaks, the object returned by</code></span>
<span class="codeline" id="line-8100"><code>** [sqlite3_str_new()] must be freed by a subsequent call to</code></span>
<span class="codeline" id="line-8101"><code>** [sqlite3_str_finish(X)].</code></span>
<span class="codeline" id="line-8102"><code>**</code></span>
<span class="codeline" id="line-8103"><code>** ^The [sqlite3_str_new(D)] interface always returns a pointer to a</code></span>
<span class="codeline" id="line-8104"><code>** valid [sqlite3_str] object, though in the event of an out-of-memory</code></span>
<span class="codeline" id="line-8105"><code>** error the returned object might be a special singleton that will</code></span>
<span class="codeline" id="line-8106"><code>** silently reject new text, always return SQLITE_NOMEM from</code></span>
<span class="codeline" id="line-8107"><code>** [sqlite3_str_errcode()], always return 0 for</code></span>
<span class="codeline" id="line-8108"><code>** [sqlite3_str_length()], and always return NULL from</code></span>
<span class="codeline" id="line-8109"><code>** [sqlite3_str_finish(X)].  It is always safe to use the value</code></span>
<span class="codeline" id="line-8110"><code>** returned by [sqlite3_str_new(D)] as the sqlite3_str parameter</code></span>
<span class="codeline" id="line-8111"><code>** to any of the other [sqlite3_str] methods.</code></span>
<span class="codeline" id="line-8112"><code>**</code></span>
<span class="codeline" id="line-8113"><code>** The D parameter to [sqlite3_str_new(D)] may be NULL.  If the</code></span>
<span class="codeline" id="line-8114"><code>** D parameter in [sqlite3_str_new(D)] is not NULL, then the maximum</code></span>
<span class="codeline" id="line-8115"><code>** length of the string contained in the [sqlite3_str] object will be</code></span>
<span class="codeline" id="line-8116"><code>** the value set for [sqlite3_limit](D,[SQLITE_LIMIT_LENGTH]) instead</code></span>
<span class="codeline" id="line-8117"><code>** of [SQLITE_MAX_LENGTH].</code></span>
<span class="codeline" id="line-8118"><code>*/</code></span>
<span class="codeline" id="line-8119"><code>SQLITE_API sqlite3_str *sqlite3_str_new(sqlite3*);</code></span>
<span class="codeline" id="line-8120"><code></code></span>
<span class="codeline" id="line-8121"><code>/*</code></span>
<span class="codeline" id="line-8122"><code>** CAPI3REF: Finalize A Dynamic String</code></span>
<span class="codeline" id="line-8123"><code>** DESTRUCTOR: sqlite3_str</code></span>
<span class="codeline" id="line-8124"><code>**</code></span>
<span class="codeline" id="line-8125"><code>** ^The [sqlite3_str_finish(X)] interface destroys the sqlite3_str object X</code></span>
<span class="codeline" id="line-8126"><code>** and returns a pointer to a memory buffer obtained from [sqlite3_malloc64()]</code></span>
<span class="codeline" id="line-8127"><code>** that contains the constructed string.  The calling application should</code></span>
<span class="codeline" id="line-8128"><code>** pass the returned value to [sqlite3_free()] to avoid a memory leak.</code></span>
<span class="codeline" id="line-8129"><code>** ^The [sqlite3_str_finish(X)] interface may return a NULL pointer if any</code></span>
<span class="codeline" id="line-8130"><code>** errors were encountered during construction of the string.  ^The</code></span>
<span class="codeline" id="line-8131"><code>** [sqlite3_str_finish(X)] interface will also return a NULL pointer if the</code></span>
<span class="codeline" id="line-8132"><code>** string in [sqlite3_str] object X is zero bytes long.</code></span>
<span class="codeline" id="line-8133"><code>*/</code></span>
<span class="codeline" id="line-8134"><code>SQLITE_API char *sqlite3_str_finish(sqlite3_str*);</code></span>
<span class="codeline" id="line-8135"><code></code></span>
<span class="codeline" id="line-8136"><code>/*</code></span>
<span class="codeline" id="line-8137"><code>** CAPI3REF: Add Content To A Dynamic String</code></span>
<span class="codeline" id="line-8138"><code>** METHOD: sqlite3_str</code></span>
<span class="codeline" id="line-8139"><code>**</code></span>
<span class="codeline" id="line-8140"><code>** These interfaces add content to an sqlite3_str object previously obtained</code></span>
<span class="codeline" id="line-8141"><code>** from [sqlite3_str_new()].</code></span>
<span class="codeline" id="line-8142"><code>**</code></span>
<span class="codeline" id="line-8143"><code>** ^The [sqlite3_str_appendf(X,F,...)] and</code></span>
<span class="codeline" id="line-8144"><code>** [sqlite3_str_vappendf(X,F,V)] interfaces uses the [built-in printf]</code></span>
<span class="codeline" id="line-8145"><code>** functionality of SQLite to append formatted text onto the end of</code></span>
<span class="codeline" id="line-8146"><code>** [sqlite3_str] object X.</code></span>
<span class="codeline" id="line-8147"><code>**</code></span>
<span class="codeline" id="line-8148"><code>** ^The [sqlite3_str_append(X,S,N)] method appends exactly N bytes from string S</code></span>
<span class="codeline" id="line-8149"><code>** onto the end of the [sqlite3_str] object X.  N must be non-negative.</code></span>
<span class="codeline" id="line-8150"><code>** S must contain at least N non-zero bytes of content.  To append a</code></span>
<span class="codeline" id="line-8151"><code>** zero-terminated string in its entirety, use the [sqlite3_str_appendall()]</code></span>
<span class="codeline" id="line-8152"><code>** method instead.</code></span>
<span class="codeline" id="line-8153"><code>**</code></span>
<span class="codeline" id="line-8154"><code>** ^The [sqlite3_str_appendall(X,S)] method appends the complete content of</code></span>
<span class="codeline" id="line-8155"><code>** zero-terminated string S onto the end of [sqlite3_str] object X.</code></span>
<span class="codeline" id="line-8156"><code>**</code></span>
<span class="codeline" id="line-8157"><code>** ^The [sqlite3_str_appendchar(X,N,C)] method appends N copies of the</code></span>
<span class="codeline" id="line-8158"><code>** single-byte character C onto the end of [sqlite3_str] object X.</code></span>
<span class="codeline" id="line-8159"><code>** ^This method can be used, for example, to add whitespace indentation.</code></span>
<span class="codeline" id="line-8160"><code>**</code></span>
<span class="codeline" id="line-8161"><code>** ^The [sqlite3_str_reset(X)] method resets the string under construction</code></span>
<span class="codeline" id="line-8162"><code>** inside [sqlite3_str] object X back to zero bytes in length.</code></span>
<span class="codeline" id="line-8163"><code>**</code></span>
<span class="codeline" id="line-8164"><code>** These methods do not return a result code.  ^If an error occurs, that fact</code></span>
<span class="codeline" id="line-8165"><code>** is recorded in the [sqlite3_str] object and can be recovered by a</code></span>
<span class="codeline" id="line-8166"><code>** subsequent call to [sqlite3_str_errcode(X)].</code></span>
<span class="codeline" id="line-8167"><code>*/</code></span>
<span class="codeline" id="line-8168"><code>SQLITE_API void sqlite3_str_appendf(sqlite3_str*, const char *zFormat, ...);</code></span>
<span class="codeline" id="line-8169"><code>SQLITE_API void sqlite3_str_vappendf(sqlite3_str*, const char *zFormat, va_list);</code></span>
<span class="codeline" id="line-8170"><code>SQLITE_API void sqlite3_str_append(sqlite3_str*, const char *zIn, int N);</code></span>
<span class="codeline" id="line-8171"><code>SQLITE_API void sqlite3_str_appendall(sqlite3_str*, const char *zIn);</code></span>
<span class="codeline" id="line-8172"><code>SQLITE_API void sqlite3_str_appendchar(sqlite3_str*, int N, char C);</code></span>
<span class="codeline" id="line-8173"><code>SQLITE_API void sqlite3_str_reset(sqlite3_str*);</code></span>
<span class="codeline" id="line-8174"><code></code></span>
<span class="codeline" id="line-8175"><code>/*</code></span>
<span class="codeline" id="line-8176"><code>** CAPI3REF: Status Of A Dynamic String</code></span>
<span class="codeline" id="line-8177"><code>** METHOD: sqlite3_str</code></span>
<span class="codeline" id="line-8178"><code>**</code></span>
<span class="codeline" id="line-8179"><code>** These interfaces return the current status of an [sqlite3_str] object.</code></span>
<span class="codeline" id="line-8180"><code>**</code></span>
<span class="codeline" id="line-8181"><code>** ^If any prior errors have occurred while constructing the dynamic string</code></span>
<span class="codeline" id="line-8182"><code>** in sqlite3_str X, then the [sqlite3_str_errcode(X)] method will return</code></span>
<span class="codeline" id="line-8183"><code>** an appropriate error code.  ^The [sqlite3_str_errcode(X)] method returns</code></span>
<span class="codeline" id="line-8184"><code>** [SQLITE_NOMEM] following any out-of-memory error, or</code></span>
<span class="codeline" id="line-8185"><code>** [SQLITE_TOOBIG] if the size of the dynamic string exceeds</code></span>
<span class="codeline" id="line-8186"><code>** [SQLITE_MAX_LENGTH], or [SQLITE_OK] if there have been no errors.</code></span>
<span class="codeline" id="line-8187"><code>**</code></span>
<span class="codeline" id="line-8188"><code>** ^The [sqlite3_str_length(X)] method returns the current length, in bytes,</code></span>
<span class="codeline" id="line-8189"><code>** of the dynamic string under construction in [sqlite3_str] object X.</code></span>
<span class="codeline" id="line-8190"><code>** ^The length returned by [sqlite3_str_length(X)] does not include the</code></span>
<span class="codeline" id="line-8191"><code>** zero-termination byte.</code></span>
<span class="codeline" id="line-8192"><code>**</code></span>
<span class="codeline" id="line-8193"><code>** ^The [sqlite3_str_value(X)] method returns a pointer to the current</code></span>
<span class="codeline" id="line-8194"><code>** content of the dynamic string under construction in X.  The value</code></span>
<span class="codeline" id="line-8195"><code>** returned by [sqlite3_str_value(X)] is managed by the sqlite3_str object X</code></span>
<span class="codeline" id="line-8196"><code>** and might be freed or altered by any subsequent method on the same</code></span>
<span class="codeline" id="line-8197"><code>** [sqlite3_str] object.  Applications must not used the pointer returned</code></span>
<span class="codeline" id="line-8198"><code>** [sqlite3_str_value(X)] after any subsequent method call on the same</code></span>
<span class="codeline" id="line-8199"><code>** object.  ^Applications may change the content of the string returned</code></span>
<span class="codeline" id="line-8200"><code>** by [sqlite3_str_value(X)] as long as they do not write into any bytes</code></span>
<span class="codeline" id="line-8201"><code>** outside the range of 0 to [sqlite3_str_length(X)] and do not read or</code></span>
<span class="codeline" id="line-8202"><code>** write any byte after any subsequent sqlite3_str method call.</code></span>
<span class="codeline" id="line-8203"><code>*/</code></span>
<span class="codeline" id="line-8204"><code>SQLITE_API int sqlite3_str_errcode(sqlite3_str*);</code></span>
<span class="codeline" id="line-8205"><code>SQLITE_API int sqlite3_str_length(sqlite3_str*);</code></span>
<span class="codeline" id="line-8206"><code>SQLITE_API char *sqlite3_str_value(sqlite3_str*);</code></span>
<span class="codeline" id="line-8207"><code></code></span>
<span class="codeline" id="line-8208"><code>/*</code></span>
<span class="codeline" id="line-8209"><code>** CAPI3REF: SQLite Runtime Status</code></span>
<span class="codeline" id="line-8210"><code>**</code></span>
<span class="codeline" id="line-8211"><code>** ^These interfaces are used to retrieve runtime status information</code></span>
<span class="codeline" id="line-8212"><code>** about the performance of SQLite, and optionally to reset various</code></span>
<span class="codeline" id="line-8213"><code>** highwater marks.  ^The first argument is an integer code for</code></span>
<span class="codeline" id="line-8214"><code>** the specific parameter to measure.  ^(Recognized integer codes</code></span>
<span class="codeline" id="line-8215"><code>** are of the form [status parameters | SQLITE_STATUS_...].)^</code></span>
<span class="codeline" id="line-8216"><code>** ^The current value of the parameter is returned into *pCurrent.</code></span>
<span class="codeline" id="line-8217"><code>** ^The highest recorded value is returned in *pHighwater.  ^If the</code></span>
<span class="codeline" id="line-8218"><code>** resetFlag is true, then the highest record value is reset after</code></span>
<span class="codeline" id="line-8219"><code>** *pHighwater is written.  ^(Some parameters do not record the highest</code></span>
<span class="codeline" id="line-8220"><code>** value.  For those parameters</code></span>
<span class="codeline" id="line-8221"><code>** nothing is written into *pHighwater and the resetFlag is ignored.)^</code></span>
<span class="codeline" id="line-8222"><code>** ^(Other parameters record only the highwater mark and not the current</code></span>
<span class="codeline" id="line-8223"><code>** value.  For these latter parameters nothing is written into *pCurrent.)^</code></span>
<span class="codeline" id="line-8224"><code>**</code></span>
<span class="codeline" id="line-8225"><code>** ^The sqlite3_status() and sqlite3_status64() routines return</code></span>
<span class="codeline" id="line-8226"><code>** SQLITE_OK on success and a non-zero [error code] on failure.</code></span>
<span class="codeline" id="line-8227"><code>**</code></span>
<span class="codeline" id="line-8228"><code>** If either the current value or the highwater mark is too large to</code></span>
<span class="codeline" id="line-8229"><code>** be represented by a 32-bit integer, then the values returned by</code></span>
<span class="codeline" id="line-8230"><code>** sqlite3_status() are undefined.</code></span>
<span class="codeline" id="line-8231"><code>**</code></span>
<span class="codeline" id="line-8232"><code>** See also: [sqlite3_db_status()]</code></span>
<span class="codeline" id="line-8233"><code>*/</code></span>
<span class="codeline" id="line-8234"><code>SQLITE_API int sqlite3_status(int op, int *pCurrent, int *pHighwater, int resetFlag);</code></span>
<span class="codeline" id="line-8235"><code>SQLITE_API int sqlite3_status64(</code></span>
<span class="codeline" id="line-8236"><code>  int op,</code></span>
<span class="codeline" id="line-8237"><code>  sqlite3_int64 *pCurrent,</code></span>
<span class="codeline" id="line-8238"><code>  sqlite3_int64 *pHighwater,</code></span>
<span class="codeline" id="line-8239"><code>  int resetFlag</code></span>
<span class="codeline" id="line-8240"><code>);</code></span>
<span class="codeline" id="line-8241"><code></code></span>
<span class="codeline" id="line-8242"><code></code></span>
<span class="codeline" id="line-8243"><code>/*</code></span>
<span class="codeline" id="line-8244"><code>** CAPI3REF: Status Parameters</code></span>
<span class="codeline" id="line-8245"><code>** KEYWORDS: {status parameters}</code></span>
<span class="codeline" id="line-8246"><code>**</code></span>
<span class="codeline" id="line-8247"><code>** These integer constants designate various run-time status parameters</code></span>
<span class="codeline" id="line-8248"><code>** that can be returned by [sqlite3_status()].</code></span>
<span class="codeline" id="line-8249"><code>**</code></span>
<span class="codeline" id="line-8250"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-8251"><code>** [[SQLITE_STATUS_MEMORY_USED]] ^(&lt;dt&gt;SQLITE_STATUS_MEMORY_USED&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8252"><code>** &lt;dd&gt;This parameter is the current amount of memory checked out</code></span>
<span class="codeline" id="line-8253"><code>** using [sqlite3_malloc()], either directly or indirectly.  The</code></span>
<span class="codeline" id="line-8254"><code>** figure includes calls made to [sqlite3_malloc()] by the application</code></span>
<span class="codeline" id="line-8255"><code>** and internal memory usage by the SQLite library.  Auxiliary page-cache</code></span>
<span class="codeline" id="line-8256"><code>** memory controlled by [SQLITE_CONFIG_PAGECACHE] is not included in</code></span>
<span class="codeline" id="line-8257"><code>** this parameter.  The amount returned is the sum of the allocation</code></span>
<span class="codeline" id="line-8258"><code>** sizes as reported by the xSize method in [sqlite3_mem_methods].&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-8259"><code>**</code></span>
<span class="codeline" id="line-8260"><code>** [[SQLITE_STATUS_MALLOC_SIZE]] ^(&lt;dt&gt;SQLITE_STATUS_MALLOC_SIZE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8261"><code>** &lt;dd&gt;This parameter records the largest memory allocation request</code></span>
<span class="codeline" id="line-8262"><code>** handed to [sqlite3_malloc()] or [sqlite3_realloc()] (or their</code></span>
<span class="codeline" id="line-8263"><code>** internal equivalents).  Only the value returned in the</code></span>
<span class="codeline" id="line-8264"><code>** *pHighwater parameter to [sqlite3_status()] is of interest.</code></span>
<span class="codeline" id="line-8265"><code>** The value written into the *pCurrent parameter is undefined.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-8266"><code>**</code></span>
<span class="codeline" id="line-8267"><code>** [[SQLITE_STATUS_MALLOC_COUNT]] ^(&lt;dt&gt;SQLITE_STATUS_MALLOC_COUNT&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8268"><code>** &lt;dd&gt;This parameter records the number of separate memory allocations</code></span>
<span class="codeline" id="line-8269"><code>** currently checked out.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-8270"><code>**</code></span>
<span class="codeline" id="line-8271"><code>** [[SQLITE_STATUS_PAGECACHE_USED]] ^(&lt;dt&gt;SQLITE_STATUS_PAGECACHE_USED&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8272"><code>** &lt;dd&gt;This parameter returns the number of pages used out of the</code></span>
<span class="codeline" id="line-8273"><code>** [pagecache memory allocator] that was configured using</code></span>
<span class="codeline" id="line-8274"><code>** [SQLITE_CONFIG_PAGECACHE].  The</code></span>
<span class="codeline" id="line-8275"><code>** value returned is in pages, not in bytes.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-8276"><code>**</code></span>
<span class="codeline" id="line-8277"><code>** [[SQLITE_STATUS_PAGECACHE_OVERFLOW]]</code></span>
<span class="codeline" id="line-8278"><code>** ^(&lt;dt&gt;SQLITE_STATUS_PAGECACHE_OVERFLOW&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8279"><code>** &lt;dd&gt;This parameter returns the number of bytes of page cache</code></span>
<span class="codeline" id="line-8280"><code>** allocation which could not be satisfied by the [SQLITE_CONFIG_PAGECACHE]</code></span>
<span class="codeline" id="line-8281"><code>** buffer and where forced to overflow to [sqlite3_malloc()].  The</code></span>
<span class="codeline" id="line-8282"><code>** returned value includes allocations that overflowed because they</code></span>
<span class="codeline" id="line-8283"><code>** where too large (they were larger than the "sz" parameter to</code></span>
<span class="codeline" id="line-8284"><code>** [SQLITE_CONFIG_PAGECACHE]) and allocations that overflowed because</code></span>
<span class="codeline" id="line-8285"><code>** no space was left in the page cache.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-8286"><code>**</code></span>
<span class="codeline" id="line-8287"><code>** [[SQLITE_STATUS_PAGECACHE_SIZE]] ^(&lt;dt&gt;SQLITE_STATUS_PAGECACHE_SIZE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8288"><code>** &lt;dd&gt;This parameter records the largest memory allocation request</code></span>
<span class="codeline" id="line-8289"><code>** handed to the [pagecache memory allocator].  Only the value returned in the</code></span>
<span class="codeline" id="line-8290"><code>** *pHighwater parameter to [sqlite3_status()] is of interest.</code></span>
<span class="codeline" id="line-8291"><code>** The value written into the *pCurrent parameter is undefined.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-8292"><code>**</code></span>
<span class="codeline" id="line-8293"><code>** [[SQLITE_STATUS_SCRATCH_USED]] &lt;dt&gt;SQLITE_STATUS_SCRATCH_USED&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8294"><code>** &lt;dd&gt;No longer used.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-8295"><code>**</code></span>
<span class="codeline" id="line-8296"><code>** [[SQLITE_STATUS_SCRATCH_OVERFLOW]] ^(&lt;dt&gt;SQLITE_STATUS_SCRATCH_OVERFLOW&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8297"><code>** &lt;dd&gt;No longer used.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-8298"><code>**</code></span>
<span class="codeline" id="line-8299"><code>** [[SQLITE_STATUS_SCRATCH_SIZE]] &lt;dt&gt;SQLITE_STATUS_SCRATCH_SIZE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8300"><code>** &lt;dd&gt;No longer used.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-8301"><code>**</code></span>
<span class="codeline" id="line-8302"><code>** [[SQLITE_STATUS_PARSER_STACK]] ^(&lt;dt&gt;SQLITE_STATUS_PARSER_STACK&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8303"><code>** &lt;dd&gt;The *pHighwater parameter records the deepest parser stack.</code></span>
<span class="codeline" id="line-8304"><code>** The *pCurrent value is undefined.  The *pHighwater value is only</code></span>
<span class="codeline" id="line-8305"><code>** meaningful if SQLite is compiled with [YYTRACKMAXSTACKDEPTH].&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-8306"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-8307"><code>**</code></span>
<span class="codeline" id="line-8308"><code>** New status parameters may be added from time to time.</code></span>
<span class="codeline" id="line-8309"><code>*/</code></span>
<span class="codeline" id="line-8310"><code>#define SQLITE_STATUS_MEMORY_USED          0</code></span>
<span class="codeline" id="line-8311"><code>#define SQLITE_STATUS_PAGECACHE_USED       1</code></span>
<span class="codeline" id="line-8312"><code>#define SQLITE_STATUS_PAGECACHE_OVERFLOW   2</code></span>
<span class="codeline" id="line-8313"><code>#define SQLITE_STATUS_SCRATCH_USED         3  /* NOT USED */</code></span>
<span class="codeline" id="line-8314"><code>#define SQLITE_STATUS_SCRATCH_OVERFLOW     4  /* NOT USED */</code></span>
<span class="codeline" id="line-8315"><code>#define SQLITE_STATUS_MALLOC_SIZE          5</code></span>
<span class="codeline" id="line-8316"><code>#define SQLITE_STATUS_PARSER_STACK         6</code></span>
<span class="codeline" id="line-8317"><code>#define SQLITE_STATUS_PAGECACHE_SIZE       7</code></span>
<span class="codeline" id="line-8318"><code>#define SQLITE_STATUS_SCRATCH_SIZE         8  /* NOT USED */</code></span>
<span class="codeline" id="line-8319"><code>#define SQLITE_STATUS_MALLOC_COUNT         9</code></span>
<span class="codeline" id="line-8320"><code></code></span>
<span class="codeline" id="line-8321"><code>/*</code></span>
<span class="codeline" id="line-8322"><code>** CAPI3REF: Database Connection Status</code></span>
<span class="codeline" id="line-8323"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-8324"><code>**</code></span>
<span class="codeline" id="line-8325"><code>** ^This interface is used to retrieve runtime status information</code></span>
<span class="codeline" id="line-8326"><code>** about a single [database connection].  ^The first argument is the</code></span>
<span class="codeline" id="line-8327"><code>** database connection object to be interrogated.  ^The second argument</code></span>
<span class="codeline" id="line-8328"><code>** is an integer constant, taken from the set of</code></span>
<span class="codeline" id="line-8329"><code>** [SQLITE_DBSTATUS options], that</code></span>
<span class="codeline" id="line-8330"><code>** determines the parameter to interrogate.  The set of</code></span>
<span class="codeline" id="line-8331"><code>** [SQLITE_DBSTATUS options] is likely</code></span>
<span class="codeline" id="line-8332"><code>** to grow in future releases of SQLite.</code></span>
<span class="codeline" id="line-8333"><code>**</code></span>
<span class="codeline" id="line-8334"><code>** ^The current value of the requested parameter is written into *pCur</code></span>
<span class="codeline" id="line-8335"><code>** and the highest instantaneous value is written into *pHiwtr.  ^If</code></span>
<span class="codeline" id="line-8336"><code>** the resetFlg is true, then the highest instantaneous value is</code></span>
<span class="codeline" id="line-8337"><code>** reset back down to the current value.</code></span>
<span class="codeline" id="line-8338"><code>**</code></span>
<span class="codeline" id="line-8339"><code>** ^The sqlite3_db_status() routine returns SQLITE_OK on success and a</code></span>
<span class="codeline" id="line-8340"><code>** non-zero [error code] on failure.</code></span>
<span class="codeline" id="line-8341"><code>**</code></span>
<span class="codeline" id="line-8342"><code>** See also: [sqlite3_status()] and [sqlite3_stmt_status()].</code></span>
<span class="codeline" id="line-8343"><code>*/</code></span>
<span class="codeline" id="line-8344"><code>SQLITE_API int sqlite3_db_status(sqlite3*, int op, int *pCur, int *pHiwtr, int resetFlg);</code></span>
<span class="codeline" id="line-8345"><code></code></span>
<span class="codeline" id="line-8346"><code>/*</code></span>
<span class="codeline" id="line-8347"><code>** CAPI3REF: Status Parameters for database connections</code></span>
<span class="codeline" id="line-8348"><code>** KEYWORDS: {SQLITE_DBSTATUS options}</code></span>
<span class="codeline" id="line-8349"><code>**</code></span>
<span class="codeline" id="line-8350"><code>** These constants are the available integer "verbs" that can be passed as</code></span>
<span class="codeline" id="line-8351"><code>** the second argument to the [sqlite3_db_status()] interface.</code></span>
<span class="codeline" id="line-8352"><code>**</code></span>
<span class="codeline" id="line-8353"><code>** New verbs may be added in future releases of SQLite. Existing verbs</code></span>
<span class="codeline" id="line-8354"><code>** might be discontinued. Applications should check the return code from</code></span>
<span class="codeline" id="line-8355"><code>** [sqlite3_db_status()] to make sure that the call worked.</code></span>
<span class="codeline" id="line-8356"><code>** The [sqlite3_db_status()] interface will return a non-zero error code</code></span>
<span class="codeline" id="line-8357"><code>** if a discontinued or unsupported verb is invoked.</code></span>
<span class="codeline" id="line-8358"><code>**</code></span>
<span class="codeline" id="line-8359"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-8360"><code>** [[SQLITE_DBSTATUS_LOOKASIDE_USED]] ^(&lt;dt&gt;SQLITE_DBSTATUS_LOOKASIDE_USED&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8361"><code>** &lt;dd&gt;This parameter returns the number of lookaside memory slots currently</code></span>
<span class="codeline" id="line-8362"><code>** checked out.&lt;/dd&gt;)^</code></span>
<span class="codeline" id="line-8363"><code>**</code></span>
<span class="codeline" id="line-8364"><code>** [[SQLITE_DBSTATUS_LOOKASIDE_HIT]] ^(&lt;dt&gt;SQLITE_DBSTATUS_LOOKASIDE_HIT&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8365"><code>** &lt;dd&gt;This parameter returns the number of malloc attempts that were</code></span>
<span class="codeline" id="line-8366"><code>** satisfied using lookaside memory. Only the high-water value is meaningful;</code></span>
<span class="codeline" id="line-8367"><code>** the current value is always zero.)^</code></span>
<span class="codeline" id="line-8368"><code>**</code></span>
<span class="codeline" id="line-8369"><code>** [[SQLITE_DBSTATUS_LOOKASIDE_MISS_SIZE]]</code></span>
<span class="codeline" id="line-8370"><code>** ^(&lt;dt&gt;SQLITE_DBSTATUS_LOOKASIDE_MISS_SIZE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8371"><code>** &lt;dd&gt;This parameter returns the number malloc attempts that might have</code></span>
<span class="codeline" id="line-8372"><code>** been satisfied using lookaside memory but failed due to the amount of</code></span>
<span class="codeline" id="line-8373"><code>** memory requested being larger than the lookaside slot size.</code></span>
<span class="codeline" id="line-8374"><code>** Only the high-water value is meaningful;</code></span>
<span class="codeline" id="line-8375"><code>** the current value is always zero.)^</code></span>
<span class="codeline" id="line-8376"><code>**</code></span>
<span class="codeline" id="line-8377"><code>** [[SQLITE_DBSTATUS_LOOKASIDE_MISS_FULL]]</code></span>
<span class="codeline" id="line-8378"><code>** ^(&lt;dt&gt;SQLITE_DBSTATUS_LOOKASIDE_MISS_FULL&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8379"><code>** &lt;dd&gt;This parameter returns the number malloc attempts that might have</code></span>
<span class="codeline" id="line-8380"><code>** been satisfied using lookaside memory but failed due to all lookaside</code></span>
<span class="codeline" id="line-8381"><code>** memory already being in use.</code></span>
<span class="codeline" id="line-8382"><code>** Only the high-water value is meaningful;</code></span>
<span class="codeline" id="line-8383"><code>** the current value is always zero.)^</code></span>
<span class="codeline" id="line-8384"><code>**</code></span>
<span class="codeline" id="line-8385"><code>** [[SQLITE_DBSTATUS_CACHE_USED]] ^(&lt;dt&gt;SQLITE_DBSTATUS_CACHE_USED&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8386"><code>** &lt;dd&gt;This parameter returns the approximate number of bytes of heap</code></span>
<span class="codeline" id="line-8387"><code>** memory used by all pager caches associated with the database connection.)^</code></span>
<span class="codeline" id="line-8388"><code>** ^The highwater mark associated with SQLITE_DBSTATUS_CACHE_USED is always 0.</code></span>
<span class="codeline" id="line-8389"><code>**</code></span>
<span class="codeline" id="line-8390"><code>** [[SQLITE_DBSTATUS_CACHE_USED_SHARED]]</code></span>
<span class="codeline" id="line-8391"><code>** ^(&lt;dt&gt;SQLITE_DBSTATUS_CACHE_USED_SHARED&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8392"><code>** &lt;dd&gt;This parameter is similar to DBSTATUS_CACHE_USED, except that if a</code></span>
<span class="codeline" id="line-8393"><code>** pager cache is shared between two or more connections the bytes of heap</code></span>
<span class="codeline" id="line-8394"><code>** memory used by that pager cache is divided evenly between the attached</code></span>
<span class="codeline" id="line-8395"><code>** connections.)^  In other words, if none of the pager caches associated</code></span>
<span class="codeline" id="line-8396"><code>** with the database connection are shared, this request returns the same</code></span>
<span class="codeline" id="line-8397"><code>** value as DBSTATUS_CACHE_USED. Or, if one or more or the pager caches are</code></span>
<span class="codeline" id="line-8398"><code>** shared, the value returned by this call will be smaller than that returned</code></span>
<span class="codeline" id="line-8399"><code>** by DBSTATUS_CACHE_USED. ^The highwater mark associated with</code></span>
<span class="codeline" id="line-8400"><code>** SQLITE_DBSTATUS_CACHE_USED_SHARED is always 0.</code></span>
<span class="codeline" id="line-8401"><code>**</code></span>
<span class="codeline" id="line-8402"><code>** [[SQLITE_DBSTATUS_SCHEMA_USED]] ^(&lt;dt&gt;SQLITE_DBSTATUS_SCHEMA_USED&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8403"><code>** &lt;dd&gt;This parameter returns the approximate number of bytes of heap</code></span>
<span class="codeline" id="line-8404"><code>** memory used to store the schema for all databases associated</code></span>
<span class="codeline" id="line-8405"><code>** with the connection - main, temp, and any [ATTACH]-ed databases.)^</code></span>
<span class="codeline" id="line-8406"><code>** ^The full amount of memory used by the schemas is reported, even if the</code></span>
<span class="codeline" id="line-8407"><code>** schema memory is shared with other database connections due to</code></span>
<span class="codeline" id="line-8408"><code>** [shared cache mode] being enabled.</code></span>
<span class="codeline" id="line-8409"><code>** ^The highwater mark associated with SQLITE_DBSTATUS_SCHEMA_USED is always 0.</code></span>
<span class="codeline" id="line-8410"><code>**</code></span>
<span class="codeline" id="line-8411"><code>** [[SQLITE_DBSTATUS_STMT_USED]] ^(&lt;dt&gt;SQLITE_DBSTATUS_STMT_USED&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8412"><code>** &lt;dd&gt;This parameter returns the approximate number of bytes of heap</code></span>
<span class="codeline" id="line-8413"><code>** and lookaside memory used by all prepared statements associated with</code></span>
<span class="codeline" id="line-8414"><code>** the database connection.)^</code></span>
<span class="codeline" id="line-8415"><code>** ^The highwater mark associated with SQLITE_DBSTATUS_STMT_USED is always 0.</code></span>
<span class="codeline" id="line-8416"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-8417"><code>**</code></span>
<span class="codeline" id="line-8418"><code>** [[SQLITE_DBSTATUS_CACHE_HIT]] ^(&lt;dt&gt;SQLITE_DBSTATUS_CACHE_HIT&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8419"><code>** &lt;dd&gt;This parameter returns the number of pager cache hits that have</code></span>
<span class="codeline" id="line-8420"><code>** occurred.)^ ^The highwater mark associated with SQLITE_DBSTATUS_CACHE_HIT</code></span>
<span class="codeline" id="line-8421"><code>** is always 0.</code></span>
<span class="codeline" id="line-8422"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-8423"><code>**</code></span>
<span class="codeline" id="line-8424"><code>** [[SQLITE_DBSTATUS_CACHE_MISS]] ^(&lt;dt&gt;SQLITE_DBSTATUS_CACHE_MISS&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8425"><code>** &lt;dd&gt;This parameter returns the number of pager cache misses that have</code></span>
<span class="codeline" id="line-8426"><code>** occurred.)^ ^The highwater mark associated with SQLITE_DBSTATUS_CACHE_MISS</code></span>
<span class="codeline" id="line-8427"><code>** is always 0.</code></span>
<span class="codeline" id="line-8428"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-8429"><code>**</code></span>
<span class="codeline" id="line-8430"><code>** [[SQLITE_DBSTATUS_CACHE_WRITE]] ^(&lt;dt&gt;SQLITE_DBSTATUS_CACHE_WRITE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8431"><code>** &lt;dd&gt;This parameter returns the number of dirty cache entries that have</code></span>
<span class="codeline" id="line-8432"><code>** been written to disk. Specifically, the number of pages written to the</code></span>
<span class="codeline" id="line-8433"><code>** wal file in wal mode databases, or the number of pages written to the</code></span>
<span class="codeline" id="line-8434"><code>** database file in rollback mode databases. Any pages written as part of</code></span>
<span class="codeline" id="line-8435"><code>** transaction rollback or database recovery operations are not included.</code></span>
<span class="codeline" id="line-8436"><code>** If an IO or other error occurs while writing a page to disk, the effect</code></span>
<span class="codeline" id="line-8437"><code>** on subsequent SQLITE_DBSTATUS_CACHE_WRITE requests is undefined.)^ ^The</code></span>
<span class="codeline" id="line-8438"><code>** highwater mark associated with SQLITE_DBSTATUS_CACHE_WRITE is always 0.</code></span>
<span class="codeline" id="line-8439"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-8440"><code>**</code></span>
<span class="codeline" id="line-8441"><code>** [[SQLITE_DBSTATUS_CACHE_SPILL]] ^(&lt;dt&gt;SQLITE_DBSTATUS_CACHE_SPILL&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8442"><code>** &lt;dd&gt;This parameter returns the number of dirty cache entries that have</code></span>
<span class="codeline" id="line-8443"><code>** been written to disk in the middle of a transaction due to the page</code></span>
<span class="codeline" id="line-8444"><code>** cache overflowing. Transactions are more efficient if they are written</code></span>
<span class="codeline" id="line-8445"><code>** to disk all at once. When pages spill mid-transaction, that introduces</code></span>
<span class="codeline" id="line-8446"><code>** additional overhead. This parameter can be used help identify</code></span>
<span class="codeline" id="line-8447"><code>** inefficiencies that can be resolved by increasing the cache size.</code></span>
<span class="codeline" id="line-8448"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-8449"><code>**</code></span>
<span class="codeline" id="line-8450"><code>** [[SQLITE_DBSTATUS_DEFERRED_FKS]] ^(&lt;dt&gt;SQLITE_DBSTATUS_DEFERRED_FKS&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8451"><code>** &lt;dd&gt;This parameter returns zero for the current value if and only if</code></span>
<span class="codeline" id="line-8452"><code>** all foreign key constraints (deferred or immediate) have been</code></span>
<span class="codeline" id="line-8453"><code>** resolved.)^  ^The highwater mark is always 0.</code></span>
<span class="codeline" id="line-8454"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-8455"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-8456"><code>*/</code></span>
<span class="codeline" id="line-8457"><code>#define SQLITE_DBSTATUS_LOOKASIDE_USED       0</code></span>
<span class="codeline" id="line-8458"><code>#define SQLITE_DBSTATUS_CACHE_USED           1</code></span>
<span class="codeline" id="line-8459"><code>#define SQLITE_DBSTATUS_SCHEMA_USED          2</code></span>
<span class="codeline" id="line-8460"><code>#define SQLITE_DBSTATUS_STMT_USED            3</code></span>
<span class="codeline" id="line-8461"><code>#define SQLITE_DBSTATUS_LOOKASIDE_HIT        4</code></span>
<span class="codeline" id="line-8462"><code>#define SQLITE_DBSTATUS_LOOKASIDE_MISS_SIZE  5</code></span>
<span class="codeline" id="line-8463"><code>#define SQLITE_DBSTATUS_LOOKASIDE_MISS_FULL  6</code></span>
<span class="codeline" id="line-8464"><code>#define SQLITE_DBSTATUS_CACHE_HIT            7</code></span>
<span class="codeline" id="line-8465"><code>#define SQLITE_DBSTATUS_CACHE_MISS           8</code></span>
<span class="codeline" id="line-8466"><code>#define SQLITE_DBSTATUS_CACHE_WRITE          9</code></span>
<span class="codeline" id="line-8467"><code>#define SQLITE_DBSTATUS_DEFERRED_FKS        10</code></span>
<span class="codeline" id="line-8468"><code>#define SQLITE_DBSTATUS_CACHE_USED_SHARED   11</code></span>
<span class="codeline" id="line-8469"><code>#define SQLITE_DBSTATUS_CACHE_SPILL         12</code></span>
<span class="codeline" id="line-8470"><code>#define SQLITE_DBSTATUS_MAX                 12   /* Largest defined DBSTATUS */</code></span>
<span class="codeline" id="line-8471"><code></code></span>
<span class="codeline" id="line-8472"><code></code></span>
<span class="codeline" id="line-8473"><code>/*</code></span>
<span class="codeline" id="line-8474"><code>** CAPI3REF: Prepared Statement Status</code></span>
<span class="codeline" id="line-8475"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-8476"><code>**</code></span>
<span class="codeline" id="line-8477"><code>** ^(Each prepared statement maintains various</code></span>
<span class="codeline" id="line-8478"><code>** [SQLITE_STMTSTATUS counters] that measure the number</code></span>
<span class="codeline" id="line-8479"><code>** of times it has performed specific operations.)^  These counters can</code></span>
<span class="codeline" id="line-8480"><code>** be used to monitor the performance characteristics of the prepared</code></span>
<span class="codeline" id="line-8481"><code>** statements.  For example, if the number of table steps greatly exceeds</code></span>
<span class="codeline" id="line-8482"><code>** the number of table searches or result rows, that would tend to indicate</code></span>
<span class="codeline" id="line-8483"><code>** that the prepared statement is using a full table scan rather than</code></span>
<span class="codeline" id="line-8484"><code>** an index.</code></span>
<span class="codeline" id="line-8485"><code>**</code></span>
<span class="codeline" id="line-8486"><code>** ^(This interface is used to retrieve and reset counter values from</code></span>
<span class="codeline" id="line-8487"><code>** a [prepared statement].  The first argument is the prepared statement</code></span>
<span class="codeline" id="line-8488"><code>** object to be interrogated.  The second argument</code></span>
<span class="codeline" id="line-8489"><code>** is an integer code for a specific [SQLITE_STMTSTATUS counter]</code></span>
<span class="codeline" id="line-8490"><code>** to be interrogated.)^</code></span>
<span class="codeline" id="line-8491"><code>** ^The current value of the requested counter is returned.</code></span>
<span class="codeline" id="line-8492"><code>** ^If the resetFlg is true, then the counter is reset to zero after this</code></span>
<span class="codeline" id="line-8493"><code>** interface call returns.</code></span>
<span class="codeline" id="line-8494"><code>**</code></span>
<span class="codeline" id="line-8495"><code>** See also: [sqlite3_status()] and [sqlite3_db_status()].</code></span>
<span class="codeline" id="line-8496"><code>*/</code></span>
<span class="codeline" id="line-8497"><code>SQLITE_API int sqlite3_stmt_status(sqlite3_stmt*, int op,int resetFlg);</code></span>
<span class="codeline" id="line-8498"><code></code></span>
<span class="codeline" id="line-8499"><code>/*</code></span>
<span class="codeline" id="line-8500"><code>** CAPI3REF: Status Parameters for prepared statements</code></span>
<span class="codeline" id="line-8501"><code>** KEYWORDS: {SQLITE_STMTSTATUS counter} {SQLITE_STMTSTATUS counters}</code></span>
<span class="codeline" id="line-8502"><code>**</code></span>
<span class="codeline" id="line-8503"><code>** These preprocessor macros define integer codes that name counter</code></span>
<span class="codeline" id="line-8504"><code>** values associated with the [sqlite3_stmt_status()] interface.</code></span>
<span class="codeline" id="line-8505"><code>** The meanings of the various counters are as follows:</code></span>
<span class="codeline" id="line-8506"><code>**</code></span>
<span class="codeline" id="line-8507"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-8508"><code>** [[SQLITE_STMTSTATUS_FULLSCAN_STEP]] &lt;dt&gt;SQLITE_STMTSTATUS_FULLSCAN_STEP&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8509"><code>** &lt;dd&gt;^This is the number of times that SQLite has stepped forward in</code></span>
<span class="codeline" id="line-8510"><code>** a table as part of a full table scan.  Large numbers for this counter</code></span>
<span class="codeline" id="line-8511"><code>** may indicate opportunities for performance improvement through</code></span>
<span class="codeline" id="line-8512"><code>** careful use of indices.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-8513"><code>**</code></span>
<span class="codeline" id="line-8514"><code>** [[SQLITE_STMTSTATUS_SORT]] &lt;dt&gt;SQLITE_STMTSTATUS_SORT&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8515"><code>** &lt;dd&gt;^This is the number of sort operations that have occurred.</code></span>
<span class="codeline" id="line-8516"><code>** A non-zero value in this counter may indicate an opportunity to</code></span>
<span class="codeline" id="line-8517"><code>** improvement performance through careful use of indices.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-8518"><code>**</code></span>
<span class="codeline" id="line-8519"><code>** [[SQLITE_STMTSTATUS_AUTOINDEX]] &lt;dt&gt;SQLITE_STMTSTATUS_AUTOINDEX&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8520"><code>** &lt;dd&gt;^This is the number of rows inserted into transient indices that</code></span>
<span class="codeline" id="line-8521"><code>** were created automatically in order to help joins run faster.</code></span>
<span class="codeline" id="line-8522"><code>** A non-zero value in this counter may indicate an opportunity to</code></span>
<span class="codeline" id="line-8523"><code>** improvement performance by adding permanent indices that do not</code></span>
<span class="codeline" id="line-8524"><code>** need to be reinitialized each time the statement is run.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-8525"><code>**</code></span>
<span class="codeline" id="line-8526"><code>** [[SQLITE_STMTSTATUS_VM_STEP]] &lt;dt&gt;SQLITE_STMTSTATUS_VM_STEP&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8527"><code>** &lt;dd&gt;^This is the number of virtual machine operations executed</code></span>
<span class="codeline" id="line-8528"><code>** by the prepared statement if that number is less than or equal</code></span>
<span class="codeline" id="line-8529"><code>** to 2147483647.  The number of virtual machine operations can be</code></span>
<span class="codeline" id="line-8530"><code>** used as a proxy for the total work done by the prepared statement.</code></span>
<span class="codeline" id="line-8531"><code>** If the number of virtual machine operations exceeds 2147483647</code></span>
<span class="codeline" id="line-8532"><code>** then the value returned by this statement status code is undefined.</code></span>
<span class="codeline" id="line-8533"><code>**</code></span>
<span class="codeline" id="line-8534"><code>** [[SQLITE_STMTSTATUS_REPREPARE]] &lt;dt&gt;SQLITE_STMTSTATUS_REPREPARE&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8535"><code>** &lt;dd&gt;^This is the number of times that the prepare statement has been</code></span>
<span class="codeline" id="line-8536"><code>** automatically regenerated due to schema changes or changes to</code></span>
<span class="codeline" id="line-8537"><code>** [bound parameters] that might affect the query plan.</code></span>
<span class="codeline" id="line-8538"><code>**</code></span>
<span class="codeline" id="line-8539"><code>** [[SQLITE_STMTSTATUS_RUN]] &lt;dt&gt;SQLITE_STMTSTATUS_RUN&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8540"><code>** &lt;dd&gt;^This is the number of times that the prepared statement has</code></span>
<span class="codeline" id="line-8541"><code>** been run.  A single "run" for the purposes of this counter is one</code></span>
<span class="codeline" id="line-8542"><code>** or more calls to [sqlite3_step()] followed by a call to [sqlite3_reset()].</code></span>
<span class="codeline" id="line-8543"><code>** The counter is incremented on the first [sqlite3_step()] call of each</code></span>
<span class="codeline" id="line-8544"><code>** cycle.</code></span>
<span class="codeline" id="line-8545"><code>**</code></span>
<span class="codeline" id="line-8546"><code>** [[SQLITE_STMTSTATUS_FILTER_MISS]]</code></span>
<span class="codeline" id="line-8547"><code>** [[SQLITE_STMTSTATUS_FILTER HIT]]</code></span>
<span class="codeline" id="line-8548"><code>** &lt;dt&gt;SQLITE_STMTSTATUS_FILTER_HIT&lt;br&gt;</code></span>
<span class="codeline" id="line-8549"><code>** SQLITE_STMTSTATUS_FILTER_MISS&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8550"><code>** &lt;dd&gt;^SQLITE_STMTSTATUS_FILTER_HIT is the number of times that a join</code></span>
<span class="codeline" id="line-8551"><code>** step was bypassed because a Bloom filter returned not-found.  The</code></span>
<span class="codeline" id="line-8552"><code>** corresponding SQLITE_STMTSTATUS_FILTER_MISS value is the number of</code></span>
<span class="codeline" id="line-8553"><code>** times that the Bloom filter returned a find, and thus the join step</code></span>
<span class="codeline" id="line-8554"><code>** had to be processed as normal.</code></span>
<span class="codeline" id="line-8555"><code>**</code></span>
<span class="codeline" id="line-8556"><code>** [[SQLITE_STMTSTATUS_MEMUSED]] &lt;dt&gt;SQLITE_STMTSTATUS_MEMUSED&lt;/dt&gt;</code></span>
<span class="codeline" id="line-8557"><code>** &lt;dd&gt;^This is the approximate number of bytes of heap memory</code></span>
<span class="codeline" id="line-8558"><code>** used to store the prepared statement.  ^This value is not actually</code></span>
<span class="codeline" id="line-8559"><code>** a counter, and so the resetFlg parameter to sqlite3_stmt_status()</code></span>
<span class="codeline" id="line-8560"><code>** is ignored when the opcode is SQLITE_STMTSTATUS_MEMUSED.</code></span>
<span class="codeline" id="line-8561"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-8562"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-8563"><code>*/</code></span>
<span class="codeline" id="line-8564"><code>#define SQLITE_STMTSTATUS_FULLSCAN_STEP     1</code></span>
<span class="codeline" id="line-8565"><code>#define SQLITE_STMTSTATUS_SORT              2</code></span>
<span class="codeline" id="line-8566"><code>#define SQLITE_STMTSTATUS_AUTOINDEX         3</code></span>
<span class="codeline" id="line-8567"><code>#define SQLITE_STMTSTATUS_VM_STEP           4</code></span>
<span class="codeline" id="line-8568"><code>#define SQLITE_STMTSTATUS_REPREPARE         5</code></span>
<span class="codeline" id="line-8569"><code>#define SQLITE_STMTSTATUS_RUN               6</code></span>
<span class="codeline" id="line-8570"><code>#define SQLITE_STMTSTATUS_FILTER_MISS       7</code></span>
<span class="codeline" id="line-8571"><code>#define SQLITE_STMTSTATUS_FILTER_HIT        8</code></span>
<span class="codeline" id="line-8572"><code>#define SQLITE_STMTSTATUS_MEMUSED           99</code></span>
<span class="codeline" id="line-8573"><code></code></span>
<span class="codeline" id="line-8574"><code>/*</code></span>
<span class="codeline" id="line-8575"><code>** CAPI3REF: Custom Page Cache Object</code></span>
<span class="codeline" id="line-8576"><code>**</code></span>
<span class="codeline" id="line-8577"><code>** The sqlite3_pcache type is opaque.  It is implemented by</code></span>
<span class="codeline" id="line-8578"><code>** the pluggable module.  The SQLite core has no knowledge of</code></span>
<span class="codeline" id="line-8579"><code>** its size or internal structure and never deals with the</code></span>
<span class="codeline" id="line-8580"><code>** sqlite3_pcache object except by holding and passing pointers</code></span>
<span class="codeline" id="line-8581"><code>** to the object.</code></span>
<span class="codeline" id="line-8582"><code>**</code></span>
<span class="codeline" id="line-8583"><code>** See [sqlite3_pcache_methods2] for additional information.</code></span>
<span class="codeline" id="line-8584"><code>*/</code></span>
<span class="codeline" id="line-8585"><code>typedef struct sqlite3_pcache sqlite3_pcache;</code></span>
<span class="codeline" id="line-8586"><code></code></span>
<span class="codeline" id="line-8587"><code>/*</code></span>
<span class="codeline" id="line-8588"><code>** CAPI3REF: Custom Page Cache Object</code></span>
<span class="codeline" id="line-8589"><code>**</code></span>
<span class="codeline" id="line-8590"><code>** The sqlite3_pcache_page object represents a single page in the</code></span>
<span class="codeline" id="line-8591"><code>** page cache.  The page cache will allocate instances of this</code></span>
<span class="codeline" id="line-8592"><code>** object.  Various methods of the page cache use pointers to instances</code></span>
<span class="codeline" id="line-8593"><code>** of this object as parameters or as their return value.</code></span>
<span class="codeline" id="line-8594"><code>**</code></span>
<span class="codeline" id="line-8595"><code>** See [sqlite3_pcache_methods2] for additional information.</code></span>
<span class="codeline" id="line-8596"><code>*/</code></span>
<span class="codeline" id="line-8597"><code>typedef struct sqlite3_pcache_page sqlite3_pcache_page;</code></span>
<span class="codeline" id="line-8598"><code>struct sqlite3_pcache_page {</code></span>
<span class="codeline" id="line-8599"><code>  void *pBuf;        /* The content of the page */</code></span>
<span class="codeline" id="line-8600"><code>  void *pExtra;      /* Extra information associated with the page */</code></span>
<span class="codeline" id="line-8601"><code>};</code></span>
<span class="codeline" id="line-8602"><code></code></span>
<span class="codeline" id="line-8603"><code>/*</code></span>
<span class="codeline" id="line-8604"><code>** CAPI3REF: Application Defined Page Cache.</code></span>
<span class="codeline" id="line-8605"><code>** KEYWORDS: {page cache}</code></span>
<span class="codeline" id="line-8606"><code>**</code></span>
<span class="codeline" id="line-8607"><code>** ^(The [sqlite3_config]([SQLITE_CONFIG_PCACHE2], ...) interface can</code></span>
<span class="codeline" id="line-8608"><code>** register an alternative page cache implementation by passing in an</code></span>
<span class="codeline" id="line-8609"><code>** instance of the sqlite3_pcache_methods2 structure.)^</code></span>
<span class="codeline" id="line-8610"><code>** In many applications, most of the heap memory allocated by</code></span>
<span class="codeline" id="line-8611"><code>** SQLite is used for the page cache.</code></span>
<span class="codeline" id="line-8612"><code>** By implementing a</code></span>
<span class="codeline" id="line-8613"><code>** custom page cache using this API, an application can better control</code></span>
<span class="codeline" id="line-8614"><code>** the amount of memory consumed by SQLite, the way in which</code></span>
<span class="codeline" id="line-8615"><code>** that memory is allocated and released, and the policies used to</code></span>
<span class="codeline" id="line-8616"><code>** determine exactly which parts of a database file are cached and for</code></span>
<span class="codeline" id="line-8617"><code>** how long.</code></span>
<span class="codeline" id="line-8618"><code>**</code></span>
<span class="codeline" id="line-8619"><code>** The alternative page cache mechanism is an</code></span>
<span class="codeline" id="line-8620"><code>** extreme measure that is only needed by the most demanding applications.</code></span>
<span class="codeline" id="line-8621"><code>** The built-in page cache is recommended for most uses.</code></span>
<span class="codeline" id="line-8622"><code>**</code></span>
<span class="codeline" id="line-8623"><code>** ^(The contents of the sqlite3_pcache_methods2 structure are copied to an</code></span>
<span class="codeline" id="line-8624"><code>** internal buffer by SQLite within the call to [sqlite3_config].  Hence</code></span>
<span class="codeline" id="line-8625"><code>** the application may discard the parameter after the call to</code></span>
<span class="codeline" id="line-8626"><code>** [sqlite3_config()] returns.)^</code></span>
<span class="codeline" id="line-8627"><code>**</code></span>
<span class="codeline" id="line-8628"><code>** [[the xInit() page cache method]]</code></span>
<span class="codeline" id="line-8629"><code>** ^(The xInit() method is called once for each effective</code></span>
<span class="codeline" id="line-8630"><code>** call to [sqlite3_initialize()])^</code></span>
<span class="codeline" id="line-8631"><code>** (usually only once during the lifetime of the process). ^(The xInit()</code></span>
<span class="codeline" id="line-8632"><code>** method is passed a copy of the sqlite3_pcache_methods2.pArg value.)^</code></span>
<span class="codeline" id="line-8633"><code>** The intent of the xInit() method is to set up global data structures</code></span>
<span class="codeline" id="line-8634"><code>** required by the custom page cache implementation.</code></span>
<span class="codeline" id="line-8635"><code>** ^(If the xInit() method is NULL, then the</code></span>
<span class="codeline" id="line-8636"><code>** built-in default page cache is used instead of the application defined</code></span>
<span class="codeline" id="line-8637"><code>** page cache.)^</code></span>
<span class="codeline" id="line-8638"><code>**</code></span>
<span class="codeline" id="line-8639"><code>** [[the xShutdown() page cache method]]</code></span>
<span class="codeline" id="line-8640"><code>** ^The xShutdown() method is called by [sqlite3_shutdown()].</code></span>
<span class="codeline" id="line-8641"><code>** It can be used to clean up</code></span>
<span class="codeline" id="line-8642"><code>** any outstanding resources before process shutdown, if required.</code></span>
<span class="codeline" id="line-8643"><code>** ^The xShutdown() method may be NULL.</code></span>
<span class="codeline" id="line-8644"><code>**</code></span>
<span class="codeline" id="line-8645"><code>** ^SQLite automatically serializes calls to the xInit method,</code></span>
<span class="codeline" id="line-8646"><code>** so the xInit method need not be threadsafe.  ^The</code></span>
<span class="codeline" id="line-8647"><code>** xShutdown method is only called from [sqlite3_shutdown()] so it does</code></span>
<span class="codeline" id="line-8648"><code>** not need to be threadsafe either.  All other methods must be threadsafe</code></span>
<span class="codeline" id="line-8649"><code>** in multithreaded applications.</code></span>
<span class="codeline" id="line-8650"><code>**</code></span>
<span class="codeline" id="line-8651"><code>** ^SQLite will never invoke xInit() more than once without an intervening</code></span>
<span class="codeline" id="line-8652"><code>** call to xShutdown().</code></span>
<span class="codeline" id="line-8653"><code>**</code></span>
<span class="codeline" id="line-8654"><code>** [[the xCreate() page cache methods]]</code></span>
<span class="codeline" id="line-8655"><code>** ^SQLite invokes the xCreate() method to construct a new cache instance.</code></span>
<span class="codeline" id="line-8656"><code>** SQLite will typically create one cache instance for each open database file,</code></span>
<span class="codeline" id="line-8657"><code>** though this is not guaranteed. ^The</code></span>
<span class="codeline" id="line-8658"><code>** first parameter, szPage, is the size in bytes of the pages that must</code></span>
<span class="codeline" id="line-8659"><code>** be allocated by the cache.  ^szPage will always a power of two.  ^The</code></span>
<span class="codeline" id="line-8660"><code>** second parameter szExtra is a number of bytes of extra storage</code></span>
<span class="codeline" id="line-8661"><code>** associated with each page cache entry.  ^The szExtra parameter will</code></span>
<span class="codeline" id="line-8662"><code>** a number less than 250.  SQLite will use the</code></span>
<span class="codeline" id="line-8663"><code>** extra szExtra bytes on each page to store metadata about the underlying</code></span>
<span class="codeline" id="line-8664"><code>** database page on disk.  The value passed into szExtra depends</code></span>
<span class="codeline" id="line-8665"><code>** on the SQLite version, the target platform, and how SQLite was compiled.</code></span>
<span class="codeline" id="line-8666"><code>** ^The third argument to xCreate(), bPurgeable, is true if the cache being</code></span>
<span class="codeline" id="line-8667"><code>** created will be used to cache database pages of a file stored on disk, or</code></span>
<span class="codeline" id="line-8668"><code>** false if it is used for an in-memory database. The cache implementation</code></span>
<span class="codeline" id="line-8669"><code>** does not have to do anything special based with the value of bPurgeable;</code></span>
<span class="codeline" id="line-8670"><code>** it is purely advisory.  ^On a cache where bPurgeable is false, SQLite will</code></span>
<span class="codeline" id="line-8671"><code>** never invoke xUnpin() except to deliberately delete a page.</code></span>
<span class="codeline" id="line-8672"><code>** ^In other words, calls to xUnpin() on a cache with bPurgeable set to</code></span>
<span class="codeline" id="line-8673"><code>** false will always have the "discard" flag set to true.</code></span>
<span class="codeline" id="line-8674"><code>** ^Hence, a cache created with bPurgeable false will</code></span>
<span class="codeline" id="line-8675"><code>** never contain any unpinned pages.</code></span>
<span class="codeline" id="line-8676"><code>**</code></span>
<span class="codeline" id="line-8677"><code>** [[the xCachesize() page cache method]]</code></span>
<span class="codeline" id="line-8678"><code>** ^(The xCachesize() method may be called at any time by SQLite to set the</code></span>
<span class="codeline" id="line-8679"><code>** suggested maximum cache-size (number of pages stored by) the cache</code></span>
<span class="codeline" id="line-8680"><code>** instance passed as the first argument. This is the value configured using</code></span>
<span class="codeline" id="line-8681"><code>** the SQLite "[PRAGMA cache_size]" command.)^  As with the bPurgeable</code></span>
<span class="codeline" id="line-8682"><code>** parameter, the implementation is not required to do anything with this</code></span>
<span class="codeline" id="line-8683"><code>** value; it is advisory only.</code></span>
<span class="codeline" id="line-8684"><code>**</code></span>
<span class="codeline" id="line-8685"><code>** [[the xPagecount() page cache methods]]</code></span>
<span class="codeline" id="line-8686"><code>** The xPagecount() method must return the number of pages currently</code></span>
<span class="codeline" id="line-8687"><code>** stored in the cache, both pinned and unpinned.</code></span>
<span class="codeline" id="line-8688"><code>**</code></span>
<span class="codeline" id="line-8689"><code>** [[the xFetch() page cache methods]]</code></span>
<span class="codeline" id="line-8690"><code>** The xFetch() method locates a page in the cache and returns a pointer to</code></span>
<span class="codeline" id="line-8691"><code>** an sqlite3_pcache_page object associated with that page, or a NULL pointer.</code></span>
<span class="codeline" id="line-8692"><code>** The pBuf element of the returned sqlite3_pcache_page object will be a</code></span>
<span class="codeline" id="line-8693"><code>** pointer to a buffer of szPage bytes used to store the content of a</code></span>
<span class="codeline" id="line-8694"><code>** single database page.  The pExtra element of sqlite3_pcache_page will be</code></span>
<span class="codeline" id="line-8695"><code>** a pointer to the szExtra bytes of extra storage that SQLite has requested</code></span>
<span class="codeline" id="line-8696"><code>** for each entry in the page cache.</code></span>
<span class="codeline" id="line-8697"><code>**</code></span>
<span class="codeline" id="line-8698"><code>** The page to be fetched is determined by the key. ^The minimum key value</code></span>
<span class="codeline" id="line-8699"><code>** is 1.  After it has been retrieved using xFetch, the page is considered</code></span>
<span class="codeline" id="line-8700"><code>** to be "pinned".</code></span>
<span class="codeline" id="line-8701"><code>**</code></span>
<span class="codeline" id="line-8702"><code>** If the requested page is already in the page cache, then the page cache</code></span>
<span class="codeline" id="line-8703"><code>** implementation must return a pointer to the page buffer with its content</code></span>
<span class="codeline" id="line-8704"><code>** intact.  If the requested page is not already in the cache, then the</code></span>
<span class="codeline" id="line-8705"><code>** cache implementation should use the value of the createFlag</code></span>
<span class="codeline" id="line-8706"><code>** parameter to help it determined what action to take:</code></span>
<span class="codeline" id="line-8707"><code>**</code></span>
<span class="codeline" id="line-8708"><code>** &lt;table border=1 width=85% align=center&gt;</code></span>
<span class="codeline" id="line-8709"><code>** &lt;tr&gt;&lt;th&gt; createFlag &lt;th&gt; Behavior when page is not already in cache</code></span>
<span class="codeline" id="line-8710"><code>** &lt;tr&gt;&lt;td&gt; 0 &lt;td&gt; Do not allocate a new page.  Return NULL.</code></span>
<span class="codeline" id="line-8711"><code>** &lt;tr&gt;&lt;td&gt; 1 &lt;td&gt; Allocate a new page if it easy and convenient to do so.</code></span>
<span class="codeline" id="line-8712"><code>**                 Otherwise return NULL.</code></span>
<span class="codeline" id="line-8713"><code>** &lt;tr&gt;&lt;td&gt; 2 &lt;td&gt; Make every effort to allocate a new page.  Only return</code></span>
<span class="codeline" id="line-8714"><code>**                 NULL if allocating a new page is effectively impossible.</code></span>
<span class="codeline" id="line-8715"><code>** &lt;/table&gt;</code></span>
<span class="codeline" id="line-8716"><code>**</code></span>
<span class="codeline" id="line-8717"><code>** ^(SQLite will normally invoke xFetch() with a createFlag of 0 or 1.  SQLite</code></span>
<span class="codeline" id="line-8718"><code>** will only use a createFlag of 2 after a prior call with a createFlag of 1</code></span>
<span class="codeline" id="line-8719"><code>** failed.)^  In between the xFetch() calls, SQLite may</code></span>
<span class="codeline" id="line-8720"><code>** attempt to unpin one or more cache pages by spilling the content of</code></span>
<span class="codeline" id="line-8721"><code>** pinned pages to disk and synching the operating system disk cache.</code></span>
<span class="codeline" id="line-8722"><code>**</code></span>
<span class="codeline" id="line-8723"><code>** [[the xUnpin() page cache method]]</code></span>
<span class="codeline" id="line-8724"><code>** ^xUnpin() is called by SQLite with a pointer to a currently pinned page</code></span>
<span class="codeline" id="line-8725"><code>** as its second argument.  If the third parameter, discard, is non-zero,</code></span>
<span class="codeline" id="line-8726"><code>** then the page must be evicted from the cache.</code></span>
<span class="codeline" id="line-8727"><code>** ^If the discard parameter is</code></span>
<span class="codeline" id="line-8728"><code>** zero, then the page may be discarded or retained at the discretion of</code></span>
<span class="codeline" id="line-8729"><code>** page cache implementation. ^The page cache implementation</code></span>
<span class="codeline" id="line-8730"><code>** may choose to evict unpinned pages at any time.</code></span>
<span class="codeline" id="line-8731"><code>**</code></span>
<span class="codeline" id="line-8732"><code>** The cache must not perform any reference counting. A single</code></span>
<span class="codeline" id="line-8733"><code>** call to xUnpin() unpins the page regardless of the number of prior calls</code></span>
<span class="codeline" id="line-8734"><code>** to xFetch().</code></span>
<span class="codeline" id="line-8735"><code>**</code></span>
<span class="codeline" id="line-8736"><code>** [[the xRekey() page cache methods]]</code></span>
<span class="codeline" id="line-8737"><code>** The xRekey() method is used to change the key value associated with the</code></span>
<span class="codeline" id="line-8738"><code>** page passed as the second argument. If the cache</code></span>
<span class="codeline" id="line-8739"><code>** previously contains an entry associated with newKey, it must be</code></span>
<span class="codeline" id="line-8740"><code>** discarded. ^Any prior cache entry associated with newKey is guaranteed not</code></span>
<span class="codeline" id="line-8741"><code>** to be pinned.</code></span>
<span class="codeline" id="line-8742"><code>**</code></span>
<span class="codeline" id="line-8743"><code>** When SQLite calls the xTruncate() method, the cache must discard all</code></span>
<span class="codeline" id="line-8744"><code>** existing cache entries with page numbers (keys) greater than or equal</code></span>
<span class="codeline" id="line-8745"><code>** to the value of the iLimit parameter passed to xTruncate(). If any</code></span>
<span class="codeline" id="line-8746"><code>** of these pages are pinned, they are implicitly unpinned, meaning that</code></span>
<span class="codeline" id="line-8747"><code>** they can be safely discarded.</code></span>
<span class="codeline" id="line-8748"><code>**</code></span>
<span class="codeline" id="line-8749"><code>** [[the xDestroy() page cache method]]</code></span>
<span class="codeline" id="line-8750"><code>** ^The xDestroy() method is used to delete a cache allocated by xCreate().</code></span>
<span class="codeline" id="line-8751"><code>** All resources associated with the specified cache should be freed. ^After</code></span>
<span class="codeline" id="line-8752"><code>** calling the xDestroy() method, SQLite considers the [sqlite3_pcache*]</code></span>
<span class="codeline" id="line-8753"><code>** handle invalid, and will not use it with any other sqlite3_pcache_methods2</code></span>
<span class="codeline" id="line-8754"><code>** functions.</code></span>
<span class="codeline" id="line-8755"><code>**</code></span>
<span class="codeline" id="line-8756"><code>** [[the xShrink() page cache method]]</code></span>
<span class="codeline" id="line-8757"><code>** ^SQLite invokes the xShrink() method when it wants the page cache to</code></span>
<span class="codeline" id="line-8758"><code>** free up as much of heap memory as possible.  The page cache implementation</code></span>
<span class="codeline" id="line-8759"><code>** is not obligated to free any memory, but well-behaved implementations should</code></span>
<span class="codeline" id="line-8760"><code>** do their best.</code></span>
<span class="codeline" id="line-8761"><code>*/</code></span>
<span class="codeline" id="line-8762"><code>typedef struct sqlite3_pcache_methods2 sqlite3_pcache_methods2;</code></span>
<span class="codeline" id="line-8763"><code>struct sqlite3_pcache_methods2 {</code></span>
<span class="codeline" id="line-8764"><code>  int iVersion;</code></span>
<span class="codeline" id="line-8765"><code>  void *pArg;</code></span>
<span class="codeline" id="line-8766"><code>  int (*xInit)(void*);</code></span>
<span class="codeline" id="line-8767"><code>  void (*xShutdown)(void*);</code></span>
<span class="codeline" id="line-8768"><code>  sqlite3_pcache *(*xCreate)(int szPage, int szExtra, int bPurgeable);</code></span>
<span class="codeline" id="line-8769"><code>  void (*xCachesize)(sqlite3_pcache*, int nCachesize);</code></span>
<span class="codeline" id="line-8770"><code>  int (*xPagecount)(sqlite3_pcache*);</code></span>
<span class="codeline" id="line-8771"><code>  sqlite3_pcache_page *(*xFetch)(sqlite3_pcache*, unsigned key, int createFlag);</code></span>
<span class="codeline" id="line-8772"><code>  void (*xUnpin)(sqlite3_pcache*, sqlite3_pcache_page*, int discard);</code></span>
<span class="codeline" id="line-8773"><code>  void (*xRekey)(sqlite3_pcache*, sqlite3_pcache_page*,</code></span>
<span class="codeline" id="line-8774"><code>      unsigned oldKey, unsigned newKey);</code></span>
<span class="codeline" id="line-8775"><code>  void (*xTruncate)(sqlite3_pcache*, unsigned iLimit);</code></span>
<span class="codeline" id="line-8776"><code>  void (*xDestroy)(sqlite3_pcache*);</code></span>
<span class="codeline" id="line-8777"><code>  void (*xShrink)(sqlite3_pcache*);</code></span>
<span class="codeline" id="line-8778"><code>};</code></span>
<span class="codeline" id="line-8779"><code></code></span>
<span class="codeline" id="line-8780"><code>/*</code></span>
<span class="codeline" id="line-8781"><code>** This is the obsolete pcache_methods object that has now been replaced</code></span>
<span class="codeline" id="line-8782"><code>** by sqlite3_pcache_methods2.  This object is not used by SQLite.  It is</code></span>
<span class="codeline" id="line-8783"><code>** retained in the header file for backwards compatibility only.</code></span>
<span class="codeline" id="line-8784"><code>*/</code></span>
<span class="codeline" id="line-8785"><code>typedef struct sqlite3_pcache_methods sqlite3_pcache_methods;</code></span>
<span class="codeline" id="line-8786"><code>struct sqlite3_pcache_methods {</code></span>
<span class="codeline" id="line-8787"><code>  void *pArg;</code></span>
<span class="codeline" id="line-8788"><code>  int (*xInit)(void*);</code></span>
<span class="codeline" id="line-8789"><code>  void (*xShutdown)(void*);</code></span>
<span class="codeline" id="line-8790"><code>  sqlite3_pcache *(*xCreate)(int szPage, int bPurgeable);</code></span>
<span class="codeline" id="line-8791"><code>  void (*xCachesize)(sqlite3_pcache*, int nCachesize);</code></span>
<span class="codeline" id="line-8792"><code>  int (*xPagecount)(sqlite3_pcache*);</code></span>
<span class="codeline" id="line-8793"><code>  void *(*xFetch)(sqlite3_pcache*, unsigned key, int createFlag);</code></span>
<span class="codeline" id="line-8794"><code>  void (*xUnpin)(sqlite3_pcache*, void*, int discard);</code></span>
<span class="codeline" id="line-8795"><code>  void (*xRekey)(sqlite3_pcache*, void*, unsigned oldKey, unsigned newKey);</code></span>
<span class="codeline" id="line-8796"><code>  void (*xTruncate)(sqlite3_pcache*, unsigned iLimit);</code></span>
<span class="codeline" id="line-8797"><code>  void (*xDestroy)(sqlite3_pcache*);</code></span>
<span class="codeline" id="line-8798"><code>};</code></span>
<span class="codeline" id="line-8799"><code></code></span>
<span class="codeline" id="line-8800"><code></code></span>
<span class="codeline" id="line-8801"><code>/*</code></span>
<span class="codeline" id="line-8802"><code>** CAPI3REF: Online Backup Object</code></span>
<span class="codeline" id="line-8803"><code>**</code></span>
<span class="codeline" id="line-8804"><code>** The sqlite3_backup object records state information about an ongoing</code></span>
<span class="codeline" id="line-8805"><code>** online backup operation.  ^The sqlite3_backup object is created by</code></span>
<span class="codeline" id="line-8806"><code>** a call to [sqlite3_backup_init()] and is destroyed by a call to</code></span>
<span class="codeline" id="line-8807"><code>** [sqlite3_backup_finish()].</code></span>
<span class="codeline" id="line-8808"><code>**</code></span>
<span class="codeline" id="line-8809"><code>** See Also: [Using the SQLite Online Backup API]</code></span>
<span class="codeline" id="line-8810"><code>*/</code></span>
<span class="codeline" id="line-8811"><code>typedef struct sqlite3_backup sqlite3_backup;</code></span>
<span class="codeline" id="line-8812"><code></code></span>
<span class="codeline" id="line-8813"><code>/*</code></span>
<span class="codeline" id="line-8814"><code>** CAPI3REF: Online Backup API.</code></span>
<span class="codeline" id="line-8815"><code>**</code></span>
<span class="codeline" id="line-8816"><code>** The backup API copies the content of one database into another.</code></span>
<span class="codeline" id="line-8817"><code>** It is useful either for creating backups of databases or</code></span>
<span class="codeline" id="line-8818"><code>** for copying in-memory databases to or from persistent files.</code></span>
<span class="codeline" id="line-8819"><code>**</code></span>
<span class="codeline" id="line-8820"><code>** See Also: [Using the SQLite Online Backup API]</code></span>
<span class="codeline" id="line-8821"><code>**</code></span>
<span class="codeline" id="line-8822"><code>** ^SQLite holds a write transaction open on the destination database file</code></span>
<span class="codeline" id="line-8823"><code>** for the duration of the backup operation.</code></span>
<span class="codeline" id="line-8824"><code>** ^The source database is read-locked only while it is being read;</code></span>
<span class="codeline" id="line-8825"><code>** it is not locked continuously for the entire backup operation.</code></span>
<span class="codeline" id="line-8826"><code>** ^Thus, the backup may be performed on a live source database without</code></span>
<span class="codeline" id="line-8827"><code>** preventing other database connections from</code></span>
<span class="codeline" id="line-8828"><code>** reading or writing to the source database while the backup is underway.</code></span>
<span class="codeline" id="line-8829"><code>**</code></span>
<span class="codeline" id="line-8830"><code>** ^(To perform a backup operation:</code></span>
<span class="codeline" id="line-8831"><code>**   &lt;ol&gt;</code></span>
<span class="codeline" id="line-8832"><code>**     &lt;li&gt;&lt;b&gt;sqlite3_backup_init()&lt;/b&gt; is called once to initialize the</code></span>
<span class="codeline" id="line-8833"><code>**         backup,</code></span>
<span class="codeline" id="line-8834"><code>**     &lt;li&gt;&lt;b&gt;sqlite3_backup_step()&lt;/b&gt; is called one or more times to transfer</code></span>
<span class="codeline" id="line-8835"><code>**         the data between the two databases, and finally</code></span>
<span class="codeline" id="line-8836"><code>**     &lt;li&gt;&lt;b&gt;sqlite3_backup_finish()&lt;/b&gt; is called to release all resources</code></span>
<span class="codeline" id="line-8837"><code>**         associated with the backup operation.</code></span>
<span class="codeline" id="line-8838"><code>**   &lt;/ol&gt;)^</code></span>
<span class="codeline" id="line-8839"><code>** There should be exactly one call to sqlite3_backup_finish() for each</code></span>
<span class="codeline" id="line-8840"><code>** successful call to sqlite3_backup_init().</code></span>
<span class="codeline" id="line-8841"><code>**</code></span>
<span class="codeline" id="line-8842"><code>** [[sqlite3_backup_init()]] &lt;b&gt;sqlite3_backup_init()&lt;/b&gt;</code></span>
<span class="codeline" id="line-8843"><code>**</code></span>
<span class="codeline" id="line-8844"><code>** ^The D and N arguments to sqlite3_backup_init(D,N,S,M) are the</code></span>
<span class="codeline" id="line-8845"><code>** [database connection] associated with the destination database</code></span>
<span class="codeline" id="line-8846"><code>** and the database name, respectively.</code></span>
<span class="codeline" id="line-8847"><code>** ^The database name is "main" for the main database, "temp" for the</code></span>
<span class="codeline" id="line-8848"><code>** temporary database, or the name specified after the AS keyword in</code></span>
<span class="codeline" id="line-8849"><code>** an [ATTACH] statement for an attached database.</code></span>
<span class="codeline" id="line-8850"><code>** ^The S and M arguments passed to</code></span>
<span class="codeline" id="line-8851"><code>** sqlite3_backup_init(D,N,S,M) identify the [database connection]</code></span>
<span class="codeline" id="line-8852"><code>** and database name of the source database, respectively.</code></span>
<span class="codeline" id="line-8853"><code>** ^The source and destination [database connections] (parameters S and D)</code></span>
<span class="codeline" id="line-8854"><code>** must be different or else sqlite3_backup_init(D,N,S,M) will fail with</code></span>
<span class="codeline" id="line-8855"><code>** an error.</code></span>
<span class="codeline" id="line-8856"><code>**</code></span>
<span class="codeline" id="line-8857"><code>** ^A call to sqlite3_backup_init() will fail, returning NULL, if</code></span>
<span class="codeline" id="line-8858"><code>** there is already a read or read-write transaction open on the</code></span>
<span class="codeline" id="line-8859"><code>** destination database.</code></span>
<span class="codeline" id="line-8860"><code>**</code></span>
<span class="codeline" id="line-8861"><code>** ^If an error occurs within sqlite3_backup_init(D,N,S,M), then NULL is</code></span>
<span class="codeline" id="line-8862"><code>** returned and an error code and error message are stored in the</code></span>
<span class="codeline" id="line-8863"><code>** destination [database connection] D.</code></span>
<span class="codeline" id="line-8864"><code>** ^The error code and message for the failed call to sqlite3_backup_init()</code></span>
<span class="codeline" id="line-8865"><code>** can be retrieved using the [sqlite3_errcode()], [sqlite3_errmsg()], and/or</code></span>
<span class="codeline" id="line-8866"><code>** [sqlite3_errmsg16()] functions.</code></span>
<span class="codeline" id="line-8867"><code>** ^A successful call to sqlite3_backup_init() returns a pointer to an</code></span>
<span class="codeline" id="line-8868"><code>** [sqlite3_backup] object.</code></span>
<span class="codeline" id="line-8869"><code>** ^The [sqlite3_backup] object may be used with the sqlite3_backup_step() and</code></span>
<span class="codeline" id="line-8870"><code>** sqlite3_backup_finish() functions to perform the specified backup</code></span>
<span class="codeline" id="line-8871"><code>** operation.</code></span>
<span class="codeline" id="line-8872"><code>**</code></span>
<span class="codeline" id="line-8873"><code>** [[sqlite3_backup_step()]] &lt;b&gt;sqlite3_backup_step()&lt;/b&gt;</code></span>
<span class="codeline" id="line-8874"><code>**</code></span>
<span class="codeline" id="line-8875"><code>** ^Function sqlite3_backup_step(B,N) will copy up to N pages between</code></span>
<span class="codeline" id="line-8876"><code>** the source and destination databases specified by [sqlite3_backup] object B.</code></span>
<span class="codeline" id="line-8877"><code>** ^If N is negative, all remaining source pages are copied.</code></span>
<span class="codeline" id="line-8878"><code>** ^If sqlite3_backup_step(B,N) successfully copies N pages and there</code></span>
<span class="codeline" id="line-8879"><code>** are still more pages to be copied, then the function returns [SQLITE_OK].</code></span>
<span class="codeline" id="line-8880"><code>** ^If sqlite3_backup_step(B,N) successfully finishes copying all pages</code></span>
<span class="codeline" id="line-8881"><code>** from source to destination, then it returns [SQLITE_DONE].</code></span>
<span class="codeline" id="line-8882"><code>** ^If an error occurs while running sqlite3_backup_step(B,N),</code></span>
<span class="codeline" id="line-8883"><code>** then an [error code] is returned. ^As well as [SQLITE_OK] and</code></span>
<span class="codeline" id="line-8884"><code>** [SQLITE_DONE], a call to sqlite3_backup_step() may return [SQLITE_READONLY],</code></span>
<span class="codeline" id="line-8885"><code>** [SQLITE_NOMEM], [SQLITE_BUSY], [SQLITE_LOCKED], or an</code></span>
<span class="codeline" id="line-8886"><code>** [SQLITE_IOERR_ACCESS | SQLITE_IOERR_XXX] extended error code.</code></span>
<span class="codeline" id="line-8887"><code>**</code></span>
<span class="codeline" id="line-8888"><code>** ^(The sqlite3_backup_step() might return [SQLITE_READONLY] if</code></span>
<span class="codeline" id="line-8889"><code>** &lt;ol&gt;</code></span>
<span class="codeline" id="line-8890"><code>** &lt;li&gt; the destination database was opened read-only, or</code></span>
<span class="codeline" id="line-8891"><code>** &lt;li&gt; the destination database is using write-ahead-log journaling</code></span>
<span class="codeline" id="line-8892"><code>** and the destination and source page sizes differ, or</code></span>
<span class="codeline" id="line-8893"><code>** &lt;li&gt; the destination database is an in-memory database and the</code></span>
<span class="codeline" id="line-8894"><code>** destination and source page sizes differ.</code></span>
<span class="codeline" id="line-8895"><code>** &lt;/ol&gt;)^</code></span>
<span class="codeline" id="line-8896"><code>**</code></span>
<span class="codeline" id="line-8897"><code>** ^If sqlite3_backup_step() cannot obtain a required file-system lock, then</code></span>
<span class="codeline" id="line-8898"><code>** the [sqlite3_busy_handler | busy-handler function]</code></span>
<span class="codeline" id="line-8899"><code>** is invoked (if one is specified). ^If the</code></span>
<span class="codeline" id="line-8900"><code>** busy-handler returns non-zero before the lock is available, then</code></span>
<span class="codeline" id="line-8901"><code>** [SQLITE_BUSY] is returned to the caller. ^In this case the call to</code></span>
<span class="codeline" id="line-8902"><code>** sqlite3_backup_step() can be retried later. ^If the source</code></span>
<span class="codeline" id="line-8903"><code>** [database connection]</code></span>
<span class="codeline" id="line-8904"><code>** is being used to write to the source database when sqlite3_backup_step()</code></span>
<span class="codeline" id="line-8905"><code>** is called, then [SQLITE_LOCKED] is returned immediately. ^Again, in this</code></span>
<span class="codeline" id="line-8906"><code>** case the call to sqlite3_backup_step() can be retried later on. ^(If</code></span>
<span class="codeline" id="line-8907"><code>** [SQLITE_IOERR_ACCESS | SQLITE_IOERR_XXX], [SQLITE_NOMEM], or</code></span>
<span class="codeline" id="line-8908"><code>** [SQLITE_READONLY] is returned, then</code></span>
<span class="codeline" id="line-8909"><code>** there is no point in retrying the call to sqlite3_backup_step(). These</code></span>
<span class="codeline" id="line-8910"><code>** errors are considered fatal.)^  The application must accept</code></span>
<span class="codeline" id="line-8911"><code>** that the backup operation has failed and pass the backup operation handle</code></span>
<span class="codeline" id="line-8912"><code>** to the sqlite3_backup_finish() to release associated resources.</code></span>
<span class="codeline" id="line-8913"><code>**</code></span>
<span class="codeline" id="line-8914"><code>** ^The first call to sqlite3_backup_step() obtains an exclusive lock</code></span>
<span class="codeline" id="line-8915"><code>** on the destination file. ^The exclusive lock is not released until either</code></span>
<span class="codeline" id="line-8916"><code>** sqlite3_backup_finish() is called or the backup operation is complete</code></span>
<span class="codeline" id="line-8917"><code>** and sqlite3_backup_step() returns [SQLITE_DONE].  ^Every call to</code></span>
<span class="codeline" id="line-8918"><code>** sqlite3_backup_step() obtains a [shared lock] on the source database that</code></span>
<span class="codeline" id="line-8919"><code>** lasts for the duration of the sqlite3_backup_step() call.</code></span>
<span class="codeline" id="line-8920"><code>** ^Because the source database is not locked between calls to</code></span>
<span class="codeline" id="line-8921"><code>** sqlite3_backup_step(), the source database may be modified mid-way</code></span>
<span class="codeline" id="line-8922"><code>** through the backup process.  ^If the source database is modified by an</code></span>
<span class="codeline" id="line-8923"><code>** external process or via a database connection other than the one being</code></span>
<span class="codeline" id="line-8924"><code>** used by the backup operation, then the backup will be automatically</code></span>
<span class="codeline" id="line-8925"><code>** restarted by the next call to sqlite3_backup_step(). ^If the source</code></span>
<span class="codeline" id="line-8926"><code>** database is modified by the using the same database connection as is used</code></span>
<span class="codeline" id="line-8927"><code>** by the backup operation, then the backup database is automatically</code></span>
<span class="codeline" id="line-8928"><code>** updated at the same time.</code></span>
<span class="codeline" id="line-8929"><code>**</code></span>
<span class="codeline" id="line-8930"><code>** [[sqlite3_backup_finish()]] &lt;b&gt;sqlite3_backup_finish()&lt;/b&gt;</code></span>
<span class="codeline" id="line-8931"><code>**</code></span>
<span class="codeline" id="line-8932"><code>** When sqlite3_backup_step() has returned [SQLITE_DONE], or when the</code></span>
<span class="codeline" id="line-8933"><code>** application wishes to abandon the backup operation, the application</code></span>
<span class="codeline" id="line-8934"><code>** should destroy the [sqlite3_backup] by passing it to sqlite3_backup_finish().</code></span>
<span class="codeline" id="line-8935"><code>** ^The sqlite3_backup_finish() interfaces releases all</code></span>
<span class="codeline" id="line-8936"><code>** resources associated with the [sqlite3_backup] object.</code></span>
<span class="codeline" id="line-8937"><code>** ^If sqlite3_backup_step() has not yet returned [SQLITE_DONE], then any</code></span>
<span class="codeline" id="line-8938"><code>** active write-transaction on the destination database is rolled back.</code></span>
<span class="codeline" id="line-8939"><code>** The [sqlite3_backup] object is invalid</code></span>
<span class="codeline" id="line-8940"><code>** and may not be used following a call to sqlite3_backup_finish().</code></span>
<span class="codeline" id="line-8941"><code>**</code></span>
<span class="codeline" id="line-8942"><code>** ^The value returned by sqlite3_backup_finish is [SQLITE_OK] if no</code></span>
<span class="codeline" id="line-8943"><code>** sqlite3_backup_step() errors occurred, regardless or whether or not</code></span>
<span class="codeline" id="line-8944"><code>** sqlite3_backup_step() completed.</code></span>
<span class="codeline" id="line-8945"><code>** ^If an out-of-memory condition or IO error occurred during any prior</code></span>
<span class="codeline" id="line-8946"><code>** sqlite3_backup_step() call on the same [sqlite3_backup] object, then</code></span>
<span class="codeline" id="line-8947"><code>** sqlite3_backup_finish() returns the corresponding [error code].</code></span>
<span class="codeline" id="line-8948"><code>**</code></span>
<span class="codeline" id="line-8949"><code>** ^A return of [SQLITE_BUSY] or [SQLITE_LOCKED] from sqlite3_backup_step()</code></span>
<span class="codeline" id="line-8950"><code>** is not a permanent error and does not affect the return value of</code></span>
<span class="codeline" id="line-8951"><code>** sqlite3_backup_finish().</code></span>
<span class="codeline" id="line-8952"><code>**</code></span>
<span class="codeline" id="line-8953"><code>** [[sqlite3_backup_remaining()]] [[sqlite3_backup_pagecount()]]</code></span>
<span class="codeline" id="line-8954"><code>** &lt;b&gt;sqlite3_backup_remaining() and sqlite3_backup_pagecount()&lt;/b&gt;</code></span>
<span class="codeline" id="line-8955"><code>**</code></span>
<span class="codeline" id="line-8956"><code>** ^The sqlite3_backup_remaining() routine returns the number of pages still</code></span>
<span class="codeline" id="line-8957"><code>** to be backed up at the conclusion of the most recent sqlite3_backup_step().</code></span>
<span class="codeline" id="line-8958"><code>** ^The sqlite3_backup_pagecount() routine returns the total number of pages</code></span>
<span class="codeline" id="line-8959"><code>** in the source database at the conclusion of the most recent</code></span>
<span class="codeline" id="line-8960"><code>** sqlite3_backup_step().</code></span>
<span class="codeline" id="line-8961"><code>** ^(The values returned by these functions are only updated by</code></span>
<span class="codeline" id="line-8962"><code>** sqlite3_backup_step(). If the source database is modified in a way that</code></span>
<span class="codeline" id="line-8963"><code>** changes the size of the source database or the number of pages remaining,</code></span>
<span class="codeline" id="line-8964"><code>** those changes are not reflected in the output of sqlite3_backup_pagecount()</code></span>
<span class="codeline" id="line-8965"><code>** and sqlite3_backup_remaining() until after the next</code></span>
<span class="codeline" id="line-8966"><code>** sqlite3_backup_step().)^</code></span>
<span class="codeline" id="line-8967"><code>**</code></span>
<span class="codeline" id="line-8968"><code>** &lt;b&gt;Concurrent Usage of Database Handles&lt;/b&gt;</code></span>
<span class="codeline" id="line-8969"><code>**</code></span>
<span class="codeline" id="line-8970"><code>** ^The source [database connection] may be used by the application for other</code></span>
<span class="codeline" id="line-8971"><code>** purposes while a backup operation is underway or being initialized.</code></span>
<span class="codeline" id="line-8972"><code>** ^If SQLite is compiled and configured to support threadsafe database</code></span>
<span class="codeline" id="line-8973"><code>** connections, then the source database connection may be used concurrently</code></span>
<span class="codeline" id="line-8974"><code>** from within other threads.</code></span>
<span class="codeline" id="line-8975"><code>**</code></span>
<span class="codeline" id="line-8976"><code>** However, the application must guarantee that the destination</code></span>
<span class="codeline" id="line-8977"><code>** [database connection] is not passed to any other API (by any thread) after</code></span>
<span class="codeline" id="line-8978"><code>** sqlite3_backup_init() is called and before the corresponding call to</code></span>
<span class="codeline" id="line-8979"><code>** sqlite3_backup_finish().  SQLite does not currently check to see</code></span>
<span class="codeline" id="line-8980"><code>** if the application incorrectly accesses the destination [database connection]</code></span>
<span class="codeline" id="line-8981"><code>** and so no error code is reported, but the operations may malfunction</code></span>
<span class="codeline" id="line-8982"><code>** nevertheless.  Use of the destination database connection while a</code></span>
<span class="codeline" id="line-8983"><code>** backup is in progress might also also cause a mutex deadlock.</code></span>
<span class="codeline" id="line-8984"><code>**</code></span>
<span class="codeline" id="line-8985"><code>** If running in [shared cache mode], the application must</code></span>
<span class="codeline" id="line-8986"><code>** guarantee that the shared cache used by the destination database</code></span>
<span class="codeline" id="line-8987"><code>** is not accessed while the backup is running. In practice this means</code></span>
<span class="codeline" id="line-8988"><code>** that the application must guarantee that the disk file being</code></span>
<span class="codeline" id="line-8989"><code>** backed up to is not accessed by any connection within the process,</code></span>
<span class="codeline" id="line-8990"><code>** not just the specific connection that was passed to sqlite3_backup_init().</code></span>
<span class="codeline" id="line-8991"><code>**</code></span>
<span class="codeline" id="line-8992"><code>** The [sqlite3_backup] object itself is partially threadsafe. Multiple</code></span>
<span class="codeline" id="line-8993"><code>** threads may safely make multiple concurrent calls to sqlite3_backup_step().</code></span>
<span class="codeline" id="line-8994"><code>** However, the sqlite3_backup_remaining() and sqlite3_backup_pagecount()</code></span>
<span class="codeline" id="line-8995"><code>** APIs are not strictly speaking threadsafe. If they are invoked at the</code></span>
<span class="codeline" id="line-8996"><code>** same time as another thread is invoking sqlite3_backup_step() it is</code></span>
<span class="codeline" id="line-8997"><code>** possible that they return invalid values.</code></span>
<span class="codeline" id="line-8998"><code>*/</code></span>
<span class="codeline" id="line-8999"><code>SQLITE_API sqlite3_backup *sqlite3_backup_init(</code></span>
<span class="codeline" id="line-9000"><code>  sqlite3 *pDest,                        /* Destination database handle */</code></span>
<span class="codeline" id="line-9001"><code>  const char *zDestName,                 /* Destination database name */</code></span>
<span class="codeline" id="line-9002"><code>  sqlite3 *pSource,                      /* Source database handle */</code></span>
<span class="codeline" id="line-9003"><code>  const char *zSourceName                /* Source database name */</code></span>
<span class="codeline" id="line-9004"><code>);</code></span>
<span class="codeline" id="line-9005"><code>SQLITE_API int sqlite3_backup_step(sqlite3_backup *p, int nPage);</code></span>
<span class="codeline" id="line-9006"><code>SQLITE_API int sqlite3_backup_finish(sqlite3_backup *p);</code></span>
<span class="codeline" id="line-9007"><code>SQLITE_API int sqlite3_backup_remaining(sqlite3_backup *p);</code></span>
<span class="codeline" id="line-9008"><code>SQLITE_API int sqlite3_backup_pagecount(sqlite3_backup *p);</code></span>
<span class="codeline" id="line-9009"><code></code></span>
<span class="codeline" id="line-9010"><code>/*</code></span>
<span class="codeline" id="line-9011"><code>** CAPI3REF: Unlock Notification</code></span>
<span class="codeline" id="line-9012"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-9013"><code>**</code></span>
<span class="codeline" id="line-9014"><code>** ^When running in shared-cache mode, a database operation may fail with</code></span>
<span class="codeline" id="line-9015"><code>** an [SQLITE_LOCKED] error if the required locks on the shared-cache or</code></span>
<span class="codeline" id="line-9016"><code>** individual tables within the shared-cache cannot be obtained. See</code></span>
<span class="codeline" id="line-9017"><code>** [SQLite Shared-Cache Mode] for a description of shared-cache locking.</code></span>
<span class="codeline" id="line-9018"><code>** ^This API may be used to register a callback that SQLite will invoke</code></span>
<span class="codeline" id="line-9019"><code>** when the connection currently holding the required lock relinquishes it.</code></span>
<span class="codeline" id="line-9020"><code>** ^This API is only available if the library was compiled with the</code></span>
<span class="codeline" id="line-9021"><code>** [SQLITE_ENABLE_UNLOCK_NOTIFY] C-preprocessor symbol defined.</code></span>
<span class="codeline" id="line-9022"><code>**</code></span>
<span class="codeline" id="line-9023"><code>** See Also: [Using the SQLite Unlock Notification Feature].</code></span>
<span class="codeline" id="line-9024"><code>**</code></span>
<span class="codeline" id="line-9025"><code>** ^Shared-cache locks are released when a database connection concludes</code></span>
<span class="codeline" id="line-9026"><code>** its current transaction, either by committing it or rolling it back.</code></span>
<span class="codeline" id="line-9027"><code>**</code></span>
<span class="codeline" id="line-9028"><code>** ^When a connection (known as the blocked connection) fails to obtain a</code></span>
<span class="codeline" id="line-9029"><code>** shared-cache lock and SQLITE_LOCKED is returned to the caller, the</code></span>
<span class="codeline" id="line-9030"><code>** identity of the database connection (the blocking connection) that</code></span>
<span class="codeline" id="line-9031"><code>** has locked the required resource is stored internally. ^After an</code></span>
<span class="codeline" id="line-9032"><code>** application receives an SQLITE_LOCKED error, it may call the</code></span>
<span class="codeline" id="line-9033"><code>** sqlite3_unlock_notify() method with the blocked connection handle as</code></span>
<span class="codeline" id="line-9034"><code>** the first argument to register for a callback that will be invoked</code></span>
<span class="codeline" id="line-9035"><code>** when the blocking connections current transaction is concluded. ^The</code></span>
<span class="codeline" id="line-9036"><code>** callback is invoked from within the [sqlite3_step] or [sqlite3_close]</code></span>
<span class="codeline" id="line-9037"><code>** call that concludes the blocking connection's transaction.</code></span>
<span class="codeline" id="line-9038"><code>**</code></span>
<span class="codeline" id="line-9039"><code>** ^(If sqlite3_unlock_notify() is called in a multi-threaded application,</code></span>
<span class="codeline" id="line-9040"><code>** there is a chance that the blocking connection will have already</code></span>
<span class="codeline" id="line-9041"><code>** concluded its transaction by the time sqlite3_unlock_notify() is invoked.</code></span>
<span class="codeline" id="line-9042"><code>** If this happens, then the specified callback is invoked immediately,</code></span>
<span class="codeline" id="line-9043"><code>** from within the call to sqlite3_unlock_notify().)^</code></span>
<span class="codeline" id="line-9044"><code>**</code></span>
<span class="codeline" id="line-9045"><code>** ^If the blocked connection is attempting to obtain a write-lock on a</code></span>
<span class="codeline" id="line-9046"><code>** shared-cache table, and more than one other connection currently holds</code></span>
<span class="codeline" id="line-9047"><code>** a read-lock on the same table, then SQLite arbitrarily selects one of</code></span>
<span class="codeline" id="line-9048"><code>** the other connections to use as the blocking connection.</code></span>
<span class="codeline" id="line-9049"><code>**</code></span>
<span class="codeline" id="line-9050"><code>** ^(There may be at most one unlock-notify callback registered by a</code></span>
<span class="codeline" id="line-9051"><code>** blocked connection. If sqlite3_unlock_notify() is called when the</code></span>
<span class="codeline" id="line-9052"><code>** blocked connection already has a registered unlock-notify callback,</code></span>
<span class="codeline" id="line-9053"><code>** then the new callback replaces the old.)^ ^If sqlite3_unlock_notify() is</code></span>
<span class="codeline" id="line-9054"><code>** called with a NULL pointer as its second argument, then any existing</code></span>
<span class="codeline" id="line-9055"><code>** unlock-notify callback is canceled. ^The blocked connections</code></span>
<span class="codeline" id="line-9056"><code>** unlock-notify callback may also be canceled by closing the blocked</code></span>
<span class="codeline" id="line-9057"><code>** connection using [sqlite3_close()].</code></span>
<span class="codeline" id="line-9058"><code>**</code></span>
<span class="codeline" id="line-9059"><code>** The unlock-notify callback is not reentrant. If an application invokes</code></span>
<span class="codeline" id="line-9060"><code>** any sqlite3_xxx API functions from within an unlock-notify callback, a</code></span>
<span class="codeline" id="line-9061"><code>** crash or deadlock may be the result.</code></span>
<span class="codeline" id="line-9062"><code>**</code></span>
<span class="codeline" id="line-9063"><code>** ^Unless deadlock is detected (see below), sqlite3_unlock_notify() always</code></span>
<span class="codeline" id="line-9064"><code>** returns SQLITE_OK.</code></span>
<span class="codeline" id="line-9065"><code>**</code></span>
<span class="codeline" id="line-9066"><code>** &lt;b&gt;Callback Invocation Details&lt;/b&gt;</code></span>
<span class="codeline" id="line-9067"><code>**</code></span>
<span class="codeline" id="line-9068"><code>** When an unlock-notify callback is registered, the application provides a</code></span>
<span class="codeline" id="line-9069"><code>** single void* pointer that is passed to the callback when it is invoked.</code></span>
<span class="codeline" id="line-9070"><code>** However, the signature of the callback function allows SQLite to pass</code></span>
<span class="codeline" id="line-9071"><code>** it an array of void* context pointers. The first argument passed to</code></span>
<span class="codeline" id="line-9072"><code>** an unlock-notify callback is a pointer to an array of void* pointers,</code></span>
<span class="codeline" id="line-9073"><code>** and the second is the number of entries in the array.</code></span>
<span class="codeline" id="line-9074"><code>**</code></span>
<span class="codeline" id="line-9075"><code>** When a blocking connection's transaction is concluded, there may be</code></span>
<span class="codeline" id="line-9076"><code>** more than one blocked connection that has registered for an unlock-notify</code></span>
<span class="codeline" id="line-9077"><code>** callback. ^If two or more such blocked connections have specified the</code></span>
<span class="codeline" id="line-9078"><code>** same callback function, then instead of invoking the callback function</code></span>
<span class="codeline" id="line-9079"><code>** multiple times, it is invoked once with the set of void* context pointers</code></span>
<span class="codeline" id="line-9080"><code>** specified by the blocked connections bundled together into an array.</code></span>
<span class="codeline" id="line-9081"><code>** This gives the application an opportunity to prioritize any actions</code></span>
<span class="codeline" id="line-9082"><code>** related to the set of unblocked database connections.</code></span>
<span class="codeline" id="line-9083"><code>**</code></span>
<span class="codeline" id="line-9084"><code>** &lt;b&gt;Deadlock Detection&lt;/b&gt;</code></span>
<span class="codeline" id="line-9085"><code>**</code></span>
<span class="codeline" id="line-9086"><code>** Assuming that after registering for an unlock-notify callback a</code></span>
<span class="codeline" id="line-9087"><code>** database waits for the callback to be issued before taking any further</code></span>
<span class="codeline" id="line-9088"><code>** action (a reasonable assumption), then using this API may cause the</code></span>
<span class="codeline" id="line-9089"><code>** application to deadlock. For example, if connection X is waiting for</code></span>
<span class="codeline" id="line-9090"><code>** connection Y's transaction to be concluded, and similarly connection</code></span>
<span class="codeline" id="line-9091"><code>** Y is waiting on connection X's transaction, then neither connection</code></span>
<span class="codeline" id="line-9092"><code>** will proceed and the system may remain deadlocked indefinitely.</code></span>
<span class="codeline" id="line-9093"><code>**</code></span>
<span class="codeline" id="line-9094"><code>** To avoid this scenario, the sqlite3_unlock_notify() performs deadlock</code></span>
<span class="codeline" id="line-9095"><code>** detection. ^If a given call to sqlite3_unlock_notify() would put the</code></span>
<span class="codeline" id="line-9096"><code>** system in a deadlocked state, then SQLITE_LOCKED is returned and no</code></span>
<span class="codeline" id="line-9097"><code>** unlock-notify callback is registered. The system is said to be in</code></span>
<span class="codeline" id="line-9098"><code>** a deadlocked state if connection A has registered for an unlock-notify</code></span>
<span class="codeline" id="line-9099"><code>** callback on the conclusion of connection B's transaction, and connection</code></span>
<span class="codeline" id="line-9100"><code>** B has itself registered for an unlock-notify callback when connection</code></span>
<span class="codeline" id="line-9101"><code>** A's transaction is concluded. ^Indirect deadlock is also detected, so</code></span>
<span class="codeline" id="line-9102"><code>** the system is also considered to be deadlocked if connection B has</code></span>
<span class="codeline" id="line-9103"><code>** registered for an unlock-notify callback on the conclusion of connection</code></span>
<span class="codeline" id="line-9104"><code>** C's transaction, where connection C is waiting on connection A. ^Any</code></span>
<span class="codeline" id="line-9105"><code>** number of levels of indirection are allowed.</code></span>
<span class="codeline" id="line-9106"><code>**</code></span>
<span class="codeline" id="line-9107"><code>** &lt;b&gt;The "DROP TABLE" Exception&lt;/b&gt;</code></span>
<span class="codeline" id="line-9108"><code>**</code></span>
<span class="codeline" id="line-9109"><code>** When a call to [sqlite3_step()] returns SQLITE_LOCKED, it is almost</code></span>
<span class="codeline" id="line-9110"><code>** always appropriate to call sqlite3_unlock_notify(). There is however,</code></span>
<span class="codeline" id="line-9111"><code>** one exception. When executing a "DROP TABLE" or "DROP INDEX" statement,</code></span>
<span class="codeline" id="line-9112"><code>** SQLite checks if there are any currently executing SELECT statements</code></span>
<span class="codeline" id="line-9113"><code>** that belong to the same connection. If there are, SQLITE_LOCKED is</code></span>
<span class="codeline" id="line-9114"><code>** returned. In this case there is no "blocking connection", so invoking</code></span>
<span class="codeline" id="line-9115"><code>** sqlite3_unlock_notify() results in the unlock-notify callback being</code></span>
<span class="codeline" id="line-9116"><code>** invoked immediately. If the application then re-attempts the "DROP TABLE"</code></span>
<span class="codeline" id="line-9117"><code>** or "DROP INDEX" query, an infinite loop might be the result.</code></span>
<span class="codeline" id="line-9118"><code>**</code></span>
<span class="codeline" id="line-9119"><code>** One way around this problem is to check the extended error code returned</code></span>
<span class="codeline" id="line-9120"><code>** by an sqlite3_step() call. ^(If there is a blocking connection, then the</code></span>
<span class="codeline" id="line-9121"><code>** extended error code is set to SQLITE_LOCKED_SHAREDCACHE. Otherwise, in</code></span>
<span class="codeline" id="line-9122"><code>** the special "DROP TABLE/INDEX" case, the extended error code is just</code></span>
<span class="codeline" id="line-9123"><code>** SQLITE_LOCKED.)^</code></span>
<span class="codeline" id="line-9124"><code>*/</code></span>
<span class="codeline" id="line-9125"><code>SQLITE_API int sqlite3_unlock_notify(</code></span>
<span class="codeline" id="line-9126"><code>  sqlite3 *pBlocked,                          /* Waiting connection */</code></span>
<span class="codeline" id="line-9127"><code>  void (*xNotify)(void **apArg, int nArg),    /* Callback function to invoke */</code></span>
<span class="codeline" id="line-9128"><code>  void *pNotifyArg                            /* Argument to pass to xNotify */</code></span>
<span class="codeline" id="line-9129"><code>);</code></span>
<span class="codeline" id="line-9130"><code></code></span>
<span class="codeline" id="line-9131"><code></code></span>
<span class="codeline" id="line-9132"><code>/*</code></span>
<span class="codeline" id="line-9133"><code>** CAPI3REF: String Comparison</code></span>
<span class="codeline" id="line-9134"><code>**</code></span>
<span class="codeline" id="line-9135"><code>** ^The [sqlite3_stricmp()] and [sqlite3_strnicmp()] APIs allow applications</code></span>
<span class="codeline" id="line-9136"><code>** and extensions to compare the contents of two buffers containing UTF-8</code></span>
<span class="codeline" id="line-9137"><code>** strings in a case-independent fashion, using the same definition of "case</code></span>
<span class="codeline" id="line-9138"><code>** independence" that SQLite uses internally when comparing identifiers.</code></span>
<span class="codeline" id="line-9139"><code>*/</code></span>
<span class="codeline" id="line-9140"><code>SQLITE_API int sqlite3_stricmp(const char *, const char *);</code></span>
<span class="codeline" id="line-9141"><code>SQLITE_API int sqlite3_strnicmp(const char *, const char *, int);</code></span>
<span class="codeline" id="line-9142"><code></code></span>
<span class="codeline" id="line-9143"><code>/*</code></span>
<span class="codeline" id="line-9144"><code>** CAPI3REF: String Globbing</code></span>
<span class="codeline" id="line-9145"><code>*</code></span>
<span class="codeline" id="line-9146"><code>** ^The [sqlite3_strglob(P,X)] interface returns zero if and only if</code></span>
<span class="codeline" id="line-9147"><code>** string X matches the [GLOB] pattern P.</code></span>
<span class="codeline" id="line-9148"><code>** ^The definition of [GLOB] pattern matching used in</code></span>
<span class="codeline" id="line-9149"><code>** [sqlite3_strglob(P,X)] is the same as for the "X GLOB P" operator in the</code></span>
<span class="codeline" id="line-9150"><code>** SQL dialect understood by SQLite.  ^The [sqlite3_strglob(P,X)] function</code></span>
<span class="codeline" id="line-9151"><code>** is case sensitive.</code></span>
<span class="codeline" id="line-9152"><code>**</code></span>
<span class="codeline" id="line-9153"><code>** Note that this routine returns zero on a match and non-zero if the strings</code></span>
<span class="codeline" id="line-9154"><code>** do not match, the same as [sqlite3_stricmp()] and [sqlite3_strnicmp()].</code></span>
<span class="codeline" id="line-9155"><code>**</code></span>
<span class="codeline" id="line-9156"><code>** See also: [sqlite3_strlike()].</code></span>
<span class="codeline" id="line-9157"><code>*/</code></span>
<span class="codeline" id="line-9158"><code>SQLITE_API int sqlite3_strglob(const char *zGlob, const char *zStr);</code></span>
<span class="codeline" id="line-9159"><code></code></span>
<span class="codeline" id="line-9160"><code>/*</code></span>
<span class="codeline" id="line-9161"><code>** CAPI3REF: String LIKE Matching</code></span>
<span class="codeline" id="line-9162"><code>*</code></span>
<span class="codeline" id="line-9163"><code>** ^The [sqlite3_strlike(P,X,E)] interface returns zero if and only if</code></span>
<span class="codeline" id="line-9164"><code>** string X matches the [LIKE] pattern P with escape character E.</code></span>
<span class="codeline" id="line-9165"><code>** ^The definition of [LIKE] pattern matching used in</code></span>
<span class="codeline" id="line-9166"><code>** [sqlite3_strlike(P,X,E)] is the same as for the "X LIKE P ESCAPE E"</code></span>
<span class="codeline" id="line-9167"><code>** operator in the SQL dialect understood by SQLite.  ^For "X LIKE P" without</code></span>
<span class="codeline" id="line-9168"><code>** the ESCAPE clause, set the E parameter of [sqlite3_strlike(P,X,E)] to 0.</code></span>
<span class="codeline" id="line-9169"><code>** ^As with the LIKE operator, the [sqlite3_strlike(P,X,E)] function is case</code></span>
<span class="codeline" id="line-9170"><code>** insensitive - equivalent upper and lower case ASCII characters match</code></span>
<span class="codeline" id="line-9171"><code>** one another.</code></span>
<span class="codeline" id="line-9172"><code>**</code></span>
<span class="codeline" id="line-9173"><code>** ^The [sqlite3_strlike(P,X,E)] function matches Unicode characters, though</code></span>
<span class="codeline" id="line-9174"><code>** only ASCII characters are case folded.</code></span>
<span class="codeline" id="line-9175"><code>**</code></span>
<span class="codeline" id="line-9176"><code>** Note that this routine returns zero on a match and non-zero if the strings</code></span>
<span class="codeline" id="line-9177"><code>** do not match, the same as [sqlite3_stricmp()] and [sqlite3_strnicmp()].</code></span>
<span class="codeline" id="line-9178"><code>**</code></span>
<span class="codeline" id="line-9179"><code>** See also: [sqlite3_strglob()].</code></span>
<span class="codeline" id="line-9180"><code>*/</code></span>
<span class="codeline" id="line-9181"><code>SQLITE_API int sqlite3_strlike(const char *zGlob, const char *zStr, unsigned int cEsc);</code></span>
<span class="codeline" id="line-9182"><code></code></span>
<span class="codeline" id="line-9183"><code>/*</code></span>
<span class="codeline" id="line-9184"><code>** CAPI3REF: Error Logging Interface</code></span>
<span class="codeline" id="line-9185"><code>**</code></span>
<span class="codeline" id="line-9186"><code>** ^The [sqlite3_log()] interface writes a message into the [error log]</code></span>
<span class="codeline" id="line-9187"><code>** established by the [SQLITE_CONFIG_LOG] option to [sqlite3_config()].</code></span>
<span class="codeline" id="line-9188"><code>** ^If logging is enabled, the zFormat string and subsequent arguments are</code></span>
<span class="codeline" id="line-9189"><code>** used with [sqlite3_snprintf()] to generate the final output string.</code></span>
<span class="codeline" id="line-9190"><code>**</code></span>
<span class="codeline" id="line-9191"><code>** The sqlite3_log() interface is intended for use by extensions such as</code></span>
<span class="codeline" id="line-9192"><code>** virtual tables, collating functions, and SQL functions.  While there is</code></span>
<span class="codeline" id="line-9193"><code>** nothing to prevent an application from calling sqlite3_log(), doing so</code></span>
<span class="codeline" id="line-9194"><code>** is considered bad form.</code></span>
<span class="codeline" id="line-9195"><code>**</code></span>
<span class="codeline" id="line-9196"><code>** The zFormat string must not be NULL.</code></span>
<span class="codeline" id="line-9197"><code>**</code></span>
<span class="codeline" id="line-9198"><code>** To avoid deadlocks and other threading problems, the sqlite3_log() routine</code></span>
<span class="codeline" id="line-9199"><code>** will not use dynamically allocated memory.  The log message is stored in</code></span>
<span class="codeline" id="line-9200"><code>** a fixed-length buffer on the stack.  If the log message is longer than</code></span>
<span class="codeline" id="line-9201"><code>** a few hundred characters, it will be truncated to the length of the</code></span>
<span class="codeline" id="line-9202"><code>** buffer.</code></span>
<span class="codeline" id="line-9203"><code>*/</code></span>
<span class="codeline" id="line-9204"><code>SQLITE_API void sqlite3_log(int iErrCode, const char *zFormat, ...);</code></span>
<span class="codeline" id="line-9205"><code></code></span>
<span class="codeline" id="line-9206"><code>/*</code></span>
<span class="codeline" id="line-9207"><code>** CAPI3REF: Write-Ahead Log Commit Hook</code></span>
<span class="codeline" id="line-9208"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-9209"><code>**</code></span>
<span class="codeline" id="line-9210"><code>** ^The [sqlite3_wal_hook()] function is used to register a callback that</code></span>
<span class="codeline" id="line-9211"><code>** is invoked each time data is committed to a database in wal mode.</code></span>
<span class="codeline" id="line-9212"><code>**</code></span>
<span class="codeline" id="line-9213"><code>** ^(The callback is invoked by SQLite after the commit has taken place and</code></span>
<span class="codeline" id="line-9214"><code>** the associated write-lock on the database released)^, so the implementation</code></span>
<span class="codeline" id="line-9215"><code>** may read, write or [checkpoint] the database as required.</code></span>
<span class="codeline" id="line-9216"><code>**</code></span>
<span class="codeline" id="line-9217"><code>** ^The first parameter passed to the callback function when it is invoked</code></span>
<span class="codeline" id="line-9218"><code>** is a copy of the third parameter passed to sqlite3_wal_hook() when</code></span>
<span class="codeline" id="line-9219"><code>** registering the callback. ^The second is a copy of the database handle.</code></span>
<span class="codeline" id="line-9220"><code>** ^The third parameter is the name of the database that was written to -</code></span>
<span class="codeline" id="line-9221"><code>** either "main" or the name of an [ATTACH]-ed database. ^The fourth parameter</code></span>
<span class="codeline" id="line-9222"><code>** is the number of pages currently in the write-ahead log file,</code></span>
<span class="codeline" id="line-9223"><code>** including those that were just committed.</code></span>
<span class="codeline" id="line-9224"><code>**</code></span>
<span class="codeline" id="line-9225"><code>** The callback function should normally return [SQLITE_OK].  ^If an error</code></span>
<span class="codeline" id="line-9226"><code>** code is returned, that error will propagate back up through the</code></span>
<span class="codeline" id="line-9227"><code>** SQLite code base to cause the statement that provoked the callback</code></span>
<span class="codeline" id="line-9228"><code>** to report an error, though the commit will have still occurred. If the</code></span>
<span class="codeline" id="line-9229"><code>** callback returns [SQLITE_ROW] or [SQLITE_DONE], or if it returns a value</code></span>
<span class="codeline" id="line-9230"><code>** that does not correspond to any valid SQLite error code, the results</code></span>
<span class="codeline" id="line-9231"><code>** are undefined.</code></span>
<span class="codeline" id="line-9232"><code>**</code></span>
<span class="codeline" id="line-9233"><code>** A single database handle may have at most a single write-ahead log callback</code></span>
<span class="codeline" id="line-9234"><code>** registered at one time. ^Calling [sqlite3_wal_hook()] replaces any</code></span>
<span class="codeline" id="line-9235"><code>** previously registered write-ahead log callback. ^The return value is</code></span>
<span class="codeline" id="line-9236"><code>** a copy of the third parameter from the previous call, if any, or 0.</code></span>
<span class="codeline" id="line-9237"><code>** ^Note that the [sqlite3_wal_autocheckpoint()] interface and the</code></span>
<span class="codeline" id="line-9238"><code>** [wal_autocheckpoint pragma] both invoke [sqlite3_wal_hook()] and will</code></span>
<span class="codeline" id="line-9239"><code>** overwrite any prior [sqlite3_wal_hook()] settings.</code></span>
<span class="codeline" id="line-9240"><code>*/</code></span>
<span class="codeline" id="line-9241"><code>SQLITE_API void *sqlite3_wal_hook(</code></span>
<span class="codeline" id="line-9242"><code>  sqlite3*,</code></span>
<span class="codeline" id="line-9243"><code>  int(*)(void *,sqlite3*,const char*,int),</code></span>
<span class="codeline" id="line-9244"><code>  void*</code></span>
<span class="codeline" id="line-9245"><code>);</code></span>
<span class="codeline" id="line-9246"><code></code></span>
<span class="codeline" id="line-9247"><code>/*</code></span>
<span class="codeline" id="line-9248"><code>** CAPI3REF: Configure an auto-checkpoint</code></span>
<span class="codeline" id="line-9249"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-9250"><code>**</code></span>
<span class="codeline" id="line-9251"><code>** ^The [sqlite3_wal_autocheckpoint(D,N)] is a wrapper around</code></span>
<span class="codeline" id="line-9252"><code>** [sqlite3_wal_hook()] that causes any database on [database connection] D</code></span>
<span class="codeline" id="line-9253"><code>** to automatically [checkpoint]</code></span>
<span class="codeline" id="line-9254"><code>** after committing a transaction if there are N or</code></span>
<span class="codeline" id="line-9255"><code>** more frames in the [write-ahead log] file.  ^Passing zero or</code></span>
<span class="codeline" id="line-9256"><code>** a negative value as the nFrame parameter disables automatic</code></span>
<span class="codeline" id="line-9257"><code>** checkpoints entirely.</code></span>
<span class="codeline" id="line-9258"><code>**</code></span>
<span class="codeline" id="line-9259"><code>** ^The callback registered by this function replaces any existing callback</code></span>
<span class="codeline" id="line-9260"><code>** registered using [sqlite3_wal_hook()].  ^Likewise, registering a callback</code></span>
<span class="codeline" id="line-9261"><code>** using [sqlite3_wal_hook()] disables the automatic checkpoint mechanism</code></span>
<span class="codeline" id="line-9262"><code>** configured by this function.</code></span>
<span class="codeline" id="line-9263"><code>**</code></span>
<span class="codeline" id="line-9264"><code>** ^The [wal_autocheckpoint pragma] can be used to invoke this interface</code></span>
<span class="codeline" id="line-9265"><code>** from SQL.</code></span>
<span class="codeline" id="line-9266"><code>**</code></span>
<span class="codeline" id="line-9267"><code>** ^Checkpoints initiated by this mechanism are</code></span>
<span class="codeline" id="line-9268"><code>** [sqlite3_wal_checkpoint_v2|PASSIVE].</code></span>
<span class="codeline" id="line-9269"><code>**</code></span>
<span class="codeline" id="line-9270"><code>** ^Every new [database connection] defaults to having the auto-checkpoint</code></span>
<span class="codeline" id="line-9271"><code>** enabled with a threshold of 1000 or [SQLITE_DEFAULT_WAL_AUTOCHECKPOINT]</code></span>
<span class="codeline" id="line-9272"><code>** pages.  The use of this interface</code></span>
<span class="codeline" id="line-9273"><code>** is only necessary if the default setting is found to be suboptimal</code></span>
<span class="codeline" id="line-9274"><code>** for a particular application.</code></span>
<span class="codeline" id="line-9275"><code>*/</code></span>
<span class="codeline" id="line-9276"><code>SQLITE_API int sqlite3_wal_autocheckpoint(sqlite3 *db, int N);</code></span>
<span class="codeline" id="line-9277"><code></code></span>
<span class="codeline" id="line-9278"><code>/*</code></span>
<span class="codeline" id="line-9279"><code>** CAPI3REF: Checkpoint a database</code></span>
<span class="codeline" id="line-9280"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-9281"><code>**</code></span>
<span class="codeline" id="line-9282"><code>** ^(The sqlite3_wal_checkpoint(D,X) is equivalent to</code></span>
<span class="codeline" id="line-9283"><code>** [sqlite3_wal_checkpoint_v2](D,X,[SQLITE_CHECKPOINT_PASSIVE],0,0).)^</code></span>
<span class="codeline" id="line-9284"><code>**</code></span>
<span class="codeline" id="line-9285"><code>** In brief, sqlite3_wal_checkpoint(D,X) causes the content in the</code></span>
<span class="codeline" id="line-9286"><code>** [write-ahead log] for database X on [database connection] D to be</code></span>
<span class="codeline" id="line-9287"><code>** transferred into the database file and for the write-ahead log to</code></span>
<span class="codeline" id="line-9288"><code>** be reset.  See the [checkpointing] documentation for addition</code></span>
<span class="codeline" id="line-9289"><code>** information.</code></span>
<span class="codeline" id="line-9290"><code>**</code></span>
<span class="codeline" id="line-9291"><code>** This interface used to be the only way to cause a checkpoint to</code></span>
<span class="codeline" id="line-9292"><code>** occur.  But then the newer and more powerful [sqlite3_wal_checkpoint_v2()]</code></span>
<span class="codeline" id="line-9293"><code>** interface was added.  This interface is retained for backwards</code></span>
<span class="codeline" id="line-9294"><code>** compatibility and as a convenience for applications that need to manually</code></span>
<span class="codeline" id="line-9295"><code>** start a callback but which do not need the full power (and corresponding</code></span>
<span class="codeline" id="line-9296"><code>** complication) of [sqlite3_wal_checkpoint_v2()].</code></span>
<span class="codeline" id="line-9297"><code>*/</code></span>
<span class="codeline" id="line-9298"><code>SQLITE_API int sqlite3_wal_checkpoint(sqlite3 *db, const char *zDb);</code></span>
<span class="codeline" id="line-9299"><code></code></span>
<span class="codeline" id="line-9300"><code>/*</code></span>
<span class="codeline" id="line-9301"><code>** CAPI3REF: Checkpoint a database</code></span>
<span class="codeline" id="line-9302"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-9303"><code>**</code></span>
<span class="codeline" id="line-9304"><code>** ^(The sqlite3_wal_checkpoint_v2(D,X,M,L,C) interface runs a checkpoint</code></span>
<span class="codeline" id="line-9305"><code>** operation on database X of [database connection] D in mode M.  Status</code></span>
<span class="codeline" id="line-9306"><code>** information is written back into integers pointed to by L and C.)^</code></span>
<span class="codeline" id="line-9307"><code>** ^(The M parameter must be a valid [checkpoint mode]:)^</code></span>
<span class="codeline" id="line-9308"><code>**</code></span>
<span class="codeline" id="line-9309"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-9310"><code>** &lt;dt&gt;SQLITE_CHECKPOINT_PASSIVE&lt;dd&gt;</code></span>
<span class="codeline" id="line-9311"><code>**   ^Checkpoint as many frames as possible without waiting for any database</code></span>
<span class="codeline" id="line-9312"><code>**   readers or writers to finish, then sync the database file if all frames</code></span>
<span class="codeline" id="line-9313"><code>**   in the log were checkpointed. ^The [busy-handler callback]</code></span>
<span class="codeline" id="line-9314"><code>**   is never invoked in the SQLITE_CHECKPOINT_PASSIVE mode.</code></span>
<span class="codeline" id="line-9315"><code>**   ^On the other hand, passive mode might leave the checkpoint unfinished</code></span>
<span class="codeline" id="line-9316"><code>**   if there are concurrent readers or writers.</code></span>
<span class="codeline" id="line-9317"><code>**</code></span>
<span class="codeline" id="line-9318"><code>** &lt;dt&gt;SQLITE_CHECKPOINT_FULL&lt;dd&gt;</code></span>
<span class="codeline" id="line-9319"><code>**   ^This mode blocks (it invokes the</code></span>
<span class="codeline" id="line-9320"><code>**   [sqlite3_busy_handler|busy-handler callback]) until there is no</code></span>
<span class="codeline" id="line-9321"><code>**   database writer and all readers are reading from the most recent database</code></span>
<span class="codeline" id="line-9322"><code>**   snapshot. ^It then checkpoints all frames in the log file and syncs the</code></span>
<span class="codeline" id="line-9323"><code>**   database file. ^This mode blocks new database writers while it is pending,</code></span>
<span class="codeline" id="line-9324"><code>**   but new database readers are allowed to continue unimpeded.</code></span>
<span class="codeline" id="line-9325"><code>**</code></span>
<span class="codeline" id="line-9326"><code>** &lt;dt&gt;SQLITE_CHECKPOINT_RESTART&lt;dd&gt;</code></span>
<span class="codeline" id="line-9327"><code>**   ^This mode works the same way as SQLITE_CHECKPOINT_FULL with the addition</code></span>
<span class="codeline" id="line-9328"><code>**   that after checkpointing the log file it blocks (calls the</code></span>
<span class="codeline" id="line-9329"><code>**   [busy-handler callback])</code></span>
<span class="codeline" id="line-9330"><code>**   until all readers are reading from the database file only. ^This ensures</code></span>
<span class="codeline" id="line-9331"><code>**   that the next writer will restart the log file from the beginning.</code></span>
<span class="codeline" id="line-9332"><code>**   ^Like SQLITE_CHECKPOINT_FULL, this mode blocks new</code></span>
<span class="codeline" id="line-9333"><code>**   database writer attempts while it is pending, but does not impede readers.</code></span>
<span class="codeline" id="line-9334"><code>**</code></span>
<span class="codeline" id="line-9335"><code>** &lt;dt&gt;SQLITE_CHECKPOINT_TRUNCATE&lt;dd&gt;</code></span>
<span class="codeline" id="line-9336"><code>**   ^This mode works the same way as SQLITE_CHECKPOINT_RESTART with the</code></span>
<span class="codeline" id="line-9337"><code>**   addition that it also truncates the log file to zero bytes just prior</code></span>
<span class="codeline" id="line-9338"><code>**   to a successful return.</code></span>
<span class="codeline" id="line-9339"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-9340"><code>**</code></span>
<span class="codeline" id="line-9341"><code>** ^If pnLog is not NULL, then *pnLog is set to the total number of frames in</code></span>
<span class="codeline" id="line-9342"><code>** the log file or to -1 if the checkpoint could not run because</code></span>
<span class="codeline" id="line-9343"><code>** of an error or because the database is not in [WAL mode]. ^If pnCkpt is not</code></span>
<span class="codeline" id="line-9344"><code>** NULL,then *pnCkpt is set to the total number of checkpointed frames in the</code></span>
<span class="codeline" id="line-9345"><code>** log file (including any that were already checkpointed before the function</code></span>
<span class="codeline" id="line-9346"><code>** was called) or to -1 if the checkpoint could not run due to an error or</code></span>
<span class="codeline" id="line-9347"><code>** because the database is not in WAL mode. ^Note that upon successful</code></span>
<span class="codeline" id="line-9348"><code>** completion of an SQLITE_CHECKPOINT_TRUNCATE, the log file will have been</code></span>
<span class="codeline" id="line-9349"><code>** truncated to zero bytes and so both *pnLog and *pnCkpt will be set to zero.</code></span>
<span class="codeline" id="line-9350"><code>**</code></span>
<span class="codeline" id="line-9351"><code>** ^All calls obtain an exclusive "checkpoint" lock on the database file. ^If</code></span>
<span class="codeline" id="line-9352"><code>** any other process is running a checkpoint operation at the same time, the</code></span>
<span class="codeline" id="line-9353"><code>** lock cannot be obtained and SQLITE_BUSY is returned. ^Even if there is a</code></span>
<span class="codeline" id="line-9354"><code>** busy-handler configured, it will not be invoked in this case.</code></span>
<span class="codeline" id="line-9355"><code>**</code></span>
<span class="codeline" id="line-9356"><code>** ^The SQLITE_CHECKPOINT_FULL, RESTART and TRUNCATE modes also obtain the</code></span>
<span class="codeline" id="line-9357"><code>** exclusive "writer" lock on the database file. ^If the writer lock cannot be</code></span>
<span class="codeline" id="line-9358"><code>** obtained immediately, and a busy-handler is configured, it is invoked and</code></span>
<span class="codeline" id="line-9359"><code>** the writer lock retried until either the busy-handler returns 0 or the lock</code></span>
<span class="codeline" id="line-9360"><code>** is successfully obtained. ^The busy-handler is also invoked while waiting for</code></span>
<span class="codeline" id="line-9361"><code>** database readers as described above. ^If the busy-handler returns 0 before</code></span>
<span class="codeline" id="line-9362"><code>** the writer lock is obtained or while waiting for database readers, the</code></span>
<span class="codeline" id="line-9363"><code>** checkpoint operation proceeds from that point in the same way as</code></span>
<span class="codeline" id="line-9364"><code>** SQLITE_CHECKPOINT_PASSIVE - checkpointing as many frames as possible</code></span>
<span class="codeline" id="line-9365"><code>** without blocking any further. ^SQLITE_BUSY is returned in this case.</code></span>
<span class="codeline" id="line-9366"><code>**</code></span>
<span class="codeline" id="line-9367"><code>** ^If parameter zDb is NULL or points to a zero length string, then the</code></span>
<span class="codeline" id="line-9368"><code>** specified operation is attempted on all WAL databases [attached] to</code></span>
<span class="codeline" id="line-9369"><code>** [database connection] db.  In this case the</code></span>
<span class="codeline" id="line-9370"><code>** values written to output parameters *pnLog and *pnCkpt are undefined. ^If</code></span>
<span class="codeline" id="line-9371"><code>** an SQLITE_BUSY error is encountered when processing one or more of the</code></span>
<span class="codeline" id="line-9372"><code>** attached WAL databases, the operation is still attempted on any remaining</code></span>
<span class="codeline" id="line-9373"><code>** attached databases and SQLITE_BUSY is returned at the end. ^If any other</code></span>
<span class="codeline" id="line-9374"><code>** error occurs while processing an attached database, processing is abandoned</code></span>
<span class="codeline" id="line-9375"><code>** and the error code is returned to the caller immediately. ^If no error</code></span>
<span class="codeline" id="line-9376"><code>** (SQLITE_BUSY or otherwise) is encountered while processing the attached</code></span>
<span class="codeline" id="line-9377"><code>** databases, SQLITE_OK is returned.</code></span>
<span class="codeline" id="line-9378"><code>**</code></span>
<span class="codeline" id="line-9379"><code>** ^If database zDb is the name of an attached database that is not in WAL</code></span>
<span class="codeline" id="line-9380"><code>** mode, SQLITE_OK is returned and both *pnLog and *pnCkpt set to -1. ^If</code></span>
<span class="codeline" id="line-9381"><code>** zDb is not NULL (or a zero length string) and is not the name of any</code></span>
<span class="codeline" id="line-9382"><code>** attached database, SQLITE_ERROR is returned to the caller.</code></span>
<span class="codeline" id="line-9383"><code>**</code></span>
<span class="codeline" id="line-9384"><code>** ^Unless it returns SQLITE_MISUSE,</code></span>
<span class="codeline" id="line-9385"><code>** the sqlite3_wal_checkpoint_v2() interface</code></span>
<span class="codeline" id="line-9386"><code>** sets the error information that is queried by</code></span>
<span class="codeline" id="line-9387"><code>** [sqlite3_errcode()] and [sqlite3_errmsg()].</code></span>
<span class="codeline" id="line-9388"><code>**</code></span>
<span class="codeline" id="line-9389"><code>** ^The [PRAGMA wal_checkpoint] command can be used to invoke this interface</code></span>
<span class="codeline" id="line-9390"><code>** from SQL.</code></span>
<span class="codeline" id="line-9391"><code>*/</code></span>
<span class="codeline" id="line-9392"><code>SQLITE_API int sqlite3_wal_checkpoint_v2(</code></span>
<span class="codeline" id="line-9393"><code>  sqlite3 *db,                    /* Database handle */</code></span>
<span class="codeline" id="line-9394"><code>  const char *zDb,                /* Name of attached database (or NULL) */</code></span>
<span class="codeline" id="line-9395"><code>  int eMode,                      /* SQLITE_CHECKPOINT_* value */</code></span>
<span class="codeline" id="line-9396"><code>  int *pnLog,                     /* OUT: Size of WAL log in frames */</code></span>
<span class="codeline" id="line-9397"><code>  int *pnCkpt                     /* OUT: Total number of frames checkpointed */</code></span>
<span class="codeline" id="line-9398"><code>);</code></span>
<span class="codeline" id="line-9399"><code></code></span>
<span class="codeline" id="line-9400"><code>/*</code></span>
<span class="codeline" id="line-9401"><code>** CAPI3REF: Checkpoint Mode Values</code></span>
<span class="codeline" id="line-9402"><code>** KEYWORDS: {checkpoint mode}</code></span>
<span class="codeline" id="line-9403"><code>**</code></span>
<span class="codeline" id="line-9404"><code>** These constants define all valid values for the "checkpoint mode" passed</code></span>
<span class="codeline" id="line-9405"><code>** as the third parameter to the [sqlite3_wal_checkpoint_v2()] interface.</code></span>
<span class="codeline" id="line-9406"><code>** See the [sqlite3_wal_checkpoint_v2()] documentation for details on the</code></span>
<span class="codeline" id="line-9407"><code>** meaning of each of these checkpoint modes.</code></span>
<span class="codeline" id="line-9408"><code>*/</code></span>
<span class="codeline" id="line-9409"><code>#define SQLITE_CHECKPOINT_PASSIVE  0  /* Do as much as possible w/o blocking */</code></span>
<span class="codeline" id="line-9410"><code>#define SQLITE_CHECKPOINT_FULL     1  /* Wait for writers, then checkpoint */</code></span>
<span class="codeline" id="line-9411"><code>#define SQLITE_CHECKPOINT_RESTART  2  /* Like FULL but wait for for readers */</code></span>
<span class="codeline" id="line-9412"><code>#define SQLITE_CHECKPOINT_TRUNCATE 3  /* Like RESTART but also truncate WAL */</code></span>
<span class="codeline" id="line-9413"><code></code></span>
<span class="codeline" id="line-9414"><code>/*</code></span>
<span class="codeline" id="line-9415"><code>** CAPI3REF: Virtual Table Interface Configuration</code></span>
<span class="codeline" id="line-9416"><code>**</code></span>
<span class="codeline" id="line-9417"><code>** This function may be called by either the [xConnect] or [xCreate] method</code></span>
<span class="codeline" id="line-9418"><code>** of a [virtual table] implementation to configure</code></span>
<span class="codeline" id="line-9419"><code>** various facets of the virtual table interface.</code></span>
<span class="codeline" id="line-9420"><code>**</code></span>
<span class="codeline" id="line-9421"><code>** If this interface is invoked outside the context of an xConnect or</code></span>
<span class="codeline" id="line-9422"><code>** xCreate virtual table method then the behavior is undefined.</code></span>
<span class="codeline" id="line-9423"><code>**</code></span>
<span class="codeline" id="line-9424"><code>** In the call sqlite3_vtab_config(D,C,...) the D parameter is the</code></span>
<span class="codeline" id="line-9425"><code>** [database connection] in which the virtual table is being created and</code></span>
<span class="codeline" id="line-9426"><code>** which is passed in as the first argument to the [xConnect] or [xCreate]</code></span>
<span class="codeline" id="line-9427"><code>** method that is invoking sqlite3_vtab_config().  The C parameter is one</code></span>
<span class="codeline" id="line-9428"><code>** of the [virtual table configuration options].  The presence and meaning</code></span>
<span class="codeline" id="line-9429"><code>** of parameters after C depend on which [virtual table configuration option]</code></span>
<span class="codeline" id="line-9430"><code>** is used.</code></span>
<span class="codeline" id="line-9431"><code>*/</code></span>
<span class="codeline" id="line-9432"><code>SQLITE_API int sqlite3_vtab_config(sqlite3*, int op, ...);</code></span>
<span class="codeline" id="line-9433"><code></code></span>
<span class="codeline" id="line-9434"><code>/*</code></span>
<span class="codeline" id="line-9435"><code>** CAPI3REF: Virtual Table Configuration Options</code></span>
<span class="codeline" id="line-9436"><code>** KEYWORDS: {virtual table configuration options}</code></span>
<span class="codeline" id="line-9437"><code>** KEYWORDS: {virtual table configuration option}</code></span>
<span class="codeline" id="line-9438"><code>**</code></span>
<span class="codeline" id="line-9439"><code>** These macros define the various options to the</code></span>
<span class="codeline" id="line-9440"><code>** [sqlite3_vtab_config()] interface that [virtual table] implementations</code></span>
<span class="codeline" id="line-9441"><code>** can use to customize and optimize their behavior.</code></span>
<span class="codeline" id="line-9442"><code>**</code></span>
<span class="codeline" id="line-9443"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-9444"><code>** [[SQLITE_VTAB_CONSTRAINT_SUPPORT]]</code></span>
<span class="codeline" id="line-9445"><code>** &lt;dt&gt;SQLITE_VTAB_CONSTRAINT_SUPPORT&lt;/dt&gt;</code></span>
<span class="codeline" id="line-9446"><code>** &lt;dd&gt;Calls of the form</code></span>
<span class="codeline" id="line-9447"><code>** [sqlite3_vtab_config](db,SQLITE_VTAB_CONSTRAINT_SUPPORT,X) are supported,</code></span>
<span class="codeline" id="line-9448"><code>** where X is an integer.  If X is zero, then the [virtual table] whose</code></span>
<span class="codeline" id="line-9449"><code>** [xCreate] or [xConnect] method invoked [sqlite3_vtab_config()] does not</code></span>
<span class="codeline" id="line-9450"><code>** support constraints.  In this configuration (which is the default) if</code></span>
<span class="codeline" id="line-9451"><code>** a call to the [xUpdate] method returns [SQLITE_CONSTRAINT], then the entire</code></span>
<span class="codeline" id="line-9452"><code>** statement is rolled back as if [ON CONFLICT | OR ABORT] had been</code></span>
<span class="codeline" id="line-9453"><code>** specified as part of the users SQL statement, regardless of the actual</code></span>
<span class="codeline" id="line-9454"><code>** ON CONFLICT mode specified.</code></span>
<span class="codeline" id="line-9455"><code>**</code></span>
<span class="codeline" id="line-9456"><code>** If X is non-zero, then the virtual table implementation guarantees</code></span>
<span class="codeline" id="line-9457"><code>** that if [xUpdate] returns [SQLITE_CONSTRAINT], it will do so before</code></span>
<span class="codeline" id="line-9458"><code>** any modifications to internal or persistent data structures have been made.</code></span>
<span class="codeline" id="line-9459"><code>** If the [ON CONFLICT] mode is ABORT, FAIL, IGNORE or ROLLBACK, SQLite</code></span>
<span class="codeline" id="line-9460"><code>** is able to roll back a statement or database transaction, and abandon</code></span>
<span class="codeline" id="line-9461"><code>** or continue processing the current SQL statement as appropriate.</code></span>
<span class="codeline" id="line-9462"><code>** If the ON CONFLICT mode is REPLACE and the [xUpdate] method returns</code></span>
<span class="codeline" id="line-9463"><code>** [SQLITE_CONSTRAINT], SQLite handles this as if the ON CONFLICT mode</code></span>
<span class="codeline" id="line-9464"><code>** had been ABORT.</code></span>
<span class="codeline" id="line-9465"><code>**</code></span>
<span class="codeline" id="line-9466"><code>** Virtual table implementations that are required to handle OR REPLACE</code></span>
<span class="codeline" id="line-9467"><code>** must do so within the [xUpdate] method. If a call to the</code></span>
<span class="codeline" id="line-9468"><code>** [sqlite3_vtab_on_conflict()] function indicates that the current ON</code></span>
<span class="codeline" id="line-9469"><code>** CONFLICT policy is REPLACE, the virtual table implementation should</code></span>
<span class="codeline" id="line-9470"><code>** silently replace the appropriate rows within the xUpdate callback and</code></span>
<span class="codeline" id="line-9471"><code>** return SQLITE_OK. Or, if this is not possible, it may return</code></span>
<span class="codeline" id="line-9472"><code>** SQLITE_CONSTRAINT, in which case SQLite falls back to OR ABORT</code></span>
<span class="codeline" id="line-9473"><code>** constraint handling.</code></span>
<span class="codeline" id="line-9474"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-9475"><code>**</code></span>
<span class="codeline" id="line-9476"><code>** [[SQLITE_VTAB_DIRECTONLY]]&lt;dt&gt;SQLITE_VTAB_DIRECTONLY&lt;/dt&gt;</code></span>
<span class="codeline" id="line-9477"><code>** &lt;dd&gt;Calls of the form</code></span>
<span class="codeline" id="line-9478"><code>** [sqlite3_vtab_config](db,SQLITE_VTAB_DIRECTONLY) from within the</code></span>
<span class="codeline" id="line-9479"><code>** the [xConnect] or [xCreate] methods of a [virtual table] implmentation</code></span>
<span class="codeline" id="line-9480"><code>** prohibits that virtual table from being used from within triggers and</code></span>
<span class="codeline" id="line-9481"><code>** views.</code></span>
<span class="codeline" id="line-9482"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-9483"><code>**</code></span>
<span class="codeline" id="line-9484"><code>** [[SQLITE_VTAB_INNOCUOUS]]&lt;dt&gt;SQLITE_VTAB_INNOCUOUS&lt;/dt&gt;</code></span>
<span class="codeline" id="line-9485"><code>** &lt;dd&gt;Calls of the form</code></span>
<span class="codeline" id="line-9486"><code>** [sqlite3_vtab_config](db,SQLITE_VTAB_INNOCUOUS) from within the</code></span>
<span class="codeline" id="line-9487"><code>** the [xConnect] or [xCreate] methods of a [virtual table] implmentation</code></span>
<span class="codeline" id="line-9488"><code>** identify that virtual table as being safe to use from within triggers</code></span>
<span class="codeline" id="line-9489"><code>** and views.  Conceptually, the SQLITE_VTAB_INNOCUOUS tag means that the</code></span>
<span class="codeline" id="line-9490"><code>** virtual table can do no serious harm even if it is controlled by a</code></span>
<span class="codeline" id="line-9491"><code>** malicious hacker.  Developers should avoid setting the SQLITE_VTAB_INNOCUOUS</code></span>
<span class="codeline" id="line-9492"><code>** flag unless absolutely necessary.</code></span>
<span class="codeline" id="line-9493"><code>** &lt;/dd&gt;</code></span>
<span class="codeline" id="line-9494"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-9495"><code>*/</code></span>
<span class="codeline" id="line-9496"><code>#define SQLITE_VTAB_CONSTRAINT_SUPPORT 1</code></span>
<span class="codeline" id="line-9497"><code>#define SQLITE_VTAB_INNOCUOUS          2</code></span>
<span class="codeline" id="line-9498"><code>#define SQLITE_VTAB_DIRECTONLY         3</code></span>
<span class="codeline" id="line-9499"><code></code></span>
<span class="codeline" id="line-9500"><code>/*</code></span>
<span class="codeline" id="line-9501"><code>** CAPI3REF: Determine The Virtual Table Conflict Policy</code></span>
<span class="codeline" id="line-9502"><code>**</code></span>
<span class="codeline" id="line-9503"><code>** This function may only be called from within a call to the [xUpdate] method</code></span>
<span class="codeline" id="line-9504"><code>** of a [virtual table] implementation for an INSERT or UPDATE operation. ^The</code></span>
<span class="codeline" id="line-9505"><code>** value returned is one of [SQLITE_ROLLBACK], [SQLITE_IGNORE], [SQLITE_FAIL],</code></span>
<span class="codeline" id="line-9506"><code>** [SQLITE_ABORT], or [SQLITE_REPLACE], according to the [ON CONFLICT] mode</code></span>
<span class="codeline" id="line-9507"><code>** of the SQL statement that triggered the call to the [xUpdate] method of the</code></span>
<span class="codeline" id="line-9508"><code>** [virtual table].</code></span>
<span class="codeline" id="line-9509"><code>*/</code></span>
<span class="codeline" id="line-9510"><code>SQLITE_API int sqlite3_vtab_on_conflict(sqlite3 *);</code></span>
<span class="codeline" id="line-9511"><code></code></span>
<span class="codeline" id="line-9512"><code>/*</code></span>
<span class="codeline" id="line-9513"><code>** CAPI3REF: Determine If Virtual Table Column Access Is For UPDATE</code></span>
<span class="codeline" id="line-9514"><code>**</code></span>
<span class="codeline" id="line-9515"><code>** If the sqlite3_vtab_nochange(X) routine is called within the [xColumn]</code></span>
<span class="codeline" id="line-9516"><code>** method of a [virtual table], then it might return true if the</code></span>
<span class="codeline" id="line-9517"><code>** column is being fetched as part of an UPDATE operation during which the</code></span>
<span class="codeline" id="line-9518"><code>** column value will not change.  The virtual table implementation can use</code></span>
<span class="codeline" id="line-9519"><code>** this hint as permission to substitute a return value that is less</code></span>
<span class="codeline" id="line-9520"><code>** expensive to compute and that the corresponding</code></span>
<span class="codeline" id="line-9521"><code>** [xUpdate] method understands as a "no-change" value.</code></span>
<span class="codeline" id="line-9522"><code>**</code></span>
<span class="codeline" id="line-9523"><code>** If the [xColumn] method calls sqlite3_vtab_nochange() and finds that</code></span>
<span class="codeline" id="line-9524"><code>** the column is not changed by the UPDATE statement, then the xColumn</code></span>
<span class="codeline" id="line-9525"><code>** method can optionally return without setting a result, without calling</code></span>
<span class="codeline" id="line-9526"><code>** any of the [sqlite3_result_int|sqlite3_result_xxxxx() interfaces].</code></span>
<span class="codeline" id="line-9527"><code>** In that case, [sqlite3_value_nochange(X)] will return true for the</code></span>
<span class="codeline" id="line-9528"><code>** same column in the [xUpdate] method.</code></span>
<span class="codeline" id="line-9529"><code>**</code></span>
<span class="codeline" id="line-9530"><code>** The sqlite3_vtab_nochange() routine is an optimization.  Virtual table</code></span>
<span class="codeline" id="line-9531"><code>** implementations should continue to give a correct answer even if the</code></span>
<span class="codeline" id="line-9532"><code>** sqlite3_vtab_nochange() interface were to always return false.  In the</code></span>
<span class="codeline" id="line-9533"><code>** current implementation, the sqlite3_vtab_nochange() interface does always</code></span>
<span class="codeline" id="line-9534"><code>** returns false for the enhanced [UPDATE FROM] statement.</code></span>
<span class="codeline" id="line-9535"><code>*/</code></span>
<span class="codeline" id="line-9536"><code>SQLITE_API int sqlite3_vtab_nochange(sqlite3_context*);</code></span>
<span class="codeline" id="line-9537"><code></code></span>
<span class="codeline" id="line-9538"><code>/*</code></span>
<span class="codeline" id="line-9539"><code>** CAPI3REF: Determine The Collation For a Virtual Table Constraint</code></span>
<span class="codeline" id="line-9540"><code>** METHOD: sqlite3_index_info</code></span>
<span class="codeline" id="line-9541"><code>**</code></span>
<span class="codeline" id="line-9542"><code>** This function may only be called from within a call to the [xBestIndex]</code></span>
<span class="codeline" id="line-9543"><code>** method of a [virtual table].  This function returns a pointer to a string</code></span>
<span class="codeline" id="line-9544"><code>** that is the name of the appropriate collation sequence to use for text</code></span>
<span class="codeline" id="line-9545"><code>** comparisons on the constraint identified by its arguments.</code></span>
<span class="codeline" id="line-9546"><code>**</code></span>
<span class="codeline" id="line-9547"><code>** The first argument must be the pointer to the [sqlite3_index_info] object</code></span>
<span class="codeline" id="line-9548"><code>** that is the first parameter to the xBestIndex() method. The second argument</code></span>
<span class="codeline" id="line-9549"><code>** must be an index into the aConstraint[] array belonging to the</code></span>
<span class="codeline" id="line-9550"><code>** sqlite3_index_info structure passed to xBestIndex.</code></span>
<span class="codeline" id="line-9551"><code>**</code></span>
<span class="codeline" id="line-9552"><code>** Important:</code></span>
<span class="codeline" id="line-9553"><code>** The first parameter must be the same pointer that is passed into the</code></span>
<span class="codeline" id="line-9554"><code>** xBestMethod() method.  The first parameter may not be a pointer to a</code></span>
<span class="codeline" id="line-9555"><code>** different [sqlite3_index_info] object, even an exact copy.</code></span>
<span class="codeline" id="line-9556"><code>**</code></span>
<span class="codeline" id="line-9557"><code>** The return value is computed as follows:</code></span>
<span class="codeline" id="line-9558"><code>**</code></span>
<span class="codeline" id="line-9559"><code>** &lt;ol&gt;</code></span>
<span class="codeline" id="line-9560"><code>** &lt;li&gt;&lt;p&gt; If the constraint comes from a WHERE clause expression that contains</code></span>
<span class="codeline" id="line-9561"><code>**         a [COLLATE operator], then the name of the collation specified by</code></span>
<span class="codeline" id="line-9562"><code>**         that COLLATE operator is returned.</code></span>
<span class="codeline" id="line-9563"><code>** &lt;li&gt;&lt;p&gt; If there is no COLLATE operator, but the column that is the subject</code></span>
<span class="codeline" id="line-9564"><code>**         of the constraint specifies an alternative collating sequence via</code></span>
<span class="codeline" id="line-9565"><code>**         a [COLLATE clause] on the column definition within the CREATE TABLE</code></span>
<span class="codeline" id="line-9566"><code>**         statement that was passed into [sqlite3_declare_vtab()], then the</code></span>
<span class="codeline" id="line-9567"><code>**         name of that alternative collating sequence is returned.</code></span>
<span class="codeline" id="line-9568"><code>** &lt;li&gt;&lt;p&gt; Otherwise, "BINARY" is returned.</code></span>
<span class="codeline" id="line-9569"><code>** &lt;/ol&gt;</code></span>
<span class="codeline" id="line-9570"><code>*/</code></span>
<span class="codeline" id="line-9571"><code>SQLITE_API SQLITE_EXPERIMENTAL const char *sqlite3_vtab_collation(sqlite3_index_info*,int);</code></span>
<span class="codeline" id="line-9572"><code></code></span>
<span class="codeline" id="line-9573"><code>/*</code></span>
<span class="codeline" id="line-9574"><code>** CAPI3REF: Determine if a virtual table query is DISTINCT</code></span>
<span class="codeline" id="line-9575"><code>** METHOD: sqlite3_index_info</code></span>
<span class="codeline" id="line-9576"><code>**</code></span>
<span class="codeline" id="line-9577"><code>** This API may only be used from within an [xBestIndex|xBestIndex method]</code></span>
<span class="codeline" id="line-9578"><code>** of a [virtual table] implementation. The result of calling this</code></span>
<span class="codeline" id="line-9579"><code>** interface from outside of xBestIndex() is undefined and probably harmful.</code></span>
<span class="codeline" id="line-9580"><code>**</code></span>
<span class="codeline" id="line-9581"><code>** ^The sqlite3_vtab_distinct() interface returns an integer between 0 and</code></span>
<span class="codeline" id="line-9582"><code>** 3.  The integer returned by sqlite3_vtab_distinct()</code></span>
<span class="codeline" id="line-9583"><code>** gives the virtual table additional information about how the query</code></span>
<span class="codeline" id="line-9584"><code>** planner wants the output to be ordered. As long as the virtual table</code></span>
<span class="codeline" id="line-9585"><code>** can meet the ordering requirements of the query planner, it may set</code></span>
<span class="codeline" id="line-9586"><code>** the "orderByConsumed" flag.</code></span>
<span class="codeline" id="line-9587"><code>**</code></span>
<span class="codeline" id="line-9588"><code>** &lt;ol&gt;&lt;li value="0"&gt;&lt;p&gt;</code></span>
<span class="codeline" id="line-9589"><code>** ^If the sqlite3_vtab_distinct() interface returns 0, that means</code></span>
<span class="codeline" id="line-9590"><code>** that the query planner needs the virtual table to return all rows in the</code></span>
<span class="codeline" id="line-9591"><code>** sort order defined by the "nOrderBy" and "aOrderBy" fields of the</code></span>
<span class="codeline" id="line-9592"><code>** [sqlite3_index_info] object.  This is the default expectation.  If the</code></span>
<span class="codeline" id="line-9593"><code>** virtual table outputs all rows in sorted order, then it is always safe for</code></span>
<span class="codeline" id="line-9594"><code>** the xBestIndex method to set the "orderByConsumed" flag, regardless of</code></span>
<span class="codeline" id="line-9595"><code>** the return value from sqlite3_vtab_distinct().</code></span>
<span class="codeline" id="line-9596"><code>** &lt;li value="1"&gt;&lt;p&gt;</code></span>
<span class="codeline" id="line-9597"><code>** ^(If the sqlite3_vtab_distinct() interface returns 1, that means</code></span>
<span class="codeline" id="line-9598"><code>** that the query planner does not need the rows to be returned in sorted order</code></span>
<span class="codeline" id="line-9599"><code>** as long as all rows with the same values in all columns identified by the</code></span>
<span class="codeline" id="line-9600"><code>** "aOrderBy" field are adjacent.)^  This mode is used when the query planner</code></span>
<span class="codeline" id="line-9601"><code>** is doing a GROUP BY.</code></span>
<span class="codeline" id="line-9602"><code>** &lt;li value="2"&gt;&lt;p&gt;</code></span>
<span class="codeline" id="line-9603"><code>** ^(If the sqlite3_vtab_distinct() interface returns 2, that means</code></span>
<span class="codeline" id="line-9604"><code>** that the query planner does not need the rows returned in any particular</code></span>
<span class="codeline" id="line-9605"><code>** order, as long as rows with the same values in all "aOrderBy" columns</code></span>
<span class="codeline" id="line-9606"><code>** are adjacent.)^  ^(Furthermore, only a single row for each particular</code></span>
<span class="codeline" id="line-9607"><code>** combination of values in the columns identified by the "aOrderBy" field</code></span>
<span class="codeline" id="line-9608"><code>** needs to be returned.)^  ^It is always ok for two or more rows with the same</code></span>
<span class="codeline" id="line-9609"><code>** values in all "aOrderBy" columns to be returned, as long as all such rows</code></span>
<span class="codeline" id="line-9610"><code>** are adjacent.  ^The virtual table may, if it chooses, omit extra rows</code></span>
<span class="codeline" id="line-9611"><code>** that have the same value for all columns identified by "aOrderBy".</code></span>
<span class="codeline" id="line-9612"><code>** ^However omitting the extra rows is optional.</code></span>
<span class="codeline" id="line-9613"><code>** This mode is used for a DISTINCT query.</code></span>
<span class="codeline" id="line-9614"><code>** &lt;li value="3"&gt;&lt;p&gt;</code></span>
<span class="codeline" id="line-9615"><code>** ^(If the sqlite3_vtab_distinct() interface returns 3, that means</code></span>
<span class="codeline" id="line-9616"><code>** that the query planner needs only distinct rows but it does need the</code></span>
<span class="codeline" id="line-9617"><code>** rows to be sorted.)^ ^The virtual table implementation is free to omit</code></span>
<span class="codeline" id="line-9618"><code>** rows that are identical in all aOrderBy columns, if it wants to, but</code></span>
<span class="codeline" id="line-9619"><code>** it is not required to omit any rows.  This mode is used for queries</code></span>
<span class="codeline" id="line-9620"><code>** that have both DISTINCT and ORDER BY clauses.</code></span>
<span class="codeline" id="line-9621"><code>** &lt;/ol&gt;</code></span>
<span class="codeline" id="line-9622"><code>**</code></span>
<span class="codeline" id="line-9623"><code>** ^For the purposes of comparing virtual table output values to see if the</code></span>
<span class="codeline" id="line-9624"><code>** values are same value for sorting purposes, two NULL values are considered</code></span>
<span class="codeline" id="line-9625"><code>** to be the same.  In other words, the comparison operator is "IS"</code></span>
<span class="codeline" id="line-9626"><code>** (or "IS NOT DISTINCT FROM") and not "==".</code></span>
<span class="codeline" id="line-9627"><code>**</code></span>
<span class="codeline" id="line-9628"><code>** If a virtual table implementation is unable to meet the requirements</code></span>
<span class="codeline" id="line-9629"><code>** specified above, then it must not set the "orderByConsumed" flag in the</code></span>
<span class="codeline" id="line-9630"><code>** [sqlite3_index_info] object or an incorrect answer may result.</code></span>
<span class="codeline" id="line-9631"><code>**</code></span>
<span class="codeline" id="line-9632"><code>** ^A virtual table implementation is always free to return rows in any order</code></span>
<span class="codeline" id="line-9633"><code>** it wants, as long as the "orderByConsumed" flag is not set.  ^When the</code></span>
<span class="codeline" id="line-9634"><code>** the "orderByConsumed" flag is unset, the query planner will add extra</code></span>
<span class="codeline" id="line-9635"><code>** [bytecode] to ensure that the final results returned by the SQL query are</code></span>
<span class="codeline" id="line-9636"><code>** ordered correctly.  The use of the "orderByConsumed" flag and the</code></span>
<span class="codeline" id="line-9637"><code>** sqlite3_vtab_distinct() interface is merely an optimization.  ^Careful</code></span>
<span class="codeline" id="line-9638"><code>** use of the sqlite3_vtab_distinct() interface and the "orderByConsumed"</code></span>
<span class="codeline" id="line-9639"><code>** flag might help queries against a virtual table to run faster.  Being</code></span>
<span class="codeline" id="line-9640"><code>** overly aggressive and setting the "orderByConsumed" flag when it is not</code></span>
<span class="codeline" id="line-9641"><code>** valid to do so, on the other hand, might cause SQLite to return incorrect</code></span>
<span class="codeline" id="line-9642"><code>** results.</code></span>
<span class="codeline" id="line-9643"><code>*/</code></span>
<span class="codeline" id="line-9644"><code>SQLITE_API int sqlite3_vtab_distinct(sqlite3_index_info*);</code></span>
<span class="codeline" id="line-9645"><code></code></span>
<span class="codeline" id="line-9646"><code>/*</code></span>
<span class="codeline" id="line-9647"><code>** CAPI3REF: Identify and handle IN constraints in xBestIndex</code></span>
<span class="codeline" id="line-9648"><code>**</code></span>
<span class="codeline" id="line-9649"><code>** This interface may only be used from within an</code></span>
<span class="codeline" id="line-9650"><code>** [xBestIndex|xBestIndex() method] of a [virtual table] implementation.</code></span>
<span class="codeline" id="line-9651"><code>** The result of invoking this interface from any other context is</code></span>
<span class="codeline" id="line-9652"><code>** undefined and probably harmful.</code></span>
<span class="codeline" id="line-9653"><code>**</code></span>
<span class="codeline" id="line-9654"><code>** ^(A constraint on a virtual table of the form</code></span>
<span class="codeline" id="line-9655"><code>** "[IN operator|column IN (...)]" is</code></span>
<span class="codeline" id="line-9656"><code>** communicated to the xBestIndex method as a</code></span>
<span class="codeline" id="line-9657"><code>** [SQLITE_INDEX_CONSTRAINT_EQ] constraint.)^  If xBestIndex wants to use</code></span>
<span class="codeline" id="line-9658"><code>** this constraint, it must set the corresponding</code></span>
<span class="codeline" id="line-9659"><code>** aConstraintUsage[].argvIndex to a postive integer.  ^(Then, under</code></span>
<span class="codeline" id="line-9660"><code>** the usual mode of handling IN operators, SQLite generates [bytecode]</code></span>
<span class="codeline" id="line-9661"><code>** that invokes the [xFilter|xFilter() method] once for each value</code></span>
<span class="codeline" id="line-9662"><code>** on the right-hand side of the IN operator.)^  Thus the virtual table</code></span>
<span class="codeline" id="line-9663"><code>** only sees a single value from the right-hand side of the IN operator</code></span>
<span class="codeline" id="line-9664"><code>** at a time.</code></span>
<span class="codeline" id="line-9665"><code>**</code></span>
<span class="codeline" id="line-9666"><code>** In some cases, however, it would be advantageous for the virtual</code></span>
<span class="codeline" id="line-9667"><code>** table to see all values on the right-hand of the IN operator all at</code></span>
<span class="codeline" id="line-9668"><code>** once.  The sqlite3_vtab_in() interfaces facilitates this in two ways:</code></span>
<span class="codeline" id="line-9669"><code>**</code></span>
<span class="codeline" id="line-9670"><code>** &lt;ol&gt;</code></span>
<span class="codeline" id="line-9671"><code>** &lt;li&gt;&lt;p&gt;</code></span>
<span class="codeline" id="line-9672"><code>**   ^A call to sqlite3_vtab_in(P,N,-1) will return true (non-zero)</code></span>
<span class="codeline" id="line-9673"><code>**   if and only if the [sqlite3_index_info|P-&gt;aConstraint][N] constraint</code></span>
<span class="codeline" id="line-9674"><code>**   is an [IN operator] that can be processed all at once.  ^In other words,</code></span>
<span class="codeline" id="line-9675"><code>**   sqlite3_vtab_in() with -1 in the third argument is a mechanism</code></span>
<span class="codeline" id="line-9676"><code>**   by which the virtual table can ask SQLite if all-at-once processing</code></span>
<span class="codeline" id="line-9677"><code>**   of the IN operator is even possible.</code></span>
<span class="codeline" id="line-9678"><code>**</code></span>
<span class="codeline" id="line-9679"><code>** &lt;li&gt;&lt;p&gt;</code></span>
<span class="codeline" id="line-9680"><code>**   ^A call to sqlite3_vtab_in(P,N,F) with F==1 or F==0 indicates</code></span>
<span class="codeline" id="line-9681"><code>**   to SQLite that the virtual table does or does not want to process</code></span>
<span class="codeline" id="line-9682"><code>**   the IN operator all-at-once, respectively.  ^Thus when the third</code></span>
<span class="codeline" id="line-9683"><code>**   parameter (F) is non-negative, this interface is the mechanism by</code></span>
<span class="codeline" id="line-9684"><code>**   which the virtual table tells SQLite how it wants to process the</code></span>
<span class="codeline" id="line-9685"><code>**   IN operator.</code></span>
<span class="codeline" id="line-9686"><code>** &lt;/ol&gt;</code></span>
<span class="codeline" id="line-9687"><code>**</code></span>
<span class="codeline" id="line-9688"><code>** ^The sqlite3_vtab_in(P,N,F) interface can be invoked multiple times</code></span>
<span class="codeline" id="line-9689"><code>** within the same xBestIndex method call.  ^For any given P,N pair,</code></span>
<span class="codeline" id="line-9690"><code>** the return value from sqlite3_vtab_in(P,N,F) will always be the same</code></span>
<span class="codeline" id="line-9691"><code>** within the same xBestIndex call.  ^If the interface returns true</code></span>
<span class="codeline" id="line-9692"><code>** (non-zero), that means that the constraint is an IN operator</code></span>
<span class="codeline" id="line-9693"><code>** that can be processed all-at-once.  ^If the constraint is not an IN</code></span>
<span class="codeline" id="line-9694"><code>** operator or cannot be processed all-at-once, then the interface returns</code></span>
<span class="codeline" id="line-9695"><code>** false.</code></span>
<span class="codeline" id="line-9696"><code>**</code></span>
<span class="codeline" id="line-9697"><code>** ^(All-at-once processing of the IN operator is selected if both of the</code></span>
<span class="codeline" id="line-9698"><code>** following conditions are met:</code></span>
<span class="codeline" id="line-9699"><code>**</code></span>
<span class="codeline" id="line-9700"><code>** &lt;ol&gt;</code></span>
<span class="codeline" id="line-9701"><code>** &lt;li&gt;&lt;p&gt; The P-&gt;aConstraintUsage[N].argvIndex value is set to a positive</code></span>
<span class="codeline" id="line-9702"><code>** integer.  This is how the virtual table tells SQLite that it wants to</code></span>
<span class="codeline" id="line-9703"><code>** use the N-th constraint.</code></span>
<span class="codeline" id="line-9704"><code>**</code></span>
<span class="codeline" id="line-9705"><code>** &lt;li&gt;&lt;p&gt; The last call to sqlite3_vtab_in(P,N,F) for which F was</code></span>
<span class="codeline" id="line-9706"><code>** non-negative had F&gt;=1.</code></span>
<span class="codeline" id="line-9707"><code>** &lt;/ol&gt;)^</code></span>
<span class="codeline" id="line-9708"><code>**</code></span>
<span class="codeline" id="line-9709"><code>** ^If either or both of the conditions above are false, then SQLite uses</code></span>
<span class="codeline" id="line-9710"><code>** the traditional one-at-a-time processing strategy for the IN constraint.</code></span>
<span class="codeline" id="line-9711"><code>** ^If both conditions are true, then the argvIndex-th parameter to the</code></span>
<span class="codeline" id="line-9712"><code>** xFilter method will be an [sqlite3_value] that appears to be NULL,</code></span>
<span class="codeline" id="line-9713"><code>** but which can be passed to [sqlite3_vtab_in_first()] and</code></span>
<span class="codeline" id="line-9714"><code>** [sqlite3_vtab_in_next()] to find all values on the right-hand side</code></span>
<span class="codeline" id="line-9715"><code>** of the IN constraint.</code></span>
<span class="codeline" id="line-9716"><code>*/</code></span>
<span class="codeline" id="line-9717"><code>SQLITE_API int sqlite3_vtab_in(sqlite3_index_info*, int iCons, int bHandle);</code></span>
<span class="codeline" id="line-9718"><code></code></span>
<span class="codeline" id="line-9719"><code>/*</code></span>
<span class="codeline" id="line-9720"><code>** CAPI3REF: Find all elements on the right-hand side of an IN constraint.</code></span>
<span class="codeline" id="line-9721"><code>**</code></span>
<span class="codeline" id="line-9722"><code>** These interfaces are only useful from within the</code></span>
<span class="codeline" id="line-9723"><code>** [xFilter|xFilter() method] of a [virtual table] implementation.</code></span>
<span class="codeline" id="line-9724"><code>** The result of invoking these interfaces from any other context</code></span>
<span class="codeline" id="line-9725"><code>** is undefined and probably harmful.</code></span>
<span class="codeline" id="line-9726"><code>**</code></span>
<span class="codeline" id="line-9727"><code>** The X parameter in a call to sqlite3_vtab_in_first(X,P) or</code></span>
<span class="codeline" id="line-9728"><code>** sqlite3_vtab_in_next(X,P) must be one of the parameters to the</code></span>
<span class="codeline" id="line-9729"><code>** xFilter method which invokes these routines, and specifically</code></span>
<span class="codeline" id="line-9730"><code>** a parameter that was previously selected for all-at-once IN constraint</code></span>
<span class="codeline" id="line-9731"><code>** processing use the [sqlite3_vtab_in()] interface in the</code></span>
<span class="codeline" id="line-9732"><code>** [xBestIndex|xBestIndex method].  ^(If the X parameter is not</code></span>
<span class="codeline" id="line-9733"><code>** an xFilter argument that was selected for all-at-once IN constraint</code></span>
<span class="codeline" id="line-9734"><code>** processing, then these routines return [SQLITE_MISUSE])^ or perhaps</code></span>
<span class="codeline" id="line-9735"><code>** exhibit some other undefined or harmful behavior.</code></span>
<span class="codeline" id="line-9736"><code>**</code></span>
<span class="codeline" id="line-9737"><code>** ^(Use these routines to access all values on the right-hand side</code></span>
<span class="codeline" id="line-9738"><code>** of the IN constraint using code like the following:</code></span>
<span class="codeline" id="line-9739"><code>**</code></span>
<span class="codeline" id="line-9740"><code>** &lt;blockquote&gt;&lt;pre&gt;</code></span>
<span class="codeline" id="line-9741"><code>** &amp;nbsp;  for(rc=sqlite3_vtab_in_first(pList, &amp;pVal);</code></span>
<span class="codeline" id="line-9742"><code>** &amp;nbsp;      rc==SQLITE_OK &amp;&amp; pVal</code></span>
<span class="codeline" id="line-9743"><code>** &amp;nbsp;      rc=sqlite3_vtab_in_next(pList, &amp;pVal)</code></span>
<span class="codeline" id="line-9744"><code>** &amp;nbsp;  ){</code></span>
<span class="codeline" id="line-9745"><code>** &amp;nbsp;    // do something with pVal</code></span>
<span class="codeline" id="line-9746"><code>** &amp;nbsp;  }</code></span>
<span class="codeline" id="line-9747"><code>** &amp;nbsp;  if( rc!=SQLITE_OK ){</code></span>
<span class="codeline" id="line-9748"><code>** &amp;nbsp;    // an error has occurred</code></span>
<span class="codeline" id="line-9749"><code>** &amp;nbsp;  }</code></span>
<span class="codeline" id="line-9750"><code>** &lt;/pre&gt;&lt;/blockquote&gt;)^</code></span>
<span class="codeline" id="line-9751"><code>**</code></span>
<span class="codeline" id="line-9752"><code>** ^On success, the sqlite3_vtab_in_first(X,P) and sqlite3_vtab_in_next(X,P)</code></span>
<span class="codeline" id="line-9753"><code>** routines return SQLITE_OK and set *P to point to the first or next value</code></span>
<span class="codeline" id="line-9754"><code>** on the RHS of the IN constraint.  ^If there are no more values on the</code></span>
<span class="codeline" id="line-9755"><code>** right hand side of the IN constraint, then *P is set to NULL and these</code></span>
<span class="codeline" id="line-9756"><code>** routines return [SQLITE_DONE].  ^The return value might be</code></span>
<span class="codeline" id="line-9757"><code>** some other value, such as SQLITE_NOMEM, in the event of a malfunction.</code></span>
<span class="codeline" id="line-9758"><code>**</code></span>
<span class="codeline" id="line-9759"><code>** The *ppOut values returned by these routines are only valid until the</code></span>
<span class="codeline" id="line-9760"><code>** next call to either of these routines or until the end of the xFilter</code></span>
<span class="codeline" id="line-9761"><code>** method from which these routines were called.  If the virtual table</code></span>
<span class="codeline" id="line-9762"><code>** implementation needs to retain the *ppOut values for longer, it must make</code></span>
<span class="codeline" id="line-9763"><code>** copies.  The *ppOut values are [protected sqlite3_value|protected].</code></span>
<span class="codeline" id="line-9764"><code>*/</code></span>
<span class="codeline" id="line-9765"><code>SQLITE_API int sqlite3_vtab_in_first(sqlite3_value *pVal, sqlite3_value **ppOut);</code></span>
<span class="codeline" id="line-9766"><code>SQLITE_API int sqlite3_vtab_in_next(sqlite3_value *pVal, sqlite3_value **ppOut);</code></span>
<span class="codeline" id="line-9767"><code></code></span>
<span class="codeline" id="line-9768"><code>/*</code></span>
<span class="codeline" id="line-9769"><code>** CAPI3REF: Constraint values in xBestIndex()</code></span>
<span class="codeline" id="line-9770"><code>** METHOD: sqlite3_index_info</code></span>
<span class="codeline" id="line-9771"><code>**</code></span>
<span class="codeline" id="line-9772"><code>** This API may only be used from within the [xBestIndex|xBestIndex method]</code></span>
<span class="codeline" id="line-9773"><code>** of a [virtual table] implementation. The result of calling this interface</code></span>
<span class="codeline" id="line-9774"><code>** from outside of an xBestIndex method are undefined and probably harmful.</code></span>
<span class="codeline" id="line-9775"><code>**</code></span>
<span class="codeline" id="line-9776"><code>** ^When the sqlite3_vtab_rhs_value(P,J,V) interface is invoked from within</code></span>
<span class="codeline" id="line-9777"><code>** the [xBestIndex] method of a [virtual table] implementation, with P being</code></span>
<span class="codeline" id="line-9778"><code>** a copy of the [sqlite3_index_info] object pointer passed into xBestIndex and</code></span>
<span class="codeline" id="line-9779"><code>** J being a 0-based index into P-&gt;aConstraint[], then this routine</code></span>
<span class="codeline" id="line-9780"><code>** attempts to set *V to the value of the right-hand operand of</code></span>
<span class="codeline" id="line-9781"><code>** that constraint if the right-hand operand is known.  ^If the</code></span>
<span class="codeline" id="line-9782"><code>** right-hand operand is not known, then *V is set to a NULL pointer.</code></span>
<span class="codeline" id="line-9783"><code>** ^The sqlite3_vtab_rhs_value(P,J,V) interface returns SQLITE_OK if</code></span>
<span class="codeline" id="line-9784"><code>** and only if *V is set to a value.  ^The sqlite3_vtab_rhs_value(P,J,V)</code></span>
<span class="codeline" id="line-9785"><code>** inteface returns SQLITE_NOTFOUND if the right-hand side of the J-th</code></span>
<span class="codeline" id="line-9786"><code>** constraint is not available.  ^The sqlite3_vtab_rhs_value() interface</code></span>
<span class="codeline" id="line-9787"><code>** can return an result code other than SQLITE_OK or SQLITE_NOTFOUND if</code></span>
<span class="codeline" id="line-9788"><code>** something goes wrong.</code></span>
<span class="codeline" id="line-9789"><code>**</code></span>
<span class="codeline" id="line-9790"><code>** The sqlite3_vtab_rhs_value() interface is usually only successful if</code></span>
<span class="codeline" id="line-9791"><code>** the right-hand operand of a constraint is a literal value in the original</code></span>
<span class="codeline" id="line-9792"><code>** SQL statement.  If the right-hand operand is an expression or a reference</code></span>
<span class="codeline" id="line-9793"><code>** to some other column or a [host parameter], then sqlite3_vtab_rhs_value()</code></span>
<span class="codeline" id="line-9794"><code>** will probably return [SQLITE_NOTFOUND].</code></span>
<span class="codeline" id="line-9795"><code>**</code></span>
<span class="codeline" id="line-9796"><code>** ^(Some constraints, such as [SQLITE_INDEX_CONSTRAINT_ISNULL] and</code></span>
<span class="codeline" id="line-9797"><code>** [SQLITE_INDEX_CONSTRAINT_ISNOTNULL], have no right-hand operand.  For such</code></span>
<span class="codeline" id="line-9798"><code>** constraints, sqlite3_vtab_rhs_value() always returns SQLITE_NOTFOUND.)^</code></span>
<span class="codeline" id="line-9799"><code>**</code></span>
<span class="codeline" id="line-9800"><code>** ^The [sqlite3_value] object returned in *V is a protected sqlite3_value</code></span>
<span class="codeline" id="line-9801"><code>** and remains valid for the duration of the xBestIndex method call.</code></span>
<span class="codeline" id="line-9802"><code>** ^When xBestIndex returns, the sqlite3_value object returned by</code></span>
<span class="codeline" id="line-9803"><code>** sqlite3_vtab_rhs_value() is automatically deallocated.</code></span>
<span class="codeline" id="line-9804"><code>**</code></span>
<span class="codeline" id="line-9805"><code>** The "_rhs_" in the name of this routine is an abbreviation for</code></span>
<span class="codeline" id="line-9806"><code>** "Right-Hand Side".</code></span>
<span class="codeline" id="line-9807"><code>*/</code></span>
<span class="codeline" id="line-9808"><code>SQLITE_API int sqlite3_vtab_rhs_value(sqlite3_index_info*, int, sqlite3_value **ppVal);</code></span>
<span class="codeline" id="line-9809"><code></code></span>
<span class="codeline" id="line-9810"><code>/*</code></span>
<span class="codeline" id="line-9811"><code>** CAPI3REF: Conflict resolution modes</code></span>
<span class="codeline" id="line-9812"><code>** KEYWORDS: {conflict resolution mode}</code></span>
<span class="codeline" id="line-9813"><code>**</code></span>
<span class="codeline" id="line-9814"><code>** These constants are returned by [sqlite3_vtab_on_conflict()] to</code></span>
<span class="codeline" id="line-9815"><code>** inform a [virtual table] implementation what the [ON CONFLICT] mode</code></span>
<span class="codeline" id="line-9816"><code>** is for the SQL statement being evaluated.</code></span>
<span class="codeline" id="line-9817"><code>**</code></span>
<span class="codeline" id="line-9818"><code>** Note that the [SQLITE_IGNORE] constant is also used as a potential</code></span>
<span class="codeline" id="line-9819"><code>** return value from the [sqlite3_set_authorizer()] callback and that</code></span>
<span class="codeline" id="line-9820"><code>** [SQLITE_ABORT] is also a [result code].</code></span>
<span class="codeline" id="line-9821"><code>*/</code></span>
<span class="codeline" id="line-9822"><code>#define SQLITE_ROLLBACK 1</code></span>
<span class="codeline" id="line-9823"><code>/* #define SQLITE_IGNORE 2 // Also used by sqlite3_authorizer() callback */</code></span>
<span class="codeline" id="line-9824"><code>#define SQLITE_FAIL     3</code></span>
<span class="codeline" id="line-9825"><code>/* #define SQLITE_ABORT 4  // Also an error code */</code></span>
<span class="codeline" id="line-9826"><code>#define SQLITE_REPLACE  5</code></span>
<span class="codeline" id="line-9827"><code></code></span>
<span class="codeline" id="line-9828"><code>/*</code></span>
<span class="codeline" id="line-9829"><code>** CAPI3REF: Prepared Statement Scan Status Opcodes</code></span>
<span class="codeline" id="line-9830"><code>** KEYWORDS: {scanstatus options}</code></span>
<span class="codeline" id="line-9831"><code>**</code></span>
<span class="codeline" id="line-9832"><code>** The following constants can be used for the T parameter to the</code></span>
<span class="codeline" id="line-9833"><code>** [sqlite3_stmt_scanstatus(S,X,T,V)] interface.  Each constant designates a</code></span>
<span class="codeline" id="line-9834"><code>** different metric for sqlite3_stmt_scanstatus() to return.</code></span>
<span class="codeline" id="line-9835"><code>**</code></span>
<span class="codeline" id="line-9836"><code>** When the value returned to V is a string, space to hold that string is</code></span>
<span class="codeline" id="line-9837"><code>** managed by the prepared statement S and will be automatically freed when</code></span>
<span class="codeline" id="line-9838"><code>** S is finalized.</code></span>
<span class="codeline" id="line-9839"><code>**</code></span>
<span class="codeline" id="line-9840"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-9841"><code>** [[SQLITE_SCANSTAT_NLOOP]] &lt;dt&gt;SQLITE_SCANSTAT_NLOOP&lt;/dt&gt;</code></span>
<span class="codeline" id="line-9842"><code>** &lt;dd&gt;^The [sqlite3_int64] variable pointed to by the V parameter will be</code></span>
<span class="codeline" id="line-9843"><code>** set to the total number of times that the X-th loop has run.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-9844"><code>**</code></span>
<span class="codeline" id="line-9845"><code>** [[SQLITE_SCANSTAT_NVISIT]] &lt;dt&gt;SQLITE_SCANSTAT_NVISIT&lt;/dt&gt;</code></span>
<span class="codeline" id="line-9846"><code>** &lt;dd&gt;^The [sqlite3_int64] variable pointed to by the V parameter will be set</code></span>
<span class="codeline" id="line-9847"><code>** to the total number of rows examined by all iterations of the X-th loop.&lt;/dd&gt;</code></span>
<span class="codeline" id="line-9848"><code>**</code></span>
<span class="codeline" id="line-9849"><code>** [[SQLITE_SCANSTAT_EST]] &lt;dt&gt;SQLITE_SCANSTAT_EST&lt;/dt&gt;</code></span>
<span class="codeline" id="line-9850"><code>** &lt;dd&gt;^The "double" variable pointed to by the V parameter will be set to the</code></span>
<span class="codeline" id="line-9851"><code>** query planner's estimate for the average number of rows output from each</code></span>
<span class="codeline" id="line-9852"><code>** iteration of the X-th loop.  If the query planner's estimates was accurate,</code></span>
<span class="codeline" id="line-9853"><code>** then this value will approximate the quotient NVISIT/NLOOP and the</code></span>
<span class="codeline" id="line-9854"><code>** product of this value for all prior loops with the same SELECTID will</code></span>
<span class="codeline" id="line-9855"><code>** be the NLOOP value for the current loop.</code></span>
<span class="codeline" id="line-9856"><code>**</code></span>
<span class="codeline" id="line-9857"><code>** [[SQLITE_SCANSTAT_NAME]] &lt;dt&gt;SQLITE_SCANSTAT_NAME&lt;/dt&gt;</code></span>
<span class="codeline" id="line-9858"><code>** &lt;dd&gt;^The "const char *" variable pointed to by the V parameter will be set</code></span>
<span class="codeline" id="line-9859"><code>** to a zero-terminated UTF-8 string containing the name of the index or table</code></span>
<span class="codeline" id="line-9860"><code>** used for the X-th loop.</code></span>
<span class="codeline" id="line-9861"><code>**</code></span>
<span class="codeline" id="line-9862"><code>** [[SQLITE_SCANSTAT_EXPLAIN]] &lt;dt&gt;SQLITE_SCANSTAT_EXPLAIN&lt;/dt&gt;</code></span>
<span class="codeline" id="line-9863"><code>** &lt;dd&gt;^The "const char *" variable pointed to by the V parameter will be set</code></span>
<span class="codeline" id="line-9864"><code>** to a zero-terminated UTF-8 string containing the [EXPLAIN QUERY PLAN]</code></span>
<span class="codeline" id="line-9865"><code>** description for the X-th loop.</code></span>
<span class="codeline" id="line-9866"><code>**</code></span>
<span class="codeline" id="line-9867"><code>** [[SQLITE_SCANSTAT_SELECTID]] &lt;dt&gt;SQLITE_SCANSTAT_SELECT&lt;/dt&gt;</code></span>
<span class="codeline" id="line-9868"><code>** &lt;dd&gt;^The "int" variable pointed to by the V parameter will be set to the</code></span>
<span class="codeline" id="line-9869"><code>** "select-id" for the X-th loop.  The select-id identifies which query or</code></span>
<span class="codeline" id="line-9870"><code>** subquery the loop is part of.  The main query has a select-id of zero.</code></span>
<span class="codeline" id="line-9871"><code>** The select-id is the same value as is output in the first column</code></span>
<span class="codeline" id="line-9872"><code>** of an [EXPLAIN QUERY PLAN] query.</code></span>
<span class="codeline" id="line-9873"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-9874"><code>*/</code></span>
<span class="codeline" id="line-9875"><code>#define SQLITE_SCANSTAT_NLOOP    0</code></span>
<span class="codeline" id="line-9876"><code>#define SQLITE_SCANSTAT_NVISIT   1</code></span>
<span class="codeline" id="line-9877"><code>#define SQLITE_SCANSTAT_EST      2</code></span>
<span class="codeline" id="line-9878"><code>#define SQLITE_SCANSTAT_NAME     3</code></span>
<span class="codeline" id="line-9879"><code>#define SQLITE_SCANSTAT_EXPLAIN  4</code></span>
<span class="codeline" id="line-9880"><code>#define SQLITE_SCANSTAT_SELECTID 5</code></span>
<span class="codeline" id="line-9881"><code></code></span>
<span class="codeline" id="line-9882"><code>/*</code></span>
<span class="codeline" id="line-9883"><code>** CAPI3REF: Prepared Statement Scan Status</code></span>
<span class="codeline" id="line-9884"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-9885"><code>**</code></span>
<span class="codeline" id="line-9886"><code>** This interface returns information about the predicted and measured</code></span>
<span class="codeline" id="line-9887"><code>** performance for pStmt.  Advanced applications can use this</code></span>
<span class="codeline" id="line-9888"><code>** interface to compare the predicted and the measured performance and</code></span>
<span class="codeline" id="line-9889"><code>** issue warnings and/or rerun [ANALYZE] if discrepancies are found.</code></span>
<span class="codeline" id="line-9890"><code>**</code></span>
<span class="codeline" id="line-9891"><code>** Since this interface is expected to be rarely used, it is only</code></span>
<span class="codeline" id="line-9892"><code>** available if SQLite is compiled using the [SQLITE_ENABLE_STMT_SCANSTATUS]</code></span>
<span class="codeline" id="line-9893"><code>** compile-time option.</code></span>
<span class="codeline" id="line-9894"><code>**</code></span>
<span class="codeline" id="line-9895"><code>** The "iScanStatusOp" parameter determines which status information to return.</code></span>
<span class="codeline" id="line-9896"><code>** The "iScanStatusOp" must be one of the [scanstatus options] or the behavior</code></span>
<span class="codeline" id="line-9897"><code>** of this interface is undefined.</code></span>
<span class="codeline" id="line-9898"><code>** ^The requested measurement is written into a variable pointed to by</code></span>
<span class="codeline" id="line-9899"><code>** the "pOut" parameter.</code></span>
<span class="codeline" id="line-9900"><code>** Parameter "idx" identifies the specific loop to retrieve statistics for.</code></span>
<span class="codeline" id="line-9901"><code>** Loops are numbered starting from zero. ^If idx is out of range - less than</code></span>
<span class="codeline" id="line-9902"><code>** zero or greater than or equal to the total number of loops used to implement</code></span>
<span class="codeline" id="line-9903"><code>** the statement - a non-zero value is returned and the variable that pOut</code></span>
<span class="codeline" id="line-9904"><code>** points to is unchanged.</code></span>
<span class="codeline" id="line-9905"><code>**</code></span>
<span class="codeline" id="line-9906"><code>** ^Statistics might not be available for all loops in all statements. ^In cases</code></span>
<span class="codeline" id="line-9907"><code>** where there exist loops with no available statistics, this function behaves</code></span>
<span class="codeline" id="line-9908"><code>** as if the loop did not exist - it returns non-zero and leave the variable</code></span>
<span class="codeline" id="line-9909"><code>** that pOut points to unchanged.</code></span>
<span class="codeline" id="line-9910"><code>**</code></span>
<span class="codeline" id="line-9911"><code>** See also: [sqlite3_stmt_scanstatus_reset()]</code></span>
<span class="codeline" id="line-9912"><code>*/</code></span>
<span class="codeline" id="line-9913"><code>SQLITE_API int sqlite3_stmt_scanstatus(</code></span>
<span class="codeline" id="line-9914"><code>  sqlite3_stmt *pStmt,      /* Prepared statement for which info desired */</code></span>
<span class="codeline" id="line-9915"><code>  int idx,                  /* Index of loop to report on */</code></span>
<span class="codeline" id="line-9916"><code>  int iScanStatusOp,        /* Information desired.  SQLITE_SCANSTAT_* */</code></span>
<span class="codeline" id="line-9917"><code>  void *pOut                /* Result written here */</code></span>
<span class="codeline" id="line-9918"><code>);</code></span>
<span class="codeline" id="line-9919"><code></code></span>
<span class="codeline" id="line-9920"><code>/*</code></span>
<span class="codeline" id="line-9921"><code>** CAPI3REF: Zero Scan-Status Counters</code></span>
<span class="codeline" id="line-9922"><code>** METHOD: sqlite3_stmt</code></span>
<span class="codeline" id="line-9923"><code>**</code></span>
<span class="codeline" id="line-9924"><code>** ^Zero all [sqlite3_stmt_scanstatus()] related event counters.</code></span>
<span class="codeline" id="line-9925"><code>**</code></span>
<span class="codeline" id="line-9926"><code>** This API is only available if the library is built with pre-processor</code></span>
<span class="codeline" id="line-9927"><code>** symbol [SQLITE_ENABLE_STMT_SCANSTATUS] defined.</code></span>
<span class="codeline" id="line-9928"><code>*/</code></span>
<span class="codeline" id="line-9929"><code>SQLITE_API void sqlite3_stmt_scanstatus_reset(sqlite3_stmt*);</code></span>
<span class="codeline" id="line-9930"><code></code></span>
<span class="codeline" id="line-9931"><code>/*</code></span>
<span class="codeline" id="line-9932"><code>** CAPI3REF: Flush caches to disk mid-transaction</code></span>
<span class="codeline" id="line-9933"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-9934"><code>**</code></span>
<span class="codeline" id="line-9935"><code>** ^If a write-transaction is open on [database connection] D when the</code></span>
<span class="codeline" id="line-9936"><code>** [sqlite3_db_cacheflush(D)] interface invoked, any dirty</code></span>
<span class="codeline" id="line-9937"><code>** pages in the pager-cache that are not currently in use are written out</code></span>
<span class="codeline" id="line-9938"><code>** to disk. A dirty page may be in use if a database cursor created by an</code></span>
<span class="codeline" id="line-9939"><code>** active SQL statement is reading from it, or if it is page 1 of a database</code></span>
<span class="codeline" id="line-9940"><code>** file (page 1 is always "in use").  ^The [sqlite3_db_cacheflush(D)]</code></span>
<span class="codeline" id="line-9941"><code>** interface flushes caches for all schemas - "main", "temp", and</code></span>
<span class="codeline" id="line-9942"><code>** any [attached] databases.</code></span>
<span class="codeline" id="line-9943"><code>**</code></span>
<span class="codeline" id="line-9944"><code>** ^If this function needs to obtain extra database locks before dirty pages</code></span>
<span class="codeline" id="line-9945"><code>** can be flushed to disk, it does so. ^If those locks cannot be obtained</code></span>
<span class="codeline" id="line-9946"><code>** immediately and there is a busy-handler callback configured, it is invoked</code></span>
<span class="codeline" id="line-9947"><code>** in the usual manner. ^If the required lock still cannot be obtained, then</code></span>
<span class="codeline" id="line-9948"><code>** the database is skipped and an attempt made to flush any dirty pages</code></span>
<span class="codeline" id="line-9949"><code>** belonging to the next (if any) database. ^If any databases are skipped</code></span>
<span class="codeline" id="line-9950"><code>** because locks cannot be obtained, but no other error occurs, this</code></span>
<span class="codeline" id="line-9951"><code>** function returns SQLITE_BUSY.</code></span>
<span class="codeline" id="line-9952"><code>**</code></span>
<span class="codeline" id="line-9953"><code>** ^If any other error occurs while flushing dirty pages to disk (for</code></span>
<span class="codeline" id="line-9954"><code>** example an IO error or out-of-memory condition), then processing is</code></span>
<span class="codeline" id="line-9955"><code>** abandoned and an SQLite [error code] is returned to the caller immediately.</code></span>
<span class="codeline" id="line-9956"><code>**</code></span>
<span class="codeline" id="line-9957"><code>** ^Otherwise, if no error occurs, [sqlite3_db_cacheflush()] returns SQLITE_OK.</code></span>
<span class="codeline" id="line-9958"><code>**</code></span>
<span class="codeline" id="line-9959"><code>** ^This function does not set the database handle error code or message</code></span>
<span class="codeline" id="line-9960"><code>** returned by the [sqlite3_errcode()] and [sqlite3_errmsg()] functions.</code></span>
<span class="codeline" id="line-9961"><code>*/</code></span>
<span class="codeline" id="line-9962"><code>SQLITE_API int sqlite3_db_cacheflush(sqlite3*);</code></span>
<span class="codeline" id="line-9963"><code></code></span>
<span class="codeline" id="line-9964"><code>/*</code></span>
<span class="codeline" id="line-9965"><code>** CAPI3REF: The pre-update hook.</code></span>
<span class="codeline" id="line-9966"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-9967"><code>**</code></span>
<span class="codeline" id="line-9968"><code>** ^These interfaces are only available if SQLite is compiled using the</code></span>
<span class="codeline" id="line-9969"><code>** [SQLITE_ENABLE_PREUPDATE_HOOK] compile-time option.</code></span>
<span class="codeline" id="line-9970"><code>**</code></span>
<span class="codeline" id="line-9971"><code>** ^The [sqlite3_preupdate_hook()] interface registers a callback function</code></span>
<span class="codeline" id="line-9972"><code>** that is invoked prior to each [INSERT], [UPDATE], and [DELETE] operation</code></span>
<span class="codeline" id="line-9973"><code>** on a database table.</code></span>
<span class="codeline" id="line-9974"><code>** ^At most one preupdate hook may be registered at a time on a single</code></span>
<span class="codeline" id="line-9975"><code>** [database connection]; each call to [sqlite3_preupdate_hook()] overrides</code></span>
<span class="codeline" id="line-9976"><code>** the previous setting.</code></span>
<span class="codeline" id="line-9977"><code>** ^The preupdate hook is disabled by invoking [sqlite3_preupdate_hook()]</code></span>
<span class="codeline" id="line-9978"><code>** with a NULL pointer as the second parameter.</code></span>
<span class="codeline" id="line-9979"><code>** ^The third parameter to [sqlite3_preupdate_hook()] is passed through as</code></span>
<span class="codeline" id="line-9980"><code>** the first parameter to callbacks.</code></span>
<span class="codeline" id="line-9981"><code>**</code></span>
<span class="codeline" id="line-9982"><code>** ^The preupdate hook only fires for changes to real database tables; the</code></span>
<span class="codeline" id="line-9983"><code>** preupdate hook is not invoked for changes to [virtual tables] or to</code></span>
<span class="codeline" id="line-9984"><code>** system tables like sqlite_sequence or sqlite_stat1.</code></span>
<span class="codeline" id="line-9985"><code>**</code></span>
<span class="codeline" id="line-9986"><code>** ^The second parameter to the preupdate callback is a pointer to</code></span>
<span class="codeline" id="line-9987"><code>** the [database connection] that registered the preupdate hook.</code></span>
<span class="codeline" id="line-9988"><code>** ^The third parameter to the preupdate callback is one of the constants</code></span>
<span class="codeline" id="line-9989"><code>** [SQLITE_INSERT], [SQLITE_DELETE], or [SQLITE_UPDATE] to identify the</code></span>
<span class="codeline" id="line-9990"><code>** kind of update operation that is about to occur.</code></span>
<span class="codeline" id="line-9991"><code>** ^(The fourth parameter to the preupdate callback is the name of the</code></span>
<span class="codeline" id="line-9992"><code>** database within the database connection that is being modified.  This</code></span>
<span class="codeline" id="line-9993"><code>** will be "main" for the main database or "temp" for TEMP tables or</code></span>
<span class="codeline" id="line-9994"><code>** the name given after the AS keyword in the [ATTACH] statement for attached</code></span>
<span class="codeline" id="line-9995"><code>** databases.)^</code></span>
<span class="codeline" id="line-9996"><code>** ^The fifth parameter to the preupdate callback is the name of the</code></span>
<span class="codeline" id="line-9997"><code>** table that is being modified.</code></span>
<span class="codeline" id="line-9998"><code>**</code></span>
<span class="codeline" id="line-9999"><code>** For an UPDATE or DELETE operation on a [rowid table], the sixth</code></span>
<span class="codeline" id="line-10000"><code>** parameter passed to the preupdate callback is the initial [rowid] of the</code></span>
<span class="codeline" id="line-10001"><code>** row being modified or deleted. For an INSERT operation on a rowid table,</code></span>
<span class="codeline" id="line-10002"><code>** or any operation on a WITHOUT ROWID table, the value of the sixth</code></span>
<span class="codeline" id="line-10003"><code>** parameter is undefined. For an INSERT or UPDATE on a rowid table the</code></span>
<span class="codeline" id="line-10004"><code>** seventh parameter is the final rowid value of the row being inserted</code></span>
<span class="codeline" id="line-10005"><code>** or updated. The value of the seventh parameter passed to the callback</code></span>
<span class="codeline" id="line-10006"><code>** function is not defined for operations on WITHOUT ROWID tables, or for</code></span>
<span class="codeline" id="line-10007"><code>** DELETE operations on rowid tables.</code></span>
<span class="codeline" id="line-10008"><code>**</code></span>
<span class="codeline" id="line-10009"><code>** The [sqlite3_preupdate_old()], [sqlite3_preupdate_new()],</code></span>
<span class="codeline" id="line-10010"><code>** [sqlite3_preupdate_count()], and [sqlite3_preupdate_depth()] interfaces</code></span>
<span class="codeline" id="line-10011"><code>** provide additional information about a preupdate event. These routines</code></span>
<span class="codeline" id="line-10012"><code>** may only be called from within a preupdate callback.  Invoking any of</code></span>
<span class="codeline" id="line-10013"><code>** these routines from outside of a preupdate callback or with a</code></span>
<span class="codeline" id="line-10014"><code>** [database connection] pointer that is different from the one supplied</code></span>
<span class="codeline" id="line-10015"><code>** to the preupdate callback results in undefined and probably undesirable</code></span>
<span class="codeline" id="line-10016"><code>** behavior.</code></span>
<span class="codeline" id="line-10017"><code>**</code></span>
<span class="codeline" id="line-10018"><code>** ^The [sqlite3_preupdate_count(D)] interface returns the number of columns</code></span>
<span class="codeline" id="line-10019"><code>** in the row that is being inserted, updated, or deleted.</code></span>
<span class="codeline" id="line-10020"><code>**</code></span>
<span class="codeline" id="line-10021"><code>** ^The [sqlite3_preupdate_old(D,N,P)] interface writes into P a pointer to</code></span>
<span class="codeline" id="line-10022"><code>** a [protected sqlite3_value] that contains the value of the Nth column of</code></span>
<span class="codeline" id="line-10023"><code>** the table row before it is updated.  The N parameter must be between 0</code></span>
<span class="codeline" id="line-10024"><code>** and one less than the number of columns or the behavior will be</code></span>
<span class="codeline" id="line-10025"><code>** undefined. This must only be used within SQLITE_UPDATE and SQLITE_DELETE</code></span>
<span class="codeline" id="line-10026"><code>** preupdate callbacks; if it is used by an SQLITE_INSERT callback then the</code></span>
<span class="codeline" id="line-10027"><code>** behavior is undefined.  The [sqlite3_value] that P points to</code></span>
<span class="codeline" id="line-10028"><code>** will be destroyed when the preupdate callback returns.</code></span>
<span class="codeline" id="line-10029"><code>**</code></span>
<span class="codeline" id="line-10030"><code>** ^The [sqlite3_preupdate_new(D,N,P)] interface writes into P a pointer to</code></span>
<span class="codeline" id="line-10031"><code>** a [protected sqlite3_value] that contains the value of the Nth column of</code></span>
<span class="codeline" id="line-10032"><code>** the table row after it is updated.  The N parameter must be between 0</code></span>
<span class="codeline" id="line-10033"><code>** and one less than the number of columns or the behavior will be</code></span>
<span class="codeline" id="line-10034"><code>** undefined. This must only be used within SQLITE_INSERT and SQLITE_UPDATE</code></span>
<span class="codeline" id="line-10035"><code>** preupdate callbacks; if it is used by an SQLITE_DELETE callback then the</code></span>
<span class="codeline" id="line-10036"><code>** behavior is undefined.  The [sqlite3_value] that P points to</code></span>
<span class="codeline" id="line-10037"><code>** will be destroyed when the preupdate callback returns.</code></span>
<span class="codeline" id="line-10038"><code>**</code></span>
<span class="codeline" id="line-10039"><code>** ^The [sqlite3_preupdate_depth(D)] interface returns 0 if the preupdate</code></span>
<span class="codeline" id="line-10040"><code>** callback was invoked as a result of a direct insert, update, or delete</code></span>
<span class="codeline" id="line-10041"><code>** operation; or 1 for inserts, updates, or deletes invoked by top-level</code></span>
<span class="codeline" id="line-10042"><code>** triggers; or 2 for changes resulting from triggers called by top-level</code></span>
<span class="codeline" id="line-10043"><code>** triggers; and so forth.</code></span>
<span class="codeline" id="line-10044"><code>**</code></span>
<span class="codeline" id="line-10045"><code>** When the [sqlite3_blob_write()] API is used to update a blob column,</code></span>
<span class="codeline" id="line-10046"><code>** the pre-update hook is invoked with SQLITE_DELETE. This is because the</code></span>
<span class="codeline" id="line-10047"><code>** in this case the new values are not available. In this case, when a</code></span>
<span class="codeline" id="line-10048"><code>** callback made with op==SQLITE_DELETE is actuall a write using the</code></span>
<span class="codeline" id="line-10049"><code>** sqlite3_blob_write() API, the [sqlite3_preupdate_blobwrite()] returns</code></span>
<span class="codeline" id="line-10050"><code>** the index of the column being written. In other cases, where the</code></span>
<span class="codeline" id="line-10051"><code>** pre-update hook is being invoked for some other reason, including a</code></span>
<span class="codeline" id="line-10052"><code>** regular DELETE, sqlite3_preupdate_blobwrite() returns -1.</code></span>
<span class="codeline" id="line-10053"><code>**</code></span>
<span class="codeline" id="line-10054"><code>** See also:  [sqlite3_update_hook()]</code></span>
<span class="codeline" id="line-10055"><code>*/</code></span>
<span class="codeline" id="line-10056"><code>#if defined(SQLITE_ENABLE_PREUPDATE_HOOK)</code></span>
<span class="codeline" id="line-10057"><code>SQLITE_API void *sqlite3_preupdate_hook(</code></span>
<span class="codeline" id="line-10058"><code>  sqlite3 *db,</code></span>
<span class="codeline" id="line-10059"><code>  void(*xPreUpdate)(</code></span>
<span class="codeline" id="line-10060"><code>    void *pCtx,                   /* Copy of third arg to preupdate_hook() */</code></span>
<span class="codeline" id="line-10061"><code>    sqlite3 *db,                  /* Database handle */</code></span>
<span class="codeline" id="line-10062"><code>    int op,                       /* SQLITE_UPDATE, DELETE or INSERT */</code></span>
<span class="codeline" id="line-10063"><code>    char const *zDb,              /* Database name */</code></span>
<span class="codeline" id="line-10064"><code>    char const *zName,            /* Table name */</code></span>
<span class="codeline" id="line-10065"><code>    sqlite3_int64 iKey1,          /* Rowid of row about to be deleted/updated */</code></span>
<span class="codeline" id="line-10066"><code>    sqlite3_int64 iKey2           /* New rowid value (for a rowid UPDATE) */</code></span>
<span class="codeline" id="line-10067"><code>  ),</code></span>
<span class="codeline" id="line-10068"><code>  void*</code></span>
<span class="codeline" id="line-10069"><code>);</code></span>
<span class="codeline" id="line-10070"><code>SQLITE_API int sqlite3_preupdate_old(sqlite3 *, int, sqlite3_value **);</code></span>
<span class="codeline" id="line-10071"><code>SQLITE_API int sqlite3_preupdate_count(sqlite3 *);</code></span>
<span class="codeline" id="line-10072"><code>SQLITE_API int sqlite3_preupdate_depth(sqlite3 *);</code></span>
<span class="codeline" id="line-10073"><code>SQLITE_API int sqlite3_preupdate_new(sqlite3 *, int, sqlite3_value **);</code></span>
<span class="codeline" id="line-10074"><code>SQLITE_API int sqlite3_preupdate_blobwrite(sqlite3 *);</code></span>
<span class="codeline" id="line-10075"><code>#endif</code></span>
<span class="codeline" id="line-10076"><code></code></span>
<span class="codeline" id="line-10077"><code>/*</code></span>
<span class="codeline" id="line-10078"><code>** CAPI3REF: Low-level system error code</code></span>
<span class="codeline" id="line-10079"><code>** METHOD: sqlite3</code></span>
<span class="codeline" id="line-10080"><code>**</code></span>
<span class="codeline" id="line-10081"><code>** ^Attempt to return the underlying operating system error code or error</code></span>
<span class="codeline" id="line-10082"><code>** number that caused the most recent I/O error or failure to open a file.</code></span>
<span class="codeline" id="line-10083"><code>** The return value is OS-dependent.  For example, on unix systems, after</code></span>
<span class="codeline" id="line-10084"><code>** [sqlite3_open_v2()] returns [SQLITE_CANTOPEN], this interface could be</code></span>
<span class="codeline" id="line-10085"><code>** called to get back the underlying "errno" that caused the problem, such</code></span>
<span class="codeline" id="line-10086"><code>** as ENOSPC, EAUTH, EISDIR, and so forth.</code></span>
<span class="codeline" id="line-10087"><code>*/</code></span>
<span class="codeline" id="line-10088"><code>SQLITE_API int sqlite3_system_errno(sqlite3*);</code></span>
<span class="codeline" id="line-10089"><code></code></span>
<span class="codeline" id="line-10090"><code>/*</code></span>
<span class="codeline" id="line-10091"><code>** CAPI3REF: Database Snapshot</code></span>
<span class="codeline" id="line-10092"><code>** KEYWORDS: {snapshot} {sqlite3_snapshot}</code></span>
<span class="codeline" id="line-10093"><code>**</code></span>
<span class="codeline" id="line-10094"><code>** An instance of the snapshot object records the state of a [WAL mode]</code></span>
<span class="codeline" id="line-10095"><code>** database for some specific point in history.</code></span>
<span class="codeline" id="line-10096"><code>**</code></span>
<span class="codeline" id="line-10097"><code>** In [WAL mode], multiple [database connections] that are open on the</code></span>
<span class="codeline" id="line-10098"><code>** same database file can each be reading a different historical version</code></span>
<span class="codeline" id="line-10099"><code>** of the database file.  When a [database connection] begins a read</code></span>
<span class="codeline" id="line-10100"><code>** transaction, that connection sees an unchanging copy of the database</code></span>
<span class="codeline" id="line-10101"><code>** as it existed for the point in time when the transaction first started.</code></span>
<span class="codeline" id="line-10102"><code>** Subsequent changes to the database from other connections are not seen</code></span>
<span class="codeline" id="line-10103"><code>** by the reader until a new read transaction is started.</code></span>
<span class="codeline" id="line-10104"><code>**</code></span>
<span class="codeline" id="line-10105"><code>** The sqlite3_snapshot object records state information about an historical</code></span>
<span class="codeline" id="line-10106"><code>** version of the database file so that it is possible to later open a new read</code></span>
<span class="codeline" id="line-10107"><code>** transaction that sees that historical version of the database rather than</code></span>
<span class="codeline" id="line-10108"><code>** the most recent version.</code></span>
<span class="codeline" id="line-10109"><code>*/</code></span>
<span class="codeline" id="line-10110"><code>typedef struct sqlite3_snapshot {</code></span>
<span class="codeline" id="line-10111"><code>  unsigned char hidden[48];</code></span>
<span class="codeline" id="line-10112"><code>} sqlite3_snapshot;</code></span>
<span class="codeline" id="line-10113"><code></code></span>
<span class="codeline" id="line-10114"><code>/*</code></span>
<span class="codeline" id="line-10115"><code>** CAPI3REF: Record A Database Snapshot</code></span>
<span class="codeline" id="line-10116"><code>** CONSTRUCTOR: sqlite3_snapshot</code></span>
<span class="codeline" id="line-10117"><code>**</code></span>
<span class="codeline" id="line-10118"><code>** ^The [sqlite3_snapshot_get(D,S,P)] interface attempts to make a</code></span>
<span class="codeline" id="line-10119"><code>** new [sqlite3_snapshot] object that records the current state of</code></span>
<span class="codeline" id="line-10120"><code>** schema S in database connection D.  ^On success, the</code></span>
<span class="codeline" id="line-10121"><code>** [sqlite3_snapshot_get(D,S,P)] interface writes a pointer to the newly</code></span>
<span class="codeline" id="line-10122"><code>** created [sqlite3_snapshot] object into *P and returns SQLITE_OK.</code></span>
<span class="codeline" id="line-10123"><code>** If there is not already a read-transaction open on schema S when</code></span>
<span class="codeline" id="line-10124"><code>** this function is called, one is opened automatically.</code></span>
<span class="codeline" id="line-10125"><code>**</code></span>
<span class="codeline" id="line-10126"><code>** The following must be true for this function to succeed. If any of</code></span>
<span class="codeline" id="line-10127"><code>** the following statements are false when sqlite3_snapshot_get() is</code></span>
<span class="codeline" id="line-10128"><code>** called, SQLITE_ERROR is returned. The final value of *P is undefined</code></span>
<span class="codeline" id="line-10129"><code>** in this case.</code></span>
<span class="codeline" id="line-10130"><code>**</code></span>
<span class="codeline" id="line-10131"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-10132"><code>**   &lt;li&gt; The database handle must not be in [autocommit mode].</code></span>
<span class="codeline" id="line-10133"><code>**</code></span>
<span class="codeline" id="line-10134"><code>**   &lt;li&gt; Schema S of [database connection] D must be a [WAL mode] database.</code></span>
<span class="codeline" id="line-10135"><code>**</code></span>
<span class="codeline" id="line-10136"><code>**   &lt;li&gt; There must not be a write transaction open on schema S of database</code></span>
<span class="codeline" id="line-10137"><code>**        connection D.</code></span>
<span class="codeline" id="line-10138"><code>**</code></span>
<span class="codeline" id="line-10139"><code>**   &lt;li&gt; One or more transactions must have been written to the current wal</code></span>
<span class="codeline" id="line-10140"><code>**        file since it was created on disk (by any connection). This means</code></span>
<span class="codeline" id="line-10141"><code>**        that a snapshot cannot be taken on a wal mode database with no wal</code></span>
<span class="codeline" id="line-10142"><code>**        file immediately after it is first opened. At least one transaction</code></span>
<span class="codeline" id="line-10143"><code>**        must be written to it first.</code></span>
<span class="codeline" id="line-10144"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-10145"><code>**</code></span>
<span class="codeline" id="line-10146"><code>** This function may also return SQLITE_NOMEM.  If it is called with the</code></span>
<span class="codeline" id="line-10147"><code>** database handle in autocommit mode but fails for some other reason,</code></span>
<span class="codeline" id="line-10148"><code>** whether or not a read transaction is opened on schema S is undefined.</code></span>
<span class="codeline" id="line-10149"><code>**</code></span>
<span class="codeline" id="line-10150"><code>** The [sqlite3_snapshot] object returned from a successful call to</code></span>
<span class="codeline" id="line-10151"><code>** [sqlite3_snapshot_get()] must be freed using [sqlite3_snapshot_free()]</code></span>
<span class="codeline" id="line-10152"><code>** to avoid a memory leak.</code></span>
<span class="codeline" id="line-10153"><code>**</code></span>
<span class="codeline" id="line-10154"><code>** The [sqlite3_snapshot_get()] interface is only available when the</code></span>
<span class="codeline" id="line-10155"><code>** [SQLITE_ENABLE_SNAPSHOT] compile-time option is used.</code></span>
<span class="codeline" id="line-10156"><code>*/</code></span>
<span class="codeline" id="line-10157"><code>SQLITE_API SQLITE_EXPERIMENTAL int sqlite3_snapshot_get(</code></span>
<span class="codeline" id="line-10158"><code>  sqlite3 *db,</code></span>
<span class="codeline" id="line-10159"><code>  const char *zSchema,</code></span>
<span class="codeline" id="line-10160"><code>  sqlite3_snapshot **ppSnapshot</code></span>
<span class="codeline" id="line-10161"><code>);</code></span>
<span class="codeline" id="line-10162"><code></code></span>
<span class="codeline" id="line-10163"><code>/*</code></span>
<span class="codeline" id="line-10164"><code>** CAPI3REF: Start a read transaction on an historical snapshot</code></span>
<span class="codeline" id="line-10165"><code>** METHOD: sqlite3_snapshot</code></span>
<span class="codeline" id="line-10166"><code>**</code></span>
<span class="codeline" id="line-10167"><code>** ^The [sqlite3_snapshot_open(D,S,P)] interface either starts a new read</code></span>
<span class="codeline" id="line-10168"><code>** transaction or upgrades an existing one for schema S of</code></span>
<span class="codeline" id="line-10169"><code>** [database connection] D such that the read transaction refers to</code></span>
<span class="codeline" id="line-10170"><code>** historical [snapshot] P, rather than the most recent change to the</code></span>
<span class="codeline" id="line-10171"><code>** database. ^The [sqlite3_snapshot_open()] interface returns SQLITE_OK</code></span>
<span class="codeline" id="line-10172"><code>** on success or an appropriate [error code] if it fails.</code></span>
<span class="codeline" id="line-10173"><code>**</code></span>
<span class="codeline" id="line-10174"><code>** ^In order to succeed, the database connection must not be in</code></span>
<span class="codeline" id="line-10175"><code>** [autocommit mode] when [sqlite3_snapshot_open(D,S,P)] is called. If there</code></span>
<span class="codeline" id="line-10176"><code>** is already a read transaction open on schema S, then the database handle</code></span>
<span class="codeline" id="line-10177"><code>** must have no active statements (SELECT statements that have been passed</code></span>
<span class="codeline" id="line-10178"><code>** to sqlite3_step() but not sqlite3_reset() or sqlite3_finalize()).</code></span>
<span class="codeline" id="line-10179"><code>** SQLITE_ERROR is returned if either of these conditions is violated, or</code></span>
<span class="codeline" id="line-10180"><code>** if schema S does not exist, or if the snapshot object is invalid.</code></span>
<span class="codeline" id="line-10181"><code>**</code></span>
<span class="codeline" id="line-10182"><code>** ^A call to sqlite3_snapshot_open() will fail to open if the specified</code></span>
<span class="codeline" id="line-10183"><code>** snapshot has been overwritten by a [checkpoint]. In this case</code></span>
<span class="codeline" id="line-10184"><code>** SQLITE_ERROR_SNAPSHOT is returned.</code></span>
<span class="codeline" id="line-10185"><code>**</code></span>
<span class="codeline" id="line-10186"><code>** If there is already a read transaction open when this function is</code></span>
<span class="codeline" id="line-10187"><code>** invoked, then the same read transaction remains open (on the same</code></span>
<span class="codeline" id="line-10188"><code>** database snapshot) if SQLITE_ERROR, SQLITE_BUSY or SQLITE_ERROR_SNAPSHOT</code></span>
<span class="codeline" id="line-10189"><code>** is returned. If another error code - for example SQLITE_PROTOCOL or an</code></span>
<span class="codeline" id="line-10190"><code>** SQLITE_IOERR error code - is returned, then the final state of the</code></span>
<span class="codeline" id="line-10191"><code>** read transaction is undefined. If SQLITE_OK is returned, then the</code></span>
<span class="codeline" id="line-10192"><code>** read transaction is now open on database snapshot P.</code></span>
<span class="codeline" id="line-10193"><code>**</code></span>
<span class="codeline" id="line-10194"><code>** ^(A call to [sqlite3_snapshot_open(D,S,P)] will fail if the</code></span>
<span class="codeline" id="line-10195"><code>** database connection D does not know that the database file for</code></span>
<span class="codeline" id="line-10196"><code>** schema S is in [WAL mode].  A database connection might not know</code></span>
<span class="codeline" id="line-10197"><code>** that the database file is in [WAL mode] if there has been no prior</code></span>
<span class="codeline" id="line-10198"><code>** I/O on that database connection, or if the database entered [WAL mode]</code></span>
<span class="codeline" id="line-10199"><code>** after the most recent I/O on the database connection.)^</code></span>
<span class="codeline" id="line-10200"><code>** (Hint: Run "[PRAGMA application_id]" against a newly opened</code></span>
<span class="codeline" id="line-10201"><code>** database connection in order to make it ready to use snapshots.)</code></span>
<span class="codeline" id="line-10202"><code>**</code></span>
<span class="codeline" id="line-10203"><code>** The [sqlite3_snapshot_open()] interface is only available when the</code></span>
<span class="codeline" id="line-10204"><code>** [SQLITE_ENABLE_SNAPSHOT] compile-time option is used.</code></span>
<span class="codeline" id="line-10205"><code>*/</code></span>
<span class="codeline" id="line-10206"><code>SQLITE_API SQLITE_EXPERIMENTAL int sqlite3_snapshot_open(</code></span>
<span class="codeline" id="line-10207"><code>  sqlite3 *db,</code></span>
<span class="codeline" id="line-10208"><code>  const char *zSchema,</code></span>
<span class="codeline" id="line-10209"><code>  sqlite3_snapshot *pSnapshot</code></span>
<span class="codeline" id="line-10210"><code>);</code></span>
<span class="codeline" id="line-10211"><code></code></span>
<span class="codeline" id="line-10212"><code>/*</code></span>
<span class="codeline" id="line-10213"><code>** CAPI3REF: Destroy a snapshot</code></span>
<span class="codeline" id="line-10214"><code>** DESTRUCTOR: sqlite3_snapshot</code></span>
<span class="codeline" id="line-10215"><code>**</code></span>
<span class="codeline" id="line-10216"><code>** ^The [sqlite3_snapshot_free(P)] interface destroys [sqlite3_snapshot] P.</code></span>
<span class="codeline" id="line-10217"><code>** The application must eventually free every [sqlite3_snapshot] object</code></span>
<span class="codeline" id="line-10218"><code>** using this routine to avoid a memory leak.</code></span>
<span class="codeline" id="line-10219"><code>**</code></span>
<span class="codeline" id="line-10220"><code>** The [sqlite3_snapshot_free()] interface is only available when the</code></span>
<span class="codeline" id="line-10221"><code>** [SQLITE_ENABLE_SNAPSHOT] compile-time option is used.</code></span>
<span class="codeline" id="line-10222"><code>*/</code></span>
<span class="codeline" id="line-10223"><code>SQLITE_API SQLITE_EXPERIMENTAL void sqlite3_snapshot_free(sqlite3_snapshot*);</code></span>
<span class="codeline" id="line-10224"><code></code></span>
<span class="codeline" id="line-10225"><code>/*</code></span>
<span class="codeline" id="line-10226"><code>** CAPI3REF: Compare the ages of two snapshot handles.</code></span>
<span class="codeline" id="line-10227"><code>** METHOD: sqlite3_snapshot</code></span>
<span class="codeline" id="line-10228"><code>**</code></span>
<span class="codeline" id="line-10229"><code>** The sqlite3_snapshot_cmp(P1, P2) interface is used to compare the ages</code></span>
<span class="codeline" id="line-10230"><code>** of two valid snapshot handles.</code></span>
<span class="codeline" id="line-10231"><code>**</code></span>
<span class="codeline" id="line-10232"><code>** If the two snapshot handles are not associated with the same database</code></span>
<span class="codeline" id="line-10233"><code>** file, the result of the comparison is undefined.</code></span>
<span class="codeline" id="line-10234"><code>**</code></span>
<span class="codeline" id="line-10235"><code>** Additionally, the result of the comparison is only valid if both of the</code></span>
<span class="codeline" id="line-10236"><code>** snapshot handles were obtained by calling sqlite3_snapshot_get() since the</code></span>
<span class="codeline" id="line-10237"><code>** last time the wal file was deleted. The wal file is deleted when the</code></span>
<span class="codeline" id="line-10238"><code>** database is changed back to rollback mode or when the number of database</code></span>
<span class="codeline" id="line-10239"><code>** clients drops to zero. If either snapshot handle was obtained before the</code></span>
<span class="codeline" id="line-10240"><code>** wal file was last deleted, the value returned by this function</code></span>
<span class="codeline" id="line-10241"><code>** is undefined.</code></span>
<span class="codeline" id="line-10242"><code>**</code></span>
<span class="codeline" id="line-10243"><code>** Otherwise, this API returns a negative value if P1 refers to an older</code></span>
<span class="codeline" id="line-10244"><code>** snapshot than P2, zero if the two handles refer to the same database</code></span>
<span class="codeline" id="line-10245"><code>** snapshot, and a positive value if P1 is a newer snapshot than P2.</code></span>
<span class="codeline" id="line-10246"><code>**</code></span>
<span class="codeline" id="line-10247"><code>** This interface is only available if SQLite is compiled with the</code></span>
<span class="codeline" id="line-10248"><code>** [SQLITE_ENABLE_SNAPSHOT] option.</code></span>
<span class="codeline" id="line-10249"><code>*/</code></span>
<span class="codeline" id="line-10250"><code>SQLITE_API SQLITE_EXPERIMENTAL int sqlite3_snapshot_cmp(</code></span>
<span class="codeline" id="line-10251"><code>  sqlite3_snapshot *p1,</code></span>
<span class="codeline" id="line-10252"><code>  sqlite3_snapshot *p2</code></span>
<span class="codeline" id="line-10253"><code>);</code></span>
<span class="codeline" id="line-10254"><code></code></span>
<span class="codeline" id="line-10255"><code>/*</code></span>
<span class="codeline" id="line-10256"><code>** CAPI3REF: Recover snapshots from a wal file</code></span>
<span class="codeline" id="line-10257"><code>** METHOD: sqlite3_snapshot</code></span>
<span class="codeline" id="line-10258"><code>**</code></span>
<span class="codeline" id="line-10259"><code>** If a [WAL file] remains on disk after all database connections close</code></span>
<span class="codeline" id="line-10260"><code>** (either through the use of the [SQLITE_FCNTL_PERSIST_WAL] [file control]</code></span>
<span class="codeline" id="line-10261"><code>** or because the last process to have the database opened exited without</code></span>
<span class="codeline" id="line-10262"><code>** calling [sqlite3_close()]) and a new connection is subsequently opened</code></span>
<span class="codeline" id="line-10263"><code>** on that database and [WAL file], the [sqlite3_snapshot_open()] interface</code></span>
<span class="codeline" id="line-10264"><code>** will only be able to open the last transaction added to the WAL file</code></span>
<span class="codeline" id="line-10265"><code>** even though the WAL file contains other valid transactions.</code></span>
<span class="codeline" id="line-10266"><code>**</code></span>
<span class="codeline" id="line-10267"><code>** This function attempts to scan the WAL file associated with database zDb</code></span>
<span class="codeline" id="line-10268"><code>** of database handle db and make all valid snapshots available to</code></span>
<span class="codeline" id="line-10269"><code>** sqlite3_snapshot_open(). It is an error if there is already a read</code></span>
<span class="codeline" id="line-10270"><code>** transaction open on the database, or if the database is not a WAL mode</code></span>
<span class="codeline" id="line-10271"><code>** database.</code></span>
<span class="codeline" id="line-10272"><code>**</code></span>
<span class="codeline" id="line-10273"><code>** SQLITE_OK is returned if successful, or an SQLite error code otherwise.</code></span>
<span class="codeline" id="line-10274"><code>**</code></span>
<span class="codeline" id="line-10275"><code>** This interface is only available if SQLite is compiled with the</code></span>
<span class="codeline" id="line-10276"><code>** [SQLITE_ENABLE_SNAPSHOT] option.</code></span>
<span class="codeline" id="line-10277"><code>*/</code></span>
<span class="codeline" id="line-10278"><code>SQLITE_API SQLITE_EXPERIMENTAL int sqlite3_snapshot_recover(sqlite3 *db, const char *zDb);</code></span>
<span class="codeline" id="line-10279"><code></code></span>
<span class="codeline" id="line-10280"><code>/*</code></span>
<span class="codeline" id="line-10281"><code>** CAPI3REF: Serialize a database</code></span>
<span class="codeline" id="line-10282"><code>**</code></span>
<span class="codeline" id="line-10283"><code>** The sqlite3_serialize(D,S,P,F) interface returns a pointer to memory</code></span>
<span class="codeline" id="line-10284"><code>** that is a serialization of the S database on [database connection] D.</code></span>
<span class="codeline" id="line-10285"><code>** If P is not a NULL pointer, then the size of the database in bytes</code></span>
<span class="codeline" id="line-10286"><code>** is written into *P.</code></span>
<span class="codeline" id="line-10287"><code>**</code></span>
<span class="codeline" id="line-10288"><code>** For an ordinary on-disk database file, the serialization is just a</code></span>
<span class="codeline" id="line-10289"><code>** copy of the disk file.  For an in-memory database or a "TEMP" database,</code></span>
<span class="codeline" id="line-10290"><code>** the serialization is the same sequence of bytes which would be written</code></span>
<span class="codeline" id="line-10291"><code>** to disk if that database where backed up to disk.</code></span>
<span class="codeline" id="line-10292"><code>**</code></span>
<span class="codeline" id="line-10293"><code>** The usual case is that sqlite3_serialize() copies the serialization of</code></span>
<span class="codeline" id="line-10294"><code>** the database into memory obtained from [sqlite3_malloc64()] and returns</code></span>
<span class="codeline" id="line-10295"><code>** a pointer to that memory.  The caller is responsible for freeing the</code></span>
<span class="codeline" id="line-10296"><code>** returned value to avoid a memory leak.  However, if the F argument</code></span>
<span class="codeline" id="line-10297"><code>** contains the SQLITE_SERIALIZE_NOCOPY bit, then no memory allocations</code></span>
<span class="codeline" id="line-10298"><code>** are made, and the sqlite3_serialize() function will return a pointer</code></span>
<span class="codeline" id="line-10299"><code>** to the contiguous memory representation of the database that SQLite</code></span>
<span class="codeline" id="line-10300"><code>** is currently using for that database, or NULL if the no such contiguous</code></span>
<span class="codeline" id="line-10301"><code>** memory representation of the database exists.  A contiguous memory</code></span>
<span class="codeline" id="line-10302"><code>** representation of the database will usually only exist if there has</code></span>
<span class="codeline" id="line-10303"><code>** been a prior call to [sqlite3_deserialize(D,S,...)] with the same</code></span>
<span class="codeline" id="line-10304"><code>** values of D and S.</code></span>
<span class="codeline" id="line-10305"><code>** The size of the database is written into *P even if the</code></span>
<span class="codeline" id="line-10306"><code>** SQLITE_SERIALIZE_NOCOPY bit is set but no contiguous copy</code></span>
<span class="codeline" id="line-10307"><code>** of the database exists.</code></span>
<span class="codeline" id="line-10308"><code>**</code></span>
<span class="codeline" id="line-10309"><code>** A call to sqlite3_serialize(D,S,P,F) might return NULL even if the</code></span>
<span class="codeline" id="line-10310"><code>** SQLITE_SERIALIZE_NOCOPY bit is omitted from argument F if a memory</code></span>
<span class="codeline" id="line-10311"><code>** allocation error occurs.</code></span>
<span class="codeline" id="line-10312"><code>**</code></span>
<span class="codeline" id="line-10313"><code>** This interface is omitted if SQLite is compiled with the</code></span>
<span class="codeline" id="line-10314"><code>** [SQLITE_OMIT_DESERIALIZE] option.</code></span>
<span class="codeline" id="line-10315"><code>*/</code></span>
<span class="codeline" id="line-10316"><code>SQLITE_API unsigned char *sqlite3_serialize(</code></span>
<span class="codeline" id="line-10317"><code>  sqlite3 *db,           /* The database connection */</code></span>
<span class="codeline" id="line-10318"><code>  const char *zSchema,   /* Which DB to serialize. ex: "main", "temp", ... */</code></span>
<span class="codeline" id="line-10319"><code>  sqlite3_int64 *piSize, /* Write size of the DB here, if not NULL */</code></span>
<span class="codeline" id="line-10320"><code>  unsigned int mFlags    /* Zero or more SQLITE_SERIALIZE_* flags */</code></span>
<span class="codeline" id="line-10321"><code>);</code></span>
<span class="codeline" id="line-10322"><code></code></span>
<span class="codeline" id="line-10323"><code>/*</code></span>
<span class="codeline" id="line-10324"><code>** CAPI3REF: Flags for sqlite3_serialize</code></span>
<span class="codeline" id="line-10325"><code>**</code></span>
<span class="codeline" id="line-10326"><code>** Zero or more of the following constants can be OR-ed together for</code></span>
<span class="codeline" id="line-10327"><code>** the F argument to [sqlite3_serialize(D,S,P,F)].</code></span>
<span class="codeline" id="line-10328"><code>**</code></span>
<span class="codeline" id="line-10329"><code>** SQLITE_SERIALIZE_NOCOPY means that [sqlite3_serialize()] will return</code></span>
<span class="codeline" id="line-10330"><code>** a pointer to contiguous in-memory database that it is currently using,</code></span>
<span class="codeline" id="line-10331"><code>** without making a copy of the database.  If SQLite is not currently using</code></span>
<span class="codeline" id="line-10332"><code>** a contiguous in-memory database, then this option causes</code></span>
<span class="codeline" id="line-10333"><code>** [sqlite3_serialize()] to return a NULL pointer.  SQLite will only be</code></span>
<span class="codeline" id="line-10334"><code>** using a contiguous in-memory database if it has been initialized by a</code></span>
<span class="codeline" id="line-10335"><code>** prior call to [sqlite3_deserialize()].</code></span>
<span class="codeline" id="line-10336"><code>*/</code></span>
<span class="codeline" id="line-10337"><code>#define SQLITE_SERIALIZE_NOCOPY 0x001   /* Do no memory allocations */</code></span>
<span class="codeline" id="line-10338"><code></code></span>
<span class="codeline" id="line-10339"><code>/*</code></span>
<span class="codeline" id="line-10340"><code>** CAPI3REF: Deserialize a database</code></span>
<span class="codeline" id="line-10341"><code>**</code></span>
<span class="codeline" id="line-10342"><code>** The sqlite3_deserialize(D,S,P,N,M,F) interface causes the</code></span>
<span class="codeline" id="line-10343"><code>** [database connection] D to disconnect from database S and then</code></span>
<span class="codeline" id="line-10344"><code>** reopen S as an in-memory database based on the serialization contained</code></span>
<span class="codeline" id="line-10345"><code>** in P.  The serialized database P is N bytes in size.  M is the size of</code></span>
<span class="codeline" id="line-10346"><code>** the buffer P, which might be larger than N.  If M is larger than N, and</code></span>
<span class="codeline" id="line-10347"><code>** the SQLITE_DESERIALIZE_READONLY bit is not set in F, then SQLite is</code></span>
<span class="codeline" id="line-10348"><code>** permitted to add content to the in-memory database as long as the total</code></span>
<span class="codeline" id="line-10349"><code>** size does not exceed M bytes.</code></span>
<span class="codeline" id="line-10350"><code>**</code></span>
<span class="codeline" id="line-10351"><code>** If the SQLITE_DESERIALIZE_FREEONCLOSE bit is set in F, then SQLite will</code></span>
<span class="codeline" id="line-10352"><code>** invoke sqlite3_free() on the serialization buffer when the database</code></span>
<span class="codeline" id="line-10353"><code>** connection closes.  If the SQLITE_DESERIALIZE_RESIZEABLE bit is set, then</code></span>
<span class="codeline" id="line-10354"><code>** SQLite will try to increase the buffer size using sqlite3_realloc64()</code></span>
<span class="codeline" id="line-10355"><code>** if writes on the database cause it to grow larger than M bytes.</code></span>
<span class="codeline" id="line-10356"><code>**</code></span>
<span class="codeline" id="line-10357"><code>** The sqlite3_deserialize() interface will fail with SQLITE_BUSY if the</code></span>
<span class="codeline" id="line-10358"><code>** database is currently in a read transaction or is involved in a backup</code></span>
<span class="codeline" id="line-10359"><code>** operation.</code></span>
<span class="codeline" id="line-10360"><code>**</code></span>
<span class="codeline" id="line-10361"><code>** It is not possible to deserialized into the TEMP database.  If the</code></span>
<span class="codeline" id="line-10362"><code>** S argument to sqlite3_deserialize(D,S,P,N,M,F) is "temp" then the</code></span>
<span class="codeline" id="line-10363"><code>** function returns SQLITE_ERROR.</code></span>
<span class="codeline" id="line-10364"><code>**</code></span>
<span class="codeline" id="line-10365"><code>** If sqlite3_deserialize(D,S,P,N,M,F) fails for any reason and if the</code></span>
<span class="codeline" id="line-10366"><code>** SQLITE_DESERIALIZE_FREEONCLOSE bit is set in argument F, then</code></span>
<span class="codeline" id="line-10367"><code>** [sqlite3_free()] is invoked on argument P prior to returning.</code></span>
<span class="codeline" id="line-10368"><code>**</code></span>
<span class="codeline" id="line-10369"><code>** This interface is omitted if SQLite is compiled with the</code></span>
<span class="codeline" id="line-10370"><code>** [SQLITE_OMIT_DESERIALIZE] option.</code></span>
<span class="codeline" id="line-10371"><code>*/</code></span>
<span class="codeline" id="line-10372"><code>SQLITE_API int sqlite3_deserialize(</code></span>
<span class="codeline" id="line-10373"><code>  sqlite3 *db,            /* The database connection */</code></span>
<span class="codeline" id="line-10374"><code>  const char *zSchema,    /* Which DB to reopen with the deserialization */</code></span>
<span class="codeline" id="line-10375"><code>  unsigned char *pData,   /* The serialized database content */</code></span>
<span class="codeline" id="line-10376"><code>  sqlite3_int64 szDb,     /* Number bytes in the deserialization */</code></span>
<span class="codeline" id="line-10377"><code>  sqlite3_int64 szBuf,    /* Total size of buffer pData[] */</code></span>
<span class="codeline" id="line-10378"><code>  unsigned mFlags         /* Zero or more SQLITE_DESERIALIZE_* flags */</code></span>
<span class="codeline" id="line-10379"><code>);</code></span>
<span class="codeline" id="line-10380"><code></code></span>
<span class="codeline" id="line-10381"><code>/*</code></span>
<span class="codeline" id="line-10382"><code>** CAPI3REF: Flags for sqlite3_deserialize()</code></span>
<span class="codeline" id="line-10383"><code>**</code></span>
<span class="codeline" id="line-10384"><code>** The following are allowed values for 6th argument (the F argument) to</code></span>
<span class="codeline" id="line-10385"><code>** the [sqlite3_deserialize(D,S,P,N,M,F)] interface.</code></span>
<span class="codeline" id="line-10386"><code>**</code></span>
<span class="codeline" id="line-10387"><code>** The SQLITE_DESERIALIZE_FREEONCLOSE means that the database serialization</code></span>
<span class="codeline" id="line-10388"><code>** in the P argument is held in memory obtained from [sqlite3_malloc64()]</code></span>
<span class="codeline" id="line-10389"><code>** and that SQLite should take ownership of this memory and automatically</code></span>
<span class="codeline" id="line-10390"><code>** free it when it has finished using it.  Without this flag, the caller</code></span>
<span class="codeline" id="line-10391"><code>** is responsible for freeing any dynamically allocated memory.</code></span>
<span class="codeline" id="line-10392"><code>**</code></span>
<span class="codeline" id="line-10393"><code>** The SQLITE_DESERIALIZE_RESIZEABLE flag means that SQLite is allowed to</code></span>
<span class="codeline" id="line-10394"><code>** grow the size of the database using calls to [sqlite3_realloc64()].  This</code></span>
<span class="codeline" id="line-10395"><code>** flag should only be used if SQLITE_DESERIALIZE_FREEONCLOSE is also used.</code></span>
<span class="codeline" id="line-10396"><code>** Without this flag, the deserialized database cannot increase in size beyond</code></span>
<span class="codeline" id="line-10397"><code>** the number of bytes specified by the M parameter.</code></span>
<span class="codeline" id="line-10398"><code>**</code></span>
<span class="codeline" id="line-10399"><code>** The SQLITE_DESERIALIZE_READONLY flag means that the deserialized database</code></span>
<span class="codeline" id="line-10400"><code>** should be treated as read-only.</code></span>
<span class="codeline" id="line-10401"><code>*/</code></span>
<span class="codeline" id="line-10402"><code>#define SQLITE_DESERIALIZE_FREEONCLOSE 1 /* Call sqlite3_free() on close */</code></span>
<span class="codeline" id="line-10403"><code>#define SQLITE_DESERIALIZE_RESIZEABLE  2 /* Resize using sqlite3_realloc64() */</code></span>
<span class="codeline" id="line-10404"><code>#define SQLITE_DESERIALIZE_READONLY    4 /* Database is read-only */</code></span>
<span class="codeline" id="line-10405"><code></code></span>
<span class="codeline" id="line-10406"><code>/*</code></span>
<span class="codeline" id="line-10407"><code>** Undo the hack that converts floating point types to integer for</code></span>
<span class="codeline" id="line-10408"><code>** builds on processors without floating point support.</code></span>
<span class="codeline" id="line-10409"><code>*/</code></span>
<span class="codeline" id="line-10410"><code>#ifdef SQLITE_OMIT_FLOATING_POINT</code></span>
<span class="codeline" id="line-10411"><code># undef double</code></span>
<span class="codeline" id="line-10412"><code>#endif</code></span>
<span class="codeline" id="line-10413"><code></code></span>
<span class="codeline" id="line-10414"><code>#ifdef __cplusplus</code></span>
<span class="codeline" id="line-10415"><code>}  /* End of the 'extern "C"' block */</code></span>
<span class="codeline" id="line-10416"><code>#endif</code></span>
<span class="codeline" id="line-10417"><code>#endif /* SQLITE3_H */</code></span>
<span class="codeline" id="line-10418"><code></code></span>
<span class="codeline" id="line-10419"><code>/******** Begin file sqlite3rtree.h *********/</code></span>
<span class="codeline" id="line-10420"><code>/*</code></span>
<span class="codeline" id="line-10421"><code>** 2010 August 30</code></span>
<span class="codeline" id="line-10422"><code>**</code></span>
<span class="codeline" id="line-10423"><code>** The author disclaims copyright to this source code.  In place of</code></span>
<span class="codeline" id="line-10424"><code>** a legal notice, here is a blessing:</code></span>
<span class="codeline" id="line-10425"><code>**</code></span>
<span class="codeline" id="line-10426"><code>**    May you do good and not evil.</code></span>
<span class="codeline" id="line-10427"><code>**    May you find forgiveness for yourself and forgive others.</code></span>
<span class="codeline" id="line-10428"><code>**    May you share freely, never taking more than you give.</code></span>
<span class="codeline" id="line-10429"><code>**</code></span>
<span class="codeline" id="line-10430"><code>*************************************************************************</code></span>
<span class="codeline" id="line-10431"><code>*/</code></span>
<span class="codeline" id="line-10432"><code></code></span>
<span class="codeline" id="line-10433"><code>#ifndef _SQLITE3RTREE_H_</code></span>
<span class="codeline" id="line-10434"><code>#define _SQLITE3RTREE_H_</code></span>
<span class="codeline" id="line-10435"><code></code></span>
<span class="codeline" id="line-10436"><code></code></span>
<span class="codeline" id="line-10437"><code>#ifdef __cplusplus</code></span>
<span class="codeline" id="line-10438"><code>extern "C" {</code></span>
<span class="codeline" id="line-10439"><code>#endif</code></span>
<span class="codeline" id="line-10440"><code></code></span>
<span class="codeline" id="line-10441"><code>typedef struct sqlite3_rtree_geometry sqlite3_rtree_geometry;</code></span>
<span class="codeline" id="line-10442"><code>typedef struct sqlite3_rtree_query_info sqlite3_rtree_query_info;</code></span>
<span class="codeline" id="line-10443"><code></code></span>
<span class="codeline" id="line-10444"><code>/* The double-precision datatype used by RTree depends on the</code></span>
<span class="codeline" id="line-10445"><code>** SQLITE_RTREE_INT_ONLY compile-time option.</code></span>
<span class="codeline" id="line-10446"><code>*/</code></span>
<span class="codeline" id="line-10447"><code>#ifdef SQLITE_RTREE_INT_ONLY</code></span>
<span class="codeline" id="line-10448"><code>  typedef sqlite3_int64 sqlite3_rtree_dbl;</code></span>
<span class="codeline" id="line-10449"><code>#else</code></span>
<span class="codeline" id="line-10450"><code>  typedef double sqlite3_rtree_dbl;</code></span>
<span class="codeline" id="line-10451"><code>#endif</code></span>
<span class="codeline" id="line-10452"><code></code></span>
<span class="codeline" id="line-10453"><code>/*</code></span>
<span class="codeline" id="line-10454"><code>** Register a geometry callback named zGeom that can be used as part of an</code></span>
<span class="codeline" id="line-10455"><code>** R-Tree geometry query as follows:</code></span>
<span class="codeline" id="line-10456"><code>**</code></span>
<span class="codeline" id="line-10457"><code>**   SELECT ... FROM &lt;rtree&gt; WHERE &lt;rtree col&gt; MATCH $zGeom(... params ...)</code></span>
<span class="codeline" id="line-10458"><code>*/</code></span>
<span class="codeline" id="line-10459"><code>SQLITE_API int sqlite3_rtree_geometry_callback(</code></span>
<span class="codeline" id="line-10460"><code>  sqlite3 *db,</code></span>
<span class="codeline" id="line-10461"><code>  const char *zGeom,</code></span>
<span class="codeline" id="line-10462"><code>  int (*xGeom)(sqlite3_rtree_geometry*, int, sqlite3_rtree_dbl*,int*),</code></span>
<span class="codeline" id="line-10463"><code>  void *pContext</code></span>
<span class="codeline" id="line-10464"><code>);</code></span>
<span class="codeline" id="line-10465"><code></code></span>
<span class="codeline" id="line-10466"><code></code></span>
<span class="codeline" id="line-10467"><code>/*</code></span>
<span class="codeline" id="line-10468"><code>** A pointer to a structure of the following type is passed as the first</code></span>
<span class="codeline" id="line-10469"><code>** argument to callbacks registered using rtree_geometry_callback().</code></span>
<span class="codeline" id="line-10470"><code>*/</code></span>
<span class="codeline" id="line-10471"><code>struct sqlite3_rtree_geometry {</code></span>
<span class="codeline" id="line-10472"><code>  void *pContext;                 /* Copy of pContext passed to s_r_g_c() */</code></span>
<span class="codeline" id="line-10473"><code>  int nParam;                     /* Size of array aParam[] */</code></span>
<span class="codeline" id="line-10474"><code>  sqlite3_rtree_dbl *aParam;      /* Parameters passed to SQL geom function */</code></span>
<span class="codeline" id="line-10475"><code>  void *pUser;                    /* Callback implementation user data */</code></span>
<span class="codeline" id="line-10476"><code>  void (*xDelUser)(void *);       /* Called by SQLite to clean up pUser */</code></span>
<span class="codeline" id="line-10477"><code>};</code></span>
<span class="codeline" id="line-10478"><code></code></span>
<span class="codeline" id="line-10479"><code>/*</code></span>
<span class="codeline" id="line-10480"><code>** Register a 2nd-generation geometry callback named zScore that can be</code></span>
<span class="codeline" id="line-10481"><code>** used as part of an R-Tree geometry query as follows:</code></span>
<span class="codeline" id="line-10482"><code>**</code></span>
<span class="codeline" id="line-10483"><code>**   SELECT ... FROM &lt;rtree&gt; WHERE &lt;rtree col&gt; MATCH $zQueryFunc(... params ...)</code></span>
<span class="codeline" id="line-10484"><code>*/</code></span>
<span class="codeline" id="line-10485"><code>SQLITE_API int sqlite3_rtree_query_callback(</code></span>
<span class="codeline" id="line-10486"><code>  sqlite3 *db,</code></span>
<span class="codeline" id="line-10487"><code>  const char *zQueryFunc,</code></span>
<span class="codeline" id="line-10488"><code>  int (*xQueryFunc)(sqlite3_rtree_query_info*),</code></span>
<span class="codeline" id="line-10489"><code>  void *pContext,</code></span>
<span class="codeline" id="line-10490"><code>  void (*xDestructor)(void*)</code></span>
<span class="codeline" id="line-10491"><code>);</code></span>
<span class="codeline" id="line-10492"><code></code></span>
<span class="codeline" id="line-10493"><code></code></span>
<span class="codeline" id="line-10494"><code>/*</code></span>
<span class="codeline" id="line-10495"><code>** A pointer to a structure of the following type is passed as the</code></span>
<span class="codeline" id="line-10496"><code>** argument to scored geometry callback registered using</code></span>
<span class="codeline" id="line-10497"><code>** sqlite3_rtree_query_callback().</code></span>
<span class="codeline" id="line-10498"><code>**</code></span>
<span class="codeline" id="line-10499"><code>** Note that the first 5 fields of this structure are identical to</code></span>
<span class="codeline" id="line-10500"><code>** sqlite3_rtree_geometry.  This structure is a subclass of</code></span>
<span class="codeline" id="line-10501"><code>** sqlite3_rtree_geometry.</code></span>
<span class="codeline" id="line-10502"><code>*/</code></span>
<span class="codeline" id="line-10503"><code>struct sqlite3_rtree_query_info {</code></span>
<span class="codeline" id="line-10504"><code>  void *pContext;                   /* pContext from when function registered */</code></span>
<span class="codeline" id="line-10505"><code>  int nParam;                       /* Number of function parameters */</code></span>
<span class="codeline" id="line-10506"><code>  sqlite3_rtree_dbl *aParam;        /* value of function parameters */</code></span>
<span class="codeline" id="line-10507"><code>  void *pUser;                      /* callback can use this, if desired */</code></span>
<span class="codeline" id="line-10508"><code>  void (*xDelUser)(void*);          /* function to free pUser */</code></span>
<span class="codeline" id="line-10509"><code>  sqlite3_rtree_dbl *aCoord;        /* Coordinates of node or entry to check */</code></span>
<span class="codeline" id="line-10510"><code>  unsigned int *anQueue;            /* Number of pending entries in the queue */</code></span>
<span class="codeline" id="line-10511"><code>  int nCoord;                       /* Number of coordinates */</code></span>
<span class="codeline" id="line-10512"><code>  int iLevel;                       /* Level of current node or entry */</code></span>
<span class="codeline" id="line-10513"><code>  int mxLevel;                      /* The largest iLevel value in the tree */</code></span>
<span class="codeline" id="line-10514"><code>  sqlite3_int64 iRowid;             /* Rowid for current entry */</code></span>
<span class="codeline" id="line-10515"><code>  sqlite3_rtree_dbl rParentScore;   /* Score of parent node */</code></span>
<span class="codeline" id="line-10516"><code>  int eParentWithin;                /* Visibility of parent node */</code></span>
<span class="codeline" id="line-10517"><code>  int eWithin;                      /* OUT: Visibility */</code></span>
<span class="codeline" id="line-10518"><code>  sqlite3_rtree_dbl rScore;         /* OUT: Write the score here */</code></span>
<span class="codeline" id="line-10519"><code>  /* The following fields are only available in 3.8.11 and later */</code></span>
<span class="codeline" id="line-10520"><code>  sqlite3_value **apSqlParam;       /* Original SQL values of parameters */</code></span>
<span class="codeline" id="line-10521"><code>};</code></span>
<span class="codeline" id="line-10522"><code></code></span>
<span class="codeline" id="line-10523"><code>/*</code></span>
<span class="codeline" id="line-10524"><code>** Allowed values for sqlite3_rtree_query.eWithin and .eParentWithin.</code></span>
<span class="codeline" id="line-10525"><code>*/</code></span>
<span class="codeline" id="line-10526"><code>#define NOT_WITHIN       0   /* Object completely outside of query region */</code></span>
<span class="codeline" id="line-10527"><code>#define PARTLY_WITHIN    1   /* Object partially overlaps query region */</code></span>
<span class="codeline" id="line-10528"><code>#define FULLY_WITHIN     2   /* Object fully contained within query region */</code></span>
<span class="codeline" id="line-10529"><code></code></span>
<span class="codeline" id="line-10530"><code></code></span>
<span class="codeline" id="line-10531"><code>#ifdef __cplusplus</code></span>
<span class="codeline" id="line-10532"><code>}  /* end of the 'extern "C"' block */</code></span>
<span class="codeline" id="line-10533"><code>#endif</code></span>
<span class="codeline" id="line-10534"><code></code></span>
<span class="codeline" id="line-10535"><code>#endif  /* ifndef _SQLITE3RTREE_H_ */</code></span>
<span class="codeline" id="line-10536"><code></code></span>
<span class="codeline" id="line-10537"><code>/******** End of sqlite3rtree.h *********/</code></span>
<span class="codeline" id="line-10538"><code>/******** Begin file sqlite3session.h *********/</code></span>
<span class="codeline" id="line-10539"><code></code></span>
<span class="codeline" id="line-10540"><code>#if !defined(__SQLITESESSION_H_) &amp;&amp; defined(SQLITE_ENABLE_SESSION)</code></span>
<span class="codeline" id="line-10541"><code>#define __SQLITESESSION_H_ 1</code></span>
<span class="codeline" id="line-10542"><code></code></span>
<span class="codeline" id="line-10543"><code>/*</code></span>
<span class="codeline" id="line-10544"><code>** Make sure we can call this stuff from C++.</code></span>
<span class="codeline" id="line-10545"><code>*/</code></span>
<span class="codeline" id="line-10546"><code>#ifdef __cplusplus</code></span>
<span class="codeline" id="line-10547"><code>extern "C" {</code></span>
<span class="codeline" id="line-10548"><code>#endif</code></span>
<span class="codeline" id="line-10549"><code></code></span>
<span class="codeline" id="line-10550"><code></code></span>
<span class="codeline" id="line-10551"><code>/*</code></span>
<span class="codeline" id="line-10552"><code>** CAPI3REF: Session Object Handle</code></span>
<span class="codeline" id="line-10553"><code>**</code></span>
<span class="codeline" id="line-10554"><code>** An instance of this object is a [session] that can be used to</code></span>
<span class="codeline" id="line-10555"><code>** record changes to a database.</code></span>
<span class="codeline" id="line-10556"><code>*/</code></span>
<span class="codeline" id="line-10557"><code>typedef struct sqlite3_session sqlite3_session;</code></span>
<span class="codeline" id="line-10558"><code></code></span>
<span class="codeline" id="line-10559"><code>/*</code></span>
<span class="codeline" id="line-10560"><code>** CAPI3REF: Changeset Iterator Handle</code></span>
<span class="codeline" id="line-10561"><code>**</code></span>
<span class="codeline" id="line-10562"><code>** An instance of this object acts as a cursor for iterating</code></span>
<span class="codeline" id="line-10563"><code>** over the elements of a [changeset] or [patchset].</code></span>
<span class="codeline" id="line-10564"><code>*/</code></span>
<span class="codeline" id="line-10565"><code>typedef struct sqlite3_changeset_iter sqlite3_changeset_iter;</code></span>
<span class="codeline" id="line-10566"><code></code></span>
<span class="codeline" id="line-10567"><code>/*</code></span>
<span class="codeline" id="line-10568"><code>** CAPI3REF: Create A New Session Object</code></span>
<span class="codeline" id="line-10569"><code>** CONSTRUCTOR: sqlite3_session</code></span>
<span class="codeline" id="line-10570"><code>**</code></span>
<span class="codeline" id="line-10571"><code>** Create a new session object attached to database handle db. If successful,</code></span>
<span class="codeline" id="line-10572"><code>** a pointer to the new object is written to *ppSession and SQLITE_OK is</code></span>
<span class="codeline" id="line-10573"><code>** returned. If an error occurs, *ppSession is set to NULL and an SQLite</code></span>
<span class="codeline" id="line-10574"><code>** error code (e.g. SQLITE_NOMEM) is returned.</code></span>
<span class="codeline" id="line-10575"><code>**</code></span>
<span class="codeline" id="line-10576"><code>** It is possible to create multiple session objects attached to a single</code></span>
<span class="codeline" id="line-10577"><code>** database handle.</code></span>
<span class="codeline" id="line-10578"><code>**</code></span>
<span class="codeline" id="line-10579"><code>** Session objects created using this function should be deleted using the</code></span>
<span class="codeline" id="line-10580"><code>** [sqlite3session_delete()] function before the database handle that they</code></span>
<span class="codeline" id="line-10581"><code>** are attached to is itself closed. If the database handle is closed before</code></span>
<span class="codeline" id="line-10582"><code>** the session object is deleted, then the results of calling any session</code></span>
<span class="codeline" id="line-10583"><code>** module function, including [sqlite3session_delete()] on the session object</code></span>
<span class="codeline" id="line-10584"><code>** are undefined.</code></span>
<span class="codeline" id="line-10585"><code>**</code></span>
<span class="codeline" id="line-10586"><code>** Because the session module uses the [sqlite3_preupdate_hook()] API, it</code></span>
<span class="codeline" id="line-10587"><code>** is not possible for an application to register a pre-update hook on a</code></span>
<span class="codeline" id="line-10588"><code>** database handle that has one or more session objects attached. Nor is</code></span>
<span class="codeline" id="line-10589"><code>** it possible to create a session object attached to a database handle for</code></span>
<span class="codeline" id="line-10590"><code>** which a pre-update hook is already defined. The results of attempting</code></span>
<span class="codeline" id="line-10591"><code>** either of these things are undefined.</code></span>
<span class="codeline" id="line-10592"><code>**</code></span>
<span class="codeline" id="line-10593"><code>** The session object will be used to create changesets for tables in</code></span>
<span class="codeline" id="line-10594"><code>** database zDb, where zDb is either "main", or "temp", or the name of an</code></span>
<span class="codeline" id="line-10595"><code>** attached database. It is not an error if database zDb is not attached</code></span>
<span class="codeline" id="line-10596"><code>** to the database when the session object is created.</code></span>
<span class="codeline" id="line-10597"><code>*/</code></span>
<span class="codeline" id="line-10598"><code>SQLITE_API int sqlite3session_create(</code></span>
<span class="codeline" id="line-10599"><code>  sqlite3 *db,                    /* Database handle */</code></span>
<span class="codeline" id="line-10600"><code>  const char *zDb,                /* Name of db (e.g. "main") */</code></span>
<span class="codeline" id="line-10601"><code>  sqlite3_session **ppSession     /* OUT: New session object */</code></span>
<span class="codeline" id="line-10602"><code>);</code></span>
<span class="codeline" id="line-10603"><code></code></span>
<span class="codeline" id="line-10604"><code>/*</code></span>
<span class="codeline" id="line-10605"><code>** CAPI3REF: Delete A Session Object</code></span>
<span class="codeline" id="line-10606"><code>** DESTRUCTOR: sqlite3_session</code></span>
<span class="codeline" id="line-10607"><code>**</code></span>
<span class="codeline" id="line-10608"><code>** Delete a session object previously allocated using</code></span>
<span class="codeline" id="line-10609"><code>** [sqlite3session_create()]. Once a session object has been deleted, the</code></span>
<span class="codeline" id="line-10610"><code>** results of attempting to use pSession with any other session module</code></span>
<span class="codeline" id="line-10611"><code>** function are undefined.</code></span>
<span class="codeline" id="line-10612"><code>**</code></span>
<span class="codeline" id="line-10613"><code>** Session objects must be deleted before the database handle to which they</code></span>
<span class="codeline" id="line-10614"><code>** are attached is closed. Refer to the documentation for</code></span>
<span class="codeline" id="line-10615"><code>** [sqlite3session_create()] for details.</code></span>
<span class="codeline" id="line-10616"><code>*/</code></span>
<span class="codeline" id="line-10617"><code>SQLITE_API void sqlite3session_delete(sqlite3_session *pSession);</code></span>
<span class="codeline" id="line-10618"><code></code></span>
<span class="codeline" id="line-10619"><code>/*</code></span>
<span class="codeline" id="line-10620"><code>** CAPIREF: Conigure a Session Object</code></span>
<span class="codeline" id="line-10621"><code>** METHOD: sqlite3_session</code></span>
<span class="codeline" id="line-10622"><code>**</code></span>
<span class="codeline" id="line-10623"><code>** This method is used to configure a session object after it has been</code></span>
<span class="codeline" id="line-10624"><code>** created. At present the only valid value for the second parameter is</code></span>
<span class="codeline" id="line-10625"><code>** [SQLITE_SESSION_OBJCONFIG_SIZE].</code></span>
<span class="codeline" id="line-10626"><code>**</code></span>
<span class="codeline" id="line-10627"><code>** Arguments for sqlite3session_object_config()</code></span>
<span class="codeline" id="line-10628"><code>**</code></span>
<span class="codeline" id="line-10629"><code>** The following values may passed as the the 4th parameter to</code></span>
<span class="codeline" id="line-10630"><code>** sqlite3session_object_config().</code></span>
<span class="codeline" id="line-10631"><code>**</code></span>
<span class="codeline" id="line-10632"><code>** &lt;dt&gt;SQLITE_SESSION_OBJCONFIG_SIZE &lt;dd&gt;</code></span>
<span class="codeline" id="line-10633"><code>**   This option is used to set, clear or query the flag that enables</code></span>
<span class="codeline" id="line-10634"><code>**   the [sqlite3session_changeset_size()] API. Because it imposes some</code></span>
<span class="codeline" id="line-10635"><code>**   computational overhead, this API is disabled by default. Argument</code></span>
<span class="codeline" id="line-10636"><code>**   pArg must point to a value of type (int). If the value is initially</code></span>
<span class="codeline" id="line-10637"><code>**   0, then the sqlite3session_changeset_size() API is disabled. If it</code></span>
<span class="codeline" id="line-10638"><code>**   is greater than 0, then the same API is enabled. Or, if the initial</code></span>
<span class="codeline" id="line-10639"><code>**   value is less than zero, no change is made. In all cases the (int)</code></span>
<span class="codeline" id="line-10640"><code>**   variable is set to 1 if the sqlite3session_changeset_size() API is</code></span>
<span class="codeline" id="line-10641"><code>**   enabled following the current call, or 0 otherwise.</code></span>
<span class="codeline" id="line-10642"><code>**</code></span>
<span class="codeline" id="line-10643"><code>**   It is an error (SQLITE_MISUSE) to attempt to modify this setting after</code></span>
<span class="codeline" id="line-10644"><code>**   the first table has been attached to the session object.</code></span>
<span class="codeline" id="line-10645"><code>*/</code></span>
<span class="codeline" id="line-10646"><code>SQLITE_API int sqlite3session_object_config(sqlite3_session*, int op, void *pArg);</code></span>
<span class="codeline" id="line-10647"><code></code></span>
<span class="codeline" id="line-10648"><code>/*</code></span>
<span class="codeline" id="line-10649"><code>*/</code></span>
<span class="codeline" id="line-10650"><code>#define SQLITE_SESSION_OBJCONFIG_SIZE 1</code></span>
<span class="codeline" id="line-10651"><code></code></span>
<span class="codeline" id="line-10652"><code>/*</code></span>
<span class="codeline" id="line-10653"><code>** CAPI3REF: Enable Or Disable A Session Object</code></span>
<span class="codeline" id="line-10654"><code>** METHOD: sqlite3_session</code></span>
<span class="codeline" id="line-10655"><code>**</code></span>
<span class="codeline" id="line-10656"><code>** Enable or disable the recording of changes by a session object. When</code></span>
<span class="codeline" id="line-10657"><code>** enabled, a session object records changes made to the database. When</code></span>
<span class="codeline" id="line-10658"><code>** disabled - it does not. A newly created session object is enabled.</code></span>
<span class="codeline" id="line-10659"><code>** Refer to the documentation for [sqlite3session_changeset()] for further</code></span>
<span class="codeline" id="line-10660"><code>** details regarding how enabling and disabling a session object affects</code></span>
<span class="codeline" id="line-10661"><code>** the eventual changesets.</code></span>
<span class="codeline" id="line-10662"><code>**</code></span>
<span class="codeline" id="line-10663"><code>** Passing zero to this function disables the session. Passing a value</code></span>
<span class="codeline" id="line-10664"><code>** greater than zero enables it. Passing a value less than zero is a</code></span>
<span class="codeline" id="line-10665"><code>** no-op, and may be used to query the current state of the session.</code></span>
<span class="codeline" id="line-10666"><code>**</code></span>
<span class="codeline" id="line-10667"><code>** The return value indicates the final state of the session object: 0 if</code></span>
<span class="codeline" id="line-10668"><code>** the session is disabled, or 1 if it is enabled.</code></span>
<span class="codeline" id="line-10669"><code>*/</code></span>
<span class="codeline" id="line-10670"><code>SQLITE_API int sqlite3session_enable(sqlite3_session *pSession, int bEnable);</code></span>
<span class="codeline" id="line-10671"><code></code></span>
<span class="codeline" id="line-10672"><code>/*</code></span>
<span class="codeline" id="line-10673"><code>** CAPI3REF: Set Or Clear the Indirect Change Flag</code></span>
<span class="codeline" id="line-10674"><code>** METHOD: sqlite3_session</code></span>
<span class="codeline" id="line-10675"><code>**</code></span>
<span class="codeline" id="line-10676"><code>** Each change recorded by a session object is marked as either direct or</code></span>
<span class="codeline" id="line-10677"><code>** indirect. A change is marked as indirect if either:</code></span>
<span class="codeline" id="line-10678"><code>**</code></span>
<span class="codeline" id="line-10679"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-10680"><code>**   &lt;li&gt; The session object "indirect" flag is set when the change is</code></span>
<span class="codeline" id="line-10681"><code>**        made, or</code></span>
<span class="codeline" id="line-10682"><code>**   &lt;li&gt; The change is made by an SQL trigger or foreign key action</code></span>
<span class="codeline" id="line-10683"><code>**        instead of directly as a result of a users SQL statement.</code></span>
<span class="codeline" id="line-10684"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-10685"><code>**</code></span>
<span class="codeline" id="line-10686"><code>** If a single row is affected by more than one operation within a session,</code></span>
<span class="codeline" id="line-10687"><code>** then the change is considered indirect if all operations meet the criteria</code></span>
<span class="codeline" id="line-10688"><code>** for an indirect change above, or direct otherwise.</code></span>
<span class="codeline" id="line-10689"><code>**</code></span>
<span class="codeline" id="line-10690"><code>** This function is used to set, clear or query the session object indirect</code></span>
<span class="codeline" id="line-10691"><code>** flag.  If the second argument passed to this function is zero, then the</code></span>
<span class="codeline" id="line-10692"><code>** indirect flag is cleared. If it is greater than zero, the indirect flag</code></span>
<span class="codeline" id="line-10693"><code>** is set. Passing a value less than zero does not modify the current value</code></span>
<span class="codeline" id="line-10694"><code>** of the indirect flag, and may be used to query the current state of the</code></span>
<span class="codeline" id="line-10695"><code>** indirect flag for the specified session object.</code></span>
<span class="codeline" id="line-10696"><code>**</code></span>
<span class="codeline" id="line-10697"><code>** The return value indicates the final state of the indirect flag: 0 if</code></span>
<span class="codeline" id="line-10698"><code>** it is clear, or 1 if it is set.</code></span>
<span class="codeline" id="line-10699"><code>*/</code></span>
<span class="codeline" id="line-10700"><code>SQLITE_API int sqlite3session_indirect(sqlite3_session *pSession, int bIndirect);</code></span>
<span class="codeline" id="line-10701"><code></code></span>
<span class="codeline" id="line-10702"><code>/*</code></span>
<span class="codeline" id="line-10703"><code>** CAPI3REF: Attach A Table To A Session Object</code></span>
<span class="codeline" id="line-10704"><code>** METHOD: sqlite3_session</code></span>
<span class="codeline" id="line-10705"><code>**</code></span>
<span class="codeline" id="line-10706"><code>** If argument zTab is not NULL, then it is the name of a table to attach</code></span>
<span class="codeline" id="line-10707"><code>** to the session object passed as the first argument. All subsequent changes</code></span>
<span class="codeline" id="line-10708"><code>** made to the table while the session object is enabled will be recorded. See</code></span>
<span class="codeline" id="line-10709"><code>** documentation for [sqlite3session_changeset()] for further details.</code></span>
<span class="codeline" id="line-10710"><code>**</code></span>
<span class="codeline" id="line-10711"><code>** Or, if argument zTab is NULL, then changes are recorded for all tables</code></span>
<span class="codeline" id="line-10712"><code>** in the database. If additional tables are added to the database (by</code></span>
<span class="codeline" id="line-10713"><code>** executing "CREATE TABLE" statements) after this call is made, changes for</code></span>
<span class="codeline" id="line-10714"><code>** the new tables are also recorded.</code></span>
<span class="codeline" id="line-10715"><code>**</code></span>
<span class="codeline" id="line-10716"><code>** Changes can only be recorded for tables that have a PRIMARY KEY explicitly</code></span>
<span class="codeline" id="line-10717"><code>** defined as part of their CREATE TABLE statement. It does not matter if the</code></span>
<span class="codeline" id="line-10718"><code>** PRIMARY KEY is an "INTEGER PRIMARY KEY" (rowid alias) or not. The PRIMARY</code></span>
<span class="codeline" id="line-10719"><code>** KEY may consist of a single column, or may be a composite key.</code></span>
<span class="codeline" id="line-10720"><code>**</code></span>
<span class="codeline" id="line-10721"><code>** It is not an error if the named table does not exist in the database. Nor</code></span>
<span class="codeline" id="line-10722"><code>** is it an error if the named table does not have a PRIMARY KEY. However,</code></span>
<span class="codeline" id="line-10723"><code>** no changes will be recorded in either of these scenarios.</code></span>
<span class="codeline" id="line-10724"><code>**</code></span>
<span class="codeline" id="line-10725"><code>** Changes are not recorded for individual rows that have NULL values stored</code></span>
<span class="codeline" id="line-10726"><code>** in one or more of their PRIMARY KEY columns.</code></span>
<span class="codeline" id="line-10727"><code>**</code></span>
<span class="codeline" id="line-10728"><code>** SQLITE_OK is returned if the call completes without error. Or, if an error</code></span>
<span class="codeline" id="line-10729"><code>** occurs, an SQLite error code (e.g. SQLITE_NOMEM) is returned.</code></span>
<span class="codeline" id="line-10730"><code>**</code></span>
<span class="codeline" id="line-10731"><code>** &lt;h3&gt;Special sqlite_stat1 Handling&lt;/h3&gt;</code></span>
<span class="codeline" id="line-10732"><code>**</code></span>
<span class="codeline" id="line-10733"><code>** As of SQLite version 3.22.0, the "sqlite_stat1" table is an exception to</code></span>
<span class="codeline" id="line-10734"><code>** some of the rules above. In SQLite, the schema of sqlite_stat1 is:</code></span>
<span class="codeline" id="line-10735"><code>**  &lt;pre&gt;</code></span>
<span class="codeline" id="line-10736"><code>**  &amp;nbsp;     CREATE TABLE sqlite_stat1(tbl,idx,stat)</code></span>
<span class="codeline" id="line-10737"><code>**  &lt;/pre&gt;</code></span>
<span class="codeline" id="line-10738"><code>**</code></span>
<span class="codeline" id="line-10739"><code>** Even though sqlite_stat1 does not have a PRIMARY KEY, changes are</code></span>
<span class="codeline" id="line-10740"><code>** recorded for it as if the PRIMARY KEY is (tbl,idx). Additionally, changes</code></span>
<span class="codeline" id="line-10741"><code>** are recorded for rows for which (idx IS NULL) is true. However, for such</code></span>
<span class="codeline" id="line-10742"><code>** rows a zero-length blob (SQL value X'') is stored in the changeset or</code></span>
<span class="codeline" id="line-10743"><code>** patchset instead of a NULL value. This allows such changesets to be</code></span>
<span class="codeline" id="line-10744"><code>** manipulated by legacy implementations of sqlite3changeset_invert(),</code></span>
<span class="codeline" id="line-10745"><code>** concat() and similar.</code></span>
<span class="codeline" id="line-10746"><code>**</code></span>
<span class="codeline" id="line-10747"><code>** The sqlite3changeset_apply() function automatically converts the</code></span>
<span class="codeline" id="line-10748"><code>** zero-length blob back to a NULL value when updating the sqlite_stat1</code></span>
<span class="codeline" id="line-10749"><code>** table. However, if the application calls sqlite3changeset_new(),</code></span>
<span class="codeline" id="line-10750"><code>** sqlite3changeset_old() or sqlite3changeset_conflict on a changeset</code></span>
<span class="codeline" id="line-10751"><code>** iterator directly (including on a changeset iterator passed to a</code></span>
<span class="codeline" id="line-10752"><code>** conflict-handler callback) then the X'' value is returned. The application</code></span>
<span class="codeline" id="line-10753"><code>** must translate X'' to NULL itself if required.</code></span>
<span class="codeline" id="line-10754"><code>**</code></span>
<span class="codeline" id="line-10755"><code>** Legacy (older than 3.22.0) versions of the sessions module cannot capture</code></span>
<span class="codeline" id="line-10756"><code>** changes made to the sqlite_stat1 table. Legacy versions of the</code></span>
<span class="codeline" id="line-10757"><code>** sqlite3changeset_apply() function silently ignore any modifications to the</code></span>
<span class="codeline" id="line-10758"><code>** sqlite_stat1 table that are part of a changeset or patchset.</code></span>
<span class="codeline" id="line-10759"><code>*/</code></span>
<span class="codeline" id="line-10760"><code>SQLITE_API int sqlite3session_attach(</code></span>
<span class="codeline" id="line-10761"><code>  sqlite3_session *pSession,      /* Session object */</code></span>
<span class="codeline" id="line-10762"><code>  const char *zTab                /* Table name */</code></span>
<span class="codeline" id="line-10763"><code>);</code></span>
<span class="codeline" id="line-10764"><code></code></span>
<span class="codeline" id="line-10765"><code>/*</code></span>
<span class="codeline" id="line-10766"><code>** CAPI3REF: Set a table filter on a Session Object.</code></span>
<span class="codeline" id="line-10767"><code>** METHOD: sqlite3_session</code></span>
<span class="codeline" id="line-10768"><code>**</code></span>
<span class="codeline" id="line-10769"><code>** The second argument (xFilter) is the "filter callback". For changes to rows</code></span>
<span class="codeline" id="line-10770"><code>** in tables that are not attached to the Session object, the filter is called</code></span>
<span class="codeline" id="line-10771"><code>** to determine whether changes to the table's rows should be tracked or not.</code></span>
<span class="codeline" id="line-10772"><code>** If xFilter returns 0, changes are not tracked. Note that once a table is</code></span>
<span class="codeline" id="line-10773"><code>** attached, xFilter will not be called again.</code></span>
<span class="codeline" id="line-10774"><code>*/</code></span>
<span class="codeline" id="line-10775"><code>SQLITE_API void sqlite3session_table_filter(</code></span>
<span class="codeline" id="line-10776"><code>  sqlite3_session *pSession,      /* Session object */</code></span>
<span class="codeline" id="line-10777"><code>  int(*xFilter)(</code></span>
<span class="codeline" id="line-10778"><code>    void *pCtx,                   /* Copy of third arg to _filter_table() */</code></span>
<span class="codeline" id="line-10779"><code>    const char *zTab              /* Table name */</code></span>
<span class="codeline" id="line-10780"><code>  ),</code></span>
<span class="codeline" id="line-10781"><code>  void *pCtx                      /* First argument passed to xFilter */</code></span>
<span class="codeline" id="line-10782"><code>);</code></span>
<span class="codeline" id="line-10783"><code></code></span>
<span class="codeline" id="line-10784"><code>/*</code></span>
<span class="codeline" id="line-10785"><code>** CAPI3REF: Generate A Changeset From A Session Object</code></span>
<span class="codeline" id="line-10786"><code>** METHOD: sqlite3_session</code></span>
<span class="codeline" id="line-10787"><code>**</code></span>
<span class="codeline" id="line-10788"><code>** Obtain a changeset containing changes to the tables attached to the</code></span>
<span class="codeline" id="line-10789"><code>** session object passed as the first argument. If successful,</code></span>
<span class="codeline" id="line-10790"><code>** set *ppChangeset to point to a buffer containing the changeset</code></span>
<span class="codeline" id="line-10791"><code>** and *pnChangeset to the size of the changeset in bytes before returning</code></span>
<span class="codeline" id="line-10792"><code>** SQLITE_OK. If an error occurs, set both *ppChangeset and *pnChangeset to</code></span>
<span class="codeline" id="line-10793"><code>** zero and return an SQLite error code.</code></span>
<span class="codeline" id="line-10794"><code>**</code></span>
<span class="codeline" id="line-10795"><code>** A changeset consists of zero or more INSERT, UPDATE and/or DELETE changes,</code></span>
<span class="codeline" id="line-10796"><code>** each representing a change to a single row of an attached table. An INSERT</code></span>
<span class="codeline" id="line-10797"><code>** change contains the values of each field of a new database row. A DELETE</code></span>
<span class="codeline" id="line-10798"><code>** contains the original values of each field of a deleted database row. An</code></span>
<span class="codeline" id="line-10799"><code>** UPDATE change contains the original values of each field of an updated</code></span>
<span class="codeline" id="line-10800"><code>** database row along with the updated values for each updated non-primary-key</code></span>
<span class="codeline" id="line-10801"><code>** column. It is not possible for an UPDATE change to represent a change that</code></span>
<span class="codeline" id="line-10802"><code>** modifies the values of primary key columns. If such a change is made, it</code></span>
<span class="codeline" id="line-10803"><code>** is represented in a changeset as a DELETE followed by an INSERT.</code></span>
<span class="codeline" id="line-10804"><code>**</code></span>
<span class="codeline" id="line-10805"><code>** Changes are not recorded for rows that have NULL values stored in one or</code></span>
<span class="codeline" id="line-10806"><code>** more of their PRIMARY KEY columns. If such a row is inserted or deleted,</code></span>
<span class="codeline" id="line-10807"><code>** no corresponding change is present in the changesets returned by this</code></span>
<span class="codeline" id="line-10808"><code>** function. If an existing row with one or more NULL values stored in</code></span>
<span class="codeline" id="line-10809"><code>** PRIMARY KEY columns is updated so that all PRIMARY KEY columns are non-NULL,</code></span>
<span class="codeline" id="line-10810"><code>** only an INSERT is appears in the changeset. Similarly, if an existing row</code></span>
<span class="codeline" id="line-10811"><code>** with non-NULL PRIMARY KEY values is updated so that one or more of its</code></span>
<span class="codeline" id="line-10812"><code>** PRIMARY KEY columns are set to NULL, the resulting changeset contains a</code></span>
<span class="codeline" id="line-10813"><code>** DELETE change only.</code></span>
<span class="codeline" id="line-10814"><code>**</code></span>
<span class="codeline" id="line-10815"><code>** The contents of a changeset may be traversed using an iterator created</code></span>
<span class="codeline" id="line-10816"><code>** using the [sqlite3changeset_start()] API. A changeset may be applied to</code></span>
<span class="codeline" id="line-10817"><code>** a database with a compatible schema using the [sqlite3changeset_apply()]</code></span>
<span class="codeline" id="line-10818"><code>** API.</code></span>
<span class="codeline" id="line-10819"><code>**</code></span>
<span class="codeline" id="line-10820"><code>** Within a changeset generated by this function, all changes related to a</code></span>
<span class="codeline" id="line-10821"><code>** single table are grouped together. In other words, when iterating through</code></span>
<span class="codeline" id="line-10822"><code>** a changeset or when applying a changeset to a database, all changes related</code></span>
<span class="codeline" id="line-10823"><code>** to a single table are processed before moving on to the next table. Tables</code></span>
<span class="codeline" id="line-10824"><code>** are sorted in the same order in which they were attached (or auto-attached)</code></span>
<span class="codeline" id="line-10825"><code>** to the sqlite3_session object. The order in which the changes related to</code></span>
<span class="codeline" id="line-10826"><code>** a single table are stored is undefined.</code></span>
<span class="codeline" id="line-10827"><code>**</code></span>
<span class="codeline" id="line-10828"><code>** Following a successful call to this function, it is the responsibility of</code></span>
<span class="codeline" id="line-10829"><code>** the caller to eventually free the buffer that *ppChangeset points to using</code></span>
<span class="codeline" id="line-10830"><code>** [sqlite3_free()].</code></span>
<span class="codeline" id="line-10831"><code>**</code></span>
<span class="codeline" id="line-10832"><code>** &lt;h3&gt;Changeset Generation&lt;/h3&gt;</code></span>
<span class="codeline" id="line-10833"><code>**</code></span>
<span class="codeline" id="line-10834"><code>** Once a table has been attached to a session object, the session object</code></span>
<span class="codeline" id="line-10835"><code>** records the primary key values of all new rows inserted into the table.</code></span>
<span class="codeline" id="line-10836"><code>** It also records the original primary key and other column values of any</code></span>
<span class="codeline" id="line-10837"><code>** deleted or updated rows. For each unique primary key value, data is only</code></span>
<span class="codeline" id="line-10838"><code>** recorded once - the first time a row with said primary key is inserted,</code></span>
<span class="codeline" id="line-10839"><code>** updated or deleted in the lifetime of the session.</code></span>
<span class="codeline" id="line-10840"><code>**</code></span>
<span class="codeline" id="line-10841"><code>** There is one exception to the previous paragraph: when a row is inserted,</code></span>
<span class="codeline" id="line-10842"><code>** updated or deleted, if one or more of its primary key columns contain a</code></span>
<span class="codeline" id="line-10843"><code>** NULL value, no record of the change is made.</code></span>
<span class="codeline" id="line-10844"><code>**</code></span>
<span class="codeline" id="line-10845"><code>** The session object therefore accumulates two types of records - those</code></span>
<span class="codeline" id="line-10846"><code>** that consist of primary key values only (created when the user inserts</code></span>
<span class="codeline" id="line-10847"><code>** a new record) and those that consist of the primary key values and the</code></span>
<span class="codeline" id="line-10848"><code>** original values of other table columns (created when the users deletes</code></span>
<span class="codeline" id="line-10849"><code>** or updates a record).</code></span>
<span class="codeline" id="line-10850"><code>**</code></span>
<span class="codeline" id="line-10851"><code>** When this function is called, the requested changeset is created using</code></span>
<span class="codeline" id="line-10852"><code>** both the accumulated records and the current contents of the database</code></span>
<span class="codeline" id="line-10853"><code>** file. Specifically:</code></span>
<span class="codeline" id="line-10854"><code>**</code></span>
<span class="codeline" id="line-10855"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-10856"><code>**   &lt;li&gt; For each record generated by an insert, the database is queried</code></span>
<span class="codeline" id="line-10857"><code>**        for a row with a matching primary key. If one is found, an INSERT</code></span>
<span class="codeline" id="line-10858"><code>**        change is added to the changeset. If no such row is found, no change</code></span>
<span class="codeline" id="line-10859"><code>**        is added to the changeset.</code></span>
<span class="codeline" id="line-10860"><code>**</code></span>
<span class="codeline" id="line-10861"><code>**   &lt;li&gt; For each record generated by an update or delete, the database is</code></span>
<span class="codeline" id="line-10862"><code>**        queried for a row with a matching primary key. If such a row is</code></span>
<span class="codeline" id="line-10863"><code>**        found and one or more of the non-primary key fields have been</code></span>
<span class="codeline" id="line-10864"><code>**        modified from their original values, an UPDATE change is added to</code></span>
<span class="codeline" id="line-10865"><code>**        the changeset. Or, if no such row is found in the table, a DELETE</code></span>
<span class="codeline" id="line-10866"><code>**        change is added to the changeset. If there is a row with a matching</code></span>
<span class="codeline" id="line-10867"><code>**        primary key in the database, but all fields contain their original</code></span>
<span class="codeline" id="line-10868"><code>**        values, no change is added to the changeset.</code></span>
<span class="codeline" id="line-10869"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-10870"><code>**</code></span>
<span class="codeline" id="line-10871"><code>** This means, amongst other things, that if a row is inserted and then later</code></span>
<span class="codeline" id="line-10872"><code>** deleted while a session object is active, neither the insert nor the delete</code></span>
<span class="codeline" id="line-10873"><code>** will be present in the changeset. Or if a row is deleted and then later a</code></span>
<span class="codeline" id="line-10874"><code>** row with the same primary key values inserted while a session object is</code></span>
<span class="codeline" id="line-10875"><code>** active, the resulting changeset will contain an UPDATE change instead of</code></span>
<span class="codeline" id="line-10876"><code>** a DELETE and an INSERT.</code></span>
<span class="codeline" id="line-10877"><code>**</code></span>
<span class="codeline" id="line-10878"><code>** When a session object is disabled (see the [sqlite3session_enable()] API),</code></span>
<span class="codeline" id="line-10879"><code>** it does not accumulate records when rows are inserted, updated or deleted.</code></span>
<span class="codeline" id="line-10880"><code>** This may appear to have some counter-intuitive effects if a single row</code></span>
<span class="codeline" id="line-10881"><code>** is written to more than once during a session. For example, if a row</code></span>
<span class="codeline" id="line-10882"><code>** is inserted while a session object is enabled, then later deleted while</code></span>
<span class="codeline" id="line-10883"><code>** the same session object is disabled, no INSERT record will appear in the</code></span>
<span class="codeline" id="line-10884"><code>** changeset, even though the delete took place while the session was disabled.</code></span>
<span class="codeline" id="line-10885"><code>** Or, if one field of a row is updated while a session is disabled, and</code></span>
<span class="codeline" id="line-10886"><code>** another field of the same row is updated while the session is enabled, the</code></span>
<span class="codeline" id="line-10887"><code>** resulting changeset will contain an UPDATE change that updates both fields.</code></span>
<span class="codeline" id="line-10888"><code>*/</code></span>
<span class="codeline" id="line-10889"><code>SQLITE_API int sqlite3session_changeset(</code></span>
<span class="codeline" id="line-10890"><code>  sqlite3_session *pSession,      /* Session object */</code></span>
<span class="codeline" id="line-10891"><code>  int *pnChangeset,               /* OUT: Size of buffer at *ppChangeset */</code></span>
<span class="codeline" id="line-10892"><code>  void **ppChangeset              /* OUT: Buffer containing changeset */</code></span>
<span class="codeline" id="line-10893"><code>);</code></span>
<span class="codeline" id="line-10894"><code></code></span>
<span class="codeline" id="line-10895"><code>/*</code></span>
<span class="codeline" id="line-10896"><code>** CAPI3REF: Return An Upper-limit For The Size Of The Changeset</code></span>
<span class="codeline" id="line-10897"><code>** METHOD: sqlite3_session</code></span>
<span class="codeline" id="line-10898"><code>**</code></span>
<span class="codeline" id="line-10899"><code>** By default, this function always returns 0. For it to return</code></span>
<span class="codeline" id="line-10900"><code>** a useful result, the sqlite3_session object must have been configured</code></span>
<span class="codeline" id="line-10901"><code>** to enable this API using sqlite3session_object_config() with the</code></span>
<span class="codeline" id="line-10902"><code>** SQLITE_SESSION_OBJCONFIG_SIZE verb.</code></span>
<span class="codeline" id="line-10903"><code>**</code></span>
<span class="codeline" id="line-10904"><code>** When enabled, this function returns an upper limit, in bytes, for the size</code></span>
<span class="codeline" id="line-10905"><code>** of the changeset that might be produced if sqlite3session_changeset() were</code></span>
<span class="codeline" id="line-10906"><code>** called. The final changeset size might be equal to or smaller than the</code></span>
<span class="codeline" id="line-10907"><code>** size in bytes returned by this function.</code></span>
<span class="codeline" id="line-10908"><code>*/</code></span>
<span class="codeline" id="line-10909"><code>SQLITE_API sqlite3_int64 sqlite3session_changeset_size(sqlite3_session *pSession);</code></span>
<span class="codeline" id="line-10910"><code></code></span>
<span class="codeline" id="line-10911"><code>/*</code></span>
<span class="codeline" id="line-10912"><code>** CAPI3REF: Load The Difference Between Tables Into A Session</code></span>
<span class="codeline" id="line-10913"><code>** METHOD: sqlite3_session</code></span>
<span class="codeline" id="line-10914"><code>**</code></span>
<span class="codeline" id="line-10915"><code>** If it is not already attached to the session object passed as the first</code></span>
<span class="codeline" id="line-10916"><code>** argument, this function attaches table zTbl in the same manner as the</code></span>
<span class="codeline" id="line-10917"><code>** [sqlite3session_attach()] function. If zTbl does not exist, or if it</code></span>
<span class="codeline" id="line-10918"><code>** does not have a primary key, this function is a no-op (but does not return</code></span>
<span class="codeline" id="line-10919"><code>** an error).</code></span>
<span class="codeline" id="line-10920"><code>**</code></span>
<span class="codeline" id="line-10921"><code>** Argument zFromDb must be the name of a database ("main", "temp" etc.)</code></span>
<span class="codeline" id="line-10922"><code>** attached to the same database handle as the session object that contains</code></span>
<span class="codeline" id="line-10923"><code>** a table compatible with the table attached to the session by this function.</code></span>
<span class="codeline" id="line-10924"><code>** A table is considered compatible if it:</code></span>
<span class="codeline" id="line-10925"><code>**</code></span>
<span class="codeline" id="line-10926"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-10927"><code>**   &lt;li&gt; Has the same name,</code></span>
<span class="codeline" id="line-10928"><code>**   &lt;li&gt; Has the same set of columns declared in the same order, and</code></span>
<span class="codeline" id="line-10929"><code>**   &lt;li&gt; Has the same PRIMARY KEY definition.</code></span>
<span class="codeline" id="line-10930"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-10931"><code>**</code></span>
<span class="codeline" id="line-10932"><code>** If the tables are not compatible, SQLITE_SCHEMA is returned. If the tables</code></span>
<span class="codeline" id="line-10933"><code>** are compatible but do not have any PRIMARY KEY columns, it is not an error</code></span>
<span class="codeline" id="line-10934"><code>** but no changes are added to the session object. As with other session</code></span>
<span class="codeline" id="line-10935"><code>** APIs, tables without PRIMARY KEYs are simply ignored.</code></span>
<span class="codeline" id="line-10936"><code>**</code></span>
<span class="codeline" id="line-10937"><code>** This function adds a set of changes to the session object that could be</code></span>
<span class="codeline" id="line-10938"><code>** used to update the table in database zFrom (call this the "from-table")</code></span>
<span class="codeline" id="line-10939"><code>** so that its content is the same as the table attached to the session</code></span>
<span class="codeline" id="line-10940"><code>** object (call this the "to-table"). Specifically:</code></span>
<span class="codeline" id="line-10941"><code>**</code></span>
<span class="codeline" id="line-10942"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-10943"><code>**   &lt;li&gt; For each row (primary key) that exists in the to-table but not in</code></span>
<span class="codeline" id="line-10944"><code>**     the from-table, an INSERT record is added to the session object.</code></span>
<span class="codeline" id="line-10945"><code>**</code></span>
<span class="codeline" id="line-10946"><code>**   &lt;li&gt; For each row (primary key) that exists in the to-table but not in</code></span>
<span class="codeline" id="line-10947"><code>**     the from-table, a DELETE record is added to the session object.</code></span>
<span class="codeline" id="line-10948"><code>**</code></span>
<span class="codeline" id="line-10949"><code>**   &lt;li&gt; For each row (primary key) that exists in both tables, but features</code></span>
<span class="codeline" id="line-10950"><code>**     different non-PK values in each, an UPDATE record is added to the</code></span>
<span class="codeline" id="line-10951"><code>**     session.</code></span>
<span class="codeline" id="line-10952"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-10953"><code>**</code></span>
<span class="codeline" id="line-10954"><code>** To clarify, if this function is called and then a changeset constructed</code></span>
<span class="codeline" id="line-10955"><code>** using [sqlite3session_changeset()], then after applying that changeset to</code></span>
<span class="codeline" id="line-10956"><code>** database zFrom the contents of the two compatible tables would be</code></span>
<span class="codeline" id="line-10957"><code>** identical.</code></span>
<span class="codeline" id="line-10958"><code>**</code></span>
<span class="codeline" id="line-10959"><code>** It an error if database zFrom does not exist or does not contain the</code></span>
<span class="codeline" id="line-10960"><code>** required compatible table.</code></span>
<span class="codeline" id="line-10961"><code>**</code></span>
<span class="codeline" id="line-10962"><code>** If the operation is successful, SQLITE_OK is returned. Otherwise, an SQLite</code></span>
<span class="codeline" id="line-10963"><code>** error code. In this case, if argument pzErrMsg is not NULL, *pzErrMsg</code></span>
<span class="codeline" id="line-10964"><code>** may be set to point to a buffer containing an English language error</code></span>
<span class="codeline" id="line-10965"><code>** message. It is the responsibility of the caller to free this buffer using</code></span>
<span class="codeline" id="line-10966"><code>** sqlite3_free().</code></span>
<span class="codeline" id="line-10967"><code>*/</code></span>
<span class="codeline" id="line-10968"><code>SQLITE_API int sqlite3session_diff(</code></span>
<span class="codeline" id="line-10969"><code>  sqlite3_session *pSession,</code></span>
<span class="codeline" id="line-10970"><code>  const char *zFromDb,</code></span>
<span class="codeline" id="line-10971"><code>  const char *zTbl,</code></span>
<span class="codeline" id="line-10972"><code>  char **pzErrMsg</code></span>
<span class="codeline" id="line-10973"><code>);</code></span>
<span class="codeline" id="line-10974"><code></code></span>
<span class="codeline" id="line-10975"><code></code></span>
<span class="codeline" id="line-10976"><code>/*</code></span>
<span class="codeline" id="line-10977"><code>** CAPI3REF: Generate A Patchset From A Session Object</code></span>
<span class="codeline" id="line-10978"><code>** METHOD: sqlite3_session</code></span>
<span class="codeline" id="line-10979"><code>**</code></span>
<span class="codeline" id="line-10980"><code>** The differences between a patchset and a changeset are that:</code></span>
<span class="codeline" id="line-10981"><code>**</code></span>
<span class="codeline" id="line-10982"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-10983"><code>**   &lt;li&gt; DELETE records consist of the primary key fields only. The</code></span>
<span class="codeline" id="line-10984"><code>**        original values of other fields are omitted.</code></span>
<span class="codeline" id="line-10985"><code>**   &lt;li&gt; The original values of any modified fields are omitted from</code></span>
<span class="codeline" id="line-10986"><code>**        UPDATE records.</code></span>
<span class="codeline" id="line-10987"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-10988"><code>**</code></span>
<span class="codeline" id="line-10989"><code>** A patchset blob may be used with up to date versions of all</code></span>
<span class="codeline" id="line-10990"><code>** sqlite3changeset_xxx API functions except for sqlite3changeset_invert(),</code></span>
<span class="codeline" id="line-10991"><code>** which returns SQLITE_CORRUPT if it is passed a patchset. Similarly,</code></span>
<span class="codeline" id="line-10992"><code>** attempting to use a patchset blob with old versions of the</code></span>
<span class="codeline" id="line-10993"><code>** sqlite3changeset_xxx APIs also provokes an SQLITE_CORRUPT error.</code></span>
<span class="codeline" id="line-10994"><code>**</code></span>
<span class="codeline" id="line-10995"><code>** Because the non-primary key "old.*" fields are omitted, no</code></span>
<span class="codeline" id="line-10996"><code>** SQLITE_CHANGESET_DATA conflicts can be detected or reported if a patchset</code></span>
<span class="codeline" id="line-10997"><code>** is passed to the sqlite3changeset_apply() API. Other conflict types work</code></span>
<span class="codeline" id="line-10998"><code>** in the same way as for changesets.</code></span>
<span class="codeline" id="line-10999"><code>**</code></span>
<span class="codeline" id="line-11000"><code>** Changes within a patchset are ordered in the same way as for changesets</code></span>
<span class="codeline" id="line-11001"><code>** generated by the sqlite3session_changeset() function (i.e. all changes for</code></span>
<span class="codeline" id="line-11002"><code>** a single table are grouped together, tables appear in the order in which</code></span>
<span class="codeline" id="line-11003"><code>** they were attached to the session object).</code></span>
<span class="codeline" id="line-11004"><code>*/</code></span>
<span class="codeline" id="line-11005"><code>SQLITE_API int sqlite3session_patchset(</code></span>
<span class="codeline" id="line-11006"><code>  sqlite3_session *pSession,      /* Session object */</code></span>
<span class="codeline" id="line-11007"><code>  int *pnPatchset,                /* OUT: Size of buffer at *ppPatchset */</code></span>
<span class="codeline" id="line-11008"><code>  void **ppPatchset               /* OUT: Buffer containing patchset */</code></span>
<span class="codeline" id="line-11009"><code>);</code></span>
<span class="codeline" id="line-11010"><code></code></span>
<span class="codeline" id="line-11011"><code>/*</code></span>
<span class="codeline" id="line-11012"><code>** CAPI3REF: Test if a changeset has recorded any changes.</code></span>
<span class="codeline" id="line-11013"><code>**</code></span>
<span class="codeline" id="line-11014"><code>** Return non-zero if no changes to attached tables have been recorded by</code></span>
<span class="codeline" id="line-11015"><code>** the session object passed as the first argument. Otherwise, if one or</code></span>
<span class="codeline" id="line-11016"><code>** more changes have been recorded, return zero.</code></span>
<span class="codeline" id="line-11017"><code>**</code></span>
<span class="codeline" id="line-11018"><code>** Even if this function returns zero, it is possible that calling</code></span>
<span class="codeline" id="line-11019"><code>** [sqlite3session_changeset()] on the session handle may still return a</code></span>
<span class="codeline" id="line-11020"><code>** changeset that contains no changes. This can happen when a row in</code></span>
<span class="codeline" id="line-11021"><code>** an attached table is modified and then later on the original values</code></span>
<span class="codeline" id="line-11022"><code>** are restored. However, if this function returns non-zero, then it is</code></span>
<span class="codeline" id="line-11023"><code>** guaranteed that a call to sqlite3session_changeset() will return a</code></span>
<span class="codeline" id="line-11024"><code>** changeset containing zero changes.</code></span>
<span class="codeline" id="line-11025"><code>*/</code></span>
<span class="codeline" id="line-11026"><code>SQLITE_API int sqlite3session_isempty(sqlite3_session *pSession);</code></span>
<span class="codeline" id="line-11027"><code></code></span>
<span class="codeline" id="line-11028"><code>/*</code></span>
<span class="codeline" id="line-11029"><code>** CAPI3REF: Query for the amount of heap memory used by a session object.</code></span>
<span class="codeline" id="line-11030"><code>**</code></span>
<span class="codeline" id="line-11031"><code>** This API returns the total amount of heap memory in bytes currently</code></span>
<span class="codeline" id="line-11032"><code>** used by the session object passed as the only argument.</code></span>
<span class="codeline" id="line-11033"><code>*/</code></span>
<span class="codeline" id="line-11034"><code>SQLITE_API sqlite3_int64 sqlite3session_memory_used(sqlite3_session *pSession);</code></span>
<span class="codeline" id="line-11035"><code></code></span>
<span class="codeline" id="line-11036"><code>/*</code></span>
<span class="codeline" id="line-11037"><code>** CAPI3REF: Create An Iterator To Traverse A Changeset</code></span>
<span class="codeline" id="line-11038"><code>** CONSTRUCTOR: sqlite3_changeset_iter</code></span>
<span class="codeline" id="line-11039"><code>**</code></span>
<span class="codeline" id="line-11040"><code>** Create an iterator used to iterate through the contents of a changeset.</code></span>
<span class="codeline" id="line-11041"><code>** If successful, *pp is set to point to the iterator handle and SQLITE_OK</code></span>
<span class="codeline" id="line-11042"><code>** is returned. Otherwise, if an error occurs, *pp is set to zero and an</code></span>
<span class="codeline" id="line-11043"><code>** SQLite error code is returned.</code></span>
<span class="codeline" id="line-11044"><code>**</code></span>
<span class="codeline" id="line-11045"><code>** The following functions can be used to advance and query a changeset</code></span>
<span class="codeline" id="line-11046"><code>** iterator created by this function:</code></span>
<span class="codeline" id="line-11047"><code>**</code></span>
<span class="codeline" id="line-11048"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-11049"><code>**   &lt;li&gt; [sqlite3changeset_next()]</code></span>
<span class="codeline" id="line-11050"><code>**   &lt;li&gt; [sqlite3changeset_op()]</code></span>
<span class="codeline" id="line-11051"><code>**   &lt;li&gt; [sqlite3changeset_new()]</code></span>
<span class="codeline" id="line-11052"><code>**   &lt;li&gt; [sqlite3changeset_old()]</code></span>
<span class="codeline" id="line-11053"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-11054"><code>**</code></span>
<span class="codeline" id="line-11055"><code>** It is the responsibility of the caller to eventually destroy the iterator</code></span>
<span class="codeline" id="line-11056"><code>** by passing it to [sqlite3changeset_finalize()]. The buffer containing the</code></span>
<span class="codeline" id="line-11057"><code>** changeset (pChangeset) must remain valid until after the iterator is</code></span>
<span class="codeline" id="line-11058"><code>** destroyed.</code></span>
<span class="codeline" id="line-11059"><code>**</code></span>
<span class="codeline" id="line-11060"><code>** Assuming the changeset blob was created by one of the</code></span>
<span class="codeline" id="line-11061"><code>** [sqlite3session_changeset()], [sqlite3changeset_concat()] or</code></span>
<span class="codeline" id="line-11062"><code>** [sqlite3changeset_invert()] functions, all changes within the changeset</code></span>
<span class="codeline" id="line-11063"><code>** that apply to a single table are grouped together. This means that when</code></span>
<span class="codeline" id="line-11064"><code>** an application iterates through a changeset using an iterator created by</code></span>
<span class="codeline" id="line-11065"><code>** this function, all changes that relate to a single table are visited</code></span>
<span class="codeline" id="line-11066"><code>** consecutively. There is no chance that the iterator will visit a change</code></span>
<span class="codeline" id="line-11067"><code>** the applies to table X, then one for table Y, and then later on visit</code></span>
<span class="codeline" id="line-11068"><code>** another change for table X.</code></span>
<span class="codeline" id="line-11069"><code>**</code></span>
<span class="codeline" id="line-11070"><code>** The behavior of sqlite3changeset_start_v2() and its streaming equivalent</code></span>
<span class="codeline" id="line-11071"><code>** may be modified by passing a combination of</code></span>
<span class="codeline" id="line-11072"><code>** [SQLITE_CHANGESETSTART_INVERT | supported flags] as the 4th parameter.</code></span>
<span class="codeline" id="line-11073"><code>**</code></span>
<span class="codeline" id="line-11074"><code>** Note that the sqlite3changeset_start_v2() API is still &lt;b&gt;experimental&lt;/b&gt;</code></span>
<span class="codeline" id="line-11075"><code>** and therefore subject to change.</code></span>
<span class="codeline" id="line-11076"><code>*/</code></span>
<span class="codeline" id="line-11077"><code>SQLITE_API int sqlite3changeset_start(</code></span>
<span class="codeline" id="line-11078"><code>  sqlite3_changeset_iter **pp,    /* OUT: New changeset iterator handle */</code></span>
<span class="codeline" id="line-11079"><code>  int nChangeset,                 /* Size of changeset blob in bytes */</code></span>
<span class="codeline" id="line-11080"><code>  void *pChangeset                /* Pointer to blob containing changeset */</code></span>
<span class="codeline" id="line-11081"><code>);</code></span>
<span class="codeline" id="line-11082"><code>SQLITE_API int sqlite3changeset_start_v2(</code></span>
<span class="codeline" id="line-11083"><code>  sqlite3_changeset_iter **pp,    /* OUT: New changeset iterator handle */</code></span>
<span class="codeline" id="line-11084"><code>  int nChangeset,                 /* Size of changeset blob in bytes */</code></span>
<span class="codeline" id="line-11085"><code>  void *pChangeset,               /* Pointer to blob containing changeset */</code></span>
<span class="codeline" id="line-11086"><code>  int flags                       /* SESSION_CHANGESETSTART_* flags */</code></span>
<span class="codeline" id="line-11087"><code>);</code></span>
<span class="codeline" id="line-11088"><code></code></span>
<span class="codeline" id="line-11089"><code>/*</code></span>
<span class="codeline" id="line-11090"><code>** CAPI3REF: Flags for sqlite3changeset_start_v2</code></span>
<span class="codeline" id="line-11091"><code>**</code></span>
<span class="codeline" id="line-11092"><code>** The following flags may passed via the 4th parameter to</code></span>
<span class="codeline" id="line-11093"><code>** [sqlite3changeset_start_v2] and [sqlite3changeset_start_v2_strm]:</code></span>
<span class="codeline" id="line-11094"><code>**</code></span>
<span class="codeline" id="line-11095"><code>** &lt;dt&gt;SQLITE_CHANGESETAPPLY_INVERT &lt;dd&gt;</code></span>
<span class="codeline" id="line-11096"><code>**   Invert the changeset while iterating through it. This is equivalent to</code></span>
<span class="codeline" id="line-11097"><code>**   inverting a changeset using sqlite3changeset_invert() before applying it.</code></span>
<span class="codeline" id="line-11098"><code>**   It is an error to specify this flag with a patchset.</code></span>
<span class="codeline" id="line-11099"><code>*/</code></span>
<span class="codeline" id="line-11100"><code>#define SQLITE_CHANGESETSTART_INVERT        0x0002</code></span>
<span class="codeline" id="line-11101"><code></code></span>
<span class="codeline" id="line-11102"><code></code></span>
<span class="codeline" id="line-11103"><code>/*</code></span>
<span class="codeline" id="line-11104"><code>** CAPI3REF: Advance A Changeset Iterator</code></span>
<span class="codeline" id="line-11105"><code>** METHOD: sqlite3_changeset_iter</code></span>
<span class="codeline" id="line-11106"><code>**</code></span>
<span class="codeline" id="line-11107"><code>** This function may only be used with iterators created by the function</code></span>
<span class="codeline" id="line-11108"><code>** [sqlite3changeset_start()]. If it is called on an iterator passed to</code></span>
<span class="codeline" id="line-11109"><code>** a conflict-handler callback by [sqlite3changeset_apply()], SQLITE_MISUSE</code></span>
<span class="codeline" id="line-11110"><code>** is returned and the call has no effect.</code></span>
<span class="codeline" id="line-11111"><code>**</code></span>
<span class="codeline" id="line-11112"><code>** Immediately after an iterator is created by sqlite3changeset_start(), it</code></span>
<span class="codeline" id="line-11113"><code>** does not point to any change in the changeset. Assuming the changeset</code></span>
<span class="codeline" id="line-11114"><code>** is not empty, the first call to this function advances the iterator to</code></span>
<span class="codeline" id="line-11115"><code>** point to the first change in the changeset. Each subsequent call advances</code></span>
<span class="codeline" id="line-11116"><code>** the iterator to point to the next change in the changeset (if any). If</code></span>
<span class="codeline" id="line-11117"><code>** no error occurs and the iterator points to a valid change after a call</code></span>
<span class="codeline" id="line-11118"><code>** to sqlite3changeset_next() has advanced it, SQLITE_ROW is returned.</code></span>
<span class="codeline" id="line-11119"><code>** Otherwise, if all changes in the changeset have already been visited,</code></span>
<span class="codeline" id="line-11120"><code>** SQLITE_DONE is returned.</code></span>
<span class="codeline" id="line-11121"><code>**</code></span>
<span class="codeline" id="line-11122"><code>** If an error occurs, an SQLite error code is returned. Possible error</code></span>
<span class="codeline" id="line-11123"><code>** codes include SQLITE_CORRUPT (if the changeset buffer is corrupt) or</code></span>
<span class="codeline" id="line-11124"><code>** SQLITE_NOMEM.</code></span>
<span class="codeline" id="line-11125"><code>*/</code></span>
<span class="codeline" id="line-11126"><code>SQLITE_API int sqlite3changeset_next(sqlite3_changeset_iter *pIter);</code></span>
<span class="codeline" id="line-11127"><code></code></span>
<span class="codeline" id="line-11128"><code>/*</code></span>
<span class="codeline" id="line-11129"><code>** CAPI3REF: Obtain The Current Operation From A Changeset Iterator</code></span>
<span class="codeline" id="line-11130"><code>** METHOD: sqlite3_changeset_iter</code></span>
<span class="codeline" id="line-11131"><code>**</code></span>
<span class="codeline" id="line-11132"><code>** The pIter argument passed to this function may either be an iterator</code></span>
<span class="codeline" id="line-11133"><code>** passed to a conflict-handler by [sqlite3changeset_apply()], or an iterator</code></span>
<span class="codeline" id="line-11134"><code>** created by [sqlite3changeset_start()]. In the latter case, the most recent</code></span>
<span class="codeline" id="line-11135"><code>** call to [sqlite3changeset_next()] must have returned [SQLITE_ROW]. If this</code></span>
<span class="codeline" id="line-11136"><code>** is not the case, this function returns [SQLITE_MISUSE].</code></span>
<span class="codeline" id="line-11137"><code>**</code></span>
<span class="codeline" id="line-11138"><code>** Arguments pOp, pnCol and pzTab may not be NULL. Upon return, three</code></span>
<span class="codeline" id="line-11139"><code>** outputs are set through these pointers:</code></span>
<span class="codeline" id="line-11140"><code>**</code></span>
<span class="codeline" id="line-11141"><code>** *pOp is set to one of [SQLITE_INSERT], [SQLITE_DELETE] or [SQLITE_UPDATE],</code></span>
<span class="codeline" id="line-11142"><code>** depending on the type of change that the iterator currently points to;</code></span>
<span class="codeline" id="line-11143"><code>**</code></span>
<span class="codeline" id="line-11144"><code>** *pnCol is set to the number of columns in the table affected by the change; and</code></span>
<span class="codeline" id="line-11145"><code>**</code></span>
<span class="codeline" id="line-11146"><code>** *pzTab is set to point to a nul-terminated utf-8 encoded string containing</code></span>
<span class="codeline" id="line-11147"><code>** the name of the table affected by the current change. The buffer remains</code></span>
<span class="codeline" id="line-11148"><code>** valid until either sqlite3changeset_next() is called on the iterator</code></span>
<span class="codeline" id="line-11149"><code>** or until the conflict-handler function returns.</code></span>
<span class="codeline" id="line-11150"><code>**</code></span>
<span class="codeline" id="line-11151"><code>** If pbIndirect is not NULL, then *pbIndirect is set to true (1) if the change</code></span>
<span class="codeline" id="line-11152"><code>** is an indirect change, or false (0) otherwise. See the documentation for</code></span>
<span class="codeline" id="line-11153"><code>** [sqlite3session_indirect()] for a description of direct and indirect</code></span>
<span class="codeline" id="line-11154"><code>** changes.</code></span>
<span class="codeline" id="line-11155"><code>**</code></span>
<span class="codeline" id="line-11156"><code>** If no error occurs, SQLITE_OK is returned. If an error does occur, an</code></span>
<span class="codeline" id="line-11157"><code>** SQLite error code is returned. The values of the output variables may not</code></span>
<span class="codeline" id="line-11158"><code>** be trusted in this case.</code></span>
<span class="codeline" id="line-11159"><code>*/</code></span>
<span class="codeline" id="line-11160"><code>SQLITE_API int sqlite3changeset_op(</code></span>
<span class="codeline" id="line-11161"><code>  sqlite3_changeset_iter *pIter,  /* Iterator object */</code></span>
<span class="codeline" id="line-11162"><code>  const char **pzTab,             /* OUT: Pointer to table name */</code></span>
<span class="codeline" id="line-11163"><code>  int *pnCol,                     /* OUT: Number of columns in table */</code></span>
<span class="codeline" id="line-11164"><code>  int *pOp,                       /* OUT: SQLITE_INSERT, DELETE or UPDATE */</code></span>
<span class="codeline" id="line-11165"><code>  int *pbIndirect                 /* OUT: True for an 'indirect' change */</code></span>
<span class="codeline" id="line-11166"><code>);</code></span>
<span class="codeline" id="line-11167"><code></code></span>
<span class="codeline" id="line-11168"><code>/*</code></span>
<span class="codeline" id="line-11169"><code>** CAPI3REF: Obtain The Primary Key Definition Of A Table</code></span>
<span class="codeline" id="line-11170"><code>** METHOD: sqlite3_changeset_iter</code></span>
<span class="codeline" id="line-11171"><code>**</code></span>
<span class="codeline" id="line-11172"><code>** For each modified table, a changeset includes the following:</code></span>
<span class="codeline" id="line-11173"><code>**</code></span>
<span class="codeline" id="line-11174"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-11175"><code>**   &lt;li&gt; The number of columns in the table, and</code></span>
<span class="codeline" id="line-11176"><code>**   &lt;li&gt; Which of those columns make up the tables PRIMARY KEY.</code></span>
<span class="codeline" id="line-11177"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-11178"><code>**</code></span>
<span class="codeline" id="line-11179"><code>** This function is used to find which columns comprise the PRIMARY KEY of</code></span>
<span class="codeline" id="line-11180"><code>** the table modified by the change that iterator pIter currently points to.</code></span>
<span class="codeline" id="line-11181"><code>** If successful, *pabPK is set to point to an array of nCol entries, where</code></span>
<span class="codeline" id="line-11182"><code>** nCol is the number of columns in the table. Elements of *pabPK are set to</code></span>
<span class="codeline" id="line-11183"><code>** 0x01 if the corresponding column is part of the tables primary key, or</code></span>
<span class="codeline" id="line-11184"><code>** 0x00 if it is not.</code></span>
<span class="codeline" id="line-11185"><code>**</code></span>
<span class="codeline" id="line-11186"><code>** If argument pnCol is not NULL, then *pnCol is set to the number of columns</code></span>
<span class="codeline" id="line-11187"><code>** in the table.</code></span>
<span class="codeline" id="line-11188"><code>**</code></span>
<span class="codeline" id="line-11189"><code>** If this function is called when the iterator does not point to a valid</code></span>
<span class="codeline" id="line-11190"><code>** entry, SQLITE_MISUSE is returned and the output variables zeroed. Otherwise,</code></span>
<span class="codeline" id="line-11191"><code>** SQLITE_OK is returned and the output variables populated as described</code></span>
<span class="codeline" id="line-11192"><code>** above.</code></span>
<span class="codeline" id="line-11193"><code>*/</code></span>
<span class="codeline" id="line-11194"><code>SQLITE_API int sqlite3changeset_pk(</code></span>
<span class="codeline" id="line-11195"><code>  sqlite3_changeset_iter *pIter,  /* Iterator object */</code></span>
<span class="codeline" id="line-11196"><code>  unsigned char **pabPK,          /* OUT: Array of boolean - true for PK cols */</code></span>
<span class="codeline" id="line-11197"><code>  int *pnCol                      /* OUT: Number of entries in output array */</code></span>
<span class="codeline" id="line-11198"><code>);</code></span>
<span class="codeline" id="line-11199"><code></code></span>
<span class="codeline" id="line-11200"><code>/*</code></span>
<span class="codeline" id="line-11201"><code>** CAPI3REF: Obtain old.* Values From A Changeset Iterator</code></span>
<span class="codeline" id="line-11202"><code>** METHOD: sqlite3_changeset_iter</code></span>
<span class="codeline" id="line-11203"><code>**</code></span>
<span class="codeline" id="line-11204"><code>** The pIter argument passed to this function may either be an iterator</code></span>
<span class="codeline" id="line-11205"><code>** passed to a conflict-handler by [sqlite3changeset_apply()], or an iterator</code></span>
<span class="codeline" id="line-11206"><code>** created by [sqlite3changeset_start()]. In the latter case, the most recent</code></span>
<span class="codeline" id="line-11207"><code>** call to [sqlite3changeset_next()] must have returned SQLITE_ROW.</code></span>
<span class="codeline" id="line-11208"><code>** Furthermore, it may only be called if the type of change that the iterator</code></span>
<span class="codeline" id="line-11209"><code>** currently points to is either [SQLITE_DELETE] or [SQLITE_UPDATE]. Otherwise,</code></span>
<span class="codeline" id="line-11210"><code>** this function returns [SQLITE_MISUSE] and sets *ppValue to NULL.</code></span>
<span class="codeline" id="line-11211"><code>**</code></span>
<span class="codeline" id="line-11212"><code>** Argument iVal must be greater than or equal to 0, and less than the number</code></span>
<span class="codeline" id="line-11213"><code>** of columns in the table affected by the current change. Otherwise,</code></span>
<span class="codeline" id="line-11214"><code>** [SQLITE_RANGE] is returned and *ppValue is set to NULL.</code></span>
<span class="codeline" id="line-11215"><code>**</code></span>
<span class="codeline" id="line-11216"><code>** If successful, this function sets *ppValue to point to a protected</code></span>
<span class="codeline" id="line-11217"><code>** sqlite3_value object containing the iVal'th value from the vector of</code></span>
<span class="codeline" id="line-11218"><code>** original row values stored as part of the UPDATE or DELETE change and</code></span>
<span class="codeline" id="line-11219"><code>** returns SQLITE_OK. The name of the function comes from the fact that this</code></span>
<span class="codeline" id="line-11220"><code>** is similar to the "old.*" columns available to update or delete triggers.</code></span>
<span class="codeline" id="line-11221"><code>**</code></span>
<span class="codeline" id="line-11222"><code>** If some other error occurs (e.g. an OOM condition), an SQLite error code</code></span>
<span class="codeline" id="line-11223"><code>** is returned and *ppValue is set to NULL.</code></span>
<span class="codeline" id="line-11224"><code>*/</code></span>
<span class="codeline" id="line-11225"><code>SQLITE_API int sqlite3changeset_old(</code></span>
<span class="codeline" id="line-11226"><code>  sqlite3_changeset_iter *pIter,  /* Changeset iterator */</code></span>
<span class="codeline" id="line-11227"><code>  int iVal,                       /* Column number */</code></span>
<span class="codeline" id="line-11228"><code>  sqlite3_value **ppValue         /* OUT: Old value (or NULL pointer) */</code></span>
<span class="codeline" id="line-11229"><code>);</code></span>
<span class="codeline" id="line-11230"><code></code></span>
<span class="codeline" id="line-11231"><code>/*</code></span>
<span class="codeline" id="line-11232"><code>** CAPI3REF: Obtain new.* Values From A Changeset Iterator</code></span>
<span class="codeline" id="line-11233"><code>** METHOD: sqlite3_changeset_iter</code></span>
<span class="codeline" id="line-11234"><code>**</code></span>
<span class="codeline" id="line-11235"><code>** The pIter argument passed to this function may either be an iterator</code></span>
<span class="codeline" id="line-11236"><code>** passed to a conflict-handler by [sqlite3changeset_apply()], or an iterator</code></span>
<span class="codeline" id="line-11237"><code>** created by [sqlite3changeset_start()]. In the latter case, the most recent</code></span>
<span class="codeline" id="line-11238"><code>** call to [sqlite3changeset_next()] must have returned SQLITE_ROW.</code></span>
<span class="codeline" id="line-11239"><code>** Furthermore, it may only be called if the type of change that the iterator</code></span>
<span class="codeline" id="line-11240"><code>** currently points to is either [SQLITE_UPDATE] or [SQLITE_INSERT]. Otherwise,</code></span>
<span class="codeline" id="line-11241"><code>** this function returns [SQLITE_MISUSE] and sets *ppValue to NULL.</code></span>
<span class="codeline" id="line-11242"><code>**</code></span>
<span class="codeline" id="line-11243"><code>** Argument iVal must be greater than or equal to 0, and less than the number</code></span>
<span class="codeline" id="line-11244"><code>** of columns in the table affected by the current change. Otherwise,</code></span>
<span class="codeline" id="line-11245"><code>** [SQLITE_RANGE] is returned and *ppValue is set to NULL.</code></span>
<span class="codeline" id="line-11246"><code>**</code></span>
<span class="codeline" id="line-11247"><code>** If successful, this function sets *ppValue to point to a protected</code></span>
<span class="codeline" id="line-11248"><code>** sqlite3_value object containing the iVal'th value from the vector of</code></span>
<span class="codeline" id="line-11249"><code>** new row values stored as part of the UPDATE or INSERT change and</code></span>
<span class="codeline" id="line-11250"><code>** returns SQLITE_OK. If the change is an UPDATE and does not include</code></span>
<span class="codeline" id="line-11251"><code>** a new value for the requested column, *ppValue is set to NULL and</code></span>
<span class="codeline" id="line-11252"><code>** SQLITE_OK returned. The name of the function comes from the fact that</code></span>
<span class="codeline" id="line-11253"><code>** this is similar to the "new.*" columns available to update or delete</code></span>
<span class="codeline" id="line-11254"><code>** triggers.</code></span>
<span class="codeline" id="line-11255"><code>**</code></span>
<span class="codeline" id="line-11256"><code>** If some other error occurs (e.g. an OOM condition), an SQLite error code</code></span>
<span class="codeline" id="line-11257"><code>** is returned and *ppValue is set to NULL.</code></span>
<span class="codeline" id="line-11258"><code>*/</code></span>
<span class="codeline" id="line-11259"><code>SQLITE_API int sqlite3changeset_new(</code></span>
<span class="codeline" id="line-11260"><code>  sqlite3_changeset_iter *pIter,  /* Changeset iterator */</code></span>
<span class="codeline" id="line-11261"><code>  int iVal,                       /* Column number */</code></span>
<span class="codeline" id="line-11262"><code>  sqlite3_value **ppValue         /* OUT: New value (or NULL pointer) */</code></span>
<span class="codeline" id="line-11263"><code>);</code></span>
<span class="codeline" id="line-11264"><code></code></span>
<span class="codeline" id="line-11265"><code>/*</code></span>
<span class="codeline" id="line-11266"><code>** CAPI3REF: Obtain Conflicting Row Values From A Changeset Iterator</code></span>
<span class="codeline" id="line-11267"><code>** METHOD: sqlite3_changeset_iter</code></span>
<span class="codeline" id="line-11268"><code>**</code></span>
<span class="codeline" id="line-11269"><code>** This function should only be used with iterator objects passed to a</code></span>
<span class="codeline" id="line-11270"><code>** conflict-handler callback by [sqlite3changeset_apply()] with either</code></span>
<span class="codeline" id="line-11271"><code>** [SQLITE_CHANGESET_DATA] or [SQLITE_CHANGESET_CONFLICT]. If this function</code></span>
<span class="codeline" id="line-11272"><code>** is called on any other iterator, [SQLITE_MISUSE] is returned and *ppValue</code></span>
<span class="codeline" id="line-11273"><code>** is set to NULL.</code></span>
<span class="codeline" id="line-11274"><code>**</code></span>
<span class="codeline" id="line-11275"><code>** Argument iVal must be greater than or equal to 0, and less than the number</code></span>
<span class="codeline" id="line-11276"><code>** of columns in the table affected by the current change. Otherwise,</code></span>
<span class="codeline" id="line-11277"><code>** [SQLITE_RANGE] is returned and *ppValue is set to NULL.</code></span>
<span class="codeline" id="line-11278"><code>**</code></span>
<span class="codeline" id="line-11279"><code>** If successful, this function sets *ppValue to point to a protected</code></span>
<span class="codeline" id="line-11280"><code>** sqlite3_value object containing the iVal'th value from the</code></span>
<span class="codeline" id="line-11281"><code>** "conflicting row" associated with the current conflict-handler callback</code></span>
<span class="codeline" id="line-11282"><code>** and returns SQLITE_OK.</code></span>
<span class="codeline" id="line-11283"><code>**</code></span>
<span class="codeline" id="line-11284"><code>** If some other error occurs (e.g. an OOM condition), an SQLite error code</code></span>
<span class="codeline" id="line-11285"><code>** is returned and *ppValue is set to NULL.</code></span>
<span class="codeline" id="line-11286"><code>*/</code></span>
<span class="codeline" id="line-11287"><code>SQLITE_API int sqlite3changeset_conflict(</code></span>
<span class="codeline" id="line-11288"><code>  sqlite3_changeset_iter *pIter,  /* Changeset iterator */</code></span>
<span class="codeline" id="line-11289"><code>  int iVal,                       /* Column number */</code></span>
<span class="codeline" id="line-11290"><code>  sqlite3_value **ppValue         /* OUT: Value from conflicting row */</code></span>
<span class="codeline" id="line-11291"><code>);</code></span>
<span class="codeline" id="line-11292"><code></code></span>
<span class="codeline" id="line-11293"><code>/*</code></span>
<span class="codeline" id="line-11294"><code>** CAPI3REF: Determine The Number Of Foreign Key Constraint Violations</code></span>
<span class="codeline" id="line-11295"><code>** METHOD: sqlite3_changeset_iter</code></span>
<span class="codeline" id="line-11296"><code>**</code></span>
<span class="codeline" id="line-11297"><code>** This function may only be called with an iterator passed to an</code></span>
<span class="codeline" id="line-11298"><code>** SQLITE_CHANGESET_FOREIGN_KEY conflict handler callback. In this case</code></span>
<span class="codeline" id="line-11299"><code>** it sets the output variable to the total number of known foreign key</code></span>
<span class="codeline" id="line-11300"><code>** violations in the destination database and returns SQLITE_OK.</code></span>
<span class="codeline" id="line-11301"><code>**</code></span>
<span class="codeline" id="line-11302"><code>** In all other cases this function returns SQLITE_MISUSE.</code></span>
<span class="codeline" id="line-11303"><code>*/</code></span>
<span class="codeline" id="line-11304"><code>SQLITE_API int sqlite3changeset_fk_conflicts(</code></span>
<span class="codeline" id="line-11305"><code>  sqlite3_changeset_iter *pIter,  /* Changeset iterator */</code></span>
<span class="codeline" id="line-11306"><code>  int *pnOut                      /* OUT: Number of FK violations */</code></span>
<span class="codeline" id="line-11307"><code>);</code></span>
<span class="codeline" id="line-11308"><code></code></span>
<span class="codeline" id="line-11309"><code></code></span>
<span class="codeline" id="line-11310"><code>/*</code></span>
<span class="codeline" id="line-11311"><code>** CAPI3REF: Finalize A Changeset Iterator</code></span>
<span class="codeline" id="line-11312"><code>** METHOD: sqlite3_changeset_iter</code></span>
<span class="codeline" id="line-11313"><code>**</code></span>
<span class="codeline" id="line-11314"><code>** This function is used to finalize an iterator allocated with</code></span>
<span class="codeline" id="line-11315"><code>** [sqlite3changeset_start()].</code></span>
<span class="codeline" id="line-11316"><code>**</code></span>
<span class="codeline" id="line-11317"><code>** This function should only be called on iterators created using the</code></span>
<span class="codeline" id="line-11318"><code>** [sqlite3changeset_start()] function. If an application calls this</code></span>
<span class="codeline" id="line-11319"><code>** function with an iterator passed to a conflict-handler by</code></span>
<span class="codeline" id="line-11320"><code>** [sqlite3changeset_apply()], [SQLITE_MISUSE] is immediately returned and the</code></span>
<span class="codeline" id="line-11321"><code>** call has no effect.</code></span>
<span class="codeline" id="line-11322"><code>**</code></span>
<span class="codeline" id="line-11323"><code>** If an error was encountered within a call to an sqlite3changeset_xxx()</code></span>
<span class="codeline" id="line-11324"><code>** function (for example an [SQLITE_CORRUPT] in [sqlite3changeset_next()] or an</code></span>
<span class="codeline" id="line-11325"><code>** [SQLITE_NOMEM] in [sqlite3changeset_new()]) then an error code corresponding</code></span>
<span class="codeline" id="line-11326"><code>** to that error is returned by this function. Otherwise, SQLITE_OK is</code></span>
<span class="codeline" id="line-11327"><code>** returned. This is to allow the following pattern (pseudo-code):</code></span>
<span class="codeline" id="line-11328"><code>**</code></span>
<span class="codeline" id="line-11329"><code>** &lt;pre&gt;</code></span>
<span class="codeline" id="line-11330"><code>**   sqlite3changeset_start();</code></span>
<span class="codeline" id="line-11331"><code>**   while( SQLITE_ROW==sqlite3changeset_next() ){</code></span>
<span class="codeline" id="line-11332"><code>**     // Do something with change.</code></span>
<span class="codeline" id="line-11333"><code>**   }</code></span>
<span class="codeline" id="line-11334"><code>**   rc = sqlite3changeset_finalize();</code></span>
<span class="codeline" id="line-11335"><code>**   if( rc!=SQLITE_OK ){</code></span>
<span class="codeline" id="line-11336"><code>**     // An error has occurred</code></span>
<span class="codeline" id="line-11337"><code>**   }</code></span>
<span class="codeline" id="line-11338"><code>** &lt;/pre&gt;</code></span>
<span class="codeline" id="line-11339"><code>*/</code></span>
<span class="codeline" id="line-11340"><code>SQLITE_API int sqlite3changeset_finalize(sqlite3_changeset_iter *pIter);</code></span>
<span class="codeline" id="line-11341"><code></code></span>
<span class="codeline" id="line-11342"><code>/*</code></span>
<span class="codeline" id="line-11343"><code>** CAPI3REF: Invert A Changeset</code></span>
<span class="codeline" id="line-11344"><code>**</code></span>
<span class="codeline" id="line-11345"><code>** This function is used to "invert" a changeset object. Applying an inverted</code></span>
<span class="codeline" id="line-11346"><code>** changeset to a database reverses the effects of applying the uninverted</code></span>
<span class="codeline" id="line-11347"><code>** changeset. Specifically:</code></span>
<span class="codeline" id="line-11348"><code>**</code></span>
<span class="codeline" id="line-11349"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-11350"><code>**   &lt;li&gt; Each DELETE change is changed to an INSERT, and</code></span>
<span class="codeline" id="line-11351"><code>**   &lt;li&gt; Each INSERT change is changed to a DELETE, and</code></span>
<span class="codeline" id="line-11352"><code>**   &lt;li&gt; For each UPDATE change, the old.* and new.* values are exchanged.</code></span>
<span class="codeline" id="line-11353"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-11354"><code>**</code></span>
<span class="codeline" id="line-11355"><code>** This function does not change the order in which changes appear within</code></span>
<span class="codeline" id="line-11356"><code>** the changeset. It merely reverses the sense of each individual change.</code></span>
<span class="codeline" id="line-11357"><code>**</code></span>
<span class="codeline" id="line-11358"><code>** If successful, a pointer to a buffer containing the inverted changeset</code></span>
<span class="codeline" id="line-11359"><code>** is stored in *ppOut, the size of the same buffer is stored in *pnOut, and</code></span>
<span class="codeline" id="line-11360"><code>** SQLITE_OK is returned. If an error occurs, both *pnOut and *ppOut are</code></span>
<span class="codeline" id="line-11361"><code>** zeroed and an SQLite error code returned.</code></span>
<span class="codeline" id="line-11362"><code>**</code></span>
<span class="codeline" id="line-11363"><code>** It is the responsibility of the caller to eventually call sqlite3_free()</code></span>
<span class="codeline" id="line-11364"><code>** on the *ppOut pointer to free the buffer allocation following a successful</code></span>
<span class="codeline" id="line-11365"><code>** call to this function.</code></span>
<span class="codeline" id="line-11366"><code>**</code></span>
<span class="codeline" id="line-11367"><code>** WARNING/TODO: This function currently assumes that the input is a valid</code></span>
<span class="codeline" id="line-11368"><code>** changeset. If it is not, the results are undefined.</code></span>
<span class="codeline" id="line-11369"><code>*/</code></span>
<span class="codeline" id="line-11370"><code>SQLITE_API int sqlite3changeset_invert(</code></span>
<span class="codeline" id="line-11371"><code>  int nIn, const void *pIn,       /* Input changeset */</code></span>
<span class="codeline" id="line-11372"><code>  int *pnOut, void **ppOut        /* OUT: Inverse of input */</code></span>
<span class="codeline" id="line-11373"><code>);</code></span>
<span class="codeline" id="line-11374"><code></code></span>
<span class="codeline" id="line-11375"><code>/*</code></span>
<span class="codeline" id="line-11376"><code>** CAPI3REF: Concatenate Two Changeset Objects</code></span>
<span class="codeline" id="line-11377"><code>**</code></span>
<span class="codeline" id="line-11378"><code>** This function is used to concatenate two changesets, A and B, into a</code></span>
<span class="codeline" id="line-11379"><code>** single changeset. The result is a changeset equivalent to applying</code></span>
<span class="codeline" id="line-11380"><code>** changeset A followed by changeset B.</code></span>
<span class="codeline" id="line-11381"><code>**</code></span>
<span class="codeline" id="line-11382"><code>** This function combines the two input changesets using an</code></span>
<span class="codeline" id="line-11383"><code>** sqlite3_changegroup object. Calling it produces similar results as the</code></span>
<span class="codeline" id="line-11384"><code>** following code fragment:</code></span>
<span class="codeline" id="line-11385"><code>**</code></span>
<span class="codeline" id="line-11386"><code>** &lt;pre&gt;</code></span>
<span class="codeline" id="line-11387"><code>**   sqlite3_changegroup *pGrp;</code></span>
<span class="codeline" id="line-11388"><code>**   rc = sqlite3_changegroup_new(&amp;pGrp);</code></span>
<span class="codeline" id="line-11389"><code>**   if( rc==SQLITE_OK ) rc = sqlite3changegroup_add(pGrp, nA, pA);</code></span>
<span class="codeline" id="line-11390"><code>**   if( rc==SQLITE_OK ) rc = sqlite3changegroup_add(pGrp, nB, pB);</code></span>
<span class="codeline" id="line-11391"><code>**   if( rc==SQLITE_OK ){</code></span>
<span class="codeline" id="line-11392"><code>**     rc = sqlite3changegroup_output(pGrp, pnOut, ppOut);</code></span>
<span class="codeline" id="line-11393"><code>**   }else{</code></span>
<span class="codeline" id="line-11394"><code>**     *ppOut = 0;</code></span>
<span class="codeline" id="line-11395"><code>**     *pnOut = 0;</code></span>
<span class="codeline" id="line-11396"><code>**   }</code></span>
<span class="codeline" id="line-11397"><code>** &lt;/pre&gt;</code></span>
<span class="codeline" id="line-11398"><code>**</code></span>
<span class="codeline" id="line-11399"><code>** Refer to the sqlite3_changegroup documentation below for details.</code></span>
<span class="codeline" id="line-11400"><code>*/</code></span>
<span class="codeline" id="line-11401"><code>SQLITE_API int sqlite3changeset_concat(</code></span>
<span class="codeline" id="line-11402"><code>  int nA,                         /* Number of bytes in buffer pA */</code></span>
<span class="codeline" id="line-11403"><code>  void *pA,                       /* Pointer to buffer containing changeset A */</code></span>
<span class="codeline" id="line-11404"><code>  int nB,                         /* Number of bytes in buffer pB */</code></span>
<span class="codeline" id="line-11405"><code>  void *pB,                       /* Pointer to buffer containing changeset B */</code></span>
<span class="codeline" id="line-11406"><code>  int *pnOut,                     /* OUT: Number of bytes in output changeset */</code></span>
<span class="codeline" id="line-11407"><code>  void **ppOut                    /* OUT: Buffer containing output changeset */</code></span>
<span class="codeline" id="line-11408"><code>);</code></span>
<span class="codeline" id="line-11409"><code></code></span>
<span class="codeline" id="line-11410"><code></code></span>
<span class="codeline" id="line-11411"><code>/*</code></span>
<span class="codeline" id="line-11412"><code>** CAPI3REF: Changegroup Handle</code></span>
<span class="codeline" id="line-11413"><code>**</code></span>
<span class="codeline" id="line-11414"><code>** A changegroup is an object used to combine two or more</code></span>
<span class="codeline" id="line-11415"><code>** [changesets] or [patchsets]</code></span>
<span class="codeline" id="line-11416"><code>*/</code></span>
<span class="codeline" id="line-11417"><code>typedef struct sqlite3_changegroup sqlite3_changegroup;</code></span>
<span class="codeline" id="line-11418"><code></code></span>
<span class="codeline" id="line-11419"><code>/*</code></span>
<span class="codeline" id="line-11420"><code>** CAPI3REF: Create A New Changegroup Object</code></span>
<span class="codeline" id="line-11421"><code>** CONSTRUCTOR: sqlite3_changegroup</code></span>
<span class="codeline" id="line-11422"><code>**</code></span>
<span class="codeline" id="line-11423"><code>** An sqlite3_changegroup object is used to combine two or more changesets</code></span>
<span class="codeline" id="line-11424"><code>** (or patchsets) into a single changeset (or patchset). A single changegroup</code></span>
<span class="codeline" id="line-11425"><code>** object may combine changesets or patchsets, but not both. The output is</code></span>
<span class="codeline" id="line-11426"><code>** always in the same format as the input.</code></span>
<span class="codeline" id="line-11427"><code>**</code></span>
<span class="codeline" id="line-11428"><code>** If successful, this function returns SQLITE_OK and populates (*pp) with</code></span>
<span class="codeline" id="line-11429"><code>** a pointer to a new sqlite3_changegroup object before returning. The caller</code></span>
<span class="codeline" id="line-11430"><code>** should eventually free the returned object using a call to</code></span>
<span class="codeline" id="line-11431"><code>** sqlite3changegroup_delete(). If an error occurs, an SQLite error code</code></span>
<span class="codeline" id="line-11432"><code>** (i.e. SQLITE_NOMEM) is returned and *pp is set to NULL.</code></span>
<span class="codeline" id="line-11433"><code>**</code></span>
<span class="codeline" id="line-11434"><code>** The usual usage pattern for an sqlite3_changegroup object is as follows:</code></span>
<span class="codeline" id="line-11435"><code>**</code></span>
<span class="codeline" id="line-11436"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-11437"><code>**   &lt;li&gt; It is created using a call to sqlite3changegroup_new().</code></span>
<span class="codeline" id="line-11438"><code>**</code></span>
<span class="codeline" id="line-11439"><code>**   &lt;li&gt; Zero or more changesets (or patchsets) are added to the object</code></span>
<span class="codeline" id="line-11440"><code>**        by calling sqlite3changegroup_add().</code></span>
<span class="codeline" id="line-11441"><code>**</code></span>
<span class="codeline" id="line-11442"><code>**   &lt;li&gt; The result of combining all input changesets together is obtained</code></span>
<span class="codeline" id="line-11443"><code>**        by the application via a call to sqlite3changegroup_output().</code></span>
<span class="codeline" id="line-11444"><code>**</code></span>
<span class="codeline" id="line-11445"><code>**   &lt;li&gt; The object is deleted using a call to sqlite3changegroup_delete().</code></span>
<span class="codeline" id="line-11446"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-11447"><code>**</code></span>
<span class="codeline" id="line-11448"><code>** Any number of calls to add() and output() may be made between the calls to</code></span>
<span class="codeline" id="line-11449"><code>** new() and delete(), and in any order.</code></span>
<span class="codeline" id="line-11450"><code>**</code></span>
<span class="codeline" id="line-11451"><code>** As well as the regular sqlite3changegroup_add() and</code></span>
<span class="codeline" id="line-11452"><code>** sqlite3changegroup_output() functions, also available are the streaming</code></span>
<span class="codeline" id="line-11453"><code>** versions sqlite3changegroup_add_strm() and sqlite3changegroup_output_strm().</code></span>
<span class="codeline" id="line-11454"><code>*/</code></span>
<span class="codeline" id="line-11455"><code>SQLITE_API int sqlite3changegroup_new(sqlite3_changegroup **pp);</code></span>
<span class="codeline" id="line-11456"><code></code></span>
<span class="codeline" id="line-11457"><code>/*</code></span>
<span class="codeline" id="line-11458"><code>** CAPI3REF: Add A Changeset To A Changegroup</code></span>
<span class="codeline" id="line-11459"><code>** METHOD: sqlite3_changegroup</code></span>
<span class="codeline" id="line-11460"><code>**</code></span>
<span class="codeline" id="line-11461"><code>** Add all changes within the changeset (or patchset) in buffer pData (size</code></span>
<span class="codeline" id="line-11462"><code>** nData bytes) to the changegroup.</code></span>
<span class="codeline" id="line-11463"><code>**</code></span>
<span class="codeline" id="line-11464"><code>** If the buffer contains a patchset, then all prior calls to this function</code></span>
<span class="codeline" id="line-11465"><code>** on the same changegroup object must also have specified patchsets. Or, if</code></span>
<span class="codeline" id="line-11466"><code>** the buffer contains a changeset, so must have the earlier calls to this</code></span>
<span class="codeline" id="line-11467"><code>** function. Otherwise, SQLITE_ERROR is returned and no changes are added</code></span>
<span class="codeline" id="line-11468"><code>** to the changegroup.</code></span>
<span class="codeline" id="line-11469"><code>**</code></span>
<span class="codeline" id="line-11470"><code>** Rows within the changeset and changegroup are identified by the values in</code></span>
<span class="codeline" id="line-11471"><code>** their PRIMARY KEY columns. A change in the changeset is considered to</code></span>
<span class="codeline" id="line-11472"><code>** apply to the same row as a change already present in the changegroup if</code></span>
<span class="codeline" id="line-11473"><code>** the two rows have the same primary key.</code></span>
<span class="codeline" id="line-11474"><code>**</code></span>
<span class="codeline" id="line-11475"><code>** Changes to rows that do not already appear in the changegroup are</code></span>
<span class="codeline" id="line-11476"><code>** simply copied into it. Or, if both the new changeset and the changegroup</code></span>
<span class="codeline" id="line-11477"><code>** contain changes that apply to a single row, the final contents of the</code></span>
<span class="codeline" id="line-11478"><code>** changegroup depends on the type of each change, as follows:</code></span>
<span class="codeline" id="line-11479"><code>**</code></span>
<span class="codeline" id="line-11480"><code>** &lt;table border=1 style="margin-left:8ex;margin-right:8ex"&gt;</code></span>
<span class="codeline" id="line-11481"><code>**   &lt;tr&gt;&lt;th style="white-space:pre"&gt;Existing Change  &lt;/th&gt;</code></span>
<span class="codeline" id="line-11482"><code>**       &lt;th style="white-space:pre"&gt;New Change       &lt;/th&gt;</code></span>
<span class="codeline" id="line-11483"><code>**       &lt;th&gt;Output Change</code></span>
<span class="codeline" id="line-11484"><code>**   &lt;tr&gt;&lt;td&gt;INSERT &lt;td&gt;INSERT &lt;td&gt;</code></span>
<span class="codeline" id="line-11485"><code>**       The new change is ignored. This case does not occur if the new</code></span>
<span class="codeline" id="line-11486"><code>**       changeset was recorded immediately after the changesets already</code></span>
<span class="codeline" id="line-11487"><code>**       added to the changegroup.</code></span>
<span class="codeline" id="line-11488"><code>**   &lt;tr&gt;&lt;td&gt;INSERT &lt;td&gt;UPDATE &lt;td&gt;</code></span>
<span class="codeline" id="line-11489"><code>**       The INSERT change remains in the changegroup. The values in the</code></span>
<span class="codeline" id="line-11490"><code>**       INSERT change are modified as if the row was inserted by the</code></span>
<span class="codeline" id="line-11491"><code>**       existing change and then updated according to the new change.</code></span>
<span class="codeline" id="line-11492"><code>**   &lt;tr&gt;&lt;td&gt;INSERT &lt;td&gt;DELETE &lt;td&gt;</code></span>
<span class="codeline" id="line-11493"><code>**       The existing INSERT is removed from the changegroup. The DELETE is</code></span>
<span class="codeline" id="line-11494"><code>**       not added.</code></span>
<span class="codeline" id="line-11495"><code>**   &lt;tr&gt;&lt;td&gt;UPDATE &lt;td&gt;INSERT &lt;td&gt;</code></span>
<span class="codeline" id="line-11496"><code>**       The new change is ignored. This case does not occur if the new</code></span>
<span class="codeline" id="line-11497"><code>**       changeset was recorded immediately after the changesets already</code></span>
<span class="codeline" id="line-11498"><code>**       added to the changegroup.</code></span>
<span class="codeline" id="line-11499"><code>**   &lt;tr&gt;&lt;td&gt;UPDATE &lt;td&gt;UPDATE &lt;td&gt;</code></span>
<span class="codeline" id="line-11500"><code>**       The existing UPDATE remains within the changegroup. It is amended</code></span>
<span class="codeline" id="line-11501"><code>**       so that the accompanying values are as if the row was updated once</code></span>
<span class="codeline" id="line-11502"><code>**       by the existing change and then again by the new change.</code></span>
<span class="codeline" id="line-11503"><code>**   &lt;tr&gt;&lt;td&gt;UPDATE &lt;td&gt;DELETE &lt;td&gt;</code></span>
<span class="codeline" id="line-11504"><code>**       The existing UPDATE is replaced by the new DELETE within the</code></span>
<span class="codeline" id="line-11505"><code>**       changegroup.</code></span>
<span class="codeline" id="line-11506"><code>**   &lt;tr&gt;&lt;td&gt;DELETE &lt;td&gt;INSERT &lt;td&gt;</code></span>
<span class="codeline" id="line-11507"><code>**       If one or more of the column values in the row inserted by the</code></span>
<span class="codeline" id="line-11508"><code>**       new change differ from those in the row deleted by the existing</code></span>
<span class="codeline" id="line-11509"><code>**       change, the existing DELETE is replaced by an UPDATE within the</code></span>
<span class="codeline" id="line-11510"><code>**       changegroup. Otherwise, if the inserted row is exactly the same</code></span>
<span class="codeline" id="line-11511"><code>**       as the deleted row, the existing DELETE is simply discarded.</code></span>
<span class="codeline" id="line-11512"><code>**   &lt;tr&gt;&lt;td&gt;DELETE &lt;td&gt;UPDATE &lt;td&gt;</code></span>
<span class="codeline" id="line-11513"><code>**       The new change is ignored. This case does not occur if the new</code></span>
<span class="codeline" id="line-11514"><code>**       changeset was recorded immediately after the changesets already</code></span>
<span class="codeline" id="line-11515"><code>**       added to the changegroup.</code></span>
<span class="codeline" id="line-11516"><code>**   &lt;tr&gt;&lt;td&gt;DELETE &lt;td&gt;DELETE &lt;td&gt;</code></span>
<span class="codeline" id="line-11517"><code>**       The new change is ignored. This case does not occur if the new</code></span>
<span class="codeline" id="line-11518"><code>**       changeset was recorded immediately after the changesets already</code></span>
<span class="codeline" id="line-11519"><code>**       added to the changegroup.</code></span>
<span class="codeline" id="line-11520"><code>** &lt;/table&gt;</code></span>
<span class="codeline" id="line-11521"><code>**</code></span>
<span class="codeline" id="line-11522"><code>** If the new changeset contains changes to a table that is already present</code></span>
<span class="codeline" id="line-11523"><code>** in the changegroup, then the number of columns and the position of the</code></span>
<span class="codeline" id="line-11524"><code>** primary key columns for the table must be consistent. If this is not the</code></span>
<span class="codeline" id="line-11525"><code>** case, this function fails with SQLITE_SCHEMA. If the input changeset</code></span>
<span class="codeline" id="line-11526"><code>** appears to be corrupt and the corruption is detected, SQLITE_CORRUPT is</code></span>
<span class="codeline" id="line-11527"><code>** returned. Or, if an out-of-memory condition occurs during processing, this</code></span>
<span class="codeline" id="line-11528"><code>** function returns SQLITE_NOMEM. In all cases, if an error occurs the state</code></span>
<span class="codeline" id="line-11529"><code>** of the final contents of the changegroup is undefined.</code></span>
<span class="codeline" id="line-11530"><code>**</code></span>
<span class="codeline" id="line-11531"><code>** If no error occurs, SQLITE_OK is returned.</code></span>
<span class="codeline" id="line-11532"><code>*/</code></span>
<span class="codeline" id="line-11533"><code>SQLITE_API int sqlite3changegroup_add(sqlite3_changegroup*, int nData, void *pData);</code></span>
<span class="codeline" id="line-11534"><code></code></span>
<span class="codeline" id="line-11535"><code>/*</code></span>
<span class="codeline" id="line-11536"><code>** CAPI3REF: Obtain A Composite Changeset From A Changegroup</code></span>
<span class="codeline" id="line-11537"><code>** METHOD: sqlite3_changegroup</code></span>
<span class="codeline" id="line-11538"><code>**</code></span>
<span class="codeline" id="line-11539"><code>** Obtain a buffer containing a changeset (or patchset) representing the</code></span>
<span class="codeline" id="line-11540"><code>** current contents of the changegroup. If the inputs to the changegroup</code></span>
<span class="codeline" id="line-11541"><code>** were themselves changesets, the output is a changeset. Or, if the</code></span>
<span class="codeline" id="line-11542"><code>** inputs were patchsets, the output is also a patchset.</code></span>
<span class="codeline" id="line-11543"><code>**</code></span>
<span class="codeline" id="line-11544"><code>** As with the output of the sqlite3session_changeset() and</code></span>
<span class="codeline" id="line-11545"><code>** sqlite3session_patchset() functions, all changes related to a single</code></span>
<span class="codeline" id="line-11546"><code>** table are grouped together in the output of this function. Tables appear</code></span>
<span class="codeline" id="line-11547"><code>** in the same order as for the very first changeset added to the changegroup.</code></span>
<span class="codeline" id="line-11548"><code>** If the second or subsequent changesets added to the changegroup contain</code></span>
<span class="codeline" id="line-11549"><code>** changes for tables that do not appear in the first changeset, they are</code></span>
<span class="codeline" id="line-11550"><code>** appended onto the end of the output changeset, again in the order in</code></span>
<span class="codeline" id="line-11551"><code>** which they are first encountered.</code></span>
<span class="codeline" id="line-11552"><code>**</code></span>
<span class="codeline" id="line-11553"><code>** If an error occurs, an SQLite error code is returned and the output</code></span>
<span class="codeline" id="line-11554"><code>** variables (*pnData) and (*ppData) are set to 0. Otherwise, SQLITE_OK</code></span>
<span class="codeline" id="line-11555"><code>** is returned and the output variables are set to the size of and a</code></span>
<span class="codeline" id="line-11556"><code>** pointer to the output buffer, respectively. In this case it is the</code></span>
<span class="codeline" id="line-11557"><code>** responsibility of the caller to eventually free the buffer using a</code></span>
<span class="codeline" id="line-11558"><code>** call to sqlite3_free().</code></span>
<span class="codeline" id="line-11559"><code>*/</code></span>
<span class="codeline" id="line-11560"><code>SQLITE_API int sqlite3changegroup_output(</code></span>
<span class="codeline" id="line-11561"><code>  sqlite3_changegroup*,</code></span>
<span class="codeline" id="line-11562"><code>  int *pnData,                    /* OUT: Size of output buffer in bytes */</code></span>
<span class="codeline" id="line-11563"><code>  void **ppData                   /* OUT: Pointer to output buffer */</code></span>
<span class="codeline" id="line-11564"><code>);</code></span>
<span class="codeline" id="line-11565"><code></code></span>
<span class="codeline" id="line-11566"><code>/*</code></span>
<span class="codeline" id="line-11567"><code>** CAPI3REF: Delete A Changegroup Object</code></span>
<span class="codeline" id="line-11568"><code>** DESTRUCTOR: sqlite3_changegroup</code></span>
<span class="codeline" id="line-11569"><code>*/</code></span>
<span class="codeline" id="line-11570"><code>SQLITE_API void sqlite3changegroup_delete(sqlite3_changegroup*);</code></span>
<span class="codeline" id="line-11571"><code></code></span>
<span class="codeline" id="line-11572"><code>/*</code></span>
<span class="codeline" id="line-11573"><code>** CAPI3REF: Apply A Changeset To A Database</code></span>
<span class="codeline" id="line-11574"><code>**</code></span>
<span class="codeline" id="line-11575"><code>** Apply a changeset or patchset to a database. These functions attempt to</code></span>
<span class="codeline" id="line-11576"><code>** update the "main" database attached to handle db with the changes found in</code></span>
<span class="codeline" id="line-11577"><code>** the changeset passed via the second and third arguments.</code></span>
<span class="codeline" id="line-11578"><code>**</code></span>
<span class="codeline" id="line-11579"><code>** The fourth argument (xFilter) passed to these functions is the "filter</code></span>
<span class="codeline" id="line-11580"><code>** callback". If it is not NULL, then for each table affected by at least one</code></span>
<span class="codeline" id="line-11581"><code>** change in the changeset, the filter callback is invoked with</code></span>
<span class="codeline" id="line-11582"><code>** the table name as the second argument, and a copy of the context pointer</code></span>
<span class="codeline" id="line-11583"><code>** passed as the sixth argument as the first. If the "filter callback"</code></span>
<span class="codeline" id="line-11584"><code>** returns zero, then no attempt is made to apply any changes to the table.</code></span>
<span class="codeline" id="line-11585"><code>** Otherwise, if the return value is non-zero or the xFilter argument to</code></span>
<span class="codeline" id="line-11586"><code>** is NULL, all changes related to the table are attempted.</code></span>
<span class="codeline" id="line-11587"><code>**</code></span>
<span class="codeline" id="line-11588"><code>** For each table that is not excluded by the filter callback, this function</code></span>
<span class="codeline" id="line-11589"><code>** tests that the target database contains a compatible table. A table is</code></span>
<span class="codeline" id="line-11590"><code>** considered compatible if all of the following are true:</code></span>
<span class="codeline" id="line-11591"><code>**</code></span>
<span class="codeline" id="line-11592"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-11593"><code>**   &lt;li&gt; The table has the same name as the name recorded in the</code></span>
<span class="codeline" id="line-11594"><code>**        changeset, and</code></span>
<span class="codeline" id="line-11595"><code>**   &lt;li&gt; The table has at least as many columns as recorded in the</code></span>
<span class="codeline" id="line-11596"><code>**        changeset, and</code></span>
<span class="codeline" id="line-11597"><code>**   &lt;li&gt; The table has primary key columns in the same position as</code></span>
<span class="codeline" id="line-11598"><code>**        recorded in the changeset.</code></span>
<span class="codeline" id="line-11599"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-11600"><code>**</code></span>
<span class="codeline" id="line-11601"><code>** If there is no compatible table, it is not an error, but none of the</code></span>
<span class="codeline" id="line-11602"><code>** changes associated with the table are applied. A warning message is issued</code></span>
<span class="codeline" id="line-11603"><code>** via the sqlite3_log() mechanism with the error code SQLITE_SCHEMA. At most</code></span>
<span class="codeline" id="line-11604"><code>** one such warning is issued for each table in the changeset.</code></span>
<span class="codeline" id="line-11605"><code>**</code></span>
<span class="codeline" id="line-11606"><code>** For each change for which there is a compatible table, an attempt is made</code></span>
<span class="codeline" id="line-11607"><code>** to modify the table contents according to the UPDATE, INSERT or DELETE</code></span>
<span class="codeline" id="line-11608"><code>** change. If a change cannot be applied cleanly, the conflict handler</code></span>
<span class="codeline" id="line-11609"><code>** function passed as the fifth argument to sqlite3changeset_apply() may be</code></span>
<span class="codeline" id="line-11610"><code>** invoked. A description of exactly when the conflict handler is invoked for</code></span>
<span class="codeline" id="line-11611"><code>** each type of change is below.</code></span>
<span class="codeline" id="line-11612"><code>**</code></span>
<span class="codeline" id="line-11613"><code>** Unlike the xFilter argument, xConflict may not be passed NULL. The results</code></span>
<span class="codeline" id="line-11614"><code>** of passing anything other than a valid function pointer as the xConflict</code></span>
<span class="codeline" id="line-11615"><code>** argument are undefined.</code></span>
<span class="codeline" id="line-11616"><code>**</code></span>
<span class="codeline" id="line-11617"><code>** Each time the conflict handler function is invoked, it must return one</code></span>
<span class="codeline" id="line-11618"><code>** of [SQLITE_CHANGESET_OMIT], [SQLITE_CHANGESET_ABORT] or</code></span>
<span class="codeline" id="line-11619"><code>** [SQLITE_CHANGESET_REPLACE]. SQLITE_CHANGESET_REPLACE may only be returned</code></span>
<span class="codeline" id="line-11620"><code>** if the second argument passed to the conflict handler is either</code></span>
<span class="codeline" id="line-11621"><code>** SQLITE_CHANGESET_DATA or SQLITE_CHANGESET_CONFLICT. If the conflict-handler</code></span>
<span class="codeline" id="line-11622"><code>** returns an illegal value, any changes already made are rolled back and</code></span>
<span class="codeline" id="line-11623"><code>** the call to sqlite3changeset_apply() returns SQLITE_MISUSE. Different</code></span>
<span class="codeline" id="line-11624"><code>** actions are taken by sqlite3changeset_apply() depending on the value</code></span>
<span class="codeline" id="line-11625"><code>** returned by each invocation of the conflict-handler function. Refer to</code></span>
<span class="codeline" id="line-11626"><code>** the documentation for the three</code></span>
<span class="codeline" id="line-11627"><code>** [SQLITE_CHANGESET_OMIT|available return values] for details.</code></span>
<span class="codeline" id="line-11628"><code>**</code></span>
<span class="codeline" id="line-11629"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-11630"><code>** &lt;dt&gt;DELETE Changes&lt;dd&gt;</code></span>
<span class="codeline" id="line-11631"><code>**   For each DELETE change, the function checks if the target database</code></span>
<span class="codeline" id="line-11632"><code>**   contains a row with the same primary key value (or values) as the</code></span>
<span class="codeline" id="line-11633"><code>**   original row values stored in the changeset. If it does, and the values</code></span>
<span class="codeline" id="line-11634"><code>**   stored in all non-primary key columns also match the values stored in</code></span>
<span class="codeline" id="line-11635"><code>**   the changeset the row is deleted from the target database.</code></span>
<span class="codeline" id="line-11636"><code>**</code></span>
<span class="codeline" id="line-11637"><code>**   If a row with matching primary key values is found, but one or more of</code></span>
<span class="codeline" id="line-11638"><code>**   the non-primary key fields contains a value different from the original</code></span>
<span class="codeline" id="line-11639"><code>**   row value stored in the changeset, the conflict-handler function is</code></span>
<span class="codeline" id="line-11640"><code>**   invoked with [SQLITE_CHANGESET_DATA] as the second argument. If the</code></span>
<span class="codeline" id="line-11641"><code>**   database table has more columns than are recorded in the changeset,</code></span>
<span class="codeline" id="line-11642"><code>**   only the values of those non-primary key fields are compared against</code></span>
<span class="codeline" id="line-11643"><code>**   the current database contents - any trailing database table columns</code></span>
<span class="codeline" id="line-11644"><code>**   are ignored.</code></span>
<span class="codeline" id="line-11645"><code>**</code></span>
<span class="codeline" id="line-11646"><code>**   If no row with matching primary key values is found in the database,</code></span>
<span class="codeline" id="line-11647"><code>**   the conflict-handler function is invoked with [SQLITE_CHANGESET_NOTFOUND]</code></span>
<span class="codeline" id="line-11648"><code>**   passed as the second argument.</code></span>
<span class="codeline" id="line-11649"><code>**</code></span>
<span class="codeline" id="line-11650"><code>**   If the DELETE operation is attempted, but SQLite returns SQLITE_CONSTRAINT</code></span>
<span class="codeline" id="line-11651"><code>**   (which can only happen if a foreign key constraint is violated), the</code></span>
<span class="codeline" id="line-11652"><code>**   conflict-handler function is invoked with [SQLITE_CHANGESET_CONSTRAINT]</code></span>
<span class="codeline" id="line-11653"><code>**   passed as the second argument. This includes the case where the DELETE</code></span>
<span class="codeline" id="line-11654"><code>**   operation is attempted because an earlier call to the conflict handler</code></span>
<span class="codeline" id="line-11655"><code>**   function returned [SQLITE_CHANGESET_REPLACE].</code></span>
<span class="codeline" id="line-11656"><code>**</code></span>
<span class="codeline" id="line-11657"><code>** &lt;dt&gt;INSERT Changes&lt;dd&gt;</code></span>
<span class="codeline" id="line-11658"><code>**   For each INSERT change, an attempt is made to insert the new row into</code></span>
<span class="codeline" id="line-11659"><code>**   the database. If the changeset row contains fewer fields than the</code></span>
<span class="codeline" id="line-11660"><code>**   database table, the trailing fields are populated with their default</code></span>
<span class="codeline" id="line-11661"><code>**   values.</code></span>
<span class="codeline" id="line-11662"><code>**</code></span>
<span class="codeline" id="line-11663"><code>**   If the attempt to insert the row fails because the database already</code></span>
<span class="codeline" id="line-11664"><code>**   contains a row with the same primary key values, the conflict handler</code></span>
<span class="codeline" id="line-11665"><code>**   function is invoked with the second argument set to</code></span>
<span class="codeline" id="line-11666"><code>**   [SQLITE_CHANGESET_CONFLICT].</code></span>
<span class="codeline" id="line-11667"><code>**</code></span>
<span class="codeline" id="line-11668"><code>**   If the attempt to insert the row fails because of some other constraint</code></span>
<span class="codeline" id="line-11669"><code>**   violation (e.g. NOT NULL or UNIQUE), the conflict handler function is</code></span>
<span class="codeline" id="line-11670"><code>**   invoked with the second argument set to [SQLITE_CHANGESET_CONSTRAINT].</code></span>
<span class="codeline" id="line-11671"><code>**   This includes the case where the INSERT operation is re-attempted because</code></span>
<span class="codeline" id="line-11672"><code>**   an earlier call to the conflict handler function returned</code></span>
<span class="codeline" id="line-11673"><code>**   [SQLITE_CHANGESET_REPLACE].</code></span>
<span class="codeline" id="line-11674"><code>**</code></span>
<span class="codeline" id="line-11675"><code>** &lt;dt&gt;UPDATE Changes&lt;dd&gt;</code></span>
<span class="codeline" id="line-11676"><code>**   For each UPDATE change, the function checks if the target database</code></span>
<span class="codeline" id="line-11677"><code>**   contains a row with the same primary key value (or values) as the</code></span>
<span class="codeline" id="line-11678"><code>**   original row values stored in the changeset. If it does, and the values</code></span>
<span class="codeline" id="line-11679"><code>**   stored in all modified non-primary key columns also match the values</code></span>
<span class="codeline" id="line-11680"><code>**   stored in the changeset the row is updated within the target database.</code></span>
<span class="codeline" id="line-11681"><code>**</code></span>
<span class="codeline" id="line-11682"><code>**   If a row with matching primary key values is found, but one or more of</code></span>
<span class="codeline" id="line-11683"><code>**   the modified non-primary key fields contains a value different from an</code></span>
<span class="codeline" id="line-11684"><code>**   original row value stored in the changeset, the conflict-handler function</code></span>
<span class="codeline" id="line-11685"><code>**   is invoked with [SQLITE_CHANGESET_DATA] as the second argument. Since</code></span>
<span class="codeline" id="line-11686"><code>**   UPDATE changes only contain values for non-primary key fields that are</code></span>
<span class="codeline" id="line-11687"><code>**   to be modified, only those fields need to match the original values to</code></span>
<span class="codeline" id="line-11688"><code>**   avoid the SQLITE_CHANGESET_DATA conflict-handler callback.</code></span>
<span class="codeline" id="line-11689"><code>**</code></span>
<span class="codeline" id="line-11690"><code>**   If no row with matching primary key values is found in the database,</code></span>
<span class="codeline" id="line-11691"><code>**   the conflict-handler function is invoked with [SQLITE_CHANGESET_NOTFOUND]</code></span>
<span class="codeline" id="line-11692"><code>**   passed as the second argument.</code></span>
<span class="codeline" id="line-11693"><code>**</code></span>
<span class="codeline" id="line-11694"><code>**   If the UPDATE operation is attempted, but SQLite returns</code></span>
<span class="codeline" id="line-11695"><code>**   SQLITE_CONSTRAINT, the conflict-handler function is invoked with</code></span>
<span class="codeline" id="line-11696"><code>**   [SQLITE_CHANGESET_CONSTRAINT] passed as the second argument.</code></span>
<span class="codeline" id="line-11697"><code>**   This includes the case where the UPDATE operation is attempted after</code></span>
<span class="codeline" id="line-11698"><code>**   an earlier call to the conflict handler function returned</code></span>
<span class="codeline" id="line-11699"><code>**   [SQLITE_CHANGESET_REPLACE].</code></span>
<span class="codeline" id="line-11700"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-11701"><code>**</code></span>
<span class="codeline" id="line-11702"><code>** It is safe to execute SQL statements, including those that write to the</code></span>
<span class="codeline" id="line-11703"><code>** table that the callback related to, from within the xConflict callback.</code></span>
<span class="codeline" id="line-11704"><code>** This can be used to further customize the application's conflict</code></span>
<span class="codeline" id="line-11705"><code>** resolution strategy.</code></span>
<span class="codeline" id="line-11706"><code>**</code></span>
<span class="codeline" id="line-11707"><code>** All changes made by these functions are enclosed in a savepoint transaction.</code></span>
<span class="codeline" id="line-11708"><code>** If any other error (aside from a constraint failure when attempting to</code></span>
<span class="codeline" id="line-11709"><code>** write to the target database) occurs, then the savepoint transaction is</code></span>
<span class="codeline" id="line-11710"><code>** rolled back, restoring the target database to its original state, and an</code></span>
<span class="codeline" id="line-11711"><code>** SQLite error code returned.</code></span>
<span class="codeline" id="line-11712"><code>**</code></span>
<span class="codeline" id="line-11713"><code>** If the output parameters (ppRebase) and (pnRebase) are non-NULL and</code></span>
<span class="codeline" id="line-11714"><code>** the input is a changeset (not a patchset), then sqlite3changeset_apply_v2()</code></span>
<span class="codeline" id="line-11715"><code>** may set (*ppRebase) to point to a "rebase" that may be used with the</code></span>
<span class="codeline" id="line-11716"><code>** sqlite3_rebaser APIs buffer before returning. In this case (*pnRebase)</code></span>
<span class="codeline" id="line-11717"><code>** is set to the size of the buffer in bytes. It is the responsibility of the</code></span>
<span class="codeline" id="line-11718"><code>** caller to eventually free any such buffer using sqlite3_free(). The buffer</code></span>
<span class="codeline" id="line-11719"><code>** is only allocated and populated if one or more conflicts were encountered</code></span>
<span class="codeline" id="line-11720"><code>** while applying the patchset. See comments surrounding the sqlite3_rebaser</code></span>
<span class="codeline" id="line-11721"><code>** APIs for further details.</code></span>
<span class="codeline" id="line-11722"><code>**</code></span>
<span class="codeline" id="line-11723"><code>** The behavior of sqlite3changeset_apply_v2() and its streaming equivalent</code></span>
<span class="codeline" id="line-11724"><code>** may be modified by passing a combination of</code></span>
<span class="codeline" id="line-11725"><code>** [SQLITE_CHANGESETAPPLY_NOSAVEPOINT | supported flags] as the 9th parameter.</code></span>
<span class="codeline" id="line-11726"><code>**</code></span>
<span class="codeline" id="line-11727"><code>** Note that the sqlite3changeset_apply_v2() API is still &lt;b&gt;experimental&lt;/b&gt;</code></span>
<span class="codeline" id="line-11728"><code>** and therefore subject to change.</code></span>
<span class="codeline" id="line-11729"><code>*/</code></span>
<span class="codeline" id="line-11730"><code>SQLITE_API int sqlite3changeset_apply(</code></span>
<span class="codeline" id="line-11731"><code>  sqlite3 *db,                    /* Apply change to "main" db of this handle */</code></span>
<span class="codeline" id="line-11732"><code>  int nChangeset,                 /* Size of changeset in bytes */</code></span>
<span class="codeline" id="line-11733"><code>  void *pChangeset,               /* Changeset blob */</code></span>
<span class="codeline" id="line-11734"><code>  int(*xFilter)(</code></span>
<span class="codeline" id="line-11735"><code>    void *pCtx,                   /* Copy of sixth arg to _apply() */</code></span>
<span class="codeline" id="line-11736"><code>    const char *zTab              /* Table name */</code></span>
<span class="codeline" id="line-11737"><code>  ),</code></span>
<span class="codeline" id="line-11738"><code>  int(*xConflict)(</code></span>
<span class="codeline" id="line-11739"><code>    void *pCtx,                   /* Copy of sixth arg to _apply() */</code></span>
<span class="codeline" id="line-11740"><code>    int eConflict,                /* DATA, MISSING, CONFLICT, CONSTRAINT */</code></span>
<span class="codeline" id="line-11741"><code>    sqlite3_changeset_iter *p     /* Handle describing change and conflict */</code></span>
<span class="codeline" id="line-11742"><code>  ),</code></span>
<span class="codeline" id="line-11743"><code>  void *pCtx                      /* First argument passed to xConflict */</code></span>
<span class="codeline" id="line-11744"><code>);</code></span>
<span class="codeline" id="line-11745"><code>SQLITE_API int sqlite3changeset_apply_v2(</code></span>
<span class="codeline" id="line-11746"><code>  sqlite3 *db,                    /* Apply change to "main" db of this handle */</code></span>
<span class="codeline" id="line-11747"><code>  int nChangeset,                 /* Size of changeset in bytes */</code></span>
<span class="codeline" id="line-11748"><code>  void *pChangeset,               /* Changeset blob */</code></span>
<span class="codeline" id="line-11749"><code>  int(*xFilter)(</code></span>
<span class="codeline" id="line-11750"><code>    void *pCtx,                   /* Copy of sixth arg to _apply() */</code></span>
<span class="codeline" id="line-11751"><code>    const char *zTab              /* Table name */</code></span>
<span class="codeline" id="line-11752"><code>  ),</code></span>
<span class="codeline" id="line-11753"><code>  int(*xConflict)(</code></span>
<span class="codeline" id="line-11754"><code>    void *pCtx,                   /* Copy of sixth arg to _apply() */</code></span>
<span class="codeline" id="line-11755"><code>    int eConflict,                /* DATA, MISSING, CONFLICT, CONSTRAINT */</code></span>
<span class="codeline" id="line-11756"><code>    sqlite3_changeset_iter *p     /* Handle describing change and conflict */</code></span>
<span class="codeline" id="line-11757"><code>  ),</code></span>
<span class="codeline" id="line-11758"><code>  void *pCtx,                     /* First argument passed to xConflict */</code></span>
<span class="codeline" id="line-11759"><code>  void **ppRebase, int *pnRebase, /* OUT: Rebase data */</code></span>
<span class="codeline" id="line-11760"><code>  int flags                       /* SESSION_CHANGESETAPPLY_* flags */</code></span>
<span class="codeline" id="line-11761"><code>);</code></span>
<span class="codeline" id="line-11762"><code></code></span>
<span class="codeline" id="line-11763"><code>/*</code></span>
<span class="codeline" id="line-11764"><code>** CAPI3REF: Flags for sqlite3changeset_apply_v2</code></span>
<span class="codeline" id="line-11765"><code>**</code></span>
<span class="codeline" id="line-11766"><code>** The following flags may passed via the 9th parameter to</code></span>
<span class="codeline" id="line-11767"><code>** [sqlite3changeset_apply_v2] and [sqlite3changeset_apply_v2_strm]:</code></span>
<span class="codeline" id="line-11768"><code>**</code></span>
<span class="codeline" id="line-11769"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-11770"><code>** &lt;dt&gt;SQLITE_CHANGESETAPPLY_NOSAVEPOINT &lt;dd&gt;</code></span>
<span class="codeline" id="line-11771"><code>**   Usually, the sessions module encloses all operations performed by</code></span>
<span class="codeline" id="line-11772"><code>**   a single call to apply_v2() or apply_v2_strm() in a [SAVEPOINT]. The</code></span>
<span class="codeline" id="line-11773"><code>**   SAVEPOINT is committed if the changeset or patchset is successfully</code></span>
<span class="codeline" id="line-11774"><code>**   applied, or rolled back if an error occurs. Specifying this flag</code></span>
<span class="codeline" id="line-11775"><code>**   causes the sessions module to omit this savepoint. In this case, if the</code></span>
<span class="codeline" id="line-11776"><code>**   caller has an open transaction or savepoint when apply_v2() is called,</code></span>
<span class="codeline" id="line-11777"><code>**   it may revert the partially applied changeset by rolling it back.</code></span>
<span class="codeline" id="line-11778"><code>**</code></span>
<span class="codeline" id="line-11779"><code>** &lt;dt&gt;SQLITE_CHANGESETAPPLY_INVERT &lt;dd&gt;</code></span>
<span class="codeline" id="line-11780"><code>**   Invert the changeset before applying it. This is equivalent to inverting</code></span>
<span class="codeline" id="line-11781"><code>**   a changeset using sqlite3changeset_invert() before applying it. It is</code></span>
<span class="codeline" id="line-11782"><code>**   an error to specify this flag with a patchset.</code></span>
<span class="codeline" id="line-11783"><code>*/</code></span>
<span class="codeline" id="line-11784"><code>#define SQLITE_CHANGESETAPPLY_NOSAVEPOINT   0x0001</code></span>
<span class="codeline" id="line-11785"><code>#define SQLITE_CHANGESETAPPLY_INVERT        0x0002</code></span>
<span class="codeline" id="line-11786"><code></code></span>
<span class="codeline" id="line-11787"><code>/*</code></span>
<span class="codeline" id="line-11788"><code>** CAPI3REF: Constants Passed To The Conflict Handler</code></span>
<span class="codeline" id="line-11789"><code>**</code></span>
<span class="codeline" id="line-11790"><code>** Values that may be passed as the second argument to a conflict-handler.</code></span>
<span class="codeline" id="line-11791"><code>**</code></span>
<span class="codeline" id="line-11792"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-11793"><code>** &lt;dt&gt;SQLITE_CHANGESET_DATA&lt;dd&gt;</code></span>
<span class="codeline" id="line-11794"><code>**   The conflict handler is invoked with CHANGESET_DATA as the second argument</code></span>
<span class="codeline" id="line-11795"><code>**   when processing a DELETE or UPDATE change if a row with the required</code></span>
<span class="codeline" id="line-11796"><code>**   PRIMARY KEY fields is present in the database, but one or more other</code></span>
<span class="codeline" id="line-11797"><code>**   (non primary-key) fields modified by the update do not contain the</code></span>
<span class="codeline" id="line-11798"><code>**   expected "before" values.</code></span>
<span class="codeline" id="line-11799"><code>**</code></span>
<span class="codeline" id="line-11800"><code>**   The conflicting row, in this case, is the database row with the matching</code></span>
<span class="codeline" id="line-11801"><code>**   primary key.</code></span>
<span class="codeline" id="line-11802"><code>**</code></span>
<span class="codeline" id="line-11803"><code>** &lt;dt&gt;SQLITE_CHANGESET_NOTFOUND&lt;dd&gt;</code></span>
<span class="codeline" id="line-11804"><code>**   The conflict handler is invoked with CHANGESET_NOTFOUND as the second</code></span>
<span class="codeline" id="line-11805"><code>**   argument when processing a DELETE or UPDATE change if a row with the</code></span>
<span class="codeline" id="line-11806"><code>**   required PRIMARY KEY fields is not present in the database.</code></span>
<span class="codeline" id="line-11807"><code>**</code></span>
<span class="codeline" id="line-11808"><code>**   There is no conflicting row in this case. The results of invoking the</code></span>
<span class="codeline" id="line-11809"><code>**   sqlite3changeset_conflict() API are undefined.</code></span>
<span class="codeline" id="line-11810"><code>**</code></span>
<span class="codeline" id="line-11811"><code>** &lt;dt&gt;SQLITE_CHANGESET_CONFLICT&lt;dd&gt;</code></span>
<span class="codeline" id="line-11812"><code>**   CHANGESET_CONFLICT is passed as the second argument to the conflict</code></span>
<span class="codeline" id="line-11813"><code>**   handler while processing an INSERT change if the operation would result</code></span>
<span class="codeline" id="line-11814"><code>**   in duplicate primary key values.</code></span>
<span class="codeline" id="line-11815"><code>**</code></span>
<span class="codeline" id="line-11816"><code>**   The conflicting row in this case is the database row with the matching</code></span>
<span class="codeline" id="line-11817"><code>**   primary key.</code></span>
<span class="codeline" id="line-11818"><code>**</code></span>
<span class="codeline" id="line-11819"><code>** &lt;dt&gt;SQLITE_CHANGESET_FOREIGN_KEY&lt;dd&gt;</code></span>
<span class="codeline" id="line-11820"><code>**   If foreign key handling is enabled, and applying a changeset leaves the</code></span>
<span class="codeline" id="line-11821"><code>**   database in a state containing foreign key violations, the conflict</code></span>
<span class="codeline" id="line-11822"><code>**   handler is invoked with CHANGESET_FOREIGN_KEY as the second argument</code></span>
<span class="codeline" id="line-11823"><code>**   exactly once before the changeset is committed. If the conflict handler</code></span>
<span class="codeline" id="line-11824"><code>**   returns CHANGESET_OMIT, the changes, including those that caused the</code></span>
<span class="codeline" id="line-11825"><code>**   foreign key constraint violation, are committed. Or, if it returns</code></span>
<span class="codeline" id="line-11826"><code>**   CHANGESET_ABORT, the changeset is rolled back.</code></span>
<span class="codeline" id="line-11827"><code>**</code></span>
<span class="codeline" id="line-11828"><code>**   No current or conflicting row information is provided. The only function</code></span>
<span class="codeline" id="line-11829"><code>**   it is possible to call on the supplied sqlite3_changeset_iter handle</code></span>
<span class="codeline" id="line-11830"><code>**   is sqlite3changeset_fk_conflicts().</code></span>
<span class="codeline" id="line-11831"><code>**</code></span>
<span class="codeline" id="line-11832"><code>** &lt;dt&gt;SQLITE_CHANGESET_CONSTRAINT&lt;dd&gt;</code></span>
<span class="codeline" id="line-11833"><code>**   If any other constraint violation occurs while applying a change (i.e.</code></span>
<span class="codeline" id="line-11834"><code>**   a UNIQUE, CHECK or NOT NULL constraint), the conflict handler is</code></span>
<span class="codeline" id="line-11835"><code>**   invoked with CHANGESET_CONSTRAINT as the second argument.</code></span>
<span class="codeline" id="line-11836"><code>**</code></span>
<span class="codeline" id="line-11837"><code>**   There is no conflicting row in this case. The results of invoking the</code></span>
<span class="codeline" id="line-11838"><code>**   sqlite3changeset_conflict() API are undefined.</code></span>
<span class="codeline" id="line-11839"><code>**</code></span>
<span class="codeline" id="line-11840"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-11841"><code>*/</code></span>
<span class="codeline" id="line-11842"><code>#define SQLITE_CHANGESET_DATA        1</code></span>
<span class="codeline" id="line-11843"><code>#define SQLITE_CHANGESET_NOTFOUND    2</code></span>
<span class="codeline" id="line-11844"><code>#define SQLITE_CHANGESET_CONFLICT    3</code></span>
<span class="codeline" id="line-11845"><code>#define SQLITE_CHANGESET_CONSTRAINT  4</code></span>
<span class="codeline" id="line-11846"><code>#define SQLITE_CHANGESET_FOREIGN_KEY 5</code></span>
<span class="codeline" id="line-11847"><code></code></span>
<span class="codeline" id="line-11848"><code>/*</code></span>
<span class="codeline" id="line-11849"><code>** CAPI3REF: Constants Returned By The Conflict Handler</code></span>
<span class="codeline" id="line-11850"><code>**</code></span>
<span class="codeline" id="line-11851"><code>** A conflict handler callback must return one of the following three values.</code></span>
<span class="codeline" id="line-11852"><code>**</code></span>
<span class="codeline" id="line-11853"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-11854"><code>** &lt;dt&gt;SQLITE_CHANGESET_OMIT&lt;dd&gt;</code></span>
<span class="codeline" id="line-11855"><code>**   If a conflict handler returns this value no special action is taken. The</code></span>
<span class="codeline" id="line-11856"><code>**   change that caused the conflict is not applied. The session module</code></span>
<span class="codeline" id="line-11857"><code>**   continues to the next change in the changeset.</code></span>
<span class="codeline" id="line-11858"><code>**</code></span>
<span class="codeline" id="line-11859"><code>** &lt;dt&gt;SQLITE_CHANGESET_REPLACE&lt;dd&gt;</code></span>
<span class="codeline" id="line-11860"><code>**   This value may only be returned if the second argument to the conflict</code></span>
<span class="codeline" id="line-11861"><code>**   handler was SQLITE_CHANGESET_DATA or SQLITE_CHANGESET_CONFLICT. If this</code></span>
<span class="codeline" id="line-11862"><code>**   is not the case, any changes applied so far are rolled back and the</code></span>
<span class="codeline" id="line-11863"><code>**   call to sqlite3changeset_apply() returns SQLITE_MISUSE.</code></span>
<span class="codeline" id="line-11864"><code>**</code></span>
<span class="codeline" id="line-11865"><code>**   If CHANGESET_REPLACE is returned by an SQLITE_CHANGESET_DATA conflict</code></span>
<span class="codeline" id="line-11866"><code>**   handler, then the conflicting row is either updated or deleted, depending</code></span>
<span class="codeline" id="line-11867"><code>**   on the type of change.</code></span>
<span class="codeline" id="line-11868"><code>**</code></span>
<span class="codeline" id="line-11869"><code>**   If CHANGESET_REPLACE is returned by an SQLITE_CHANGESET_CONFLICT conflict</code></span>
<span class="codeline" id="line-11870"><code>**   handler, then the conflicting row is removed from the database and a</code></span>
<span class="codeline" id="line-11871"><code>**   second attempt to apply the change is made. If this second attempt fails,</code></span>
<span class="codeline" id="line-11872"><code>**   the original row is restored to the database before continuing.</code></span>
<span class="codeline" id="line-11873"><code>**</code></span>
<span class="codeline" id="line-11874"><code>** &lt;dt&gt;SQLITE_CHANGESET_ABORT&lt;dd&gt;</code></span>
<span class="codeline" id="line-11875"><code>**   If this value is returned, any changes applied so far are rolled back</code></span>
<span class="codeline" id="line-11876"><code>**   and the call to sqlite3changeset_apply() returns SQLITE_ABORT.</code></span>
<span class="codeline" id="line-11877"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-11878"><code>*/</code></span>
<span class="codeline" id="line-11879"><code>#define SQLITE_CHANGESET_OMIT       0</code></span>
<span class="codeline" id="line-11880"><code>#define SQLITE_CHANGESET_REPLACE    1</code></span>
<span class="codeline" id="line-11881"><code>#define SQLITE_CHANGESET_ABORT      2</code></span>
<span class="codeline" id="line-11882"><code></code></span>
<span class="codeline" id="line-11883"><code>/*</code></span>
<span class="codeline" id="line-11884"><code>** CAPI3REF: Rebasing changesets</code></span>
<span class="codeline" id="line-11885"><code>** EXPERIMENTAL</code></span>
<span class="codeline" id="line-11886"><code>**</code></span>
<span class="codeline" id="line-11887"><code>** Suppose there is a site hosting a database in state S0. And that</code></span>
<span class="codeline" id="line-11888"><code>** modifications are made that move that database to state S1 and a</code></span>
<span class="codeline" id="line-11889"><code>** changeset recorded (the "local" changeset). Then, a changeset based</code></span>
<span class="codeline" id="line-11890"><code>** on S0 is received from another site (the "remote" changeset) and</code></span>
<span class="codeline" id="line-11891"><code>** applied to the database. The database is then in state</code></span>
<span class="codeline" id="line-11892"><code>** (S1+"remote"), where the exact state depends on any conflict</code></span>
<span class="codeline" id="line-11893"><code>** resolution decisions (OMIT or REPLACE) made while applying "remote".</code></span>
<span class="codeline" id="line-11894"><code>** Rebasing a changeset is to update it to take those conflict</code></span>
<span class="codeline" id="line-11895"><code>** resolution decisions into account, so that the same conflicts</code></span>
<span class="codeline" id="line-11896"><code>** do not have to be resolved elsewhere in the network.</code></span>
<span class="codeline" id="line-11897"><code>**</code></span>
<span class="codeline" id="line-11898"><code>** For example, if both the local and remote changesets contain an</code></span>
<span class="codeline" id="line-11899"><code>** INSERT of the same key on "CREATE TABLE t1(a PRIMARY KEY, b)":</code></span>
<span class="codeline" id="line-11900"><code>**</code></span>
<span class="codeline" id="line-11901"><code>**   local:  INSERT INTO t1 VALUES(1, 'v1');</code></span>
<span class="codeline" id="line-11902"><code>**   remote: INSERT INTO t1 VALUES(1, 'v2');</code></span>
<span class="codeline" id="line-11903"><code>**</code></span>
<span class="codeline" id="line-11904"><code>** and the conflict resolution is REPLACE, then the INSERT change is</code></span>
<span class="codeline" id="line-11905"><code>** removed from the local changeset (it was overridden). Or, if the</code></span>
<span class="codeline" id="line-11906"><code>** conflict resolution was "OMIT", then the local changeset is modified</code></span>
<span class="codeline" id="line-11907"><code>** to instead contain:</code></span>
<span class="codeline" id="line-11908"><code>**</code></span>
<span class="codeline" id="line-11909"><code>**           UPDATE t1 SET b = 'v2' WHERE a=1;</code></span>
<span class="codeline" id="line-11910"><code>**</code></span>
<span class="codeline" id="line-11911"><code>** Changes within the local changeset are rebased as follows:</code></span>
<span class="codeline" id="line-11912"><code>**</code></span>
<span class="codeline" id="line-11913"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-11914"><code>** &lt;dt&gt;Local INSERT&lt;dd&gt;</code></span>
<span class="codeline" id="line-11915"><code>**   This may only conflict with a remote INSERT. If the conflict</code></span>
<span class="codeline" id="line-11916"><code>**   resolution was OMIT, then add an UPDATE change to the rebased</code></span>
<span class="codeline" id="line-11917"><code>**   changeset. Or, if the conflict resolution was REPLACE, add</code></span>
<span class="codeline" id="line-11918"><code>**   nothing to the rebased changeset.</code></span>
<span class="codeline" id="line-11919"><code>**</code></span>
<span class="codeline" id="line-11920"><code>** &lt;dt&gt;Local DELETE&lt;dd&gt;</code></span>
<span class="codeline" id="line-11921"><code>**   This may conflict with a remote UPDATE or DELETE. In both cases the</code></span>
<span class="codeline" id="line-11922"><code>**   only possible resolution is OMIT. If the remote operation was a</code></span>
<span class="codeline" id="line-11923"><code>**   DELETE, then add no change to the rebased changeset. If the remote</code></span>
<span class="codeline" id="line-11924"><code>**   operation was an UPDATE, then the old.* fields of change are updated</code></span>
<span class="codeline" id="line-11925"><code>**   to reflect the new.* values in the UPDATE.</code></span>
<span class="codeline" id="line-11926"><code>**</code></span>
<span class="codeline" id="line-11927"><code>** &lt;dt&gt;Local UPDATE&lt;dd&gt;</code></span>
<span class="codeline" id="line-11928"><code>**   This may conflict with a remote UPDATE or DELETE. If it conflicts</code></span>
<span class="codeline" id="line-11929"><code>**   with a DELETE, and the conflict resolution was OMIT, then the update</code></span>
<span class="codeline" id="line-11930"><code>**   is changed into an INSERT. Any undefined values in the new.* record</code></span>
<span class="codeline" id="line-11931"><code>**   from the update change are filled in using the old.* values from</code></span>
<span class="codeline" id="line-11932"><code>**   the conflicting DELETE. Or, if the conflict resolution was REPLACE,</code></span>
<span class="codeline" id="line-11933"><code>**   the UPDATE change is simply omitted from the rebased changeset.</code></span>
<span class="codeline" id="line-11934"><code>**</code></span>
<span class="codeline" id="line-11935"><code>**   If conflict is with a remote UPDATE and the resolution is OMIT, then</code></span>
<span class="codeline" id="line-11936"><code>**   the old.* values are rebased using the new.* values in the remote</code></span>
<span class="codeline" id="line-11937"><code>**   change. Or, if the resolution is REPLACE, then the change is copied</code></span>
<span class="codeline" id="line-11938"><code>**   into the rebased changeset with updates to columns also updated by</code></span>
<span class="codeline" id="line-11939"><code>**   the conflicting remote UPDATE removed. If this means no columns would</code></span>
<span class="codeline" id="line-11940"><code>**   be updated, the change is omitted.</code></span>
<span class="codeline" id="line-11941"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-11942"><code>**</code></span>
<span class="codeline" id="line-11943"><code>** A local change may be rebased against multiple remote changes</code></span>
<span class="codeline" id="line-11944"><code>** simultaneously. If a single key is modified by multiple remote</code></span>
<span class="codeline" id="line-11945"><code>** changesets, they are combined as follows before the local changeset</code></span>
<span class="codeline" id="line-11946"><code>** is rebased:</code></span>
<span class="codeline" id="line-11947"><code>**</code></span>
<span class="codeline" id="line-11948"><code>** &lt;ul&gt;</code></span>
<span class="codeline" id="line-11949"><code>**    &lt;li&gt; If there has been one or more REPLACE resolutions on a</code></span>
<span class="codeline" id="line-11950"><code>**         key, it is rebased according to a REPLACE.</code></span>
<span class="codeline" id="line-11951"><code>**</code></span>
<span class="codeline" id="line-11952"><code>**    &lt;li&gt; If there have been no REPLACE resolutions on a key, then</code></span>
<span class="codeline" id="line-11953"><code>**         the local changeset is rebased according to the most recent</code></span>
<span class="codeline" id="line-11954"><code>**         of the OMIT resolutions.</code></span>
<span class="codeline" id="line-11955"><code>** &lt;/ul&gt;</code></span>
<span class="codeline" id="line-11956"><code>**</code></span>
<span class="codeline" id="line-11957"><code>** Note that conflict resolutions from multiple remote changesets are</code></span>
<span class="codeline" id="line-11958"><code>** combined on a per-field basis, not per-row. This means that in the</code></span>
<span class="codeline" id="line-11959"><code>** case of multiple remote UPDATE operations, some fields of a single</code></span>
<span class="codeline" id="line-11960"><code>** local change may be rebased for REPLACE while others are rebased for</code></span>
<span class="codeline" id="line-11961"><code>** OMIT.</code></span>
<span class="codeline" id="line-11962"><code>**</code></span>
<span class="codeline" id="line-11963"><code>** In order to rebase a local changeset, the remote changeset must first</code></span>
<span class="codeline" id="line-11964"><code>** be applied to the local database using sqlite3changeset_apply_v2() and</code></span>
<span class="codeline" id="line-11965"><code>** the buffer of rebase information captured. Then:</code></span>
<span class="codeline" id="line-11966"><code>**</code></span>
<span class="codeline" id="line-11967"><code>** &lt;ol&gt;</code></span>
<span class="codeline" id="line-11968"><code>**   &lt;li&gt; An sqlite3_rebaser object is created by calling</code></span>
<span class="codeline" id="line-11969"><code>**        sqlite3rebaser_create().</code></span>
<span class="codeline" id="line-11970"><code>**   &lt;li&gt; The new object is configured with the rebase buffer obtained from</code></span>
<span class="codeline" id="line-11971"><code>**        sqlite3changeset_apply_v2() by calling sqlite3rebaser_configure().</code></span>
<span class="codeline" id="line-11972"><code>**        If the local changeset is to be rebased against multiple remote</code></span>
<span class="codeline" id="line-11973"><code>**        changesets, then sqlite3rebaser_configure() should be called</code></span>
<span class="codeline" id="line-11974"><code>**        multiple times, in the same order that the multiple</code></span>
<span class="codeline" id="line-11975"><code>**        sqlite3changeset_apply_v2() calls were made.</code></span>
<span class="codeline" id="line-11976"><code>**   &lt;li&gt; Each local changeset is rebased by calling sqlite3rebaser_rebase().</code></span>
<span class="codeline" id="line-11977"><code>**   &lt;li&gt; The sqlite3_rebaser object is deleted by calling</code></span>
<span class="codeline" id="line-11978"><code>**        sqlite3rebaser_delete().</code></span>
<span class="codeline" id="line-11979"><code>** &lt;/ol&gt;</code></span>
<span class="codeline" id="line-11980"><code>*/</code></span>
<span class="codeline" id="line-11981"><code>typedef struct sqlite3_rebaser sqlite3_rebaser;</code></span>
<span class="codeline" id="line-11982"><code></code></span>
<span class="codeline" id="line-11983"><code>/*</code></span>
<span class="codeline" id="line-11984"><code>** CAPI3REF: Create a changeset rebaser object.</code></span>
<span class="codeline" id="line-11985"><code>** EXPERIMENTAL</code></span>
<span class="codeline" id="line-11986"><code>**</code></span>
<span class="codeline" id="line-11987"><code>** Allocate a new changeset rebaser object. If successful, set (*ppNew) to</code></span>
<span class="codeline" id="line-11988"><code>** point to the new object and return SQLITE_OK. Otherwise, if an error</code></span>
<span class="codeline" id="line-11989"><code>** occurs, return an SQLite error code (e.g. SQLITE_NOMEM) and set (*ppNew)</code></span>
<span class="codeline" id="line-11990"><code>** to NULL.</code></span>
<span class="codeline" id="line-11991"><code>*/</code></span>
<span class="codeline" id="line-11992"><code>SQLITE_API int sqlite3rebaser_create(sqlite3_rebaser **ppNew);</code></span>
<span class="codeline" id="line-11993"><code></code></span>
<span class="codeline" id="line-11994"><code>/*</code></span>
<span class="codeline" id="line-11995"><code>** CAPI3REF: Configure a changeset rebaser object.</code></span>
<span class="codeline" id="line-11996"><code>** EXPERIMENTAL</code></span>
<span class="codeline" id="line-11997"><code>**</code></span>
<span class="codeline" id="line-11998"><code>** Configure the changeset rebaser object to rebase changesets according</code></span>
<span class="codeline" id="line-11999"><code>** to the conflict resolutions described by buffer pRebase (size nRebase</code></span>
<span class="codeline" id="line-12000"><code>** bytes), which must have been obtained from a previous call to</code></span>
<span class="codeline" id="line-12001"><code>** sqlite3changeset_apply_v2().</code></span>
<span class="codeline" id="line-12002"><code>*/</code></span>
<span class="codeline" id="line-12003"><code>SQLITE_API int sqlite3rebaser_configure(</code></span>
<span class="codeline" id="line-12004"><code>  sqlite3_rebaser*,</code></span>
<span class="codeline" id="line-12005"><code>  int nRebase, const void *pRebase</code></span>
<span class="codeline" id="line-12006"><code>);</code></span>
<span class="codeline" id="line-12007"><code></code></span>
<span class="codeline" id="line-12008"><code>/*</code></span>
<span class="codeline" id="line-12009"><code>** CAPI3REF: Rebase a changeset</code></span>
<span class="codeline" id="line-12010"><code>** EXPERIMENTAL</code></span>
<span class="codeline" id="line-12011"><code>**</code></span>
<span class="codeline" id="line-12012"><code>** Argument pIn must point to a buffer containing a changeset nIn bytes</code></span>
<span class="codeline" id="line-12013"><code>** in size. This function allocates and populates a buffer with a copy</code></span>
<span class="codeline" id="line-12014"><code>** of the changeset rebased according to the configuration of the</code></span>
<span class="codeline" id="line-12015"><code>** rebaser object passed as the first argument. If successful, (*ppOut)</code></span>
<span class="codeline" id="line-12016"><code>** is set to point to the new buffer containing the rebased changeset and</code></span>
<span class="codeline" id="line-12017"><code>** (*pnOut) to its size in bytes and SQLITE_OK returned. It is the</code></span>
<span class="codeline" id="line-12018"><code>** responsibility of the caller to eventually free the new buffer using</code></span>
<span class="codeline" id="line-12019"><code>** sqlite3_free(). Otherwise, if an error occurs, (*ppOut) and (*pnOut)</code></span>
<span class="codeline" id="line-12020"><code>** are set to zero and an SQLite error code returned.</code></span>
<span class="codeline" id="line-12021"><code>*/</code></span>
<span class="codeline" id="line-12022"><code>SQLITE_API int sqlite3rebaser_rebase(</code></span>
<span class="codeline" id="line-12023"><code>  sqlite3_rebaser*,</code></span>
<span class="codeline" id="line-12024"><code>  int nIn, const void *pIn,</code></span>
<span class="codeline" id="line-12025"><code>  int *pnOut, void **ppOut</code></span>
<span class="codeline" id="line-12026"><code>);</code></span>
<span class="codeline" id="line-12027"><code></code></span>
<span class="codeline" id="line-12028"><code>/*</code></span>
<span class="codeline" id="line-12029"><code>** CAPI3REF: Delete a changeset rebaser object.</code></span>
<span class="codeline" id="line-12030"><code>** EXPERIMENTAL</code></span>
<span class="codeline" id="line-12031"><code>**</code></span>
<span class="codeline" id="line-12032"><code>** Delete the changeset rebaser object and all associated resources. There</code></span>
<span class="codeline" id="line-12033"><code>** should be one call to this function for each successful invocation</code></span>
<span class="codeline" id="line-12034"><code>** of sqlite3rebaser_create().</code></span>
<span class="codeline" id="line-12035"><code>*/</code></span>
<span class="codeline" id="line-12036"><code>SQLITE_API void sqlite3rebaser_delete(sqlite3_rebaser *p);</code></span>
<span class="codeline" id="line-12037"><code></code></span>
<span class="codeline" id="line-12038"><code>/*</code></span>
<span class="codeline" id="line-12039"><code>** CAPI3REF: Streaming Versions of API functions.</code></span>
<span class="codeline" id="line-12040"><code>**</code></span>
<span class="codeline" id="line-12041"><code>** The six streaming API xxx_strm() functions serve similar purposes to the</code></span>
<span class="codeline" id="line-12042"><code>** corresponding non-streaming API functions:</code></span>
<span class="codeline" id="line-12043"><code>**</code></span>
<span class="codeline" id="line-12044"><code>** &lt;table border=1 style="margin-left:8ex;margin-right:8ex"&gt;</code></span>
<span class="codeline" id="line-12045"><code>**   &lt;tr&gt;&lt;th&gt;Streaming function&lt;th&gt;Non-streaming equivalent&lt;/th&gt;</code></span>
<span class="codeline" id="line-12046"><code>**   &lt;tr&gt;&lt;td&gt;sqlite3changeset_apply_strm&lt;td&gt;[sqlite3changeset_apply]</code></span>
<span class="codeline" id="line-12047"><code>**   &lt;tr&gt;&lt;td&gt;sqlite3changeset_apply_strm_v2&lt;td&gt;[sqlite3changeset_apply_v2]</code></span>
<span class="codeline" id="line-12048"><code>**   &lt;tr&gt;&lt;td&gt;sqlite3changeset_concat_strm&lt;td&gt;[sqlite3changeset_concat]</code></span>
<span class="codeline" id="line-12049"><code>**   &lt;tr&gt;&lt;td&gt;sqlite3changeset_invert_strm&lt;td&gt;[sqlite3changeset_invert]</code></span>
<span class="codeline" id="line-12050"><code>**   &lt;tr&gt;&lt;td&gt;sqlite3changeset_start_strm&lt;td&gt;[sqlite3changeset_start]</code></span>
<span class="codeline" id="line-12051"><code>**   &lt;tr&gt;&lt;td&gt;sqlite3session_changeset_strm&lt;td&gt;[sqlite3session_changeset]</code></span>
<span class="codeline" id="line-12052"><code>**   &lt;tr&gt;&lt;td&gt;sqlite3session_patchset_strm&lt;td&gt;[sqlite3session_patchset]</code></span>
<span class="codeline" id="line-12053"><code>** &lt;/table&gt;</code></span>
<span class="codeline" id="line-12054"><code>**</code></span>
<span class="codeline" id="line-12055"><code>** Non-streaming functions that accept changesets (or patchsets) as input</code></span>
<span class="codeline" id="line-12056"><code>** require that the entire changeset be stored in a single buffer in memory.</code></span>
<span class="codeline" id="line-12057"><code>** Similarly, those that return a changeset or patchset do so by returning</code></span>
<span class="codeline" id="line-12058"><code>** a pointer to a single large buffer allocated using sqlite3_malloc().</code></span>
<span class="codeline" id="line-12059"><code>** Normally this is convenient. However, if an application running in a</code></span>
<span class="codeline" id="line-12060"><code>** low-memory environment is required to handle very large changesets, the</code></span>
<span class="codeline" id="line-12061"><code>** large contiguous memory allocations required can become onerous.</code></span>
<span class="codeline" id="line-12062"><code>**</code></span>
<span class="codeline" id="line-12063"><code>** In order to avoid this problem, instead of a single large buffer, input</code></span>
<span class="codeline" id="line-12064"><code>** is passed to a streaming API functions by way of a callback function that</code></span>
<span class="codeline" id="line-12065"><code>** the sessions module invokes to incrementally request input data as it is</code></span>
<span class="codeline" id="line-12066"><code>** required. In all cases, a pair of API function parameters such as</code></span>
<span class="codeline" id="line-12067"><code>**</code></span>
<span class="codeline" id="line-12068"><code>**  &lt;pre&gt;</code></span>
<span class="codeline" id="line-12069"><code>**  &amp;nbsp;     int nChangeset,</code></span>
<span class="codeline" id="line-12070"><code>**  &amp;nbsp;     void *pChangeset,</code></span>
<span class="codeline" id="line-12071"><code>**  &lt;/pre&gt;</code></span>
<span class="codeline" id="line-12072"><code>**</code></span>
<span class="codeline" id="line-12073"><code>** Is replaced by:</code></span>
<span class="codeline" id="line-12074"><code>**</code></span>
<span class="codeline" id="line-12075"><code>**  &lt;pre&gt;</code></span>
<span class="codeline" id="line-12076"><code>**  &amp;nbsp;     int (*xInput)(void *pIn, void *pData, int *pnData),</code></span>
<span class="codeline" id="line-12077"><code>**  &amp;nbsp;     void *pIn,</code></span>
<span class="codeline" id="line-12078"><code>**  &lt;/pre&gt;</code></span>
<span class="codeline" id="line-12079"><code>**</code></span>
<span class="codeline" id="line-12080"><code>** Each time the xInput callback is invoked by the sessions module, the first</code></span>
<span class="codeline" id="line-12081"><code>** argument passed is a copy of the supplied pIn context pointer. The second</code></span>
<span class="codeline" id="line-12082"><code>** argument, pData, points to a buffer (*pnData) bytes in size. Assuming no</code></span>
<span class="codeline" id="line-12083"><code>** error occurs the xInput method should copy up to (*pnData) bytes of data</code></span>
<span class="codeline" id="line-12084"><code>** into the buffer and set (*pnData) to the actual number of bytes copied</code></span>
<span class="codeline" id="line-12085"><code>** before returning SQLITE_OK. If the input is completely exhausted, (*pnData)</code></span>
<span class="codeline" id="line-12086"><code>** should be set to zero to indicate this. Or, if an error occurs, an SQLite</code></span>
<span class="codeline" id="line-12087"><code>** error code should be returned. In all cases, if an xInput callback returns</code></span>
<span class="codeline" id="line-12088"><code>** an error, all processing is abandoned and the streaming API function</code></span>
<span class="codeline" id="line-12089"><code>** returns a copy of the error code to the caller.</code></span>
<span class="codeline" id="line-12090"><code>**</code></span>
<span class="codeline" id="line-12091"><code>** In the case of sqlite3changeset_start_strm(), the xInput callback may be</code></span>
<span class="codeline" id="line-12092"><code>** invoked by the sessions module at any point during the lifetime of the</code></span>
<span class="codeline" id="line-12093"><code>** iterator. If such an xInput callback returns an error, the iterator enters</code></span>
<span class="codeline" id="line-12094"><code>** an error state, whereby all subsequent calls to iterator functions</code></span>
<span class="codeline" id="line-12095"><code>** immediately fail with the same error code as returned by xInput.</code></span>
<span class="codeline" id="line-12096"><code>**</code></span>
<span class="codeline" id="line-12097"><code>** Similarly, streaming API functions that return changesets (or patchsets)</code></span>
<span class="codeline" id="line-12098"><code>** return them in chunks by way of a callback function instead of via a</code></span>
<span class="codeline" id="line-12099"><code>** pointer to a single large buffer. In this case, a pair of parameters such</code></span>
<span class="codeline" id="line-12100"><code>** as:</code></span>
<span class="codeline" id="line-12101"><code>**</code></span>
<span class="codeline" id="line-12102"><code>**  &lt;pre&gt;</code></span>
<span class="codeline" id="line-12103"><code>**  &amp;nbsp;     int *pnChangeset,</code></span>
<span class="codeline" id="line-12104"><code>**  &amp;nbsp;     void **ppChangeset,</code></span>
<span class="codeline" id="line-12105"><code>**  &lt;/pre&gt;</code></span>
<span class="codeline" id="line-12106"><code>**</code></span>
<span class="codeline" id="line-12107"><code>** Is replaced by:</code></span>
<span class="codeline" id="line-12108"><code>**</code></span>
<span class="codeline" id="line-12109"><code>**  &lt;pre&gt;</code></span>
<span class="codeline" id="line-12110"><code>**  &amp;nbsp;     int (*xOutput)(void *pOut, const void *pData, int nData),</code></span>
<span class="codeline" id="line-12111"><code>**  &amp;nbsp;     void *pOut</code></span>
<span class="codeline" id="line-12112"><code>**  &lt;/pre&gt;</code></span>
<span class="codeline" id="line-12113"><code>**</code></span>
<span class="codeline" id="line-12114"><code>** The xOutput callback is invoked zero or more times to return data to</code></span>
<span class="codeline" id="line-12115"><code>** the application. The first parameter passed to each call is a copy of the</code></span>
<span class="codeline" id="line-12116"><code>** pOut pointer supplied by the application. The second parameter, pData,</code></span>
<span class="codeline" id="line-12117"><code>** points to a buffer nData bytes in size containing the chunk of output</code></span>
<span class="codeline" id="line-12118"><code>** data being returned. If the xOutput callback successfully processes the</code></span>
<span class="codeline" id="line-12119"><code>** supplied data, it should return SQLITE_OK to indicate success. Otherwise,</code></span>
<span class="codeline" id="line-12120"><code>** it should return some other SQLite error code. In this case processing</code></span>
<span class="codeline" id="line-12121"><code>** is immediately abandoned and the streaming API function returns a copy</code></span>
<span class="codeline" id="line-12122"><code>** of the xOutput error code to the application.</code></span>
<span class="codeline" id="line-12123"><code>**</code></span>
<span class="codeline" id="line-12124"><code>** The sessions module never invokes an xOutput callback with the third</code></span>
<span class="codeline" id="line-12125"><code>** parameter set to a value less than or equal to zero. Other than this,</code></span>
<span class="codeline" id="line-12126"><code>** no guarantees are made as to the size of the chunks of data returned.</code></span>
<span class="codeline" id="line-12127"><code>*/</code></span>
<span class="codeline" id="line-12128"><code>SQLITE_API int sqlite3changeset_apply_strm(</code></span>
<span class="codeline" id="line-12129"><code>  sqlite3 *db,                    /* Apply change to "main" db of this handle */</code></span>
<span class="codeline" id="line-12130"><code>  int (*xInput)(void *pIn, void *pData, int *pnData), /* Input function */</code></span>
<span class="codeline" id="line-12131"><code>  void *pIn,                                          /* First arg for xInput */</code></span>
<span class="codeline" id="line-12132"><code>  int(*xFilter)(</code></span>
<span class="codeline" id="line-12133"><code>    void *pCtx,                   /* Copy of sixth arg to _apply() */</code></span>
<span class="codeline" id="line-12134"><code>    const char *zTab              /* Table name */</code></span>
<span class="codeline" id="line-12135"><code>  ),</code></span>
<span class="codeline" id="line-12136"><code>  int(*xConflict)(</code></span>
<span class="codeline" id="line-12137"><code>    void *pCtx,                   /* Copy of sixth arg to _apply() */</code></span>
<span class="codeline" id="line-12138"><code>    int eConflict,                /* DATA, MISSING, CONFLICT, CONSTRAINT */</code></span>
<span class="codeline" id="line-12139"><code>    sqlite3_changeset_iter *p     /* Handle describing change and conflict */</code></span>
<span class="codeline" id="line-12140"><code>  ),</code></span>
<span class="codeline" id="line-12141"><code>  void *pCtx                      /* First argument passed to xConflict */</code></span>
<span class="codeline" id="line-12142"><code>);</code></span>
<span class="codeline" id="line-12143"><code>SQLITE_API int sqlite3changeset_apply_v2_strm(</code></span>
<span class="codeline" id="line-12144"><code>  sqlite3 *db,                    /* Apply change to "main" db of this handle */</code></span>
<span class="codeline" id="line-12145"><code>  int (*xInput)(void *pIn, void *pData, int *pnData), /* Input function */</code></span>
<span class="codeline" id="line-12146"><code>  void *pIn,                                          /* First arg for xInput */</code></span>
<span class="codeline" id="line-12147"><code>  int(*xFilter)(</code></span>
<span class="codeline" id="line-12148"><code>    void *pCtx,                   /* Copy of sixth arg to _apply() */</code></span>
<span class="codeline" id="line-12149"><code>    const char *zTab              /* Table name */</code></span>
<span class="codeline" id="line-12150"><code>  ),</code></span>
<span class="codeline" id="line-12151"><code>  int(*xConflict)(</code></span>
<span class="codeline" id="line-12152"><code>    void *pCtx,                   /* Copy of sixth arg to _apply() */</code></span>
<span class="codeline" id="line-12153"><code>    int eConflict,                /* DATA, MISSING, CONFLICT, CONSTRAINT */</code></span>
<span class="codeline" id="line-12154"><code>    sqlite3_changeset_iter *p     /* Handle describing change and conflict */</code></span>
<span class="codeline" id="line-12155"><code>  ),</code></span>
<span class="codeline" id="line-12156"><code>  void *pCtx,                     /* First argument passed to xConflict */</code></span>
<span class="codeline" id="line-12157"><code>  void **ppRebase, int *pnRebase,</code></span>
<span class="codeline" id="line-12158"><code>  int flags</code></span>
<span class="codeline" id="line-12159"><code>);</code></span>
<span class="codeline" id="line-12160"><code>SQLITE_API int sqlite3changeset_concat_strm(</code></span>
<span class="codeline" id="line-12161"><code>  int (*xInputA)(void *pIn, void *pData, int *pnData),</code></span>
<span class="codeline" id="line-12162"><code>  void *pInA,</code></span>
<span class="codeline" id="line-12163"><code>  int (*xInputB)(void *pIn, void *pData, int *pnData),</code></span>
<span class="codeline" id="line-12164"><code>  void *pInB,</code></span>
<span class="codeline" id="line-12165"><code>  int (*xOutput)(void *pOut, const void *pData, int nData),</code></span>
<span class="codeline" id="line-12166"><code>  void *pOut</code></span>
<span class="codeline" id="line-12167"><code>);</code></span>
<span class="codeline" id="line-12168"><code>SQLITE_API int sqlite3changeset_invert_strm(</code></span>
<span class="codeline" id="line-12169"><code>  int (*xInput)(void *pIn, void *pData, int *pnData),</code></span>
<span class="codeline" id="line-12170"><code>  void *pIn,</code></span>
<span class="codeline" id="line-12171"><code>  int (*xOutput)(void *pOut, const void *pData, int nData),</code></span>
<span class="codeline" id="line-12172"><code>  void *pOut</code></span>
<span class="codeline" id="line-12173"><code>);</code></span>
<span class="codeline" id="line-12174"><code>SQLITE_API int sqlite3changeset_start_strm(</code></span>
<span class="codeline" id="line-12175"><code>  sqlite3_changeset_iter **pp,</code></span>
<span class="codeline" id="line-12176"><code>  int (*xInput)(void *pIn, void *pData, int *pnData),</code></span>
<span class="codeline" id="line-12177"><code>  void *pIn</code></span>
<span class="codeline" id="line-12178"><code>);</code></span>
<span class="codeline" id="line-12179"><code>SQLITE_API int sqlite3changeset_start_v2_strm(</code></span>
<span class="codeline" id="line-12180"><code>  sqlite3_changeset_iter **pp,</code></span>
<span class="codeline" id="line-12181"><code>  int (*xInput)(void *pIn, void *pData, int *pnData),</code></span>
<span class="codeline" id="line-12182"><code>  void *pIn,</code></span>
<span class="codeline" id="line-12183"><code>  int flags</code></span>
<span class="codeline" id="line-12184"><code>);</code></span>
<span class="codeline" id="line-12185"><code>SQLITE_API int sqlite3session_changeset_strm(</code></span>
<span class="codeline" id="line-12186"><code>  sqlite3_session *pSession,</code></span>
<span class="codeline" id="line-12187"><code>  int (*xOutput)(void *pOut, const void *pData, int nData),</code></span>
<span class="codeline" id="line-12188"><code>  void *pOut</code></span>
<span class="codeline" id="line-12189"><code>);</code></span>
<span class="codeline" id="line-12190"><code>SQLITE_API int sqlite3session_patchset_strm(</code></span>
<span class="codeline" id="line-12191"><code>  sqlite3_session *pSession,</code></span>
<span class="codeline" id="line-12192"><code>  int (*xOutput)(void *pOut, const void *pData, int nData),</code></span>
<span class="codeline" id="line-12193"><code>  void *pOut</code></span>
<span class="codeline" id="line-12194"><code>);</code></span>
<span class="codeline" id="line-12195"><code>SQLITE_API int sqlite3changegroup_add_strm(sqlite3_changegroup*,</code></span>
<span class="codeline" id="line-12196"><code>    int (*xInput)(void *pIn, void *pData, int *pnData),</code></span>
<span class="codeline" id="line-12197"><code>    void *pIn</code></span>
<span class="codeline" id="line-12198"><code>);</code></span>
<span class="codeline" id="line-12199"><code>SQLITE_API int sqlite3changegroup_output_strm(sqlite3_changegroup*,</code></span>
<span class="codeline" id="line-12200"><code>    int (*xOutput)(void *pOut, const void *pData, int nData),</code></span>
<span class="codeline" id="line-12201"><code>    void *pOut</code></span>
<span class="codeline" id="line-12202"><code>);</code></span>
<span class="codeline" id="line-12203"><code>SQLITE_API int sqlite3rebaser_rebase_strm(</code></span>
<span class="codeline" id="line-12204"><code>  sqlite3_rebaser *pRebaser,</code></span>
<span class="codeline" id="line-12205"><code>  int (*xInput)(void *pIn, void *pData, int *pnData),</code></span>
<span class="codeline" id="line-12206"><code>  void *pIn,</code></span>
<span class="codeline" id="line-12207"><code>  int (*xOutput)(void *pOut, const void *pData, int nData),</code></span>
<span class="codeline" id="line-12208"><code>  void *pOut</code></span>
<span class="codeline" id="line-12209"><code>);</code></span>
<span class="codeline" id="line-12210"><code></code></span>
<span class="codeline" id="line-12211"><code>/*</code></span>
<span class="codeline" id="line-12212"><code>** CAPI3REF: Configure global parameters</code></span>
<span class="codeline" id="line-12213"><code>**</code></span>
<span class="codeline" id="line-12214"><code>** The sqlite3session_config() interface is used to make global configuration</code></span>
<span class="codeline" id="line-12215"><code>** changes to the sessions module in order to tune it to the specific needs</code></span>
<span class="codeline" id="line-12216"><code>** of the application.</code></span>
<span class="codeline" id="line-12217"><code>**</code></span>
<span class="codeline" id="line-12218"><code>** The sqlite3session_config() interface is not threadsafe. If it is invoked</code></span>
<span class="codeline" id="line-12219"><code>** while any other thread is inside any other sessions method then the</code></span>
<span class="codeline" id="line-12220"><code>** results are undefined. Furthermore, if it is invoked after any sessions</code></span>
<span class="codeline" id="line-12221"><code>** related objects have been created, the results are also undefined.</code></span>
<span class="codeline" id="line-12222"><code>**</code></span>
<span class="codeline" id="line-12223"><code>** The first argument to the sqlite3session_config() function must be one</code></span>
<span class="codeline" id="line-12224"><code>** of the SQLITE_SESSION_CONFIG_XXX constants defined below. The</code></span>
<span class="codeline" id="line-12225"><code>** interpretation of the (void*) value passed as the second parameter and</code></span>
<span class="codeline" id="line-12226"><code>** the effect of calling this function depends on the value of the first</code></span>
<span class="codeline" id="line-12227"><code>** parameter.</code></span>
<span class="codeline" id="line-12228"><code>**</code></span>
<span class="codeline" id="line-12229"><code>** &lt;dl&gt;</code></span>
<span class="codeline" id="line-12230"><code>** &lt;dt&gt;SQLITE_SESSION_CONFIG_STRMSIZE&lt;dd&gt;</code></span>
<span class="codeline" id="line-12231"><code>**    By default, the sessions module streaming interfaces attempt to input</code></span>
<span class="codeline" id="line-12232"><code>**    and output data in approximately 1 KiB chunks. This operand may be used</code></span>
<span class="codeline" id="line-12233"><code>**    to set and query the value of this configuration setting. The pointer</code></span>
<span class="codeline" id="line-12234"><code>**    passed as the second argument must point to a value of type (int).</code></span>
<span class="codeline" id="line-12235"><code>**    If this value is greater than 0, it is used as the new streaming data</code></span>
<span class="codeline" id="line-12236"><code>**    chunk size for both input and output. Before returning, the (int) value</code></span>
<span class="codeline" id="line-12237"><code>**    pointed to by pArg is set to the final value of the streaming interface</code></span>
<span class="codeline" id="line-12238"><code>**    chunk size.</code></span>
<span class="codeline" id="line-12239"><code>** &lt;/dl&gt;</code></span>
<span class="codeline" id="line-12240"><code>**</code></span>
<span class="codeline" id="line-12241"><code>** This function returns SQLITE_OK if successful, or an SQLite error code</code></span>
<span class="codeline" id="line-12242"><code>** otherwise.</code></span>
<span class="codeline" id="line-12243"><code>*/</code></span>
<span class="codeline" id="line-12244"><code>SQLITE_API int sqlite3session_config(int op, void *pArg);</code></span>
<span class="codeline" id="line-12245"><code></code></span>
<span class="codeline" id="line-12246"><code>/*</code></span>
<span class="codeline" id="line-12247"><code>** CAPI3REF: Values for sqlite3session_config().</code></span>
<span class="codeline" id="line-12248"><code>*/</code></span>
<span class="codeline" id="line-12249"><code>#define SQLITE_SESSION_CONFIG_STRMSIZE 1</code></span>
<span class="codeline" id="line-12250"><code></code></span>
<span class="codeline" id="line-12251"><code>/*</code></span>
<span class="codeline" id="line-12252"><code>** Make sure we can call this stuff from C++.</code></span>
<span class="codeline" id="line-12253"><code>*/</code></span>
<span class="codeline" id="line-12254"><code>#ifdef __cplusplus</code></span>
<span class="codeline" id="line-12255"><code>}</code></span>
<span class="codeline" id="line-12256"><code>#endif</code></span>
<span class="codeline" id="line-12257"><code></code></span>
<span class="codeline" id="line-12258"><code>#endif  /* !defined(__SQLITESESSION_H_) &amp;&amp; defined(SQLITE_ENABLE_SESSION) */</code></span>
<span class="codeline" id="line-12259"><code></code></span>
<span class="codeline" id="line-12260"><code>/******** End of sqlite3session.h *********/</code></span>
<span class="codeline" id="line-12261"><code>/******** Begin file fts5.h *********/</code></span>
<span class="codeline" id="line-12262"><code>/*</code></span>
<span class="codeline" id="line-12263"><code>** 2014 May 31</code></span>
<span class="codeline" id="line-12264"><code>**</code></span>
<span class="codeline" id="line-12265"><code>** The author disclaims copyright to this source code.  In place of</code></span>
<span class="codeline" id="line-12266"><code>** a legal notice, here is a blessing:</code></span>
<span class="codeline" id="line-12267"><code>**</code></span>
<span class="codeline" id="line-12268"><code>**    May you do good and not evil.</code></span>
<span class="codeline" id="line-12269"><code>**    May you find forgiveness for yourself and forgive others.</code></span>
<span class="codeline" id="line-12270"><code>**    May you share freely, never taking more than you give.</code></span>
<span class="codeline" id="line-12271"><code>**</code></span>
<span class="codeline" id="line-12272"><code>******************************************************************************</code></span>
<span class="codeline" id="line-12273"><code>**</code></span>
<span class="codeline" id="line-12274"><code>** Interfaces to extend FTS5. Using the interfaces defined in this file,</code></span>
<span class="codeline" id="line-12275"><code>** FTS5 may be extended with:</code></span>
<span class="codeline" id="line-12276"><code>**</code></span>
<span class="codeline" id="line-12277"><code>**     * custom tokenizers, and</code></span>
<span class="codeline" id="line-12278"><code>**     * custom auxiliary functions.</code></span>
<span class="codeline" id="line-12279"><code>*/</code></span>
<span class="codeline" id="line-12280"><code></code></span>
<span class="codeline" id="line-12281"><code></code></span>
<span class="codeline" id="line-12282"><code>#ifndef _FTS5_H</code></span>
<span class="codeline" id="line-12283"><code>#define _FTS5_H</code></span>
<span class="codeline" id="line-12284"><code></code></span>
<span class="codeline" id="line-12285"><code></code></span>
<span class="codeline" id="line-12286"><code>#ifdef __cplusplus</code></span>
<span class="codeline" id="line-12287"><code>extern "C" {</code></span>
<span class="codeline" id="line-12288"><code>#endif</code></span>
<span class="codeline" id="line-12289"><code></code></span>
<span class="codeline" id="line-12290"><code>/*************************************************************************</code></span>
<span class="codeline" id="line-12291"><code>** CUSTOM AUXILIARY FUNCTIONS</code></span>
<span class="codeline" id="line-12292"><code>**</code></span>
<span class="codeline" id="line-12293"><code>** Virtual table implementations may overload SQL functions by implementing</code></span>
<span class="codeline" id="line-12294"><code>** the sqlite3_module.xFindFunction() method.</code></span>
<span class="codeline" id="line-12295"><code>*/</code></span>
<span class="codeline" id="line-12296"><code></code></span>
<span class="codeline" id="line-12297"><code>typedef struct Fts5ExtensionApi Fts5ExtensionApi;</code></span>
<span class="codeline" id="line-12298"><code>typedef struct Fts5Context Fts5Context;</code></span>
<span class="codeline" id="line-12299"><code>typedef struct Fts5PhraseIter Fts5PhraseIter;</code></span>
<span class="codeline" id="line-12300"><code></code></span>
<span class="codeline" id="line-12301"><code>typedef void (*fts5_extension_function)(</code></span>
<span class="codeline" id="line-12302"><code>  const Fts5ExtensionApi *pApi,   /* API offered by current FTS version */</code></span>
<span class="codeline" id="line-12303"><code>  Fts5Context *pFts,              /* First arg to pass to pApi functions */</code></span>
<span class="codeline" id="line-12304"><code>  sqlite3_context *pCtx,          /* Context for returning result/error */</code></span>
<span class="codeline" id="line-12305"><code>  int nVal,                       /* Number of values in apVal[] array */</code></span>
<span class="codeline" id="line-12306"><code>  sqlite3_value **apVal           /* Array of trailing arguments */</code></span>
<span class="codeline" id="line-12307"><code>);</code></span>
<span class="codeline" id="line-12308"><code></code></span>
<span class="codeline" id="line-12309"><code>struct Fts5PhraseIter {</code></span>
<span class="codeline" id="line-12310"><code>  const unsigned char *a;</code></span>
<span class="codeline" id="line-12311"><code>  const unsigned char *b;</code></span>
<span class="codeline" id="line-12312"><code>};</code></span>
<span class="codeline" id="line-12313"><code></code></span>
<span class="codeline" id="line-12314"><code>/*</code></span>
<span class="codeline" id="line-12315"><code>** EXTENSION API FUNCTIONS</code></span>
<span class="codeline" id="line-12316"><code>**</code></span>
<span class="codeline" id="line-12317"><code>** xUserData(pFts):</code></span>
<span class="codeline" id="line-12318"><code>**   Return a copy of the context pointer the extension function was</code></span>
<span class="codeline" id="line-12319"><code>**   registered with.</code></span>
<span class="codeline" id="line-12320"><code>**</code></span>
<span class="codeline" id="line-12321"><code>** xColumnTotalSize(pFts, iCol, pnToken):</code></span>
<span class="codeline" id="line-12322"><code>**   If parameter iCol is less than zero, set output variable *pnToken</code></span>
<span class="codeline" id="line-12323"><code>**   to the total number of tokens in the FTS5 table. Or, if iCol is</code></span>
<span class="codeline" id="line-12324"><code>**   non-negative but less than the number of columns in the table, return</code></span>
<span class="codeline" id="line-12325"><code>**   the total number of tokens in column iCol, considering all rows in</code></span>
<span class="codeline" id="line-12326"><code>**   the FTS5 table.</code></span>
<span class="codeline" id="line-12327"><code>**</code></span>
<span class="codeline" id="line-12328"><code>**   If parameter iCol is greater than or equal to the number of columns</code></span>
<span class="codeline" id="line-12329"><code>**   in the table, SQLITE_RANGE is returned. Or, if an error occurs (e.g.</code></span>
<span class="codeline" id="line-12330"><code>**   an OOM condition or IO error), an appropriate SQLite error code is</code></span>
<span class="codeline" id="line-12331"><code>**   returned.</code></span>
<span class="codeline" id="line-12332"><code>**</code></span>
<span class="codeline" id="line-12333"><code>** xColumnCount(pFts):</code></span>
<span class="codeline" id="line-12334"><code>**   Return the number of columns in the table.</code></span>
<span class="codeline" id="line-12335"><code>**</code></span>
<span class="codeline" id="line-12336"><code>** xColumnSize(pFts, iCol, pnToken):</code></span>
<span class="codeline" id="line-12337"><code>**   If parameter iCol is less than zero, set output variable *pnToken</code></span>
<span class="codeline" id="line-12338"><code>**   to the total number of tokens in the current row. Or, if iCol is</code></span>
<span class="codeline" id="line-12339"><code>**   non-negative but less than the number of columns in the table, set</code></span>
<span class="codeline" id="line-12340"><code>**   *pnToken to the number of tokens in column iCol of the current row.</code></span>
<span class="codeline" id="line-12341"><code>**</code></span>
<span class="codeline" id="line-12342"><code>**   If parameter iCol is greater than or equal to the number of columns</code></span>
<span class="codeline" id="line-12343"><code>**   in the table, SQLITE_RANGE is returned. Or, if an error occurs (e.g.</code></span>
<span class="codeline" id="line-12344"><code>**   an OOM condition or IO error), an appropriate SQLite error code is</code></span>
<span class="codeline" id="line-12345"><code>**   returned.</code></span>
<span class="codeline" id="line-12346"><code>**</code></span>
<span class="codeline" id="line-12347"><code>**   This function may be quite inefficient if used with an FTS5 table</code></span>
<span class="codeline" id="line-12348"><code>**   created with the "columnsize=0" option.</code></span>
<span class="codeline" id="line-12349"><code>**</code></span>
<span class="codeline" id="line-12350"><code>** xColumnText:</code></span>
<span class="codeline" id="line-12351"><code>**   This function attempts to retrieve the text of column iCol of the</code></span>
<span class="codeline" id="line-12352"><code>**   current document. If successful, (*pz) is set to point to a buffer</code></span>
<span class="codeline" id="line-12353"><code>**   containing the text in utf-8 encoding, (*pn) is set to the size in bytes</code></span>
<span class="codeline" id="line-12354"><code>**   (not characters) of the buffer and SQLITE_OK is returned. Otherwise,</code></span>
<span class="codeline" id="line-12355"><code>**   if an error occurs, an SQLite error code is returned and the final values</code></span>
<span class="codeline" id="line-12356"><code>**   of (*pz) and (*pn) are undefined.</code></span>
<span class="codeline" id="line-12357"><code>**</code></span>
<span class="codeline" id="line-12358"><code>** xPhraseCount:</code></span>
<span class="codeline" id="line-12359"><code>**   Returns the number of phrases in the current query expression.</code></span>
<span class="codeline" id="line-12360"><code>**</code></span>
<span class="codeline" id="line-12361"><code>** xPhraseSize:</code></span>
<span class="codeline" id="line-12362"><code>**   Returns the number of tokens in phrase iPhrase of the query. Phrases</code></span>
<span class="codeline" id="line-12363"><code>**   are numbered starting from zero.</code></span>
<span class="codeline" id="line-12364"><code>**</code></span>
<span class="codeline" id="line-12365"><code>** xInstCount:</code></span>
<span class="codeline" id="line-12366"><code>**   Set *pnInst to the total number of occurrences of all phrases within</code></span>
<span class="codeline" id="line-12367"><code>**   the query within the current row. Return SQLITE_OK if successful, or</code></span>
<span class="codeline" id="line-12368"><code>**   an error code (i.e. SQLITE_NOMEM) if an error occurs.</code></span>
<span class="codeline" id="line-12369"><code>**</code></span>
<span class="codeline" id="line-12370"><code>**   This API can be quite slow if used with an FTS5 table created with the</code></span>
<span class="codeline" id="line-12371"><code>**   "detail=none" or "detail=column" option. If the FTS5 table is created</code></span>
<span class="codeline" id="line-12372"><code>**   with either "detail=none" or "detail=column" and "content=" option</code></span>
<span class="codeline" id="line-12373"><code>**   (i.e. if it is a contentless table), then this API always returns 0.</code></span>
<span class="codeline" id="line-12374"><code>**</code></span>
<span class="codeline" id="line-12375"><code>** xInst:</code></span>
<span class="codeline" id="line-12376"><code>**   Query for the details of phrase match iIdx within the current row.</code></span>
<span class="codeline" id="line-12377"><code>**   Phrase matches are numbered starting from zero, so the iIdx argument</code></span>
<span class="codeline" id="line-12378"><code>**   should be greater than or equal to zero and smaller than the value</code></span>
<span class="codeline" id="line-12379"><code>**   output by xInstCount().</code></span>
<span class="codeline" id="line-12380"><code>**</code></span>
<span class="codeline" id="line-12381"><code>**   Usually, output parameter *piPhrase is set to the phrase number, *piCol</code></span>
<span class="codeline" id="line-12382"><code>**   to the column in which it occurs and *piOff the token offset of the</code></span>
<span class="codeline" id="line-12383"><code>**   first token of the phrase. Returns SQLITE_OK if successful, or an error</code></span>
<span class="codeline" id="line-12384"><code>**   code (i.e. SQLITE_NOMEM) if an error occurs.</code></span>
<span class="codeline" id="line-12385"><code>**</code></span>
<span class="codeline" id="line-12386"><code>**   This API can be quite slow if used with an FTS5 table created with the</code></span>
<span class="codeline" id="line-12387"><code>**   "detail=none" or "detail=column" option.</code></span>
<span class="codeline" id="line-12388"><code>**</code></span>
<span class="codeline" id="line-12389"><code>** xRowid:</code></span>
<span class="codeline" id="line-12390"><code>**   Returns the rowid of the current row.</code></span>
<span class="codeline" id="line-12391"><code>**</code></span>
<span class="codeline" id="line-12392"><code>** xTokenize:</code></span>
<span class="codeline" id="line-12393"><code>**   Tokenize text using the tokenizer belonging to the FTS5 table.</code></span>
<span class="codeline" id="line-12394"><code>**</code></span>
<span class="codeline" id="line-12395"><code>** xQueryPhrase(pFts5, iPhrase, pUserData, xCallback):</code></span>
<span class="codeline" id="line-12396"><code>**   This API function is used to query the FTS table for phrase iPhrase</code></span>
<span class="codeline" id="line-12397"><code>**   of the current query. Specifically, a query equivalent to:</code></span>
<span class="codeline" id="line-12398"><code>**</code></span>
<span class="codeline" id="line-12399"><code>**       ... FROM ftstable WHERE ftstable MATCH $p ORDER BY rowid</code></span>
<span class="codeline" id="line-12400"><code>**</code></span>
<span class="codeline" id="line-12401"><code>**   with $p set to a phrase equivalent to the phrase iPhrase of the</code></span>
<span class="codeline" id="line-12402"><code>**   current query is executed. Any column filter that applies to</code></span>
<span class="codeline" id="line-12403"><code>**   phrase iPhrase of the current query is included in $p. For each</code></span>
<span class="codeline" id="line-12404"><code>**   row visited, the callback function passed as the fourth argument</code></span>
<span class="codeline" id="line-12405"><code>**   is invoked. The context and API objects passed to the callback</code></span>
<span class="codeline" id="line-12406"><code>**   function may be used to access the properties of each matched row.</code></span>
<span class="codeline" id="line-12407"><code>**   Invoking Api.xUserData() returns a copy of the pointer passed as</code></span>
<span class="codeline" id="line-12408"><code>**   the third argument to pUserData.</code></span>
<span class="codeline" id="line-12409"><code>**</code></span>
<span class="codeline" id="line-12410"><code>**   If the callback function returns any value other than SQLITE_OK, the</code></span>
<span class="codeline" id="line-12411"><code>**   query is abandoned and the xQueryPhrase function returns immediately.</code></span>
<span class="codeline" id="line-12412"><code>**   If the returned value is SQLITE_DONE, xQueryPhrase returns SQLITE_OK.</code></span>
<span class="codeline" id="line-12413"><code>**   Otherwise, the error code is propagated upwards.</code></span>
<span class="codeline" id="line-12414"><code>**</code></span>
<span class="codeline" id="line-12415"><code>**   If the query runs to completion without incident, SQLITE_OK is returned.</code></span>
<span class="codeline" id="line-12416"><code>**   Or, if some error occurs before the query completes or is aborted by</code></span>
<span class="codeline" id="line-12417"><code>**   the callback, an SQLite error code is returned.</code></span>
<span class="codeline" id="line-12418"><code>**</code></span>
<span class="codeline" id="line-12419"><code>**</code></span>
<span class="codeline" id="line-12420"><code>** xSetAuxdata(pFts5, pAux, xDelete)</code></span>
<span class="codeline" id="line-12421"><code>**</code></span>
<span class="codeline" id="line-12422"><code>**   Save the pointer passed as the second argument as the extension function's</code></span>
<span class="codeline" id="line-12423"><code>**   "auxiliary data". The pointer may then be retrieved by the current or any</code></span>
<span class="codeline" id="line-12424"><code>**   future invocation of the same fts5 extension function made as part of</code></span>
<span class="codeline" id="line-12425"><code>**   the same MATCH query using the xGetAuxdata() API.</code></span>
<span class="codeline" id="line-12426"><code>**</code></span>
<span class="codeline" id="line-12427"><code>**   Each extension function is allocated a single auxiliary data slot for</code></span>
<span class="codeline" id="line-12428"><code>**   each FTS query (MATCH expression). If the extension function is invoked</code></span>
<span class="codeline" id="line-12429"><code>**   more than once for a single FTS query, then all invocations share a</code></span>
<span class="codeline" id="line-12430"><code>**   single auxiliary data context.</code></span>
<span class="codeline" id="line-12431"><code>**</code></span>
<span class="codeline" id="line-12432"><code>**   If there is already an auxiliary data pointer when this function is</code></span>
<span class="codeline" id="line-12433"><code>**   invoked, then it is replaced by the new pointer. If an xDelete callback</code></span>
<span class="codeline" id="line-12434"><code>**   was specified along with the original pointer, it is invoked at this</code></span>
<span class="codeline" id="line-12435"><code>**   point.</code></span>
<span class="codeline" id="line-12436"><code>**</code></span>
<span class="codeline" id="line-12437"><code>**   The xDelete callback, if one is specified, is also invoked on the</code></span>
<span class="codeline" id="line-12438"><code>**   auxiliary data pointer after the FTS5 query has finished.</code></span>
<span class="codeline" id="line-12439"><code>**</code></span>
<span class="codeline" id="line-12440"><code>**   If an error (e.g. an OOM condition) occurs within this function,</code></span>
<span class="codeline" id="line-12441"><code>**   the auxiliary data is set to NULL and an error code returned. If the</code></span>
<span class="codeline" id="line-12442"><code>**   xDelete parameter was not NULL, it is invoked on the auxiliary data</code></span>
<span class="codeline" id="line-12443"><code>**   pointer before returning.</code></span>
<span class="codeline" id="line-12444"><code>**</code></span>
<span class="codeline" id="line-12445"><code>**</code></span>
<span class="codeline" id="line-12446"><code>** xGetAuxdata(pFts5, bClear)</code></span>
<span class="codeline" id="line-12447"><code>**</code></span>
<span class="codeline" id="line-12448"><code>**   Returns the current auxiliary data pointer for the fts5 extension</code></span>
<span class="codeline" id="line-12449"><code>**   function. See the xSetAuxdata() method for details.</code></span>
<span class="codeline" id="line-12450"><code>**</code></span>
<span class="codeline" id="line-12451"><code>**   If the bClear argument is non-zero, then the auxiliary data is cleared</code></span>
<span class="codeline" id="line-12452"><code>**   (set to NULL) before this function returns. In this case the xDelete,</code></span>
<span class="codeline" id="line-12453"><code>**   if any, is not invoked.</code></span>
<span class="codeline" id="line-12454"><code>**</code></span>
<span class="codeline" id="line-12455"><code>**</code></span>
<span class="codeline" id="line-12456"><code>** xRowCount(pFts5, pnRow)</code></span>
<span class="codeline" id="line-12457"><code>**</code></span>
<span class="codeline" id="line-12458"><code>**   This function is used to retrieve the total number of rows in the table.</code></span>
<span class="codeline" id="line-12459"><code>**   In other words, the same value that would be returned by:</code></span>
<span class="codeline" id="line-12460"><code>**</code></span>
<span class="codeline" id="line-12461"><code>**        SELECT count(*) FROM ftstable;</code></span>
<span class="codeline" id="line-12462"><code>**</code></span>
<span class="codeline" id="line-12463"><code>** xPhraseFirst()</code></span>
<span class="codeline" id="line-12464"><code>**   This function is used, along with type Fts5PhraseIter and the xPhraseNext</code></span>
<span class="codeline" id="line-12465"><code>**   method, to iterate through all instances of a single query phrase within</code></span>
<span class="codeline" id="line-12466"><code>**   the current row. This is the same information as is accessible via the</code></span>
<span class="codeline" id="line-12467"><code>**   xInstCount/xInst APIs. While the xInstCount/xInst APIs are more convenient</code></span>
<span class="codeline" id="line-12468"><code>**   to use, this API may be faster under some circumstances. To iterate</code></span>
<span class="codeline" id="line-12469"><code>**   through instances of phrase iPhrase, use the following code:</code></span>
<span class="codeline" id="line-12470"><code>**</code></span>
<span class="codeline" id="line-12471"><code>**       Fts5PhraseIter iter;</code></span>
<span class="codeline" id="line-12472"><code>**       int iCol, iOff;</code></span>
<span class="codeline" id="line-12473"><code>**       for(pApi-&gt;xPhraseFirst(pFts, iPhrase, &amp;iter, &amp;iCol, &amp;iOff);</code></span>
<span class="codeline" id="line-12474"><code>**           iCol&gt;=0;</code></span>
<span class="codeline" id="line-12475"><code>**           pApi-&gt;xPhraseNext(pFts, &amp;iter, &amp;iCol, &amp;iOff)</code></span>
<span class="codeline" id="line-12476"><code>**       ){</code></span>
<span class="codeline" id="line-12477"><code>**         // An instance of phrase iPhrase at offset iOff of column iCol</code></span>
<span class="codeline" id="line-12478"><code>**       }</code></span>
<span class="codeline" id="line-12479"><code>**</code></span>
<span class="codeline" id="line-12480"><code>**   The Fts5PhraseIter structure is defined above. Applications should not</code></span>
<span class="codeline" id="line-12481"><code>**   modify this structure directly - it should only be used as shown above</code></span>
<span class="codeline" id="line-12482"><code>**   with the xPhraseFirst() and xPhraseNext() API methods (and by</code></span>
<span class="codeline" id="line-12483"><code>**   xPhraseFirstColumn() and xPhraseNextColumn() as illustrated below).</code></span>
<span class="codeline" id="line-12484"><code>**</code></span>
<span class="codeline" id="line-12485"><code>**   This API can be quite slow if used with an FTS5 table created with the</code></span>
<span class="codeline" id="line-12486"><code>**   "detail=none" or "detail=column" option. If the FTS5 table is created</code></span>
<span class="codeline" id="line-12487"><code>**   with either "detail=none" or "detail=column" and "content=" option</code></span>
<span class="codeline" id="line-12488"><code>**   (i.e. if it is a contentless table), then this API always iterates</code></span>
<span class="codeline" id="line-12489"><code>**   through an empty set (all calls to xPhraseFirst() set iCol to -1).</code></span>
<span class="codeline" id="line-12490"><code>**</code></span>
<span class="codeline" id="line-12491"><code>** xPhraseNext()</code></span>
<span class="codeline" id="line-12492"><code>**   See xPhraseFirst above.</code></span>
<span class="codeline" id="line-12493"><code>**</code></span>
<span class="codeline" id="line-12494"><code>** xPhraseFirstColumn()</code></span>
<span class="codeline" id="line-12495"><code>**   This function and xPhraseNextColumn() are similar to the xPhraseFirst()</code></span>
<span class="codeline" id="line-12496"><code>**   and xPhraseNext() APIs described above. The difference is that instead</code></span>
<span class="codeline" id="line-12497"><code>**   of iterating through all instances of a phrase in the current row, these</code></span>
<span class="codeline" id="line-12498"><code>**   APIs are used to iterate through the set of columns in the current row</code></span>
<span class="codeline" id="line-12499"><code>**   that contain one or more instances of a specified phrase. For example:</code></span>
<span class="codeline" id="line-12500"><code>**</code></span>
<span class="codeline" id="line-12501"><code>**       Fts5PhraseIter iter;</code></span>
<span class="codeline" id="line-12502"><code>**       int iCol;</code></span>
<span class="codeline" id="line-12503"><code>**       for(pApi-&gt;xPhraseFirstColumn(pFts, iPhrase, &amp;iter, &amp;iCol);</code></span>
<span class="codeline" id="line-12504"><code>**           iCol&gt;=0;</code></span>
<span class="codeline" id="line-12505"><code>**           pApi-&gt;xPhraseNextColumn(pFts, &amp;iter, &amp;iCol)</code></span>
<span class="codeline" id="line-12506"><code>**       ){</code></span>
<span class="codeline" id="line-12507"><code>**         // Column iCol contains at least one instance of phrase iPhrase</code></span>
<span class="codeline" id="line-12508"><code>**       }</code></span>
<span class="codeline" id="line-12509"><code>**</code></span>
<span class="codeline" id="line-12510"><code>**   This API can be quite slow if used with an FTS5 table created with the</code></span>
<span class="codeline" id="line-12511"><code>**   "detail=none" option. If the FTS5 table is created with either</code></span>
<span class="codeline" id="line-12512"><code>**   "detail=none" "content=" option (i.e. if it is a contentless table),</code></span>
<span class="codeline" id="line-12513"><code>**   then this API always iterates through an empty set (all calls to</code></span>
<span class="codeline" id="line-12514"><code>**   xPhraseFirstColumn() set iCol to -1).</code></span>
<span class="codeline" id="line-12515"><code>**</code></span>
<span class="codeline" id="line-12516"><code>**   The information accessed using this API and its companion</code></span>
<span class="codeline" id="line-12517"><code>**   xPhraseFirstColumn() may also be obtained using xPhraseFirst/xPhraseNext</code></span>
<span class="codeline" id="line-12518"><code>**   (or xInst/xInstCount). The chief advantage of this API is that it is</code></span>
<span class="codeline" id="line-12519"><code>**   significantly more efficient than those alternatives when used with</code></span>
<span class="codeline" id="line-12520"><code>**   "detail=column" tables.</code></span>
<span class="codeline" id="line-12521"><code>**</code></span>
<span class="codeline" id="line-12522"><code>** xPhraseNextColumn()</code></span>
<span class="codeline" id="line-12523"><code>**   See xPhraseFirstColumn above.</code></span>
<span class="codeline" id="line-12524"><code>*/</code></span>
<span class="codeline" id="line-12525"><code>struct Fts5ExtensionApi {</code></span>
<span class="codeline" id="line-12526"><code>  int iVersion;                   /* Currently always set to 3 */</code></span>
<span class="codeline" id="line-12527"><code></code></span>
<span class="codeline" id="line-12528"><code>  void *(*xUserData)(Fts5Context*);</code></span>
<span class="codeline" id="line-12529"><code></code></span>
<span class="codeline" id="line-12530"><code>  int (*xColumnCount)(Fts5Context*);</code></span>
<span class="codeline" id="line-12531"><code>  int (*xRowCount)(Fts5Context*, sqlite3_int64 *pnRow);</code></span>
<span class="codeline" id="line-12532"><code>  int (*xColumnTotalSize)(Fts5Context*, int iCol, sqlite3_int64 *pnToken);</code></span>
<span class="codeline" id="line-12533"><code></code></span>
<span class="codeline" id="line-12534"><code>  int (*xTokenize)(Fts5Context*,</code></span>
<span class="codeline" id="line-12535"><code>    const char *pText, int nText, /* Text to tokenize */</code></span>
<span class="codeline" id="line-12536"><code>    void *pCtx,                   /* Context passed to xToken() */</code></span>
<span class="codeline" id="line-12537"><code>    int (*xToken)(void*, int, const char*, int, int, int)       /* Callback */</code></span>
<span class="codeline" id="line-12538"><code>  );</code></span>
<span class="codeline" id="line-12539"><code></code></span>
<span class="codeline" id="line-12540"><code>  int (*xPhraseCount)(Fts5Context*);</code></span>
<span class="codeline" id="line-12541"><code>  int (*xPhraseSize)(Fts5Context*, int iPhrase);</code></span>
<span class="codeline" id="line-12542"><code></code></span>
<span class="codeline" id="line-12543"><code>  int (*xInstCount)(Fts5Context*, int *pnInst);</code></span>
<span class="codeline" id="line-12544"><code>  int (*xInst)(Fts5Context*, int iIdx, int *piPhrase, int *piCol, int *piOff);</code></span>
<span class="codeline" id="line-12545"><code></code></span>
<span class="codeline" id="line-12546"><code>  sqlite3_int64 (*xRowid)(Fts5Context*);</code></span>
<span class="codeline" id="line-12547"><code>  int (*xColumnText)(Fts5Context*, int iCol, const char **pz, int *pn);</code></span>
<span class="codeline" id="line-12548"><code>  int (*xColumnSize)(Fts5Context*, int iCol, int *pnToken);</code></span>
<span class="codeline" id="line-12549"><code></code></span>
<span class="codeline" id="line-12550"><code>  int (*xQueryPhrase)(Fts5Context*, int iPhrase, void *pUserData,</code></span>
<span class="codeline" id="line-12551"><code>    int(*)(const Fts5ExtensionApi*,Fts5Context*,void*)</code></span>
<span class="codeline" id="line-12552"><code>  );</code></span>
<span class="codeline" id="line-12553"><code>  int (*xSetAuxdata)(Fts5Context*, void *pAux, void(*xDelete)(void*));</code></span>
<span class="codeline" id="line-12554"><code>  void *(*xGetAuxdata)(Fts5Context*, int bClear);</code></span>
<span class="codeline" id="line-12555"><code></code></span>
<span class="codeline" id="line-12556"><code>  int (*xPhraseFirst)(Fts5Context*, int iPhrase, Fts5PhraseIter*, int*, int*);</code></span>
<span class="codeline" id="line-12557"><code>  void (*xPhraseNext)(Fts5Context*, Fts5PhraseIter*, int *piCol, int *piOff);</code></span>
<span class="codeline" id="line-12558"><code></code></span>
<span class="codeline" id="line-12559"><code>  int (*xPhraseFirstColumn)(Fts5Context*, int iPhrase, Fts5PhraseIter*, int*);</code></span>
<span class="codeline" id="line-12560"><code>  void (*xPhraseNextColumn)(Fts5Context*, Fts5PhraseIter*, int *piCol);</code></span>
<span class="codeline" id="line-12561"><code>};</code></span>
<span class="codeline" id="line-12562"><code></code></span>
<span class="codeline" id="line-12563"><code>/*</code></span>
<span class="codeline" id="line-12564"><code>** CUSTOM AUXILIARY FUNCTIONS</code></span>
<span class="codeline" id="line-12565"><code>*************************************************************************/</code></span>
<span class="codeline" id="line-12566"><code></code></span>
<span class="codeline" id="line-12567"><code>/*************************************************************************</code></span>
<span class="codeline" id="line-12568"><code>** CUSTOM TOKENIZERS</code></span>
<span class="codeline" id="line-12569"><code>**</code></span>
<span class="codeline" id="line-12570"><code>** Applications may also register custom tokenizer types. A tokenizer</code></span>
<span class="codeline" id="line-12571"><code>** is registered by providing fts5 with a populated instance of the</code></span>
<span class="codeline" id="line-12572"><code>** following structure. All structure methods must be defined, setting</code></span>
<span class="codeline" id="line-12573"><code>** any member of the fts5_tokenizer struct to NULL leads to undefined</code></span>
<span class="codeline" id="line-12574"><code>** behaviour. The structure methods are expected to function as follows:</code></span>
<span class="codeline" id="line-12575"><code>**</code></span>
<span class="codeline" id="line-12576"><code>** xCreate:</code></span>
<span class="codeline" id="line-12577"><code>**   This function is used to allocate and initialize a tokenizer instance.</code></span>
<span class="codeline" id="line-12578"><code>**   A tokenizer instance is required to actually tokenize text.</code></span>
<span class="codeline" id="line-12579"><code>**</code></span>
<span class="codeline" id="line-12580"><code>**   The first argument passed to this function is a copy of the (void*)</code></span>
<span class="codeline" id="line-12581"><code>**   pointer provided by the application when the fts5_tokenizer object</code></span>
<span class="codeline" id="line-12582"><code>**   was registered with FTS5 (the third argument to xCreateTokenizer()).</code></span>
<span class="codeline" id="line-12583"><code>**   The second and third arguments are an array of nul-terminated strings</code></span>
<span class="codeline" id="line-12584"><code>**   containing the tokenizer arguments, if any, specified following the</code></span>
<span class="codeline" id="line-12585"><code>**   tokenizer name as part of the CREATE VIRTUAL TABLE statement used</code></span>
<span class="codeline" id="line-12586"><code>**   to create the FTS5 table.</code></span>
<span class="codeline" id="line-12587"><code>**</code></span>
<span class="codeline" id="line-12588"><code>**   The final argument is an output variable. If successful, (*ppOut)</code></span>
<span class="codeline" id="line-12589"><code>**   should be set to point to the new tokenizer handle and SQLITE_OK</code></span>
<span class="codeline" id="line-12590"><code>**   returned. If an error occurs, some value other than SQLITE_OK should</code></span>
<span class="codeline" id="line-12591"><code>**   be returned. In this case, fts5 assumes that the final value of *ppOut</code></span>
<span class="codeline" id="line-12592"><code>**   is undefined.</code></span>
<span class="codeline" id="line-12593"><code>**</code></span>
<span class="codeline" id="line-12594"><code>** xDelete:</code></span>
<span class="codeline" id="line-12595"><code>**   This function is invoked to delete a tokenizer handle previously</code></span>
<span class="codeline" id="line-12596"><code>**   allocated using xCreate(). Fts5 guarantees that this function will</code></span>
<span class="codeline" id="line-12597"><code>**   be invoked exactly once for each successful call to xCreate().</code></span>
<span class="codeline" id="line-12598"><code>**</code></span>
<span class="codeline" id="line-12599"><code>** xTokenize:</code></span>
<span class="codeline" id="line-12600"><code>**   This function is expected to tokenize the nText byte string indicated</code></span>
<span class="codeline" id="line-12601"><code>**   by argument pText. pText may or may not be nul-terminated. The first</code></span>
<span class="codeline" id="line-12602"><code>**   argument passed to this function is a pointer to an Fts5Tokenizer object</code></span>
<span class="codeline" id="line-12603"><code>**   returned by an earlier call to xCreate().</code></span>
<span class="codeline" id="line-12604"><code>**</code></span>
<span class="codeline" id="line-12605"><code>**   The second argument indicates the reason that FTS5 is requesting</code></span>
<span class="codeline" id="line-12606"><code>**   tokenization of the supplied text. This is always one of the following</code></span>
<span class="codeline" id="line-12607"><code>**   four values:</code></span>
<span class="codeline" id="line-12608"><code>**</code></span>
<span class="codeline" id="line-12609"><code>**   &lt;ul&gt;&lt;li&gt; &lt;b&gt;FTS5_TOKENIZE_DOCUMENT&lt;/b&gt; - A document is being inserted into</code></span>
<span class="codeline" id="line-12610"><code>**            or removed from the FTS table. The tokenizer is being invoked to</code></span>
<span class="codeline" id="line-12611"><code>**            determine the set of tokens to add to (or delete from) the</code></span>
<span class="codeline" id="line-12612"><code>**            FTS index.</code></span>
<span class="codeline" id="line-12613"><code>**</code></span>
<span class="codeline" id="line-12614"><code>**       &lt;li&gt; &lt;b&gt;FTS5_TOKENIZE_QUERY&lt;/b&gt; - A MATCH query is being executed</code></span>
<span class="codeline" id="line-12615"><code>**            against the FTS index. The tokenizer is being called to tokenize</code></span>
<span class="codeline" id="line-12616"><code>**            a bareword or quoted string specified as part of the query.</code></span>
<span class="codeline" id="line-12617"><code>**</code></span>
<span class="codeline" id="line-12618"><code>**       &lt;li&gt; &lt;b&gt;(FTS5_TOKENIZE_QUERY | FTS5_TOKENIZE_PREFIX)&lt;/b&gt; - Same as</code></span>
<span class="codeline" id="line-12619"><code>**            FTS5_TOKENIZE_QUERY, except that the bareword or quoted string is</code></span>
<span class="codeline" id="line-12620"><code>**            followed by a "*" character, indicating that the last token</code></span>
<span class="codeline" id="line-12621"><code>**            returned by the tokenizer will be treated as a token prefix.</code></span>
<span class="codeline" id="line-12622"><code>**</code></span>
<span class="codeline" id="line-12623"><code>**       &lt;li&gt; &lt;b&gt;FTS5_TOKENIZE_AUX&lt;/b&gt; - The tokenizer is being invoked to</code></span>
<span class="codeline" id="line-12624"><code>**            satisfy an fts5_api.xTokenize() request made by an auxiliary</code></span>
<span class="codeline" id="line-12625"><code>**            function. Or an fts5_api.xColumnSize() request made by the same</code></span>
<span class="codeline" id="line-12626"><code>**            on a columnsize=0 database.</code></span>
<span class="codeline" id="line-12627"><code>**   &lt;/ul&gt;</code></span>
<span class="codeline" id="line-12628"><code>**</code></span>
<span class="codeline" id="line-12629"><code>**   For each token in the input string, the supplied callback xToken() must</code></span>
<span class="codeline" id="line-12630"><code>**   be invoked. The first argument to it should be a copy of the pointer</code></span>
<span class="codeline" id="line-12631"><code>**   passed as the second argument to xTokenize(). The third and fourth</code></span>
<span class="codeline" id="line-12632"><code>**   arguments are a pointer to a buffer containing the token text, and the</code></span>
<span class="codeline" id="line-12633"><code>**   size of the token in bytes. The 4th and 5th arguments are the byte offsets</code></span>
<span class="codeline" id="line-12634"><code>**   of the first byte of and first byte immediately following the text from</code></span>
<span class="codeline" id="line-12635"><code>**   which the token is derived within the input.</code></span>
<span class="codeline" id="line-12636"><code>**</code></span>
<span class="codeline" id="line-12637"><code>**   The second argument passed to the xToken() callback ("tflags") should</code></span>
<span class="codeline" id="line-12638"><code>**   normally be set to 0. The exception is if the tokenizer supports</code></span>
<span class="codeline" id="line-12639"><code>**   synonyms. In this case see the discussion below for details.</code></span>
<span class="codeline" id="line-12640"><code>**</code></span>
<span class="codeline" id="line-12641"><code>**   FTS5 assumes the xToken() callback is invoked for each token in the</code></span>
<span class="codeline" id="line-12642"><code>**   order that they occur within the input text.</code></span>
<span class="codeline" id="line-12643"><code>**</code></span>
<span class="codeline" id="line-12644"><code>**   If an xToken() callback returns any value other than SQLITE_OK, then</code></span>
<span class="codeline" id="line-12645"><code>**   the tokenization should be abandoned and the xTokenize() method should</code></span>
<span class="codeline" id="line-12646"><code>**   immediately return a copy of the xToken() return value. Or, if the</code></span>
<span class="codeline" id="line-12647"><code>**   input buffer is exhausted, xTokenize() should return SQLITE_OK. Finally,</code></span>
<span class="codeline" id="line-12648"><code>**   if an error occurs with the xTokenize() implementation itself, it</code></span>
<span class="codeline" id="line-12649"><code>**   may abandon the tokenization and return any error code other than</code></span>
<span class="codeline" id="line-12650"><code>**   SQLITE_OK or SQLITE_DONE.</code></span>
<span class="codeline" id="line-12651"><code>**</code></span>
<span class="codeline" id="line-12652"><code>** SYNONYM SUPPORT</code></span>
<span class="codeline" id="line-12653"><code>**</code></span>
<span class="codeline" id="line-12654"><code>**   Custom tokenizers may also support synonyms. Consider a case in which a</code></span>
<span class="codeline" id="line-12655"><code>**   user wishes to query for a phrase such as "first place". Using the</code></span>
<span class="codeline" id="line-12656"><code>**   built-in tokenizers, the FTS5 query 'first + place' will match instances</code></span>
<span class="codeline" id="line-12657"><code>**   of "first place" within the document set, but not alternative forms</code></span>
<span class="codeline" id="line-12658"><code>**   such as "1st place". In some applications, it would be better to match</code></span>
<span class="codeline" id="line-12659"><code>**   all instances of "first place" or "1st place" regardless of which form</code></span>
<span class="codeline" id="line-12660"><code>**   the user specified in the MATCH query text.</code></span>
<span class="codeline" id="line-12661"><code>**</code></span>
<span class="codeline" id="line-12662"><code>**   There are several ways to approach this in FTS5:</code></span>
<span class="codeline" id="line-12663"><code>**</code></span>
<span class="codeline" id="line-12664"><code>**   &lt;ol&gt;&lt;li&gt; By mapping all synonyms to a single token. In this case, using</code></span>
<span class="codeline" id="line-12665"><code>**            the above example, this means that the tokenizer returns the</code></span>
<span class="codeline" id="line-12666"><code>**            same token for inputs "first" and "1st". Say that token is in</code></span>
<span class="codeline" id="line-12667"><code>**            fact "first", so that when the user inserts the document "I won</code></span>
<span class="codeline" id="line-12668"><code>**            1st place" entries are added to the index for tokens "i", "won",</code></span>
<span class="codeline" id="line-12669"><code>**            "first" and "place". If the user then queries for '1st + place',</code></span>
<span class="codeline" id="line-12670"><code>**            the tokenizer substitutes "first" for "1st" and the query works</code></span>
<span class="codeline" id="line-12671"><code>**            as expected.</code></span>
<span class="codeline" id="line-12672"><code>**</code></span>
<span class="codeline" id="line-12673"><code>**       &lt;li&gt; By querying the index for all synonyms of each query term</code></span>
<span class="codeline" id="line-12674"><code>**            separately. In this case, when tokenizing query text, the</code></span>
<span class="codeline" id="line-12675"><code>**            tokenizer may provide multiple synonyms for a single term</code></span>
<span class="codeline" id="line-12676"><code>**            within the document. FTS5 then queries the index for each</code></span>
<span class="codeline" id="line-12677"><code>**            synonym individually. For example, faced with the query:</code></span>
<span class="codeline" id="line-12678"><code>**</code></span>
<span class="codeline" id="line-12679"><code>**   &lt;codeblock&gt;</code></span>
<span class="codeline" id="line-12680"><code>**     ... MATCH 'first place'&lt;/codeblock&gt;</code></span>
<span class="codeline" id="line-12681"><code>**</code></span>
<span class="codeline" id="line-12682"><code>**            the tokenizer offers both "1st" and "first" as synonyms for the</code></span>
<span class="codeline" id="line-12683"><code>**            first token in the MATCH query and FTS5 effectively runs a query</code></span>
<span class="codeline" id="line-12684"><code>**            similar to:</code></span>
<span class="codeline" id="line-12685"><code>**</code></span>
<span class="codeline" id="line-12686"><code>**   &lt;codeblock&gt;</code></span>
<span class="codeline" id="line-12687"><code>**     ... MATCH '(first OR 1st) place'&lt;/codeblock&gt;</code></span>
<span class="codeline" id="line-12688"><code>**</code></span>
<span class="codeline" id="line-12689"><code>**            except that, for the purposes of auxiliary functions, the query</code></span>
<span class="codeline" id="line-12690"><code>**            still appears to contain just two phrases - "(first OR 1st)"</code></span>
<span class="codeline" id="line-12691"><code>**            being treated as a single phrase.</code></span>
<span class="codeline" id="line-12692"><code>**</code></span>
<span class="codeline" id="line-12693"><code>**       &lt;li&gt; By adding multiple synonyms for a single term to the FTS index.</code></span>
<span class="codeline" id="line-12694"><code>**            Using this method, when tokenizing document text, the tokenizer</code></span>
<span class="codeline" id="line-12695"><code>**            provides multiple synonyms for each token. So that when a</code></span>
<span class="codeline" id="line-12696"><code>**            document such as "I won first place" is tokenized, entries are</code></span>
<span class="codeline" id="line-12697"><code>**            added to the FTS index for "i", "won", "first", "1st" and</code></span>
<span class="codeline" id="line-12698"><code>**            "place".</code></span>
<span class="codeline" id="line-12699"><code>**</code></span>
<span class="codeline" id="line-12700"><code>**            This way, even if the tokenizer does not provide synonyms</code></span>
<span class="codeline" id="line-12701"><code>**            when tokenizing query text (it should not - to do so would be</code></span>
<span class="codeline" id="line-12702"><code>**            inefficient), it doesn't matter if the user queries for</code></span>
<span class="codeline" id="line-12703"><code>**            'first + place' or '1st + place', as there are entries in the</code></span>
<span class="codeline" id="line-12704"><code>**            FTS index corresponding to both forms of the first token.</code></span>
<span class="codeline" id="line-12705"><code>**   &lt;/ol&gt;</code></span>
<span class="codeline" id="line-12706"><code>**</code></span>
<span class="codeline" id="line-12707"><code>**   Whether it is parsing document or query text, any call to xToken that</code></span>
<span class="codeline" id="line-12708"><code>**   specifies a &lt;i&gt;tflags&lt;/i&gt; argument with the FTS5_TOKEN_COLOCATED bit</code></span>
<span class="codeline" id="line-12709"><code>**   is considered to supply a synonym for the previous token. For example,</code></span>
<span class="codeline" id="line-12710"><code>**   when parsing the document "I won first place", a tokenizer that supports</code></span>
<span class="codeline" id="line-12711"><code>**   synonyms would call xToken() 5 times, as follows:</code></span>
<span class="codeline" id="line-12712"><code>**</code></span>
<span class="codeline" id="line-12713"><code>**   &lt;codeblock&gt;</code></span>
<span class="codeline" id="line-12714"><code>**       xToken(pCtx, 0, "i",                      1,  0,  1);</code></span>
<span class="codeline" id="line-12715"><code>**       xToken(pCtx, 0, "won",                    3,  2,  5);</code></span>
<span class="codeline" id="line-12716"><code>**       xToken(pCtx, 0, "first",                  5,  6, 11);</code></span>
<span class="codeline" id="line-12717"><code>**       xToken(pCtx, FTS5_TOKEN_COLOCATED, "1st", 3,  6, 11);</code></span>
<span class="codeline" id="line-12718"><code>**       xToken(pCtx, 0, "place",                  5, 12, 17);</code></span>
<span class="codeline" id="line-12719"><code>**&lt;/codeblock&gt;</code></span>
<span class="codeline" id="line-12720"><code>**</code></span>
<span class="codeline" id="line-12721"><code>**   It is an error to specify the FTS5_TOKEN_COLOCATED flag the first time</code></span>
<span class="codeline" id="line-12722"><code>**   xToken() is called. Multiple synonyms may be specified for a single token</code></span>
<span class="codeline" id="line-12723"><code>**   by making multiple calls to xToken(FTS5_TOKEN_COLOCATED) in sequence.</code></span>
<span class="codeline" id="line-12724"><code>**   There is no limit to the number of synonyms that may be provided for a</code></span>
<span class="codeline" id="line-12725"><code>**   single token.</code></span>
<span class="codeline" id="line-12726"><code>**</code></span>
<span class="codeline" id="line-12727"><code>**   In many cases, method (1) above is the best approach. It does not add</code></span>
<span class="codeline" id="line-12728"><code>**   extra data to the FTS index or require FTS5 to query for multiple terms,</code></span>
<span class="codeline" id="line-12729"><code>**   so it is efficient in terms of disk space and query speed. However, it</code></span>
<span class="codeline" id="line-12730"><code>**   does not support prefix queries very well. If, as suggested above, the</code></span>
<span class="codeline" id="line-12731"><code>**   token "first" is substituted for "1st" by the tokenizer, then the query:</code></span>
<span class="codeline" id="line-12732"><code>**</code></span>
<span class="codeline" id="line-12733"><code>**   &lt;codeblock&gt;</code></span>
<span class="codeline" id="line-12734"><code>**     ... MATCH '1s*'&lt;/codeblock&gt;</code></span>
<span class="codeline" id="line-12735"><code>**</code></span>
<span class="codeline" id="line-12736"><code>**   will not match documents that contain the token "1st" (as the tokenizer</code></span>
<span class="codeline" id="line-12737"><code>**   will probably not map "1s" to any prefix of "first").</code></span>
<span class="codeline" id="line-12738"><code>**</code></span>
<span class="codeline" id="line-12739"><code>**   For full prefix support, method (3) may be preferred. In this case,</code></span>
<span class="codeline" id="line-12740"><code>**   because the index contains entries for both "first" and "1st", prefix</code></span>
<span class="codeline" id="line-12741"><code>**   queries such as 'fi*' or '1s*' will match correctly. However, because</code></span>
<span class="codeline" id="line-12742"><code>**   extra entries are added to the FTS index, this method uses more space</code></span>
<span class="codeline" id="line-12743"><code>**   within the database.</code></span>
<span class="codeline" id="line-12744"><code>**</code></span>
<span class="codeline" id="line-12745"><code>**   Method (2) offers a midpoint between (1) and (3). Using this method,</code></span>
<span class="codeline" id="line-12746"><code>**   a query such as '1s*' will match documents that contain the literal</code></span>
<span class="codeline" id="line-12747"><code>**   token "1st", but not "first" (assuming the tokenizer is not able to</code></span>
<span class="codeline" id="line-12748"><code>**   provide synonyms for prefixes). However, a non-prefix query like '1st'</code></span>
<span class="codeline" id="line-12749"><code>**   will match against "1st" and "first". This method does not require</code></span>
<span class="codeline" id="line-12750"><code>**   extra disk space, as no extra entries are added to the FTS index.</code></span>
<span class="codeline" id="line-12751"><code>**   On the other hand, it may require more CPU cycles to run MATCH queries,</code></span>
<span class="codeline" id="line-12752"><code>**   as separate queries of the FTS index are required for each synonym.</code></span>
<span class="codeline" id="line-12753"><code>**</code></span>
<span class="codeline" id="line-12754"><code>**   When using methods (2) or (3), it is important that the tokenizer only</code></span>
<span class="codeline" id="line-12755"><code>**   provide synonyms when tokenizing document text (method (2)) or query</code></span>
<span class="codeline" id="line-12756"><code>**   text (method (3)), not both. Doing so will not cause any errors, but is</code></span>
<span class="codeline" id="line-12757"><code>**   inefficient.</code></span>
<span class="codeline" id="line-12758"><code>*/</code></span>
<span class="codeline" id="line-12759"><code>typedef struct Fts5Tokenizer Fts5Tokenizer;</code></span>
<span class="codeline" id="line-12760"><code>typedef struct fts5_tokenizer fts5_tokenizer;</code></span>
<span class="codeline" id="line-12761"><code>struct fts5_tokenizer {</code></span>
<span class="codeline" id="line-12762"><code>  int (*xCreate)(void*, const char **azArg, int nArg, Fts5Tokenizer **ppOut);</code></span>
<span class="codeline" id="line-12763"><code>  void (*xDelete)(Fts5Tokenizer*);</code></span>
<span class="codeline" id="line-12764"><code>  int (*xTokenize)(Fts5Tokenizer*,</code></span>
<span class="codeline" id="line-12765"><code>      void *pCtx,</code></span>
<span class="codeline" id="line-12766"><code>      int flags,            /* Mask of FTS5_TOKENIZE_* flags */</code></span>
<span class="codeline" id="line-12767"><code>      const char *pText, int nText,</code></span>
<span class="codeline" id="line-12768"><code>      int (*xToken)(</code></span>
<span class="codeline" id="line-12769"><code>        void *pCtx,         /* Copy of 2nd argument to xTokenize() */</code></span>
<span class="codeline" id="line-12770"><code>        int tflags,         /* Mask of FTS5_TOKEN_* flags */</code></span>
<span class="codeline" id="line-12771"><code>        const char *pToken, /* Pointer to buffer containing token */</code></span>
<span class="codeline" id="line-12772"><code>        int nToken,         /* Size of token in bytes */</code></span>
<span class="codeline" id="line-12773"><code>        int iStart,         /* Byte offset of token within input text */</code></span>
<span class="codeline" id="line-12774"><code>        int iEnd            /* Byte offset of end of token within input text */</code></span>
<span class="codeline" id="line-12775"><code>      )</code></span>
<span class="codeline" id="line-12776"><code>  );</code></span>
<span class="codeline" id="line-12777"><code>};</code></span>
<span class="codeline" id="line-12778"><code></code></span>
<span class="codeline" id="line-12779"><code>/* Flags that may be passed as the third argument to xTokenize() */</code></span>
<span class="codeline" id="line-12780"><code>#define FTS5_TOKENIZE_QUERY     0x0001</code></span>
<span class="codeline" id="line-12781"><code>#define FTS5_TOKENIZE_PREFIX    0x0002</code></span>
<span class="codeline" id="line-12782"><code>#define FTS5_TOKENIZE_DOCUMENT  0x0004</code></span>
<span class="codeline" id="line-12783"><code>#define FTS5_TOKENIZE_AUX       0x0008</code></span>
<span class="codeline" id="line-12784"><code></code></span>
<span class="codeline" id="line-12785"><code>/* Flags that may be passed by the tokenizer implementation back to FTS5</code></span>
<span class="codeline" id="line-12786"><code>** as the third argument to the supplied xToken callback. */</code></span>
<span class="codeline" id="line-12787"><code>#define FTS5_TOKEN_COLOCATED    0x0001      /* Same position as prev. token */</code></span>
<span class="codeline" id="line-12788"><code></code></span>
<span class="codeline" id="line-12789"><code>/*</code></span>
<span class="codeline" id="line-12790"><code>** END OF CUSTOM TOKENIZERS</code></span>
<span class="codeline" id="line-12791"><code>*************************************************************************/</code></span>
<span class="codeline" id="line-12792"><code></code></span>
<span class="codeline" id="line-12793"><code>/*************************************************************************</code></span>
<span class="codeline" id="line-12794"><code>** FTS5 EXTENSION REGISTRATION API</code></span>
<span class="codeline" id="line-12795"><code>*/</code></span>
<span class="codeline" id="line-12796"><code>typedef struct fts5_api fts5_api;</code></span>
<span class="codeline" id="line-12797"><code>struct fts5_api {</code></span>
<span class="codeline" id="line-12798"><code>  int iVersion;                   /* Currently always set to 2 */</code></span>
<span class="codeline" id="line-12799"><code></code></span>
<span class="codeline" id="line-12800"><code>  /* Create a new tokenizer */</code></span>
<span class="codeline" id="line-12801"><code>  int (*xCreateTokenizer)(</code></span>
<span class="codeline" id="line-12802"><code>    fts5_api *pApi,</code></span>
<span class="codeline" id="line-12803"><code>    const char *zName,</code></span>
<span class="codeline" id="line-12804"><code>    void *pContext,</code></span>
<span class="codeline" id="line-12805"><code>    fts5_tokenizer *pTokenizer,</code></span>
<span class="codeline" id="line-12806"><code>    void (*xDestroy)(void*)</code></span>
<span class="codeline" id="line-12807"><code>  );</code></span>
<span class="codeline" id="line-12808"><code></code></span>
<span class="codeline" id="line-12809"><code>  /* Find an existing tokenizer */</code></span>
<span class="codeline" id="line-12810"><code>  int (*xFindTokenizer)(</code></span>
<span class="codeline" id="line-12811"><code>    fts5_api *pApi,</code></span>
<span class="codeline" id="line-12812"><code>    const char *zName,</code></span>
<span class="codeline" id="line-12813"><code>    void **ppContext,</code></span>
<span class="codeline" id="line-12814"><code>    fts5_tokenizer *pTokenizer</code></span>
<span class="codeline" id="line-12815"><code>  );</code></span>
<span class="codeline" id="line-12816"><code></code></span>
<span class="codeline" id="line-12817"><code>  /* Create a new auxiliary function */</code></span>
<span class="codeline" id="line-12818"><code>  int (*xCreateFunction)(</code></span>
<span class="codeline" id="line-12819"><code>    fts5_api *pApi,</code></span>
<span class="codeline" id="line-12820"><code>    const char *zName,</code></span>
<span class="codeline" id="line-12821"><code>    void *pContext,</code></span>
<span class="codeline" id="line-12822"><code>    fts5_extension_function xFunction,</code></span>
<span class="codeline" id="line-12823"><code>    void (*xDestroy)(void*)</code></span>
<span class="codeline" id="line-12824"><code>  );</code></span>
<span class="codeline" id="line-12825"><code>};</code></span>
<span class="codeline" id="line-12826"><code></code></span>
<span class="codeline" id="line-12827"><code>/*</code></span>
<span class="codeline" id="line-12828"><code>** END OF REGISTRATION API</code></span>
<span class="codeline" id="line-12829"><code>*************************************************************************/</code></span>
<span class="codeline" id="line-12830"><code></code></span>
<span class="codeline" id="line-12831"><code>#ifdef __cplusplus</code></span>
<span class="codeline" id="line-12832"><code>}  /* end of the 'extern "C"' block */</code></span>
<span class="codeline" id="line-12833"><code>#endif</code></span>
<span class="codeline" id="line-12834"><code></code></span>
<span class="codeline" id="line-12835"><code>#endif /* _FTS5_H */</code></span>
<span class="codeline" id="line-12836"><code></code></span>
<span class="codeline" id="line-12837"><code>/******** End of fts5.h *********/</code></span>
<span class="codeline" id="line-12838"><code>#else // USE_LIBSQLITE3</code></span>
<span class="codeline" id="line-12839"><code> // If users really want to link against the system sqlite3 we</code></span>
<span class="codeline" id="line-12840"><code>// need to make this file a noop.</code></span>
<span class="codeline" id="line-12841"><code> #endif</code></span>
<span class="codeline" id="line-12842"><code>/*</code></span>
<span class="codeline" id="line-12843"><code>** 2014-09-08</code></span>
<span class="codeline" id="line-12844"><code>**</code></span>
<span class="codeline" id="line-12845"><code>** The author disclaims copyright to this source code.  In place of</code></span>
<span class="codeline" id="line-12846"><code>** a legal notice, here is a blessing:</code></span>
<span class="codeline" id="line-12847"><code>**</code></span>
<span class="codeline" id="line-12848"><code>**    May you do good and not evil.</code></span>
<span class="codeline" id="line-12849"><code>**    May you find forgiveness for yourself and forgive others.</code></span>
<span class="codeline" id="line-12850"><code>**    May you share freely, never taking more than you give.</code></span>
<span class="codeline" id="line-12851"><code>**</code></span>
<span class="codeline" id="line-12852"><code>*************************************************************************</code></span>
<span class="codeline" id="line-12853"><code>**</code></span>
<span class="codeline" id="line-12854"><code>** This file contains the application interface definitions for the</code></span>
<span class="codeline" id="line-12855"><code>** user-authentication extension feature.</code></span>
<span class="codeline" id="line-12856"><code>**</code></span>
<span class="codeline" id="line-12857"><code>** To compile with the user-authentication feature, append this file to</code></span>
<span class="codeline" id="line-12858"><code>** end of an SQLite amalgamation header file ("sqlite3.h"), then add</code></span>
<span class="codeline" id="line-12859"><code>** the SQLITE_USER_AUTHENTICATION compile-time option.  See the</code></span>
<span class="codeline" id="line-12860"><code>** user-auth.txt file in the same source directory as this file for</code></span>
<span class="codeline" id="line-12861"><code>** additional information.</code></span>
<span class="codeline" id="line-12862"><code>*/</code></span>
<span class="codeline" id="line-12863"><code>#ifdef SQLITE_USER_AUTHENTICATION</code></span>
<span class="codeline" id="line-12864"><code></code></span>
<span class="codeline" id="line-12865"><code>#ifdef __cplusplus</code></span>
<span class="codeline" id="line-12866"><code>extern "C" {</code></span>
<span class="codeline" id="line-12867"><code>#endif</code></span>
<span class="codeline" id="line-12868"><code></code></span>
<span class="codeline" id="line-12869"><code>/*</code></span>
<span class="codeline" id="line-12870"><code>** If a database contains the SQLITE_USER table, then the</code></span>
<span class="codeline" id="line-12871"><code>** sqlite3_user_authenticate() interface must be invoked with an</code></span>
<span class="codeline" id="line-12872"><code>** appropriate username and password prior to enable read and write</code></span>
<span class="codeline" id="line-12873"><code>** access to the database.</code></span>
<span class="codeline" id="line-12874"><code>**</code></span>
<span class="codeline" id="line-12875"><code>** Return SQLITE_OK on success or SQLITE_ERROR if the username/password</code></span>
<span class="codeline" id="line-12876"><code>** combination is incorrect or unknown.</code></span>
<span class="codeline" id="line-12877"><code>**</code></span>
<span class="codeline" id="line-12878"><code>** If the SQLITE_USER table is not present in the database file, then</code></span>
<span class="codeline" id="line-12879"><code>** this interface is a harmless no-op returnning SQLITE_OK.</code></span>
<span class="codeline" id="line-12880"><code>*/</code></span>
<span class="codeline" id="line-12881"><code>int sqlite3_user_authenticate(</code></span>
<span class="codeline" id="line-12882"><code>  sqlite3 *db,           /* The database connection */</code></span>
<span class="codeline" id="line-12883"><code>  const char *zUsername, /* Username */</code></span>
<span class="codeline" id="line-12884"><code>  const char *aPW,       /* Password or credentials */</code></span>
<span class="codeline" id="line-12885"><code>  int nPW                /* Number of bytes in aPW[] */</code></span>
<span class="codeline" id="line-12886"><code>);</code></span>
<span class="codeline" id="line-12887"><code></code></span>
<span class="codeline" id="line-12888"><code>/*</code></span>
<span class="codeline" id="line-12889"><code>** The sqlite3_user_add() interface can be used (by an admin user only)</code></span>
<span class="codeline" id="line-12890"><code>** to create a new user.  When called on a no-authentication-required</code></span>
<span class="codeline" id="line-12891"><code>** database, this routine converts the database into an authentication-</code></span>
<span class="codeline" id="line-12892"><code>** required database, automatically makes the added user an</code></span>
<span class="codeline" id="line-12893"><code>** administrator, and logs in the current connection as that user.</code></span>
<span class="codeline" id="line-12894"><code>** The sqlite3_user_add() interface only works for the "main" database, not</code></span>
<span class="codeline" id="line-12895"><code>** for any ATTACH-ed databases.  Any call to sqlite3_user_add() by a</code></span>
<span class="codeline" id="line-12896"><code>** non-admin user results in an error.</code></span>
<span class="codeline" id="line-12897"><code>*/</code></span>
<span class="codeline" id="line-12898"><code>int sqlite3_user_add(</code></span>
<span class="codeline" id="line-12899"><code>  sqlite3 *db,           /* Database connection */</code></span>
<span class="codeline" id="line-12900"><code>  const char *zUsername, /* Username to be added */</code></span>
<span class="codeline" id="line-12901"><code>  const char *aPW,       /* Password or credentials */</code></span>
<span class="codeline" id="line-12902"><code>  int nPW,               /* Number of bytes in aPW[] */</code></span>
<span class="codeline" id="line-12903"><code>  int isAdmin            /* True to give new user admin privilege */</code></span>
<span class="codeline" id="line-12904"><code>);</code></span>
<span class="codeline" id="line-12905"><code></code></span>
<span class="codeline" id="line-12906"><code>/*</code></span>
<span class="codeline" id="line-12907"><code>** The sqlite3_user_change() interface can be used to change a users</code></span>
<span class="codeline" id="line-12908"><code>** login credentials or admin privilege.  Any user can change their own</code></span>
<span class="codeline" id="line-12909"><code>** login credentials.  Only an admin user can change another users login</code></span>
<span class="codeline" id="line-12910"><code>** credentials or admin privilege setting.  No user may change their own </code></span>
<span class="codeline" id="line-12911"><code>** admin privilege setting.</code></span>
<span class="codeline" id="line-12912"><code>*/</code></span>
<span class="codeline" id="line-12913"><code>int sqlite3_user_change(</code></span>
<span class="codeline" id="line-12914"><code>  sqlite3 *db,           /* Database connection */</code></span>
<span class="codeline" id="line-12915"><code>  const char *zUsername, /* Username to change */</code></span>
<span class="codeline" id="line-12916"><code>  const char *aPW,       /* New password or credentials */</code></span>
<span class="codeline" id="line-12917"><code>  int nPW,               /* Number of bytes in aPW[] */</code></span>
<span class="codeline" id="line-12918"><code>  int isAdmin            /* Modified admin privilege for the user */</code></span>
<span class="codeline" id="line-12919"><code>);</code></span>
<span class="codeline" id="line-12920"><code></code></span>
<span class="codeline" id="line-12921"><code>/*</code></span>
<span class="codeline" id="line-12922"><code>** The sqlite3_user_delete() interface can be used (by an admin user only)</code></span>
<span class="codeline" id="line-12923"><code>** to delete a user.  The currently logged-in user cannot be deleted,</code></span>
<span class="codeline" id="line-12924"><code>** which guarantees that there is always an admin user and hence that</code></span>
<span class="codeline" id="line-12925"><code>** the database cannot be converted into a no-authentication-required</code></span>
<span class="codeline" id="line-12926"><code>** database.</code></span>
<span class="codeline" id="line-12927"><code>*/</code></span>
<span class="codeline" id="line-12928"><code>int sqlite3_user_delete(</code></span>
<span class="codeline" id="line-12929"><code>  sqlite3 *db,           /* Database connection */</code></span>
<span class="codeline" id="line-12930"><code>  const char *zUsername  /* Username to remove */</code></span>
<span class="codeline" id="line-12931"><code>);</code></span>
<span class="codeline" id="line-12932"><code></code></span>
<span class="codeline" id="line-12933"><code>#ifdef __cplusplus</code></span>
<span class="codeline" id="line-12934"><code>}  /* end of the 'extern "C"' block */</code></span>
<span class="codeline" id="line-12935"><code>#endif</code></span>
<span class="codeline" id="line-12936"><code></code></span>
<span class="codeline" id="line-12937"><code>#endif /* SQLITE_USER_AUTHENTICATION */</code></span>
</pre><pre id="footer">
<table><tr><td><img src="../../../../png/go101-twitter.png"></td>
<td>The pages are generated with <a href="https://go101.org/apps-and-libs/golds.html"><b>Golds</b></a> <i>v0.5.7</i>. (GOOS=linux GOARCH=amd64)
<b>Golds</b> is a <a href="https://go101.org">Go 101</a> project developed by <a href="https://tapirgames.com">Tapir Liu</a>.
PR and bug reports are welcome and can be submitted to <a href="https://github.com/go101/golds">the issue list</a>.
Please follow <a href="https://twitter.com/go100and1">@Go100and1</a> (reachable from the left QR code) to get the latest news of <b>Golds</b>.</td></tr></table></pre>